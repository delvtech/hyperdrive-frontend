const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CnEbXXuL.js","assets/index-BYNrxkH6.js","assets/index-BXFxRCav.css"])))=>i.map(i=>d[i]);
import{y as ei,o as ab,z as t8,A as r8,C as i8,D as ts,F as ed,G as ob,J as n8,K as cb,a as at,n as qi,p as Ui,q as td,t as en,L as rd,_ as s8}from"./index-BYNrxkH6.js";var Np=function(r,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,a;i<s;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return r.concat(a||Array.prototype.slice.call(e))},a8=function(){function r(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return r}(),o8=function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=ei.platform}return r}(),c8=function(){function r(e,t,i,s){this.name=e,this.version=t,this.os=i,this.bot=s,this.type="bot-device"}return r}(),u8=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}(),f8=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}(),h8=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,l8=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Rp=3,d8=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",h8]],Tp=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function p8(r){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new f8:typeof navigator<"u"?b8(navigator.userAgent):m8()}function g8(r){return r!==""&&d8.reduce(function(e,t){var i=t[0],s=t[1];if(e)return e;var a=s.exec(r);return!!a&&[i,a]},!1)}function b8(r){var e=g8(r);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new u8;var s=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);s?s.length<Rp&&(s=Np(Np([],s,!0),y8(Rp-s.length),!0)):s=[];var a=s.join("."),c=v8(r),u=l8.exec(r);return u&&u[1]?new c8(t,a,c,u[1]):new a8(t,a,c)}function v8(r){for(var e=0,t=Tp.length;e<t;e++){var i=Tp[e],s=i[0],a=i[1],c=a.exec(r);if(c)return s}return null}function m8(){var r=typeof ei<"u"&&ei.version;return r?new o8(ei.version.slice(1)):null}function y8(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}var be={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Al=function(r,e){return Al=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},Al(r,e)};function w8(r,e){Al(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Sl=function(){return Sl=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Sl.apply(this,arguments)};function _8(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(r);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(t[i[s]]=r[i[s]]);return t}function E8(r,e,t,i){var s=arguments.length,a=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,i);else for(var u=r.length-1;u>=0;u--)(c=r[u])&&(a=(s<3?c(a):s>3?c(e,t,a):c(e,t))||a);return s>3&&a&&Object.defineProperty(e,t,a),a}function A8(r,e){return function(t,i){e(t,i,r)}}function S8(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function I8(r,e,t,i){function s(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function u(g){try{h(i.next(g))}catch(w){c(w)}}function l(g){try{h(i.throw(g))}catch(w){c(w)}}function h(g){g.done?a(g.value):s(g.value).then(u,l)}h((i=i.apply(r,e||[])).next())})}function x8(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(h){return function(g){return l([h,g])}}function l(h){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,s&&(a=h[0]&2?s.return:h[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,h[1])).done)return a;switch(s=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,s=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(r,t)}catch(g){h=[6,g],s=0}finally{i=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function D8(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function M8(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function Il(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ub(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),s,a=[],c;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(u){c={error:u}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return a}function P8(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(ub(arguments[e]));return r}function O8(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),s=0,e=0;e<t;e++)for(var a=arguments[e],c=0,u=a.length;c<u;c++,s++)i[s]=a[c];return i}function Ko(r){return this instanceof Ko?(this.v=r,this):new Ko(r)}function C8(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),s,a=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(S){i[S]&&(s[S]=function(E){return new Promise(function(I,z){a.push([S,E,I,z])>1||u(S,E)})})}function u(S,E){try{l(i[S](E))}catch(I){w(a[0][3],I)}}function l(S){S.value instanceof Ko?Promise.resolve(S.value.v).then(h,g):w(a[0][2],S)}function h(S){u("next",S)}function g(S){u("throw",S)}function w(S,E){S(E),a.shift(),a.length&&u(a[0][0],a[0][1])}}function N8(r){var e,t;return e={},i("next"),i("throw",function(s){throw s}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(s,a){e[s]=r[s]?function(c){return(t=!t)?{value:Ko(r[s](c)),done:s==="return"}:a?a(c):c}:a}}function R8(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Il=="function"?Il(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=r[a]&&function(c){return new Promise(function(u,l){c=r[a](c),s(u,l,c.done,c.value)})}}function s(a,c,u,l){Promise.resolve(l).then(function(h){a({value:h,done:u})},c)}}function T8(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function F8(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function B8(r){return r&&r.__esModule?r:{default:r}}function q8(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function L8(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const U8=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Sl},__asyncDelegator:N8,__asyncGenerator:C8,__asyncValues:R8,__await:Ko,__awaiter:I8,__classPrivateFieldGet:q8,__classPrivateFieldSet:L8,__createBinding:D8,__decorate:E8,__exportStar:M8,__extends:w8,__generator:x8,__importDefault:B8,__importStar:F8,__makeTemplateObject:T8,__metadata:S8,__param:A8,__read:ub,__rest:_8,__spread:P8,__spreadArrays:O8,__values:Il},Symbol.toStringTag,{value:"Module"})),rf=ab(U8);var qh={},So={},Fp;function j8(){if(Fp)return So;Fp=1,Object.defineProperty(So,"__esModule",{value:!0}),So.delay=void 0;function r(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return So.delay=r,So}var Ks={},Lh={},Vs={},Bp;function $8(){return Bp||(Bp=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.ONE_THOUSAND=Vs.ONE_HUNDRED=void 0,Vs.ONE_HUNDRED=100,Vs.ONE_THOUSAND=1e3),Vs}var Uh={},qp;function z8(){return qp||(qp=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ONE_YEAR=r.FOUR_WEEKS=r.THREE_WEEKS=r.TWO_WEEKS=r.ONE_WEEK=r.THIRTY_DAYS=r.SEVEN_DAYS=r.FIVE_DAYS=r.THREE_DAYS=r.ONE_DAY=r.TWENTY_FOUR_HOURS=r.TWELVE_HOURS=r.SIX_HOURS=r.THREE_HOURS=r.ONE_HOUR=r.SIXTY_MINUTES=r.THIRTY_MINUTES=r.TEN_MINUTES=r.FIVE_MINUTES=r.ONE_MINUTE=r.SIXTY_SECONDS=r.THIRTY_SECONDS=r.TEN_SECONDS=r.FIVE_SECONDS=r.ONE_SECOND=void 0,r.ONE_SECOND=1,r.FIVE_SECONDS=5,r.TEN_SECONDS=10,r.THIRTY_SECONDS=30,r.SIXTY_SECONDS=60,r.ONE_MINUTE=r.SIXTY_SECONDS,r.FIVE_MINUTES=r.ONE_MINUTE*5,r.TEN_MINUTES=r.ONE_MINUTE*10,r.THIRTY_MINUTES=r.ONE_MINUTE*30,r.SIXTY_MINUTES=r.ONE_MINUTE*60,r.ONE_HOUR=r.SIXTY_MINUTES,r.THREE_HOURS=r.ONE_HOUR*3,r.SIX_HOURS=r.ONE_HOUR*6,r.TWELVE_HOURS=r.ONE_HOUR*12,r.TWENTY_FOUR_HOURS=r.ONE_HOUR*24,r.ONE_DAY=r.TWENTY_FOUR_HOURS,r.THREE_DAYS=r.ONE_DAY*3,r.FIVE_DAYS=r.ONE_DAY*5,r.SEVEN_DAYS=r.ONE_DAY*7,r.THIRTY_DAYS=r.ONE_DAY*30,r.ONE_WEEK=r.SEVEN_DAYS,r.TWO_WEEKS=r.ONE_WEEK*2,r.THREE_WEEKS=r.ONE_WEEK*3,r.FOUR_WEEKS=r.ONE_WEEK*4,r.ONE_YEAR=r.ONE_DAY*365}(Uh)),Uh}var Lp;function fb(){return Lp||(Lp=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=rf;e.__exportStar($8(),r),e.__exportStar(z8(),r)}(Lh)),Lh}var Up;function k8(){if(Up)return Ks;Up=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.fromMiliseconds=Ks.toMiliseconds=void 0;const r=fb();function e(i){return i*r.ONE_THOUSAND}Ks.toMiliseconds=e;function t(i){return Math.floor(i/r.ONE_THOUSAND)}return Ks.fromMiliseconds=t,Ks}var jp;function H8(){return jp||(jp=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=rf;e.__exportStar(j8(),r),e.__exportStar(k8(),r)}(qh)),qh}var Oa={},$p;function K8(){if($p)return Oa;$p=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const i=this.get(t);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const s=Date.now()-i.started;this.timestamps.set(t,{started:i.started,elapsed:s})}get(t){const i=this.timestamps.get(t);if(typeof i>"u")throw new Error(`No timestamp found for label: ${t}`);return i}elapsed(t){const i=this.get(t);return i.elapsed||Date.now()-i.started}}return Oa.Watch=r,Oa.default=r,Oa}var jh={},Io={},zp;function V8(){if(zp)return Io;zp=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.IWatch=void 0;class r{}return Io.IWatch=r,Io}var kp;function G8(){return kp||(kp=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),rf.__exportStar(V8(),r)}(jh)),jh}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=rf;e.__exportStar(H8(),r),e.__exportStar(K8(),r),e.__exportStar(G8(),r),e.__exportStar(fb(),r)})(be);var zt={};Object.defineProperty(zt,"__esModule",{value:!0});zt.getLocalStorage=zt.getLocalStorageOrThrow=zt.getCrypto=zt.getCryptoOrThrow=hb=zt.getLocation=zt.getLocationOrThrow=id=zt.getNavigator=zt.getNavigatorOrThrow=nf=zt.getDocument=zt.getDocumentOrThrow=zt.getFromWindowOrThrow=zt.getFromWindow=void 0;function sa(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}zt.getFromWindow=sa;function Ka(r){const e=sa(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}zt.getFromWindowOrThrow=Ka;function W8(){return Ka("document")}zt.getDocumentOrThrow=W8;function J8(){return sa("document")}var nf=zt.getDocument=J8;function Y8(){return Ka("navigator")}zt.getNavigatorOrThrow=Y8;function Q8(){return sa("navigator")}var id=zt.getNavigator=Q8;function X8(){return Ka("location")}zt.getLocationOrThrow=X8;function Z8(){return sa("location")}var hb=zt.getLocation=Z8;function e4(){return Ka("crypto")}zt.getCryptoOrThrow=e4;function t4(){return sa("crypto")}zt.getCrypto=t4;function r4(){return Ka("localStorage")}zt.getLocalStorageOrThrow=r4;function i4(){return sa("localStorage")}zt.getLocalStorage=i4;var nd={};Object.defineProperty(nd,"__esModule",{value:!0});var lb=nd.getWindowMetadata=void 0;const Hp=zt;function n4(){let r,e;try{r=Hp.getDocumentOrThrow(),e=Hp.getLocationOrThrow()}catch{return null}function t(){const w=r.getElementsByTagName("link"),S=[];for(let E=0;E<w.length;E++){const I=w[E],z=I.getAttribute("rel");if(z&&z.toLowerCase().indexOf("icon")>-1){const K=I.getAttribute("href");if(K)if(K.toLowerCase().indexOf("https:")===-1&&K.toLowerCase().indexOf("http:")===-1&&K.indexOf("//")!==0){let J=e.protocol+"//"+e.host;if(K.indexOf("/")===0)J+=K;else{const j=e.pathname.split("/");j.pop();const W=j.join("/");J+=W+"/"+K}S.push(J)}else if(K.indexOf("//")===0){const J=e.protocol+K;S.push(J)}else S.push(K)}}return S}function i(...w){const S=r.getElementsByTagName("meta");for(let E=0;E<S.length;E++){const I=S[E],z=["itemprop","property","name"].map(K=>I.getAttribute(K)).filter(K=>K?w.includes(K):!1);if(z.length&&z){const K=I.getAttribute("content");if(K)return K}}return""}function s(){let w=i("name","og:site_name","og:title","twitter:title");return w||(w=r.title),w}function a(){return i("description","og:description","twitter:description","keywords")}const c=s(),u=a(),l=e.origin,h=t();return{description:u,url:l,icons:h,name:c}}lb=nd.getWindowMetadata=n4;var Vo={},s4=r=>encodeURIComponent(r).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),db="%[a-f0-9]{2}",Kp=new RegExp("("+db+")|([^%]+?)","gi"),Vp=new RegExp("("+db+")+","gi");function xl(r,e){try{return[decodeURIComponent(r.join(""))]}catch{}if(r.length===1)return r;e=e||1;var t=r.slice(0,e),i=r.slice(e);return Array.prototype.concat.call([],xl(t),xl(i))}function a4(r){try{return decodeURIComponent(r)}catch{for(var e=r.match(Kp)||[],t=1;t<e.length;t++)r=xl(e,t).join(""),e=r.match(Kp)||[];return r}}function o4(r){for(var e={"%FE%FF":"��","%FF%FE":"��"},t=Vp.exec(r);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var i=a4(t[0]);i!==t[0]&&(e[t[0]]=i)}t=Vp.exec(r)}e["%C2"]="�";for(var s=Object.keys(e),a=0;a<s.length;a++){var c=s[a];r=r.replace(new RegExp(c,"g"),e[c])}return r}var c4=function(r){if(typeof r!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof r+"`");try{return r=r.replace(/\+/g," "),decodeURIComponent(r)}catch{return o4(r)}},u4=(r,e)=>{if(!(typeof r=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[r];const t=r.indexOf(e);return t===-1?[r]:[r.slice(0,t),r.slice(t+e.length)]},f4=function(r,e){for(var t={},i=Object.keys(r),s=Array.isArray(e),a=0;a<i.length;a++){var c=i[a],u=r[c];(s?e.indexOf(c)!==-1:e(c,u,r))&&(t[c]=u)}return t};(function(r){const e=s4,t=c4,i=u4,s=f4,a=j=>j==null,c=Symbol("encodeFragmentIdentifier");function u(j){switch(j.arrayFormat){case"index":return W=>(B,U)=>{const H=B.length;return U===void 0||j.skipNull&&U===null||j.skipEmptyString&&U===""?B:U===null?[...B,[g(W,j),"[",H,"]"].join("")]:[...B,[g(W,j),"[",g(H,j),"]=",g(U,j)].join("")]};case"bracket":return W=>(B,U)=>U===void 0||j.skipNull&&U===null||j.skipEmptyString&&U===""?B:U===null?[...B,[g(W,j),"[]"].join("")]:[...B,[g(W,j),"[]=",g(U,j)].join("")];case"colon-list-separator":return W=>(B,U)=>U===void 0||j.skipNull&&U===null||j.skipEmptyString&&U===""?B:U===null?[...B,[g(W,j),":list="].join("")]:[...B,[g(W,j),":list=",g(U,j)].join("")];case"comma":case"separator":case"bracket-separator":{const W=j.arrayFormat==="bracket-separator"?"[]=":"=";return B=>(U,H)=>H===void 0||j.skipNull&&H===null||j.skipEmptyString&&H===""?U:(H=H===null?"":H,U.length===0?[[g(B,j),W,g(H,j)].join("")]:[[U,g(H,j)].join(j.arrayFormatSeparator)])}default:return W=>(B,U)=>U===void 0||j.skipNull&&U===null||j.skipEmptyString&&U===""?B:U===null?[...B,g(W,j)]:[...B,[g(W,j),"=",g(U,j)].join("")]}}function l(j){let W;switch(j.arrayFormat){case"index":return(B,U,H)=>{if(W=/\[(\d*)\]$/.exec(B),B=B.replace(/\[\d*\]$/,""),!W){H[B]=U;return}H[B]===void 0&&(H[B]={}),H[B][W[1]]=U};case"bracket":return(B,U,H)=>{if(W=/(\[\])$/.exec(B),B=B.replace(/\[\]$/,""),!W){H[B]=U;return}if(H[B]===void 0){H[B]=[U];return}H[B]=[].concat(H[B],U)};case"colon-list-separator":return(B,U,H)=>{if(W=/(:list)$/.exec(B),B=B.replace(/:list$/,""),!W){H[B]=U;return}if(H[B]===void 0){H[B]=[U];return}H[B]=[].concat(H[B],U)};case"comma":case"separator":return(B,U,H)=>{const m=typeof U=="string"&&U.includes(j.arrayFormatSeparator),N=typeof U=="string"&&!m&&w(U,j).includes(j.arrayFormatSeparator);U=N?w(U,j):U;const ne=m||N?U.split(j.arrayFormatSeparator).map(le=>w(le,j)):U===null?U:w(U,j);H[B]=ne};case"bracket-separator":return(B,U,H)=>{const m=/(\[\])$/.test(B);if(B=B.replace(/\[\]$/,""),!m){H[B]=U&&w(U,j);return}const N=U===null?[]:U.split(j.arrayFormatSeparator).map(ne=>w(ne,j));if(H[B]===void 0){H[B]=N;return}H[B]=[].concat(H[B],N)};default:return(B,U,H)=>{if(H[B]===void 0){H[B]=U;return}H[B]=[].concat(H[B],U)}}}function h(j){if(typeof j!="string"||j.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function g(j,W){return W.encode?W.strict?e(j):encodeURIComponent(j):j}function w(j,W){return W.decode?t(j):j}function S(j){return Array.isArray(j)?j.sort():typeof j=="object"?S(Object.keys(j)).sort((W,B)=>Number(W)-Number(B)).map(W=>j[W]):j}function E(j){const W=j.indexOf("#");return W!==-1&&(j=j.slice(0,W)),j}function I(j){let W="";const B=j.indexOf("#");return B!==-1&&(W=j.slice(B)),W}function z(j){j=E(j);const W=j.indexOf("?");return W===-1?"":j.slice(W+1)}function K(j,W){return W.parseNumbers&&!Number.isNaN(Number(j))&&typeof j=="string"&&j.trim()!==""?j=Number(j):W.parseBooleans&&j!==null&&(j.toLowerCase()==="true"||j.toLowerCase()==="false")&&(j=j.toLowerCase()==="true"),j}function J(j,W){W=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},W),h(W.arrayFormatSeparator);const B=l(W),U=Object.create(null);if(typeof j!="string"||(j=j.trim().replace(/^[?#&]/,""),!j))return U;for(const H of j.split("&")){if(H==="")continue;let[m,N]=i(W.decode?H.replace(/\+/g," "):H,"=");N=N===void 0?null:["comma","separator","bracket-separator"].includes(W.arrayFormat)?N:w(N,W),B(w(m,W),N,U)}for(const H of Object.keys(U)){const m=U[H];if(typeof m=="object"&&m!==null)for(const N of Object.keys(m))m[N]=K(m[N],W);else U[H]=K(m,W)}return W.sort===!1?U:(W.sort===!0?Object.keys(U).sort():Object.keys(U).sort(W.sort)).reduce((H,m)=>{const N=U[m];return N&&typeof N=="object"&&!Array.isArray(N)?H[m]=S(N):H[m]=N,H},Object.create(null))}r.extract=z,r.parse=J,r.stringify=(j,W)=>{if(!j)return"";W=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},W),h(W.arrayFormatSeparator);const B=N=>W.skipNull&&a(j[N])||W.skipEmptyString&&j[N]==="",U=u(W),H={};for(const N of Object.keys(j))B(N)||(H[N]=j[N]);const m=Object.keys(H);return W.sort!==!1&&m.sort(W.sort),m.map(N=>{const ne=j[N];return ne===void 0?"":ne===null?g(N,W):Array.isArray(ne)?ne.length===0&&W.arrayFormat==="bracket-separator"?g(N,W)+"[]":ne.reduce(U(N),[]).join("&"):g(N,W)+"="+g(ne,W)}).filter(N=>N.length>0).join("&")},r.parseUrl=(j,W)=>{W=Object.assign({decode:!0},W);const[B,U]=i(j,"#");return Object.assign({url:B.split("?")[0]||"",query:J(z(j),W)},W&&W.parseFragmentIdentifier&&U?{fragmentIdentifier:w(U,W)}:{})},r.stringifyUrl=(j,W)=>{W=Object.assign({encode:!0,strict:!0,[c]:!0},W);const B=E(j.url).split("?")[0]||"",U=r.extract(j.url),H=r.parse(U,{sort:!1}),m=Object.assign(H,j.query);let N=r.stringify(m,W);N&&(N=`?${N}`);let ne=I(j.url);return j.fragmentIdentifier&&(ne=`#${W[c]?g(j.fragmentIdentifier,W):j.fragmentIdentifier}`),`${B}${N}${ne}`},r.pick=(j,W,B)=>{B=Object.assign({parseFragmentIdentifier:!0,[c]:!1},B);const{url:U,query:H,fragmentIdentifier:m}=r.parseUrl(j,B);return r.stringifyUrl({url:U,query:s(H,W),fragmentIdentifier:m},B)},r.exclude=(j,W,B)=>{const U=Array.isArray(W)?H=>!W.includes(H):(H,m)=>!W(H,m);return r.pick(j,U,B)}})(Vo);var sd={},sf={},ot={},pb={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(u,l){var h=u>>>16&65535,g=u&65535,w=l>>>16&65535,S=l&65535;return g*S+(h*S+g*w<<16>>>0)|0}r.mul=Math.imul||e;function t(u,l){return u+l|0}r.add=t;function i(u,l){return u-l|0}r.sub=i;function s(u,l){return u<<l|u>>>32-l}r.rotl=s;function a(u,l){return u<<32-l|u>>>l}r.rotr=a;function c(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u}r.isInteger=Number.isInteger||c,r.MAX_SAFE_INTEGER=9007199254740991,r.isSafeInteger=function(u){return r.isInteger(u)&&u>=-r.MAX_SAFE_INTEGER&&u<=r.MAX_SAFE_INTEGER}})(pb);Object.defineProperty(ot,"__esModule",{value:!0});var gb=pb;function h4(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])<<16>>16}ot.readInt16BE=h4;function l4(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])>>>0}ot.readUint16BE=l4;function d4(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])<<16>>16}ot.readInt16LE=d4;function p4(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])>>>0}ot.readUint16LE=p4;function bb(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>8,e[t+1]=r>>>0,e}ot.writeUint16BE=bb;ot.writeInt16BE=bb;function vb(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e}ot.writeUint16LE=vb;ot.writeInt16LE=vb;function Dl(r,e){return e===void 0&&(e=0),r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}ot.readInt32BE=Dl;function Ml(r,e){return e===void 0&&(e=0),(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}ot.readUint32BE=Ml;function Pl(r,e){return e===void 0&&(e=0),r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]}ot.readInt32LE=Pl;function Ol(r,e){return e===void 0&&(e=0),(r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e])>>>0}ot.readUint32LE=Ol;function qu(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>24,e[t+1]=r>>>16,e[t+2]=r>>>8,e[t+3]=r>>>0,e}ot.writeUint32BE=qu;ot.writeInt32BE=qu;function Lu(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e[t+2]=r>>>16,e[t+3]=r>>>24,e}ot.writeUint32LE=Lu;ot.writeInt32LE=Lu;function g4(r,e){e===void 0&&(e=0);var t=Dl(r,e),i=Dl(r,e+4);return t*4294967296+i-(i>>31)*4294967296}ot.readInt64BE=g4;function b4(r,e){e===void 0&&(e=0);var t=Ml(r,e),i=Ml(r,e+4);return t*4294967296+i}ot.readUint64BE=b4;function v4(r,e){e===void 0&&(e=0);var t=Pl(r,e),i=Pl(r,e+4);return i*4294967296+t-(t>>31)*4294967296}ot.readInt64LE=v4;function m4(r,e){e===void 0&&(e=0);var t=Ol(r,e),i=Ol(r,e+4);return i*4294967296+t}ot.readUint64LE=m4;function mb(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),qu(r/4294967296>>>0,e,t),qu(r>>>0,e,t+4),e}ot.writeUint64BE=mb;ot.writeInt64BE=mb;function yb(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Lu(r>>>0,e,t),Lu(r/4294967296>>>0,e,t+4),e}ot.writeUint64LE=yb;ot.writeInt64LE=yb;function y4(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,s=1,a=r/8+t-1;a>=t;a--)i+=e[a]*s,s*=256;return i}ot.readUintBE=y4;function w4(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,s=1,a=t;a<t+r/8;a++)i+=e[a]*s,s*=256;return i}ot.readUintLE=w4;function _4(r,e,t,i){if(t===void 0&&(t=new Uint8Array(r/8)),i===void 0&&(i=0),r%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!gb.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var s=1,a=r/8+i-1;a>=i;a--)t[a]=e/s&255,s*=256;return t}ot.writeUintBE=_4;function E4(r,e,t,i){if(t===void 0&&(t=new Uint8Array(r/8)),i===void 0&&(i=0),r%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!gb.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var s=1,a=i;a<i+r/8;a++)t[a]=e/s&255,s*=256;return t}ot.writeUintLE=E4;function A4(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e)}ot.readFloat32BE=A4;function S4(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e,!0)}ot.readFloat32LE=S4;function I4(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e)}ot.readFloat64BE=I4;function x4(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e,!0)}ot.readFloat64LE=x4;function D4(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(t,r),e}ot.writeFloat32BE=D4;function M4(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(t,r,!0),e}ot.writeFloat32LE=M4;function P4(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(t,r),e}ot.writeFloat64BE=P4;function O4(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(t,r,!0),e}ot.writeFloat64LE=O4;var pi={};Object.defineProperty(pi,"__esModule",{value:!0});function C4(r){for(var e=0;e<r.length;e++)r[e]=0;return r}pi.wipe=C4;Object.defineProperty(sf,"__esModule",{value:!0});var Or=ot,Cl=pi,N4=20;function R4(r,e,t){for(var i=1634760805,s=857760878,a=2036477234,c=1797285236,u=t[3]<<24|t[2]<<16|t[1]<<8|t[0],l=t[7]<<24|t[6]<<16|t[5]<<8|t[4],h=t[11]<<24|t[10]<<16|t[9]<<8|t[8],g=t[15]<<24|t[14]<<16|t[13]<<8|t[12],w=t[19]<<24|t[18]<<16|t[17]<<8|t[16],S=t[23]<<24|t[22]<<16|t[21]<<8|t[20],E=t[27]<<24|t[26]<<16|t[25]<<8|t[24],I=t[31]<<24|t[30]<<16|t[29]<<8|t[28],z=e[3]<<24|e[2]<<16|e[1]<<8|e[0],K=e[7]<<24|e[6]<<16|e[5]<<8|e[4],J=e[11]<<24|e[10]<<16|e[9]<<8|e[8],j=e[15]<<24|e[14]<<16|e[13]<<8|e[12],W=i,B=s,U=a,H=c,m=u,N=l,ne=h,le=g,pe=w,ve=S,d=E,p=I,_=z,D=K,P=J,C=j,F=0;F<N4;F+=2)W=W+m|0,_^=W,_=_>>>16|_<<16,pe=pe+_|0,m^=pe,m=m>>>20|m<<12,B=B+N|0,D^=B,D=D>>>16|D<<16,ve=ve+D|0,N^=ve,N=N>>>20|N<<12,U=U+ne|0,P^=U,P=P>>>16|P<<16,d=d+P|0,ne^=d,ne=ne>>>20|ne<<12,H=H+le|0,C^=H,C=C>>>16|C<<16,p=p+C|0,le^=p,le=le>>>20|le<<12,U=U+ne|0,P^=U,P=P>>>24|P<<8,d=d+P|0,ne^=d,ne=ne>>>25|ne<<7,H=H+le|0,C^=H,C=C>>>24|C<<8,p=p+C|0,le^=p,le=le>>>25|le<<7,B=B+N|0,D^=B,D=D>>>24|D<<8,ve=ve+D|0,N^=ve,N=N>>>25|N<<7,W=W+m|0,_^=W,_=_>>>24|_<<8,pe=pe+_|0,m^=pe,m=m>>>25|m<<7,W=W+N|0,C^=W,C=C>>>16|C<<16,d=d+C|0,N^=d,N=N>>>20|N<<12,B=B+ne|0,_^=B,_=_>>>16|_<<16,p=p+_|0,ne^=p,ne=ne>>>20|ne<<12,U=U+le|0,D^=U,D=D>>>16|D<<16,pe=pe+D|0,le^=pe,le=le>>>20|le<<12,H=H+m|0,P^=H,P=P>>>16|P<<16,ve=ve+P|0,m^=ve,m=m>>>20|m<<12,U=U+le|0,D^=U,D=D>>>24|D<<8,pe=pe+D|0,le^=pe,le=le>>>25|le<<7,H=H+m|0,P^=H,P=P>>>24|P<<8,ve=ve+P|0,m^=ve,m=m>>>25|m<<7,B=B+ne|0,_^=B,_=_>>>24|_<<8,p=p+_|0,ne^=p,ne=ne>>>25|ne<<7,W=W+N|0,C^=W,C=C>>>24|C<<8,d=d+C|0,N^=d,N=N>>>25|N<<7;Or.writeUint32LE(W+i|0,r,0),Or.writeUint32LE(B+s|0,r,4),Or.writeUint32LE(U+a|0,r,8),Or.writeUint32LE(H+c|0,r,12),Or.writeUint32LE(m+u|0,r,16),Or.writeUint32LE(N+l|0,r,20),Or.writeUint32LE(ne+h|0,r,24),Or.writeUint32LE(le+g|0,r,28),Or.writeUint32LE(pe+w|0,r,32),Or.writeUint32LE(ve+S|0,r,36),Or.writeUint32LE(d+E|0,r,40),Or.writeUint32LE(p+I|0,r,44),Or.writeUint32LE(_+z|0,r,48),Or.writeUint32LE(D+K|0,r,52),Or.writeUint32LE(P+J|0,r,56),Or.writeUint32LE(C+j|0,r,60)}function wb(r,e,t,i,s){if(s===void 0&&(s=0),r.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<t.length)throw new Error("ChaCha: destination is shorter than source");var a,c;if(s===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");a=new Uint8Array(16),c=a.length-e.length,a.set(e,c)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");a=e,c=s}for(var u=new Uint8Array(64),l=0;l<t.length;l+=64){R4(u,a,r);for(var h=l;h<l+64&&h<t.length;h++)i[h]=t[h]^u[h-l];F4(a,0,c)}return Cl.wipe(u),s===0&&Cl.wipe(a),i}sf.streamXOR=wb;function T4(r,e,t,i){return i===void 0&&(i=0),Cl.wipe(t),wb(r,e,t,t,i)}sf.stream=T4;function F4(r,e,t){for(var i=1;t--;)i=i+(r[e]&255)|0,r[e]=i&255,i>>>=8,e++;if(i>0)throw new Error("ChaCha: counter overflow")}var _b={},Es={};Object.defineProperty(Es,"__esModule",{value:!0});function B4(r,e,t){return~(r-1)&e|r-1&t}Es.select=B4;function q4(r,e){return(r|0)-(e|0)-1>>>31&1}Es.lessOrEqual=q4;function Eb(r,e){if(r.length!==e.length)return 0;for(var t=0,i=0;i<r.length;i++)t|=r[i]^e[i];return 1&t-1>>>8}Es.compare=Eb;function L4(r,e){return r.length===0||e.length===0?!1:Eb(r,e)!==0}Es.equal=L4;(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=Es,t=pi;r.DIGEST_LENGTH=16;var i=function(){function c(u){this.digestLength=r.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var l=u[0]|u[1]<<8;this._r[0]=l&8191;var h=u[2]|u[3]<<8;this._r[1]=(l>>>13|h<<3)&8191;var g=u[4]|u[5]<<8;this._r[2]=(h>>>10|g<<6)&7939;var w=u[6]|u[7]<<8;this._r[3]=(g>>>7|w<<9)&8191;var S=u[8]|u[9]<<8;this._r[4]=(w>>>4|S<<12)&255,this._r[5]=S>>>1&8190;var E=u[10]|u[11]<<8;this._r[6]=(S>>>14|E<<2)&8191;var I=u[12]|u[13]<<8;this._r[7]=(E>>>11|I<<5)&8065;var z=u[14]|u[15]<<8;this._r[8]=(I>>>8|z<<8)&8191,this._r[9]=z>>>5&127,this._pad[0]=u[16]|u[17]<<8,this._pad[1]=u[18]|u[19]<<8,this._pad[2]=u[20]|u[21]<<8,this._pad[3]=u[22]|u[23]<<8,this._pad[4]=u[24]|u[25]<<8,this._pad[5]=u[26]|u[27]<<8,this._pad[6]=u[28]|u[29]<<8,this._pad[7]=u[30]|u[31]<<8}return c.prototype._blocks=function(u,l,h){for(var g=this._fin?0:2048,w=this._h[0],S=this._h[1],E=this._h[2],I=this._h[3],z=this._h[4],K=this._h[5],J=this._h[6],j=this._h[7],W=this._h[8],B=this._h[9],U=this._r[0],H=this._r[1],m=this._r[2],N=this._r[3],ne=this._r[4],le=this._r[5],pe=this._r[6],ve=this._r[7],d=this._r[8],p=this._r[9];h>=16;){var _=u[l+0]|u[l+1]<<8;w+=_&8191;var D=u[l+2]|u[l+3]<<8;S+=(_>>>13|D<<3)&8191;var P=u[l+4]|u[l+5]<<8;E+=(D>>>10|P<<6)&8191;var C=u[l+6]|u[l+7]<<8;I+=(P>>>7|C<<9)&8191;var F=u[l+8]|u[l+9]<<8;z+=(C>>>4|F<<12)&8191,K+=F>>>1&8191;var M=u[l+10]|u[l+11]<<8;J+=(F>>>14|M<<2)&8191;var v=u[l+12]|u[l+13]<<8;j+=(M>>>11|v<<5)&8191;var R=u[l+14]|u[l+15]<<8;W+=(v>>>8|R<<8)&8191,B+=R>>>5|g;var re=0,he=re;he+=w*U,he+=S*(5*p),he+=E*(5*d),he+=I*(5*ve),he+=z*(5*pe),re=he>>>13,he&=8191,he+=K*(5*le),he+=J*(5*ne),he+=j*(5*N),he+=W*(5*m),he+=B*(5*H),re+=he>>>13,he&=8191;var A=re;A+=w*H,A+=S*U,A+=E*(5*p),A+=I*(5*d),A+=z*(5*ve),re=A>>>13,A&=8191,A+=K*(5*pe),A+=J*(5*le),A+=j*(5*ne),A+=W*(5*N),A+=B*(5*m),re+=A>>>13,A&=8191;var ee=re;ee+=w*m,ee+=S*H,ee+=E*U,ee+=I*(5*p),ee+=z*(5*d),re=ee>>>13,ee&=8191,ee+=K*(5*ve),ee+=J*(5*pe),ee+=j*(5*le),ee+=W*(5*ne),ee+=B*(5*N),re+=ee>>>13,ee&=8191;var L=re;L+=w*N,L+=S*m,L+=E*H,L+=I*U,L+=z*(5*p),re=L>>>13,L&=8191,L+=K*(5*d),L+=J*(5*ve),L+=j*(5*pe),L+=W*(5*le),L+=B*(5*ne),re+=L>>>13,L&=8191;var $=re;$+=w*ne,$+=S*N,$+=E*m,$+=I*H,$+=z*U,re=$>>>13,$&=8191,$+=K*(5*p),$+=J*(5*d),$+=j*(5*ve),$+=W*(5*pe),$+=B*(5*le),re+=$>>>13,$&=8191;var V=re;V+=w*le,V+=S*ne,V+=E*N,V+=I*m,V+=z*H,re=V>>>13,V&=8191,V+=K*U,V+=J*(5*p),V+=j*(5*d),V+=W*(5*ve),V+=B*(5*pe),re+=V>>>13,V&=8191;var b=re;b+=w*pe,b+=S*le,b+=E*ne,b+=I*N,b+=z*m,re=b>>>13,b&=8191,b+=K*H,b+=J*U,b+=j*(5*p),b+=W*(5*d),b+=B*(5*ve),re+=b>>>13,b&=8191;var q=re;q+=w*ve,q+=S*pe,q+=E*le,q+=I*ne,q+=z*N,re=q>>>13,q&=8191,q+=K*m,q+=J*H,q+=j*U,q+=W*(5*p),q+=B*(5*d),re+=q>>>13,q&=8191;var te=re;te+=w*d,te+=S*ve,te+=E*pe,te+=I*le,te+=z*ne,re=te>>>13,te&=8191,te+=K*N,te+=J*m,te+=j*H,te+=W*U,te+=B*(5*p),re+=te>>>13,te&=8191;var ae=re;ae+=w*p,ae+=S*d,ae+=E*ve,ae+=I*pe,ae+=z*le,re=ae>>>13,ae&=8191,ae+=K*ne,ae+=J*N,ae+=j*m,ae+=W*H,ae+=B*U,re+=ae>>>13,ae&=8191,re=(re<<2)+re|0,re=re+he|0,he=re&8191,re=re>>>13,A+=re,w=he,S=A,E=ee,I=L,z=$,K=V,J=b,j=q,W=te,B=ae,l+=16,h-=16}this._h[0]=w,this._h[1]=S,this._h[2]=E,this._h[3]=I,this._h[4]=z,this._h[5]=K,this._h[6]=J,this._h[7]=j,this._h[8]=W,this._h[9]=B},c.prototype.finish=function(u,l){l===void 0&&(l=0);var h=new Uint16Array(10),g,w,S,E;if(this._leftover){for(E=this._leftover,this._buffer[E++]=1;E<16;E++)this._buffer[E]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(g=this._h[1]>>>13,this._h[1]&=8191,E=2;E<10;E++)this._h[E]+=g,g=this._h[E]>>>13,this._h[E]&=8191;for(this._h[0]+=g*5,g=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=g,g=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=g,h[0]=this._h[0]+5,g=h[0]>>>13,h[0]&=8191,E=1;E<10;E++)h[E]=this._h[E]+g,g=h[E]>>>13,h[E]&=8191;for(h[9]-=8192,w=(g^1)-1,E=0;E<10;E++)h[E]&=w;for(w=~w,E=0;E<10;E++)this._h[E]=this._h[E]&w|h[E];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,S=this._h[0]+this._pad[0],this._h[0]=S&65535,E=1;E<8;E++)S=(this._h[E]+this._pad[E]|0)+(S>>>16)|0,this._h[E]=S&65535;return u[l+0]=this._h[0]>>>0,u[l+1]=this._h[0]>>>8,u[l+2]=this._h[1]>>>0,u[l+3]=this._h[1]>>>8,u[l+4]=this._h[2]>>>0,u[l+5]=this._h[2]>>>8,u[l+6]=this._h[3]>>>0,u[l+7]=this._h[3]>>>8,u[l+8]=this._h[4]>>>0,u[l+9]=this._h[4]>>>8,u[l+10]=this._h[5]>>>0,u[l+11]=this._h[5]>>>8,u[l+12]=this._h[6]>>>0,u[l+13]=this._h[6]>>>8,u[l+14]=this._h[7]>>>0,u[l+15]=this._h[7]>>>8,this._finished=!0,this},c.prototype.update=function(u){var l=0,h=u.length,g;if(this._leftover){g=16-this._leftover,g>h&&(g=h);for(var w=0;w<g;w++)this._buffer[this._leftover+w]=u[l+w];if(h-=g,l+=g,this._leftover+=g,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(h>=16&&(g=h-h%16,this._blocks(u,l,g),l+=g,h-=g),h){for(var w=0;w<h;w++)this._buffer[this._leftover+w]=u[l+w];this._leftover+=h}return this},c.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var u=new Uint8Array(16);return this.finish(u),u},c.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},c}();r.Poly1305=i;function s(c,u){var l=new i(c);l.update(u);var h=l.digest();return l.clean(),h}r.oneTimeAuth=s;function a(c,u){return c.length!==r.DIGEST_LENGTH||u.length!==r.DIGEST_LENGTH?!1:e.equal(c,u)}r.equal=a})(_b);(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=sf,t=_b,i=pi,s=ot,a=Es;r.KEY_LENGTH=32,r.NONCE_LENGTH=12,r.TAG_LENGTH=16;var c=new Uint8Array(16),u=function(){function l(h){if(this.nonceLength=r.NONCE_LENGTH,this.tagLength=r.TAG_LENGTH,h.length!==r.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(h)}return l.prototype.seal=function(h,g,w,S){if(h.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var E=new Uint8Array(16);E.set(h,E.length-h.length);var I=new Uint8Array(32);e.stream(this._key,E,I,4);var z=g.length+this.tagLength,K;if(S){if(S.length!==z)throw new Error("ChaCha20Poly1305: incorrect destination length");K=S}else K=new Uint8Array(z);return e.streamXOR(this._key,E,g,K,4),this._authenticate(K.subarray(K.length-this.tagLength,K.length),I,K.subarray(0,K.length-this.tagLength),w),i.wipe(E),K},l.prototype.open=function(h,g,w,S){if(h.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(g.length<this.tagLength)return null;var E=new Uint8Array(16);E.set(h,E.length-h.length);var I=new Uint8Array(32);e.stream(this._key,E,I,4);var z=new Uint8Array(this.tagLength);if(this._authenticate(z,I,g.subarray(0,g.length-this.tagLength),w),!a.equal(z,g.subarray(g.length-this.tagLength,g.length)))return null;var K=g.length-this.tagLength,J;if(S){if(S.length!==K)throw new Error("ChaCha20Poly1305: incorrect destination length");J=S}else J=new Uint8Array(K);return e.streamXOR(this._key,E,g.subarray(0,g.length-this.tagLength),J,4),i.wipe(E),J},l.prototype.clean=function(){return i.wipe(this._key),this},l.prototype._authenticate=function(h,g,w,S){var E=new t.Poly1305(g);S&&(E.update(S),S.length%16>0&&E.update(c.subarray(S.length%16))),E.update(w),w.length%16>0&&E.update(c.subarray(w.length%16));var I=new Uint8Array(8);S&&s.writeUint64LE(S.length,I),E.update(I),s.writeUint64LE(w.length,I),E.update(I);for(var z=E.digest(),K=0;K<z.length;K++)h[K]=z[K];E.clean(),i.wipe(z),i.wipe(I)},l}();r.ChaCha20Poly1305=u})(sd);var Ab={},ec={},ad={};Object.defineProperty(ad,"__esModule",{value:!0});function U4(r){return typeof r.saveState<"u"&&typeof r.restoreState<"u"&&typeof r.cleanSavedState<"u"}ad.isSerializableHash=U4;Object.defineProperty(ec,"__esModule",{value:!0});var gn=ad,j4=Es,$4=pi,Sb=function(){function r(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(i).clean():i.set(t);for(var s=0;s<i.length;s++)i[s]^=54;this._inner.update(i);for(var s=0;s<i.length;s++)i[s]^=106;this._outer.update(i),gn.isSerializableHash(this._inner)&&gn.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),$4.wipe(i)}return r.prototype.reset=function(){if(!gn.isSerializableHash(this._inner)||!gn.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.clean=function(){gn.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),gn.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},r.prototype.update=function(e){return this._inner.update(e),this},r.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(!gn.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},r.prototype.restoreState=function(e){if(!gn.isSerializableHash(this._inner)||!gn.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},r.prototype.cleanSavedState=function(e){if(!gn.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},r}();ec.HMAC=Sb;function z4(r,e,t){var i=new Sb(r,e);i.update(t);var s=i.digest();return i.clean(),s}ec.hmac=z4;ec.equal=j4.equal;Object.defineProperty(Ab,"__esModule",{value:!0});var Gp=ec,Wp=pi,k4=function(){function r(e,t,i,s){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=s;var a=Gp.hmac(this._hash,i,t);this._hmac=new Gp.HMAC(e,a),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return r.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},r.prototype.expand=function(e){for(var t=new Uint8Array(e),i=0;i<t.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[i]=this._buffer[this._bufpos++];return t},r.prototype.clean=function(){this._hmac.clean(),Wp.wipe(this._buffer),Wp.wipe(this._counter),this._bufpos=0},r}(),H4=Ab.HKDF=k4,As={},af={},of={};Object.defineProperty(of,"__esModule",{value:!0});of.BrowserRandomSource=void 0;const Jp=65536;class K4{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let i=0;i<t.length;i+=Jp)this._crypto.getRandomValues(t.subarray(i,i+Math.min(t.length-i,Jp)));return t}}of.BrowserRandomSource=K4;function V4(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var cf={};Object.defineProperty(cf,"__esModule",{value:!0});cf.NodeRandomSource=void 0;const G4=pi;class W4{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof V4<"u"){const e=t8();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const i=new Uint8Array(e);for(let s=0;s<i.length;s++)i[s]=t[s];return(0,G4.wipe)(t),i}}cf.NodeRandomSource=W4;Object.defineProperty(af,"__esModule",{value:!0});af.SystemRandomSource=void 0;const J4=of,Y4=cf;class Q4{constructor(){if(this.isAvailable=!1,this.name="",this._source=new J4.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Y4.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}af.SystemRandomSource=Q4;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.randomStringForEntropy=r.randomString=r.randomUint32=r.randomBytes=r.defaultRandomSource=void 0;const e=af,t=ot,i=pi;r.defaultRandomSource=new e.SystemRandomSource;function s(h,g=r.defaultRandomSource){return g.randomBytes(h)}r.randomBytes=s;function a(h=r.defaultRandomSource){const g=s(4,h),w=(0,t.readUint32LE)(g);return(0,i.wipe)(g),w}r.randomUint32=a;const c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function u(h,g=c,w=r.defaultRandomSource){if(g.length<2)throw new Error("randomString charset is too short");if(g.length>256)throw new Error("randomString charset is too long");let S="";const E=g.length,I=256-256%E;for(;h>0;){const z=s(Math.ceil(h*256/I),w);for(let K=0;K<z.length&&h>0;K++){const J=z[K];J<I&&(S+=g.charAt(J%E),h--)}(0,i.wipe)(z)}return S}r.randomString=u;function l(h,g=c,w=r.defaultRandomSource){const S=Math.ceil(h/(Math.log(g.length)/Math.LN2));return u(S,g,w)}r.randomStringForEntropy=l})(As);var tc={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=ot,t=pi;r.DIGEST_LENGTH=32,r.BLOCK_SIZE=64;var i=function(){function u(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return u.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},u.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},u.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},u.prototype.update=function(l,h){if(h===void 0&&(h=l.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var g=0;if(this._bytesHashed+=h,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&h>0;)this._buffer[this._bufferLength++]=l[g++],h--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(h>=this.blockSize&&(g=a(this._temp,this._state,l,g,h),h%=this.blockSize);h>0;)this._buffer[this._bufferLength++]=l[g++],h--;return this},u.prototype.finish=function(l){if(!this._finished){var h=this._bytesHashed,g=this._bufferLength,w=h/536870912|0,S=h<<3,E=h%64<56?64:128;this._buffer[g]=128;for(var I=g+1;I<E-8;I++)this._buffer[I]=0;e.writeUint32BE(w,this._buffer,E-8),e.writeUint32BE(S,this._buffer,E-4),a(this._temp,this._state,this._buffer,0,E),this._finished=!0}for(var I=0;I<this.digestLength/4;I++)e.writeUint32BE(this._state[I],l,I*4);return this},u.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},u.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},u.prototype.restoreState=function(l){return this._state.set(l.state),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},u.prototype.cleanSavedState=function(l){t.wipe(l.state),l.buffer&&t.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},u}();r.SHA256=i;var s=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(u,l,h,g,w){for(;w>=64;){for(var S=l[0],E=l[1],I=l[2],z=l[3],K=l[4],J=l[5],j=l[6],W=l[7],B=0;B<16;B++){var U=g+B*4;u[B]=e.readUint32BE(h,U)}for(var B=16;B<64;B++){var H=u[B-2],m=(H>>>17|H<<15)^(H>>>19|H<<13)^H>>>10;H=u[B-15];var N=(H>>>7|H<<25)^(H>>>18|H<<14)^H>>>3;u[B]=(m+u[B-7]|0)+(N+u[B-16]|0)}for(var B=0;B<64;B++){var m=(((K>>>6|K<<26)^(K>>>11|K<<21)^(K>>>25|K<<7))+(K&J^~K&j)|0)+(W+(s[B]+u[B]|0)|0)|0,N=((S>>>2|S<<30)^(S>>>13|S<<19)^(S>>>22|S<<10))+(S&E^S&I^E&I)|0;W=j,j=J,J=K,K=z+m|0,z=I,I=E,E=S,S=m+N|0}l[0]+=S,l[1]+=E,l[2]+=I,l[3]+=z,l[4]+=K,l[5]+=J,l[6]+=j,l[7]+=W,g+=64,w-=64}return g}function c(u){var l=new i;l.update(u);var h=l.digest();return l.clean(),h}r.hash=c})(tc);var od={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.sharedKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.scalarMultBase=r.scalarMult=r.SHARED_KEY_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=void 0;const e=As,t=pi;r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=32,r.SHARED_KEY_LENGTH=32;function i(B){const U=new Float64Array(16);if(B)for(let H=0;H<B.length;H++)U[H]=B[H];return U}const s=new Uint8Array(32);s[0]=9;const a=i([56129,1]);function c(B){let U=1;for(let H=0;H<16;H++){let m=B[H]+U+65535;U=Math.floor(m/65536),B[H]=m-U*65536}B[0]+=U-1+37*(U-1)}function u(B,U,H){const m=~(H-1);for(let N=0;N<16;N++){const ne=m&(B[N]^U[N]);B[N]^=ne,U[N]^=ne}}function l(B,U){const H=i(),m=i();for(let N=0;N<16;N++)m[N]=U[N];c(m),c(m),c(m);for(let N=0;N<2;N++){H[0]=m[0]-65517;for(let le=1;le<15;le++)H[le]=m[le]-65535-(H[le-1]>>16&1),H[le-1]&=65535;H[15]=m[15]-32767-(H[14]>>16&1);const ne=H[15]>>16&1;H[14]&=65535,u(m,H,1-ne)}for(let N=0;N<16;N++)B[2*N]=m[N]&255,B[2*N+1]=m[N]>>8}function h(B,U){for(let H=0;H<16;H++)B[H]=U[2*H]+(U[2*H+1]<<8);B[15]&=32767}function g(B,U,H){for(let m=0;m<16;m++)B[m]=U[m]+H[m]}function w(B,U,H){for(let m=0;m<16;m++)B[m]=U[m]-H[m]}function S(B,U,H){let m,N,ne=0,le=0,pe=0,ve=0,d=0,p=0,_=0,D=0,P=0,C=0,F=0,M=0,v=0,R=0,re=0,he=0,A=0,ee=0,L=0,$=0,V=0,b=0,q=0,te=0,ae=0,oe=0,Me=0,Oe=0,Ie=0,At=0,$e=0,De=H[0],qe=H[1],_e=H[2],Ee=H[3],Ve=H[4],ye=H[5],Ae=H[6],Be=H[7],we=H[8],Pe=H[9],Le=H[10],Ce=H[11],Ne=H[12],st=H[13],Te=H[14],Re=H[15];m=U[0],ne+=m*De,le+=m*qe,pe+=m*_e,ve+=m*Ee,d+=m*Ve,p+=m*ye,_+=m*Ae,D+=m*Be,P+=m*we,C+=m*Pe,F+=m*Le,M+=m*Ce,v+=m*Ne,R+=m*st,re+=m*Te,he+=m*Re,m=U[1],le+=m*De,pe+=m*qe,ve+=m*_e,d+=m*Ee,p+=m*Ve,_+=m*ye,D+=m*Ae,P+=m*Be,C+=m*we,F+=m*Pe,M+=m*Le,v+=m*Ce,R+=m*Ne,re+=m*st,he+=m*Te,A+=m*Re,m=U[2],pe+=m*De,ve+=m*qe,d+=m*_e,p+=m*Ee,_+=m*Ve,D+=m*ye,P+=m*Ae,C+=m*Be,F+=m*we,M+=m*Pe,v+=m*Le,R+=m*Ce,re+=m*Ne,he+=m*st,A+=m*Te,ee+=m*Re,m=U[3],ve+=m*De,d+=m*qe,p+=m*_e,_+=m*Ee,D+=m*Ve,P+=m*ye,C+=m*Ae,F+=m*Be,M+=m*we,v+=m*Pe,R+=m*Le,re+=m*Ce,he+=m*Ne,A+=m*st,ee+=m*Te,L+=m*Re,m=U[4],d+=m*De,p+=m*qe,_+=m*_e,D+=m*Ee,P+=m*Ve,C+=m*ye,F+=m*Ae,M+=m*Be,v+=m*we,R+=m*Pe,re+=m*Le,he+=m*Ce,A+=m*Ne,ee+=m*st,L+=m*Te,$+=m*Re,m=U[5],p+=m*De,_+=m*qe,D+=m*_e,P+=m*Ee,C+=m*Ve,F+=m*ye,M+=m*Ae,v+=m*Be,R+=m*we,re+=m*Pe,he+=m*Le,A+=m*Ce,ee+=m*Ne,L+=m*st,$+=m*Te,V+=m*Re,m=U[6],_+=m*De,D+=m*qe,P+=m*_e,C+=m*Ee,F+=m*Ve,M+=m*ye,v+=m*Ae,R+=m*Be,re+=m*we,he+=m*Pe,A+=m*Le,ee+=m*Ce,L+=m*Ne,$+=m*st,V+=m*Te,b+=m*Re,m=U[7],D+=m*De,P+=m*qe,C+=m*_e,F+=m*Ee,M+=m*Ve,v+=m*ye,R+=m*Ae,re+=m*Be,he+=m*we,A+=m*Pe,ee+=m*Le,L+=m*Ce,$+=m*Ne,V+=m*st,b+=m*Te,q+=m*Re,m=U[8],P+=m*De,C+=m*qe,F+=m*_e,M+=m*Ee,v+=m*Ve,R+=m*ye,re+=m*Ae,he+=m*Be,A+=m*we,ee+=m*Pe,L+=m*Le,$+=m*Ce,V+=m*Ne,b+=m*st,q+=m*Te,te+=m*Re,m=U[9],C+=m*De,F+=m*qe,M+=m*_e,v+=m*Ee,R+=m*Ve,re+=m*ye,he+=m*Ae,A+=m*Be,ee+=m*we,L+=m*Pe,$+=m*Le,V+=m*Ce,b+=m*Ne,q+=m*st,te+=m*Te,ae+=m*Re,m=U[10],F+=m*De,M+=m*qe,v+=m*_e,R+=m*Ee,re+=m*Ve,he+=m*ye,A+=m*Ae,ee+=m*Be,L+=m*we,$+=m*Pe,V+=m*Le,b+=m*Ce,q+=m*Ne,te+=m*st,ae+=m*Te,oe+=m*Re,m=U[11],M+=m*De,v+=m*qe,R+=m*_e,re+=m*Ee,he+=m*Ve,A+=m*ye,ee+=m*Ae,L+=m*Be,$+=m*we,V+=m*Pe,b+=m*Le,q+=m*Ce,te+=m*Ne,ae+=m*st,oe+=m*Te,Me+=m*Re,m=U[12],v+=m*De,R+=m*qe,re+=m*_e,he+=m*Ee,A+=m*Ve,ee+=m*ye,L+=m*Ae,$+=m*Be,V+=m*we,b+=m*Pe,q+=m*Le,te+=m*Ce,ae+=m*Ne,oe+=m*st,Me+=m*Te,Oe+=m*Re,m=U[13],R+=m*De,re+=m*qe,he+=m*_e,A+=m*Ee,ee+=m*Ve,L+=m*ye,$+=m*Ae,V+=m*Be,b+=m*we,q+=m*Pe,te+=m*Le,ae+=m*Ce,oe+=m*Ne,Me+=m*st,Oe+=m*Te,Ie+=m*Re,m=U[14],re+=m*De,he+=m*qe,A+=m*_e,ee+=m*Ee,L+=m*Ve,$+=m*ye,V+=m*Ae,b+=m*Be,q+=m*we,te+=m*Pe,ae+=m*Le,oe+=m*Ce,Me+=m*Ne,Oe+=m*st,Ie+=m*Te,At+=m*Re,m=U[15],he+=m*De,A+=m*qe,ee+=m*_e,L+=m*Ee,$+=m*Ve,V+=m*ye,b+=m*Ae,q+=m*Be,te+=m*we,ae+=m*Pe,oe+=m*Le,Me+=m*Ce,Oe+=m*Ne,Ie+=m*st,At+=m*Te,$e+=m*Re,ne+=38*A,le+=38*ee,pe+=38*L,ve+=38*$,d+=38*V,p+=38*b,_+=38*q,D+=38*te,P+=38*ae,C+=38*oe,F+=38*Me,M+=38*Oe,v+=38*Ie,R+=38*At,re+=38*$e,N=1,m=ne+N+65535,N=Math.floor(m/65536),ne=m-N*65536,m=le+N+65535,N=Math.floor(m/65536),le=m-N*65536,m=pe+N+65535,N=Math.floor(m/65536),pe=m-N*65536,m=ve+N+65535,N=Math.floor(m/65536),ve=m-N*65536,m=d+N+65535,N=Math.floor(m/65536),d=m-N*65536,m=p+N+65535,N=Math.floor(m/65536),p=m-N*65536,m=_+N+65535,N=Math.floor(m/65536),_=m-N*65536,m=D+N+65535,N=Math.floor(m/65536),D=m-N*65536,m=P+N+65535,N=Math.floor(m/65536),P=m-N*65536,m=C+N+65535,N=Math.floor(m/65536),C=m-N*65536,m=F+N+65535,N=Math.floor(m/65536),F=m-N*65536,m=M+N+65535,N=Math.floor(m/65536),M=m-N*65536,m=v+N+65535,N=Math.floor(m/65536),v=m-N*65536,m=R+N+65535,N=Math.floor(m/65536),R=m-N*65536,m=re+N+65535,N=Math.floor(m/65536),re=m-N*65536,m=he+N+65535,N=Math.floor(m/65536),he=m-N*65536,ne+=N-1+37*(N-1),N=1,m=ne+N+65535,N=Math.floor(m/65536),ne=m-N*65536,m=le+N+65535,N=Math.floor(m/65536),le=m-N*65536,m=pe+N+65535,N=Math.floor(m/65536),pe=m-N*65536,m=ve+N+65535,N=Math.floor(m/65536),ve=m-N*65536,m=d+N+65535,N=Math.floor(m/65536),d=m-N*65536,m=p+N+65535,N=Math.floor(m/65536),p=m-N*65536,m=_+N+65535,N=Math.floor(m/65536),_=m-N*65536,m=D+N+65535,N=Math.floor(m/65536),D=m-N*65536,m=P+N+65535,N=Math.floor(m/65536),P=m-N*65536,m=C+N+65535,N=Math.floor(m/65536),C=m-N*65536,m=F+N+65535,N=Math.floor(m/65536),F=m-N*65536,m=M+N+65535,N=Math.floor(m/65536),M=m-N*65536,m=v+N+65535,N=Math.floor(m/65536),v=m-N*65536,m=R+N+65535,N=Math.floor(m/65536),R=m-N*65536,m=re+N+65535,N=Math.floor(m/65536),re=m-N*65536,m=he+N+65535,N=Math.floor(m/65536),he=m-N*65536,ne+=N-1+37*(N-1),B[0]=ne,B[1]=le,B[2]=pe,B[3]=ve,B[4]=d,B[5]=p,B[6]=_,B[7]=D,B[8]=P,B[9]=C,B[10]=F,B[11]=M,B[12]=v,B[13]=R,B[14]=re,B[15]=he}function E(B,U){S(B,U,U)}function I(B,U){const H=i();for(let m=0;m<16;m++)H[m]=U[m];for(let m=253;m>=0;m--)E(H,H),m!==2&&m!==4&&S(H,H,U);for(let m=0;m<16;m++)B[m]=H[m]}function z(B,U){const H=new Uint8Array(32),m=new Float64Array(80),N=i(),ne=i(),le=i(),pe=i(),ve=i(),d=i();for(let P=0;P<31;P++)H[P]=B[P];H[31]=B[31]&127|64,H[0]&=248,h(m,U);for(let P=0;P<16;P++)ne[P]=m[P];N[0]=pe[0]=1;for(let P=254;P>=0;--P){const C=H[P>>>3]>>>(P&7)&1;u(N,ne,C),u(le,pe,C),g(ve,N,le),w(N,N,le),g(le,ne,pe),w(ne,ne,pe),E(pe,ve),E(d,N),S(N,le,N),S(le,ne,ve),g(ve,N,le),w(N,N,le),E(ne,N),w(le,pe,d),S(N,le,a),g(N,N,pe),S(le,le,N),S(N,pe,d),S(pe,ne,m),E(ne,ve),u(N,ne,C),u(le,pe,C)}for(let P=0;P<16;P++)m[P+16]=N[P],m[P+32]=le[P],m[P+48]=ne[P],m[P+64]=pe[P];const p=m.subarray(32),_=m.subarray(16);I(p,p),S(_,_,p);const D=new Uint8Array(32);return l(D,_),D}r.scalarMult=z;function K(B){return z(B,s)}r.scalarMultBase=K;function J(B){if(B.length!==r.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${r.SECRET_KEY_LENGTH} bytes`);const U=new Uint8Array(B);return{publicKey:K(U),secretKey:U}}r.generateKeyPairFromSeed=J;function j(B){const U=(0,e.randomBytes)(32,B),H=J(U);return(0,t.wipe)(U),H}r.generateKeyPair=j;function W(B,U,H=!1){if(B.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(U.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const m=z(B,U);if(H){let N=0;for(let ne=0;ne<m.length;ne++)N|=m[ne];if(N===0)throw new Error("X25519: invalid shared key")}return m}r.sharedKey=W})(od);function Ib(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function $h(r,e){e||(e=r.reduce((s,a)=>s+a.length,0));const t=Ib(e);let i=0;for(const s of r)t.set(s,i),i+=s.length;return t}function X4(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var a=r.charAt(s),c=a.charCodeAt(0);if(t[c]!==255)throw new TypeError(a+" is ambiguous");t[c]=s}var u=r.length,l=r.charAt(0),h=Math.log(u)/Math.log(256),g=Math.log(256)/Math.log(u);function w(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var z=0,K=0,J=0,j=I.length;J!==j&&I[J]===0;)J++,z++;for(var W=(j-J)*g+1>>>0,B=new Uint8Array(W);J!==j;){for(var U=I[J],H=0,m=W-1;(U!==0||H<K)&&m!==-1;m--,H++)U+=256*B[m]>>>0,B[m]=U%u>>>0,U=U/u>>>0;if(U!==0)throw new Error("Non-zero carry");K=H,J++}for(var N=W-K;N!==W&&B[N]===0;)N++;for(var ne=l.repeat(z);N<W;++N)ne+=r.charAt(B[N]);return ne}function S(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;var z=0;if(I[z]!==" "){for(var K=0,J=0;I[z]===l;)K++,z++;for(var j=(I.length-z)*h+1>>>0,W=new Uint8Array(j);I[z];){var B=t[I.charCodeAt(z)];if(B===255)return;for(var U=0,H=j-1;(B!==0||U<J)&&H!==-1;H--,U++)B+=u*W[H]>>>0,W[H]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");J=U,z++}if(I[z]!==" "){for(var m=j-J;m!==j&&W[m]===0;)m++;for(var N=new Uint8Array(K+(j-m)),ne=K;m!==j;)N[ne++]=W[m++];return N}}}function E(I){var z=S(I);if(z)return z;throw new Error(`Non-${e} character`)}return{encode:w,decodeUnsafe:S,decode:E}}var Z4=X4,e_=Z4;const t_=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},r_=r=>new TextEncoder().encode(r),i_=r=>new TextDecoder().decode(r);class n_{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class s_{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return xb(this,e)}}class a_{constructor(e){this.decoders=e}or(e){return xb(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const xb=(r,e)=>new a_({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class o_{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new n_(e,t,i),this.decoder=new s_(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const uf=({name:r,prefix:e,encode:t,decode:i})=>new o_(r,e,t,i),rc=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:s}=e_(t,e);return uf({prefix:r,name:e,encode:i,decode:a=>t_(s(a))})},c_=(r,e,t,i)=>{const s={};for(let g=0;g<e.length;++g)s[e[g]]=g;let a=r.length;for(;r[a-1]==="=";)--a;const c=new Uint8Array(a*t/8|0);let u=0,l=0,h=0;for(let g=0;g<a;++g){const w=s[r[g]];if(w===void 0)throw new SyntaxError(`Non-${i} character`);l=l<<t|w,u+=t,u>=8&&(u-=8,c[h++]=255&l>>u)}if(u>=t||255&l<<8-u)throw new SyntaxError("Unexpected end of data");return c},u_=(r,e,t)=>{const i=e[e.length-1]==="=",s=(1<<t)-1;let a="",c=0,u=0;for(let l=0;l<r.length;++l)for(u=u<<8|r[l],c+=8;c>t;)c-=t,a+=e[s&u>>c];if(c&&(a+=e[s&u<<t-c]),i)for(;a.length*t&7;)a+="=";return a},Ir=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>uf({prefix:e,name:r,encode(s){return u_(s,i,t)},decode(s){return c_(s,i,t,r)}}),f_=uf({prefix:"\0",name:"identity",encode:r=>i_(r),decode:r=>r_(r)}),h_=Object.freeze(Object.defineProperty({__proto__:null,identity:f_},Symbol.toStringTag,{value:"Module"})),l_=Ir({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),d_=Object.freeze(Object.defineProperty({__proto__:null,base2:l_},Symbol.toStringTag,{value:"Module"})),p_=Ir({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),g_=Object.freeze(Object.defineProperty({__proto__:null,base8:p_},Symbol.toStringTag,{value:"Module"})),b_=rc({prefix:"9",name:"base10",alphabet:"0123456789"}),v_=Object.freeze(Object.defineProperty({__proto__:null,base10:b_},Symbol.toStringTag,{value:"Module"})),m_=Ir({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),y_=Ir({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),w_=Object.freeze(Object.defineProperty({__proto__:null,base16:m_,base16upper:y_},Symbol.toStringTag,{value:"Module"})),__=Ir({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),E_=Ir({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),A_=Ir({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),S_=Ir({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),I_=Ir({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),x_=Ir({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),D_=Ir({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),M_=Ir({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),P_=Ir({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),O_=Object.freeze(Object.defineProperty({__proto__:null,base32:__,base32hex:I_,base32hexpad:D_,base32hexpadupper:M_,base32hexupper:x_,base32pad:A_,base32padupper:S_,base32upper:E_,base32z:P_},Symbol.toStringTag,{value:"Module"})),C_=rc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),N_=rc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),R_=Object.freeze(Object.defineProperty({__proto__:null,base36:C_,base36upper:N_},Symbol.toStringTag,{value:"Module"})),T_=rc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),F_=rc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),B_=Object.freeze(Object.defineProperty({__proto__:null,base58btc:T_,base58flickr:F_},Symbol.toStringTag,{value:"Module"})),q_=Ir({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),L_=Ir({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),U_=Ir({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),j_=Ir({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),$_=Object.freeze(Object.defineProperty({__proto__:null,base64:q_,base64pad:L_,base64url:U_,base64urlpad:j_},Symbol.toStringTag,{value:"Module"})),Db=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),z_=Db.reduce((r,e,t)=>(r[t]=e,r),[]),k_=Db.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function H_(r){return r.reduce((e,t)=>(e+=z_[t],e),"")}function K_(r){const e=[];for(const t of r){const i=k_[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const V_=uf({prefix:"🚀",name:"base256emoji",encode:H_,decode:K_}),G_=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:V_},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Uu={...h_,...d_,...g_,...v_,...w_,...O_,...R_,...B_,...$_,...G_};function Mb(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const Yp=Mb("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),zh=Mb("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=Ib(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),Pb={utf8:Yp,"utf-8":Yp,hex:Uu.base16,latin1:zh,ascii:zh,binary:zh,...Uu};function Bi(r,e="utf8"){const t=Pb[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}function ti(r,e="utf8"){const t=Pb[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var Ob={};const W_="elliptic",J_="6.6.1",Y_="EC cryptography",Q_="lib/elliptic.js",X_=["lib"],Z_={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},e7={type:"git",url:"git@github.com:indutny/elliptic"},t7=["EC","Elliptic","curve","Cryptography"],r7="Fedor Indutny <fedor@indutny.com>",i7="MIT",n7={url:"https://github.com/indutny/elliptic/issues"},s7="https://github.com/indutny/elliptic",a7={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},o7={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},c7={name:W_,version:J_,description:Y_,main:Q_,files:X_,scripts:Z_,repository:e7,keywords:t7,author:r7,license:i7,bugs:n7,homepage:s7,devDependencies:a7,dependencies:o7};var gi={};(function(r){var e=r,t=ts,i=r8(),s=i8();e.assert=i,e.toArray=s.toArray,e.zero2=s.zero2,e.toHex=s.toHex,e.encode=s.encode;function a(g,w,S){var E=new Array(Math.max(g.bitLength(),S)+1),I;for(I=0;I<E.length;I+=1)E[I]=0;var z=1<<w+1,K=g.clone();for(I=0;I<E.length;I++){var J,j=K.andln(z-1);K.isOdd()?(j>(z>>1)-1?J=(z>>1)-j:J=j,K.isubn(J)):J=0,E[I]=J,K.iushrn(1)}return E}e.getNAF=a;function c(g,w){var S=[[],[]];g=g.clone(),w=w.clone();for(var E=0,I=0,z;g.cmpn(-E)>0||w.cmpn(-I)>0;){var K=g.andln(3)+E&3,J=w.andln(3)+I&3;K===3&&(K=-1),J===3&&(J=-1);var j;K&1?(z=g.andln(7)+E&7,(z===3||z===5)&&J===2?j=-K:j=K):j=0,S[0].push(j);var W;J&1?(z=w.andln(7)+I&7,(z===3||z===5)&&K===2?W=-J:W=J):W=0,S[1].push(W),2*E===j+1&&(E=1-E),2*I===W+1&&(I=1-I),g.iushrn(1),w.iushrn(1)}return S}e.getJSF=c;function u(g,w,S){var E="_"+w;g.prototype[w]=function(){return this[E]!==void 0?this[E]:this[E]=S.call(this)}}e.cachedProperty=u;function l(g){return typeof g=="string"?e.toArray(g,"hex"):g}e.parseBytes=l;function h(g){return new t(g,"hex","le")}e.intFromLE=h})(gi);var cd={},Gs=ts,ic=gi,ju=ic.getNAF,u7=ic.getJSF,$u=ic.assert;function Ss(r,e){this.type=r,this.p=new Gs(e.p,16),this.red=e.prime?Gs.red(e.prime):Gs.mont(this.p),this.zero=new Gs(0).toRed(this.red),this.one=new Gs(1).toRed(this.red),this.two=new Gs(2).toRed(this.red),this.n=e.n&&new Gs(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var ff=Ss;Ss.prototype.point=function(){throw new Error("Not implemented")};Ss.prototype.validate=function(){throw new Error("Not implemented")};Ss.prototype._fixedNafMul=function(e,t){$u(e.precomputed);var i=e._getDoubles(),s=ju(t,1,this._bitLength),a=(1<<i.step+1)-(i.step%2===0?2:1);a/=3;var c=[],u,l;for(u=0;u<s.length;u+=i.step){l=0;for(var h=u+i.step-1;h>=u;h--)l=(l<<1)+s[h];c.push(l)}for(var g=this.jpoint(null,null,null),w=this.jpoint(null,null,null),S=a;S>0;S--){for(u=0;u<c.length;u++)l=c[u],l===S?w=w.mixedAdd(i.points[u]):l===-S&&(w=w.mixedAdd(i.points[u].neg()));g=g.add(w)}return g.toP()};Ss.prototype._wnafMul=function(e,t){var i=4,s=e._getNAFPoints(i);i=s.wnd;for(var a=s.points,c=ju(t,i,this._bitLength),u=this.jpoint(null,null,null),l=c.length-1;l>=0;l--){for(var h=0;l>=0&&c[l]===0;l--)h++;if(l>=0&&h++,u=u.dblp(h),l<0)break;var g=c[l];$u(g!==0),e.type==="affine"?g>0?u=u.mixedAdd(a[g-1>>1]):u=u.mixedAdd(a[-g-1>>1].neg()):g>0?u=u.add(a[g-1>>1]):u=u.add(a[-g-1>>1].neg())}return e.type==="affine"?u.toP():u};Ss.prototype._wnafMulAdd=function(e,t,i,s,a){var c=this._wnafT1,u=this._wnafT2,l=this._wnafT3,h=0,g,w,S;for(g=0;g<s;g++){S=t[g];var E=S._getNAFPoints(e);c[g]=E.wnd,u[g]=E.points}for(g=s-1;g>=1;g-=2){var I=g-1,z=g;if(c[I]!==1||c[z]!==1){l[I]=ju(i[I],c[I],this._bitLength),l[z]=ju(i[z],c[z],this._bitLength),h=Math.max(l[I].length,h),h=Math.max(l[z].length,h);continue}var K=[t[I],null,null,t[z]];t[I].y.cmp(t[z].y)===0?(K[1]=t[I].add(t[z]),K[2]=t[I].toJ().mixedAdd(t[z].neg())):t[I].y.cmp(t[z].y.redNeg())===0?(K[1]=t[I].toJ().mixedAdd(t[z]),K[2]=t[I].add(t[z].neg())):(K[1]=t[I].toJ().mixedAdd(t[z]),K[2]=t[I].toJ().mixedAdd(t[z].neg()));var J=[-3,-1,-5,-7,0,7,5,1,3],j=u7(i[I],i[z]);for(h=Math.max(j[0].length,h),l[I]=new Array(h),l[z]=new Array(h),w=0;w<h;w++){var W=j[0][w]|0,B=j[1][w]|0;l[I][w]=J[(W+1)*3+(B+1)],l[z][w]=0,u[I]=K}}var U=this.jpoint(null,null,null),H=this._wnafT4;for(g=h;g>=0;g--){for(var m=0;g>=0;){var N=!0;for(w=0;w<s;w++)H[w]=l[w][g]|0,H[w]!==0&&(N=!1);if(!N)break;m++,g--}if(g>=0&&m++,U=U.dblp(m),g<0)break;for(w=0;w<s;w++){var ne=H[w];ne!==0&&(ne>0?S=u[w][ne-1>>1]:ne<0&&(S=u[w][-ne-1>>1].neg()),S.type==="affine"?U=U.mixedAdd(S):U=U.add(S))}}for(g=0;g<s;g++)u[g]=null;return a?U:U.toP()};function ji(r,e){this.curve=r,this.type=e,this.precomputed=null}Ss.BasePoint=ji;ji.prototype.eq=function(){throw new Error("Not implemented")};ji.prototype.validate=function(){return this.curve.validate(this)};Ss.prototype.decodePoint=function(e,t){e=ic.toArray(e,t);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*i){e[0]===6?$u(e[e.length-1]%2===0):e[0]===7&&$u(e[e.length-1]%2===1);var s=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return s}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")};ji.prototype.encodeCompressed=function(e){return this.encode(e,!0)};ji.prototype._encode=function(e){var t=this.curve.p.byteLength(),i=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",t))};ji.prototype.encode=function(e,t){return ic.encode(this._encode(t),e)};ji.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};ji.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};ji.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],s=this,a=0;a<t;a+=e){for(var c=0;c<e;c++)s=s.dbl();i.push(s)}return{step:e,points:i}};ji.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],i=(1<<e)-1,s=i===1?null:this.dbl(),a=1;a<i;a++)t[a]=t[a-1].add(s);return{wnd:e,points:t}};ji.prototype._getBeta=function(){return null};ji.prototype.dblp=function(e){for(var t=this,i=0;i<e;i++)t=t.dbl();return t};var f7=gi,tr=ts,ud=ed,Va=ff,h7=f7.assert;function $i(r){Va.call(this,"short",r),this.a=new tr(r.a,16).toRed(this.red),this.b=new tr(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}ud($i,Va);var l7=$i;$i.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,i;if(e.beta)t=new tr(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);t=s[0].cmp(s[1])<0?s[0]:s[1],t=t.toRed(this.red)}if(e.lambda)i=new tr(e.lambda,16);else{var a=this._getEndoRoots(this.n);this.g.mul(a[0]).x.cmp(this.g.x.redMul(t))===0?i=a[0]:(i=a[1],h7(this.g.mul(i).x.cmp(this.g.x.redMul(t))===0))}var c;return e.basis?c=e.basis.map(function(u){return{a:new tr(u.a,16),b:new tr(u.b,16)}}):c=this._getEndoBasis(i),{beta:t,lambda:i,basis:c}}};$i.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:tr.mont(e),i=new tr(2).toRed(t).redInvm(),s=i.redNeg(),a=new tr(3).toRed(t).redNeg().redSqrt().redMul(i),c=s.redAdd(a).fromRed(),u=s.redSub(a).fromRed();return[c,u]};$i.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,s=this.n.clone(),a=new tr(1),c=new tr(0),u=new tr(0),l=new tr(1),h,g,w,S,E,I,z,K=0,J,j;i.cmpn(0)!==0;){var W=s.div(i);J=s.sub(W.mul(i)),j=u.sub(W.mul(a));var B=l.sub(W.mul(c));if(!w&&J.cmp(t)<0)h=z.neg(),g=a,w=J.neg(),S=j;else if(w&&++K===2)break;z=J,s=i,i=J,u=a,a=j,l=c,c=B}E=J.neg(),I=j;var U=w.sqr().add(S.sqr()),H=E.sqr().add(I.sqr());return H.cmp(U)>=0&&(E=h,I=g),w.negative&&(w=w.neg(),S=S.neg()),E.negative&&(E=E.neg(),I=I.neg()),[{a:w,b:S},{a:E,b:I}]};$i.prototype._endoSplit=function(e){var t=this.endo.basis,i=t[0],s=t[1],a=s.b.mul(e).divRound(this.n),c=i.b.neg().mul(e).divRound(this.n),u=a.mul(i.a),l=c.mul(s.a),h=a.mul(i.b),g=c.mul(s.b),w=e.sub(u).sub(l),S=h.add(g).neg();return{k1:w,k2:S}};$i.prototype.pointFromX=function(e,t){e=new tr(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),s=i.redSqrt();if(s.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var a=s.fromRed().isOdd();return(t&&!a||!t&&a)&&(s=s.redNeg()),this.point(e,s)};$i.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,i=e.y,s=this.a.redMul(t),a=t.redSqr().redMul(t).redIAdd(s).redIAdd(this.b);return i.redSqr().redISub(a).cmpn(0)===0};$i.prototype._endoWnafMulAdd=function(e,t,i){for(var s=this._endoWnafT1,a=this._endoWnafT2,c=0;c<e.length;c++){var u=this._endoSplit(t[c]),l=e[c],h=l._getBeta();u.k1.negative&&(u.k1.ineg(),l=l.neg(!0)),u.k2.negative&&(u.k2.ineg(),h=h.neg(!0)),s[c*2]=l,s[c*2+1]=h,a[c*2]=u.k1,a[c*2+1]=u.k2}for(var g=this._wnafMulAdd(1,s,a,c*2,i),w=0;w<c*2;w++)s[w]=null,a[w]=null;return g};function _r(r,e,t,i){Va.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new tr(e,16),this.y=new tr(t,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}ud(_r,Va.BasePoint);$i.prototype.point=function(e,t,i){return new _r(this,e,t,i)};$i.prototype.pointFromJSON=function(e,t){return _r.fromJSON(this,e,t)};_r.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,s=function(a){return i.point(a.x.redMul(i.endo.beta),a.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(s)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(s)}}}return t}};_r.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};_r.fromJSON=function(e,t,i){typeof t=="string"&&(t=JSON.parse(t));var s=e.point(t[0],t[1],i);if(!t[2])return s;function a(u){return e.point(u[0],u[1],i)}var c=t[2];return s.precomputed={beta:null,doubles:c.doubles&&{step:c.doubles.step,points:[s].concat(c.doubles.points.map(a))},naf:c.naf&&{wnd:c.naf.wnd,points:[s].concat(c.naf.points.map(a))}},s};_r.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};_r.prototype.isInfinity=function(){return this.inf};_r.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var i=t.redSqr().redISub(this.x).redISub(e.x),s=t.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)};_r.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,i=this.x.redSqr(),s=e.redInvm(),a=i.redAdd(i).redIAdd(i).redIAdd(t).redMul(s),c=a.redSqr().redISub(this.x.redAdd(this.x)),u=a.redMul(this.x.redSub(c)).redISub(this.y);return this.curve.point(c,u)};_r.prototype.getX=function(){return this.x.fromRed()};_r.prototype.getY=function(){return this.y.fromRed()};_r.prototype.mul=function(e){return e=new tr(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};_r.prototype.mulAdd=function(e,t,i){var s=[this,t],a=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,a):this.curve._wnafMulAdd(1,s,a,2)};_r.prototype.jmulAdd=function(e,t,i){var s=[this,t],a=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,a,!0):this.curve._wnafMulAdd(1,s,a,2,!0)};_r.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};_r.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,s=function(a){return a.neg()};t.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(s)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(s)}}}return t};_r.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function xr(r,e,t,i){Va.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new tr(0)):(this.x=new tr(e,16),this.y=new tr(t,16),this.z=new tr(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}ud(xr,Va.BasePoint);$i.prototype.jpoint=function(e,t,i){return new xr(this,e,t,i)};xr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),i=this.x.redMul(t),s=this.y.redMul(t).redMul(e);return this.curve.point(i,s)};xr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};xr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(t),a=e.x.redMul(i),c=this.y.redMul(t.redMul(e.z)),u=e.y.redMul(i.redMul(this.z)),l=s.redSub(a),h=c.redSub(u);if(l.cmpn(0)===0)return h.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var g=l.redSqr(),w=g.redMul(l),S=s.redMul(g),E=h.redSqr().redIAdd(w).redISub(S).redISub(S),I=h.redMul(S.redISub(E)).redISub(c.redMul(w)),z=this.z.redMul(e.z).redMul(l);return this.curve.jpoint(E,I,z)};xr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),i=this.x,s=e.x.redMul(t),a=this.y,c=e.y.redMul(t).redMul(this.z),u=i.redSub(s),l=a.redSub(c);if(u.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=u.redSqr(),g=h.redMul(u),w=i.redMul(h),S=l.redSqr().redIAdd(g).redISub(w).redISub(w),E=l.redMul(w.redISub(S)).redISub(a.redMul(g)),I=this.z.redMul(u);return this.curve.jpoint(S,E,I)};xr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var i=this;for(t=0;t<e;t++)i=i.dbl();return i}var s=this.curve.a,a=this.curve.tinv,c=this.x,u=this.y,l=this.z,h=l.redSqr().redSqr(),g=u.redAdd(u);for(t=0;t<e;t++){var w=c.redSqr(),S=g.redSqr(),E=S.redSqr(),I=w.redAdd(w).redIAdd(w).redIAdd(s.redMul(h)),z=c.redMul(S),K=I.redSqr().redISub(z.redAdd(z)),J=z.redISub(K),j=I.redMul(J);j=j.redIAdd(j).redISub(E);var W=g.redMul(l);t+1<e&&(h=h.redMul(E)),c=K,l=W,g=j}return this.curve.jpoint(c,g.redMul(a),l)};xr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};xr.prototype._zeroDbl=function(){var e,t,i;if(this.zOne){var s=this.x.redSqr(),a=this.y.redSqr(),c=a.redSqr(),u=this.x.redAdd(a).redSqr().redISub(s).redISub(c);u=u.redIAdd(u);var l=s.redAdd(s).redIAdd(s),h=l.redSqr().redISub(u).redISub(u),g=c.redIAdd(c);g=g.redIAdd(g),g=g.redIAdd(g),e=h,t=l.redMul(u.redISub(h)).redISub(g),i=this.y.redAdd(this.y)}else{var w=this.x.redSqr(),S=this.y.redSqr(),E=S.redSqr(),I=this.x.redAdd(S).redSqr().redISub(w).redISub(E);I=I.redIAdd(I);var z=w.redAdd(w).redIAdd(w),K=z.redSqr(),J=E.redIAdd(E);J=J.redIAdd(J),J=J.redIAdd(J),e=K.redISub(I).redISub(I),t=z.redMul(I.redISub(e)).redISub(J),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,t,i)};xr.prototype._threeDbl=function(){var e,t,i;if(this.zOne){var s=this.x.redSqr(),a=this.y.redSqr(),c=a.redSqr(),u=this.x.redAdd(a).redSqr().redISub(s).redISub(c);u=u.redIAdd(u);var l=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),h=l.redSqr().redISub(u).redISub(u);e=h;var g=c.redIAdd(c);g=g.redIAdd(g),g=g.redIAdd(g),t=l.redMul(u.redISub(h)).redISub(g),i=this.y.redAdd(this.y)}else{var w=this.z.redSqr(),S=this.y.redSqr(),E=this.x.redMul(S),I=this.x.redSub(w).redMul(this.x.redAdd(w));I=I.redAdd(I).redIAdd(I);var z=E.redIAdd(E);z=z.redIAdd(z);var K=z.redAdd(z);e=I.redSqr().redISub(K),i=this.y.redAdd(this.z).redSqr().redISub(S).redISub(w);var J=S.redSqr();J=J.redIAdd(J),J=J.redIAdd(J),J=J.redIAdd(J),t=I.redMul(z.redISub(e)).redISub(J)}return this.curve.jpoint(e,t,i)};xr.prototype._dbl=function(){var e=this.curve.a,t=this.x,i=this.y,s=this.z,a=s.redSqr().redSqr(),c=t.redSqr(),u=i.redSqr(),l=c.redAdd(c).redIAdd(c).redIAdd(e.redMul(a)),h=t.redAdd(t);h=h.redIAdd(h);var g=h.redMul(u),w=l.redSqr().redISub(g.redAdd(g)),S=g.redISub(w),E=u.redSqr();E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E);var I=l.redMul(S).redISub(E),z=i.redAdd(i).redMul(s);return this.curve.jpoint(w,I,z)};xr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr(),s=t.redSqr(),a=e.redAdd(e).redIAdd(e),c=a.redSqr(),u=this.x.redAdd(t).redSqr().redISub(e).redISub(s);u=u.redIAdd(u),u=u.redAdd(u).redIAdd(u),u=u.redISub(c);var l=u.redSqr(),h=s.redIAdd(s);h=h.redIAdd(h),h=h.redIAdd(h),h=h.redIAdd(h);var g=a.redIAdd(u).redSqr().redISub(c).redISub(l).redISub(h),w=t.redMul(g);w=w.redIAdd(w),w=w.redIAdd(w);var S=this.x.redMul(l).redISub(w);S=S.redIAdd(S),S=S.redIAdd(S);var E=this.y.redMul(g.redMul(h.redISub(g)).redISub(u.redMul(l)));E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E);var I=this.z.redAdd(u).redSqr().redISub(i).redISub(l);return this.curve.jpoint(S,E,I)};xr.prototype.mul=function(e,t){return e=new tr(e,t),this.curve._wnafMul(this,e)};xr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var s=t.redMul(this.z),a=i.redMul(e.z);return this.y.redMul(a).redISub(e.y.redMul(s)).cmpn(0)===0};xr.prototype.eqXToP=function(e){var t=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(i)===0)return!0;for(var s=e.clone(),a=this.curve.redN.redMul(t);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(a),this.x.cmp(i)===0)return!0}};xr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};xr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var La=ts,Cb=ed,hf=ff,d7=gi;function Ga(r){hf.call(this,"mont",r),this.a=new La(r.a,16).toRed(this.red),this.b=new La(r.b,16).toRed(this.red),this.i4=new La(4).toRed(this.red).redInvm(),this.two=new La(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Cb(Ga,hf);var p7=Ga;Ga.prototype.validate=function(e){var t=e.normalize().x,i=t.redSqr(),s=i.redMul(t).redAdd(i.redMul(this.a)).redAdd(t),a=s.redSqrt();return a.redSqr().cmp(s)===0};function wr(r,e,t){hf.BasePoint.call(this,r,"projective"),e===null&&t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new La(e,16),this.z=new La(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Cb(wr,hf.BasePoint);Ga.prototype.decodePoint=function(e,t){return this.point(d7.toArray(e,t),1)};Ga.prototype.point=function(e,t){return new wr(this,e,t)};Ga.prototype.pointFromJSON=function(e){return wr.fromJSON(this,e)};wr.prototype.precompute=function(){};wr.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};wr.fromJSON=function(e,t){return new wr(e,t[0],t[1]||e.one)};wr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};wr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};wr.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),i=this.x.redSub(this.z),s=i.redSqr(),a=t.redSub(s),c=t.redMul(s),u=a.redMul(s.redAdd(this.curve.a24.redMul(a)));return this.curve.point(c,u)};wr.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};wr.prototype.diffAdd=function(e,t){var i=this.x.redAdd(this.z),s=this.x.redSub(this.z),a=e.x.redAdd(e.z),c=e.x.redSub(e.z),u=c.redMul(i),l=a.redMul(s),h=t.z.redMul(u.redAdd(l).redSqr()),g=t.x.redMul(u.redISub(l).redSqr());return this.curve.point(h,g)};wr.prototype.mul=function(e){for(var t=e.clone(),i=this,s=this.curve.point(null,null),a=this,c=[];t.cmpn(0)!==0;t.iushrn(1))c.push(t.andln(1));for(var u=c.length-1;u>=0;u--)c[u]===0?(i=i.diffAdd(s,a),s=s.dbl()):(s=i.diffAdd(s,a),i=i.dbl());return s};wr.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};wr.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};wr.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};wr.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};wr.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var g7=gi,Xn=ts,Nb=ed,lf=ff,b7=g7.assert;function Cn(r){this.twisted=(r.a|0)!==1,this.mOneA=this.twisted&&(r.a|0)===-1,this.extended=this.mOneA,lf.call(this,"edwards",r),this.a=new Xn(r.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Xn(r.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Xn(r.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),b7(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(r.c|0)===1}Nb(Cn,lf);var v7=Cn;Cn.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};Cn.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};Cn.prototype.jpoint=function(e,t,i,s){return this.point(e,t,i,s)};Cn.prototype.pointFromX=function(e,t){e=new Xn(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),s=this.c2.redSub(this.a.redMul(i)),a=this.one.redSub(this.c2.redMul(this.d).redMul(i)),c=s.redMul(a.redInvm()),u=c.redSqrt();if(u.redSqr().redSub(c).cmp(this.zero)!==0)throw new Error("invalid point");var l=u.fromRed().isOdd();return(t&&!l||!t&&l)&&(u=u.redNeg()),this.point(e,u)};Cn.prototype.pointFromY=function(e,t){e=new Xn(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),s=i.redSub(this.c2),a=i.redMul(this.d).redMul(this.c2).redSub(this.a),c=s.redMul(a.redInvm());if(c.cmp(this.zero)===0){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var u=c.redSqrt();if(u.redSqr().redSub(c).cmp(this.zero)!==0)throw new Error("invalid point");return u.fromRed().isOdd()!==t&&(u=u.redNeg()),this.point(u,e)};Cn.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),i=e.y.redSqr(),s=t.redMul(this.a).redAdd(i),a=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(i)));return s.cmp(a)===0};function Ht(r,e,t,i,s){lf.BasePoint.call(this,r,"projective"),e===null&&t===null&&i===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Xn(e,16),this.y=new Xn(t,16),this.z=i?new Xn(i,16):this.curve.one,this.t=s&&new Xn(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}Nb(Ht,lf.BasePoint);Cn.prototype.pointFromJSON=function(e){return Ht.fromJSON(this,e)};Cn.prototype.point=function(e,t,i,s){return new Ht(this,e,t,i,s)};Ht.fromJSON=function(e,t){return new Ht(e,t[0],t[1],t[2])};Ht.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Ht.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Ht.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var s=this.curve._mulA(e),a=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),c=s.redAdd(t),u=c.redSub(i),l=s.redSub(t),h=a.redMul(u),g=c.redMul(l),w=a.redMul(l),S=u.redMul(c);return this.curve.point(h,g,S,w)};Ht.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),i=this.y.redSqr(),s,a,c,u,l,h;if(this.curve.twisted){u=this.curve._mulA(t);var g=u.redAdd(i);this.zOne?(s=e.redSub(t).redSub(i).redMul(g.redSub(this.curve.two)),a=g.redMul(u.redSub(i)),c=g.redSqr().redSub(g).redSub(g)):(l=this.z.redSqr(),h=g.redSub(l).redISub(l),s=e.redSub(t).redISub(i).redMul(h),a=g.redMul(u.redSub(i)),c=g.redMul(h))}else u=t.redAdd(i),l=this.curve._mulC(this.z).redSqr(),h=u.redSub(l).redSub(l),s=this.curve._mulC(e.redISub(u)).redMul(h),a=this.curve._mulC(u).redMul(t.redISub(i)),c=u.redMul(h);return this.curve.point(s,a,c)};Ht.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Ht.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),s=this.t.redMul(this.curve.dd).redMul(e.t),a=this.z.redMul(e.z.redAdd(e.z)),c=i.redSub(t),u=a.redSub(s),l=a.redAdd(s),h=i.redAdd(t),g=c.redMul(u),w=l.redMul(h),S=c.redMul(h),E=u.redMul(l);return this.curve.point(g,w,E,S)};Ht.prototype._projAdd=function(e){var t=this.z.redMul(e.z),i=t.redSqr(),s=this.x.redMul(e.x),a=this.y.redMul(e.y),c=this.curve.d.redMul(s).redMul(a),u=i.redSub(c),l=i.redAdd(c),h=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(s).redISub(a),g=t.redMul(u).redMul(h),w,S;return this.curve.twisted?(w=t.redMul(l).redMul(a.redSub(this.curve._mulA(s))),S=u.redMul(l)):(w=t.redMul(l).redMul(a.redSub(s)),S=this.curve._mulC(u).redMul(l)),this.curve.point(g,w,S)};Ht.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Ht.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Ht.prototype.mulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!1)};Ht.prototype.jmulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!0)};Ht.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Ht.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Ht.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Ht.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Ht.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Ht.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(s),this.x.cmp(t)===0)return!0}};Ht.prototype.toP=Ht.prototype.normalize;Ht.prototype.mixedAdd=Ht.prototype.add;(function(r){var e=r;e.base=ff,e.short=l7,e.mont=p7,e.edwards=v7})(cd);var df={},kh,Qp;function m7(){return Qp||(Qp=1,kh={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),kh}(function(r){var e=r,t=ob(),i=cd,s=gi,a=s.assert;function c(h){h.type==="short"?this.curve=new i.short(h):h.type==="edwards"?this.curve=new i.edwards(h):this.curve=new i.mont(h),this.g=this.curve.g,this.n=this.curve.n,this.hash=h.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=c;function u(h,g){Object.defineProperty(e,h,{configurable:!0,enumerable:!0,get:function(){var w=new c(g);return Object.defineProperty(e,h,{configurable:!0,enumerable:!0,value:w}),w}})}u("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:t.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),u("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:t.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),u("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:t.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),u("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:t.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),u("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:t.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),u("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["9"]}),u("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var l;try{l=m7()}catch{l=void 0}u("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:t.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",l]})})(df);var y7=ts,w7=gi,Nl=w7.assert;function Nr(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var _7=Nr;Nr.fromPublic=function(e,t,i){return t instanceof Nr?t:new Nr(e,{pub:t,pubEnc:i})};Nr.fromPrivate=function(e,t,i){return t instanceof Nr?t:new Nr(e,{priv:t,privEnc:i})};Nr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Nr.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Nr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Nr.prototype._importPrivate=function(e,t){this.priv=new y7(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Nr.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?Nl(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Nl(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Nr.prototype.derive=function(e){return e.validate()||Nl(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Nr.prototype.sign=function(e,t,i){return this.ec.sign(e,this,t,i)};Nr.prototype.verify=function(e,t,i){return this.ec.verify(e,t,this,void 0,i)};Nr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var zu=ts,fd=gi,E7=fd.assert;function pf(r,e){if(r instanceof pf)return r;this._importDER(r,e)||(E7(r.r&&r.s,"Signature without r or s"),this.r=new zu(r.r,16),this.s=new zu(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var A7=pf;function S7(){this.place=0}function Hh(r,e){var t=r[e.place++];if(!(t&128))return t;var i=t&15;if(i===0||i>4||r[e.place]===0)return!1;for(var s=0,a=0,c=e.place;a<i;a++,c++)s<<=8,s|=r[c],s>>>=0;return s<=127?!1:(e.place=c,s)}function Xp(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}pf.prototype._importDER=function(e,t){e=fd.toArray(e,t);var i=new S7;if(e[i.place++]!==48)return!1;var s=Hh(e,i);if(s===!1||s+i.place!==e.length||e[i.place++]!==2)return!1;var a=Hh(e,i);if(a===!1||e[i.place]&128)return!1;var c=e.slice(i.place,a+i.place);if(i.place+=a,e[i.place++]!==2)return!1;var u=Hh(e,i);if(u===!1||e.length!==u+i.place||e[i.place]&128)return!1;var l=e.slice(i.place,u+i.place);if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;return this.r=new zu(c),this.s=new zu(l),this.recoveryParam=null,!0};function Kh(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}pf.prototype.toDER=function(e){var t=this.r.toArray(),i=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),i[0]&128&&(i=[0].concat(i)),t=Xp(t),i=Xp(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var s=[2];Kh(s,t.length),s=s.concat(t),s.push(2),Kh(s,i.length);var a=s.concat(i),c=[48];return Kh(c,a.length),c=c.concat(a),fd.encode(c,e)};var tn=ts,Rb=n8(),I7=gi,Vh=df,x7=cb(),Qs=I7.assert,hd=_7,gf=A7;function Li(r){if(!(this instanceof Li))return new Li(r);typeof r=="string"&&(Qs(Object.prototype.hasOwnProperty.call(Vh,r),"Unknown curve "+r),r=Vh[r]),r instanceof Vh.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var D7=Li;Li.prototype.keyPair=function(e){return new hd(this,e)};Li.prototype.keyFromPrivate=function(e,t){return hd.fromPrivate(this,e,t)};Li.prototype.keyFromPublic=function(e,t){return hd.fromPublic(this,e,t)};Li.prototype.genKeyPair=function(e){e||(e={});for(var t=new Rb({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||x7(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),s=this.n.sub(new tn(2));;){var a=new tn(t.generate(i));if(!(a.cmp(s)>0))return a.iaddn(1),this.keyFromPrivate(a)}};Li.prototype._truncateToN=function(e,t,i){var s;if(tn.isBN(e)||typeof e=="number")e=new tn(e,16),s=e.byteLength();else if(typeof e=="object")s=e.length,e=new tn(e,16);else{var a=e.toString();s=a.length+1>>>1,e=new tn(a,16)}typeof i!="number"&&(i=s*8);var c=i-this.n.bitLength();return c>0&&(e=e.ushrn(c)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};Li.prototype.sign=function(e,t,i,s){if(typeof i=="object"&&(s=i,i=null),s||(s={}),typeof e!="string"&&typeof e!="number"&&!tn.isBN(e)){Qs(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),Qs(e.length>>>0===e.length);for(var a=0;a<e.length;a++)Qs((e[a]&255)===e[a])}t=this.keyFromPrivate(t,i),e=this._truncateToN(e,!1,s.msgBitLength),Qs(!e.isNeg(),"Can not sign a negative message");var c=this.n.byteLength(),u=t.getPrivate().toArray("be",c),l=e.toArray("be",c);Qs(new tn(l).eq(e),"Can not sign message");for(var h=new Rb({hash:this.hash,entropy:u,nonce:l,pers:s.pers,persEnc:s.persEnc||"utf8"}),g=this.n.sub(new tn(1)),w=0;;w++){var S=s.k?s.k(w):new tn(h.generate(this.n.byteLength()));if(S=this._truncateToN(S,!0),!(S.cmpn(1)<=0||S.cmp(g)>=0)){var E=this.g.mul(S);if(!E.isInfinity()){var I=E.getX(),z=I.umod(this.n);if(z.cmpn(0)!==0){var K=S.invm(this.n).mul(z.mul(t.getPrivate()).iadd(e));if(K=K.umod(this.n),K.cmpn(0)!==0){var J=(E.getY().isOdd()?1:0)|(I.cmp(z)!==0?2:0);return s.canonical&&K.cmp(this.nh)>0&&(K=this.n.sub(K),J^=1),new gf({r:z,s:K,recoveryParam:J})}}}}}};Li.prototype.verify=function(e,t,i,s,a){a||(a={}),e=this._truncateToN(e,!1,a.msgBitLength),i=this.keyFromPublic(i,s),t=new gf(t,"hex");var c=t.r,u=t.s;if(c.cmpn(1)<0||c.cmp(this.n)>=0||u.cmpn(1)<0||u.cmp(this.n)>=0)return!1;var l=u.invm(this.n),h=l.mul(e).umod(this.n),g=l.mul(c).umod(this.n),w;return this.curve._maxwellTrick?(w=this.g.jmulAdd(h,i.getPublic(),g),w.isInfinity()?!1:w.eqXToP(c)):(w=this.g.mulAdd(h,i.getPublic(),g),w.isInfinity()?!1:w.getX().umod(this.n).cmp(c)===0)};Li.prototype.recoverPubKey=function(r,e,t,i){Qs((3&t)===t,"The recovery param is more than two bits"),e=new gf(e,i);var s=this.n,a=new tn(r),c=e.r,u=e.s,l=t&1,h=t>>1;if(c.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");h?c=this.curve.pointFromX(c.add(this.curve.n),l):c=this.curve.pointFromX(c,l);var g=e.r.invm(s),w=s.sub(a).mul(g).umod(s),S=u.mul(g).umod(s);return this.g.mulAdd(w,c,S)};Li.prototype.getKeyRecoveryParam=function(r,e,t,i){if(e=new gf(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var s=0;s<4;s++){var a;try{a=this.recoverPubKey(r,e,s)}catch{continue}if(a.eq(t))return s}throw new Error("Unable to find valid recovery factor")};var nc=gi,Tb=nc.assert,Zp=nc.parseBytes,Wa=nc.cachedProperty;function yr(r,e){this.eddsa=r,this._secret=Zp(e.secret),r.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=Zp(e.pub)}yr.fromPublic=function(e,t){return t instanceof yr?t:new yr(e,{pub:t})};yr.fromSecret=function(e,t){return t instanceof yr?t:new yr(e,{secret:t})};yr.prototype.secret=function(){return this._secret};Wa(yr,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Wa(yr,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Wa(yr,"privBytes",function(){var e=this.eddsa,t=this.hash(),i=e.encodingLength-1,s=t.slice(0,e.encodingLength);return s[0]&=248,s[i]&=127,s[i]|=64,s});Wa(yr,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Wa(yr,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Wa(yr,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});yr.prototype.sign=function(e){return Tb(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};yr.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)};yr.prototype.getSecret=function(e){return Tb(this._secret,"KeyPair is public only"),nc.encode(this.secret(),e)};yr.prototype.getPublic=function(e){return nc.encode(this.pubBytes(),e)};var M7=yr,P7=ts,bf=gi,e1=bf.assert,vf=bf.cachedProperty,O7=bf.parseBytes;function aa(r,e){this.eddsa=r,typeof e!="object"&&(e=O7(e)),Array.isArray(e)&&(e1(e.length===r.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,r.encodingLength),S:e.slice(r.encodingLength)}),e1(e.R&&e.S,"Signature without R or S"),r.isPoint(e.R)&&(this._R=e.R),e.S instanceof P7&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}vf(aa,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});vf(aa,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});vf(aa,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});vf(aa,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});aa.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};aa.prototype.toHex=function(){return bf.encode(this.toBytes(),"hex").toUpperCase()};var C7=aa,N7=ob(),R7=df,za=gi,T7=za.assert,Fb=za.parseBytes,Bb=M7,t1=C7;function ri(r){if(T7(r==="ed25519","only tested with ed25519 so far"),!(this instanceof ri))return new ri(r);r=R7[r].curve,this.curve=r,this.g=r.g,this.g.precompute(r.n.bitLength()+1),this.pointClass=r.point().constructor,this.encodingLength=Math.ceil(r.n.bitLength()/8),this.hash=N7.sha512}var F7=ri;ri.prototype.sign=function(e,t){e=Fb(e);var i=this.keyFromSecret(t),s=this.hashInt(i.messagePrefix(),e),a=this.g.mul(s),c=this.encodePoint(a),u=this.hashInt(c,i.pubBytes(),e).mul(i.priv()),l=s.add(u).umod(this.curve.n);return this.makeSignature({R:a,S:l,Rencoded:c})};ri.prototype.verify=function(e,t,i){if(e=Fb(e),t=this.makeSignature(t),t.S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var s=this.keyFromPublic(i),a=this.hashInt(t.Rencoded(),s.pubBytes(),e),c=this.g.mul(t.S()),u=t.R().add(s.pub().mul(a));return u.eq(c)};ri.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return za.intFromLE(e.digest()).umod(this.curve.n)};ri.prototype.keyFromPublic=function(e){return Bb.fromPublic(this,e)};ri.prototype.keyFromSecret=function(e){return Bb.fromSecret(this,e)};ri.prototype.makeSignature=function(e){return e instanceof t1?e:new t1(this,e)};ri.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t};ri.prototype.decodePoint=function(e){e=za.parseBytes(e);var t=e.length-1,i=e.slice(0,t).concat(e[t]&-129),s=(e[t]&128)!==0,a=za.intFromLE(i);return this.curve.pointFromY(a,s)};ri.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};ri.prototype.decodeInt=function(e){return za.intFromLE(e)};ri.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(r){var e=r;e.version=c7.version,e.utils=gi,e.rand=cb(),e.curve=cd,e.curves=df,e.ec=D7,e.eddsa=F7})(Ob);var ld={},qb={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=ot,t=pi;r.DIGEST_LENGTH=64,r.BLOCK_SIZE=128;var i=function(){function u(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return u.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},u.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},u.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},u.prototype.update=function(l,h){if(h===void 0&&(h=l.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var g=0;if(this._bytesHashed+=h,this._bufferLength>0){for(;this._bufferLength<r.BLOCK_SIZE&&h>0;)this._buffer[this._bufferLength++]=l[g++],h--;this._bufferLength===this.blockSize&&(a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(h>=this.blockSize&&(g=a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,l,g,h),h%=this.blockSize);h>0;)this._buffer[this._bufferLength++]=l[g++],h--;return this},u.prototype.finish=function(l){if(!this._finished){var h=this._bytesHashed,g=this._bufferLength,w=h/536870912|0,S=h<<3,E=h%128<112?128:256;this._buffer[g]=128;for(var I=g+1;I<E-8;I++)this._buffer[I]=0;e.writeUint32BE(w,this._buffer,E-8),e.writeUint32BE(S,this._buffer,E-4),a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,E),this._finished=!0}for(var I=0;I<this.digestLength/8;I++)e.writeUint32BE(this._stateHi[I],l,I*8),e.writeUint32BE(this._stateLo[I],l,I*8+4);return this},u.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},u.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},u.prototype.restoreState=function(l){return this._stateHi.set(l.stateHi),this._stateLo.set(l.stateLo),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},u.prototype.cleanSavedState=function(l){t.wipe(l.stateHi),t.wipe(l.stateLo),l.buffer&&t.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},u}();r.SHA512=i;var s=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function a(u,l,h,g,w,S,E){for(var I=h[0],z=h[1],K=h[2],J=h[3],j=h[4],W=h[5],B=h[6],U=h[7],H=g[0],m=g[1],N=g[2],ne=g[3],le=g[4],pe=g[5],ve=g[6],d=g[7],p,_,D,P,C,F,M,v;E>=128;){for(var R=0;R<16;R++){var re=8*R+S;u[R]=e.readUint32BE(w,re),l[R]=e.readUint32BE(w,re+4)}for(var R=0;R<80;R++){var he=I,A=z,ee=K,L=J,$=j,V=W,b=B,q=U,te=H,ae=m,oe=N,Me=ne,Oe=le,Ie=pe,At=ve,$e=d;if(p=U,_=d,C=_&65535,F=_>>>16,M=p&65535,v=p>>>16,p=(j>>>14|le<<18)^(j>>>18|le<<14)^(le>>>9|j<<23),_=(le>>>14|j<<18)^(le>>>18|j<<14)^(j>>>9|le<<23),C+=_&65535,F+=_>>>16,M+=p&65535,v+=p>>>16,p=j&W^~j&B,_=le&pe^~le&ve,C+=_&65535,F+=_>>>16,M+=p&65535,v+=p>>>16,p=s[R*2],_=s[R*2+1],C+=_&65535,F+=_>>>16,M+=p&65535,v+=p>>>16,p=u[R%16],_=l[R%16],C+=_&65535,F+=_>>>16,M+=p&65535,v+=p>>>16,F+=C>>>16,M+=F>>>16,v+=M>>>16,D=M&65535|v<<16,P=C&65535|F<<16,p=D,_=P,C=_&65535,F=_>>>16,M=p&65535,v=p>>>16,p=(I>>>28|H<<4)^(H>>>2|I<<30)^(H>>>7|I<<25),_=(H>>>28|I<<4)^(I>>>2|H<<30)^(I>>>7|H<<25),C+=_&65535,F+=_>>>16,M+=p&65535,v+=p>>>16,p=I&z^I&K^z&K,_=H&m^H&N^m&N,C+=_&65535,F+=_>>>16,M+=p&65535,v+=p>>>16,F+=C>>>16,M+=F>>>16,v+=M>>>16,q=M&65535|v<<16,$e=C&65535|F<<16,p=L,_=Me,C=_&65535,F=_>>>16,M=p&65535,v=p>>>16,p=D,_=P,C+=_&65535,F+=_>>>16,M+=p&65535,v+=p>>>16,F+=C>>>16,M+=F>>>16,v+=M>>>16,L=M&65535|v<<16,Me=C&65535|F<<16,z=he,K=A,J=ee,j=L,W=$,B=V,U=b,I=q,m=te,N=ae,ne=oe,le=Me,pe=Oe,ve=Ie,d=At,H=$e,R%16===15)for(var re=0;re<16;re++)p=u[re],_=l[re],C=_&65535,F=_>>>16,M=p&65535,v=p>>>16,p=u[(re+9)%16],_=l[(re+9)%16],C+=_&65535,F+=_>>>16,M+=p&65535,v+=p>>>16,D=u[(re+1)%16],P=l[(re+1)%16],p=(D>>>1|P<<31)^(D>>>8|P<<24)^D>>>7,_=(P>>>1|D<<31)^(P>>>8|D<<24)^(P>>>7|D<<25),C+=_&65535,F+=_>>>16,M+=p&65535,v+=p>>>16,D=u[(re+14)%16],P=l[(re+14)%16],p=(D>>>19|P<<13)^(P>>>29|D<<3)^D>>>6,_=(P>>>19|D<<13)^(D>>>29|P<<3)^(P>>>6|D<<26),C+=_&65535,F+=_>>>16,M+=p&65535,v+=p>>>16,F+=C>>>16,M+=F>>>16,v+=M>>>16,u[re]=M&65535|v<<16,l[re]=C&65535|F<<16}p=I,_=H,C=_&65535,F=_>>>16,M=p&65535,v=p>>>16,p=h[0],_=g[0],C+=_&65535,F+=_>>>16,M+=p&65535,v+=p>>>16,F+=C>>>16,M+=F>>>16,v+=M>>>16,h[0]=I=M&65535|v<<16,g[0]=H=C&65535|F<<16,p=z,_=m,C=_&65535,F=_>>>16,M=p&65535,v=p>>>16,p=h[1],_=g[1],C+=_&65535,F+=_>>>16,M+=p&65535,v+=p>>>16,F+=C>>>16,M+=F>>>16,v+=M>>>16,h[1]=z=M&65535|v<<16,g[1]=m=C&65535|F<<16,p=K,_=N,C=_&65535,F=_>>>16,M=p&65535,v=p>>>16,p=h[2],_=g[2],C+=_&65535,F+=_>>>16,M+=p&65535,v+=p>>>16,F+=C>>>16,M+=F>>>16,v+=M>>>16,h[2]=K=M&65535|v<<16,g[2]=N=C&65535|F<<16,p=J,_=ne,C=_&65535,F=_>>>16,M=p&65535,v=p>>>16,p=h[3],_=g[3],C+=_&65535,F+=_>>>16,M+=p&65535,v+=p>>>16,F+=C>>>16,M+=F>>>16,v+=M>>>16,h[3]=J=M&65535|v<<16,g[3]=ne=C&65535|F<<16,p=j,_=le,C=_&65535,F=_>>>16,M=p&65535,v=p>>>16,p=h[4],_=g[4],C+=_&65535,F+=_>>>16,M+=p&65535,v+=p>>>16,F+=C>>>16,M+=F>>>16,v+=M>>>16,h[4]=j=M&65535|v<<16,g[4]=le=C&65535|F<<16,p=W,_=pe,C=_&65535,F=_>>>16,M=p&65535,v=p>>>16,p=h[5],_=g[5],C+=_&65535,F+=_>>>16,M+=p&65535,v+=p>>>16,F+=C>>>16,M+=F>>>16,v+=M>>>16,h[5]=W=M&65535|v<<16,g[5]=pe=C&65535|F<<16,p=B,_=ve,C=_&65535,F=_>>>16,M=p&65535,v=p>>>16,p=h[6],_=g[6],C+=_&65535,F+=_>>>16,M+=p&65535,v+=p>>>16,F+=C>>>16,M+=F>>>16,v+=M>>>16,h[6]=B=M&65535|v<<16,g[6]=ve=C&65535|F<<16,p=U,_=d,C=_&65535,F=_>>>16,M=p&65535,v=p>>>16,p=h[7],_=g[7],C+=_&65535,F+=_>>>16,M+=p&65535,v+=p>>>16,F+=C>>>16,M+=F>>>16,v+=M>>>16,h[7]=U=M&65535|v<<16,g[7]=d=C&65535|F<<16,S+=128,E-=128}return S}function c(u){var l=new i;l.update(u);var h=l.digest();return l.clean(),h}r.hash=c})(qb);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.convertSecretKeyToX25519=r.convertPublicKeyToX25519=r.verify=r.sign=r.extractPublicKeyFromSecretKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.SEED_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=r.SIGNATURE_LENGTH=void 0;const e=As,t=qb,i=pi;r.SIGNATURE_LENGTH=64,r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=64,r.SEED_LENGTH=32;function s(L){const $=new Float64Array(16);if(L)for(let V=0;V<L.length;V++)$[V]=L[V];return $}const a=new Uint8Array(32);a[0]=9;const c=s(),u=s([1]),l=s([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=s([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),g=s([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),w=s([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),S=s([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function E(L,$){for(let V=0;V<16;V++)L[V]=$[V]|0}function I(L){let $=1;for(let V=0;V<16;V++){let b=L[V]+$+65535;$=Math.floor(b/65536),L[V]=b-$*65536}L[0]+=$-1+37*($-1)}function z(L,$,V){const b=~(V-1);for(let q=0;q<16;q++){const te=b&(L[q]^$[q]);L[q]^=te,$[q]^=te}}function K(L,$){const V=s(),b=s();for(let q=0;q<16;q++)b[q]=$[q];I(b),I(b),I(b);for(let q=0;q<2;q++){V[0]=b[0]-65517;for(let ae=1;ae<15;ae++)V[ae]=b[ae]-65535-(V[ae-1]>>16&1),V[ae-1]&=65535;V[15]=b[15]-32767-(V[14]>>16&1);const te=V[15]>>16&1;V[14]&=65535,z(b,V,1-te)}for(let q=0;q<16;q++)L[2*q]=b[q]&255,L[2*q+1]=b[q]>>8}function J(L,$){let V=0;for(let b=0;b<32;b++)V|=L[b]^$[b];return(1&V-1>>>8)-1}function j(L,$){const V=new Uint8Array(32),b=new Uint8Array(32);return K(V,L),K(b,$),J(V,b)}function W(L){const $=new Uint8Array(32);return K($,L),$[0]&1}function B(L,$){for(let V=0;V<16;V++)L[V]=$[2*V]+($[2*V+1]<<8);L[15]&=32767}function U(L,$,V){for(let b=0;b<16;b++)L[b]=$[b]+V[b]}function H(L,$,V){for(let b=0;b<16;b++)L[b]=$[b]-V[b]}function m(L,$,V){let b,q,te=0,ae=0,oe=0,Me=0,Oe=0,Ie=0,At=0,$e=0,De=0,qe=0,_e=0,Ee=0,Ve=0,ye=0,Ae=0,Be=0,we=0,Pe=0,Le=0,Ce=0,Ne=0,st=0,Te=0,Re=0,Jt=0,ut=0,gt=0,Yt=0,yt=0,Et=0,Rr=0,Ge=V[0],ze=V[1],xt=V[2],We=V[3],Ke=V[4],St=V[5],Qe=V[6],Xe=V[7],Dt=V[8],Ze=V[9],Je=V[10],Ot=V[11],Ye=V[12],Ue=V[13],Ft=V[14],et=V[15];b=$[0],te+=b*Ge,ae+=b*ze,oe+=b*xt,Me+=b*We,Oe+=b*Ke,Ie+=b*St,At+=b*Qe,$e+=b*Xe,De+=b*Dt,qe+=b*Ze,_e+=b*Je,Ee+=b*Ot,Ve+=b*Ye,ye+=b*Ue,Ae+=b*Ft,Be+=b*et,b=$[1],ae+=b*Ge,oe+=b*ze,Me+=b*xt,Oe+=b*We,Ie+=b*Ke,At+=b*St,$e+=b*Qe,De+=b*Xe,qe+=b*Dt,_e+=b*Ze,Ee+=b*Je,Ve+=b*Ot,ye+=b*Ye,Ae+=b*Ue,Be+=b*Ft,we+=b*et,b=$[2],oe+=b*Ge,Me+=b*ze,Oe+=b*xt,Ie+=b*We,At+=b*Ke,$e+=b*St,De+=b*Qe,qe+=b*Xe,_e+=b*Dt,Ee+=b*Ze,Ve+=b*Je,ye+=b*Ot,Ae+=b*Ye,Be+=b*Ue,we+=b*Ft,Pe+=b*et,b=$[3],Me+=b*Ge,Oe+=b*ze,Ie+=b*xt,At+=b*We,$e+=b*Ke,De+=b*St,qe+=b*Qe,_e+=b*Xe,Ee+=b*Dt,Ve+=b*Ze,ye+=b*Je,Ae+=b*Ot,Be+=b*Ye,we+=b*Ue,Pe+=b*Ft,Le+=b*et,b=$[4],Oe+=b*Ge,Ie+=b*ze,At+=b*xt,$e+=b*We,De+=b*Ke,qe+=b*St,_e+=b*Qe,Ee+=b*Xe,Ve+=b*Dt,ye+=b*Ze,Ae+=b*Je,Be+=b*Ot,we+=b*Ye,Pe+=b*Ue,Le+=b*Ft,Ce+=b*et,b=$[5],Ie+=b*Ge,At+=b*ze,$e+=b*xt,De+=b*We,qe+=b*Ke,_e+=b*St,Ee+=b*Qe,Ve+=b*Xe,ye+=b*Dt,Ae+=b*Ze,Be+=b*Je,we+=b*Ot,Pe+=b*Ye,Le+=b*Ue,Ce+=b*Ft,Ne+=b*et,b=$[6],At+=b*Ge,$e+=b*ze,De+=b*xt,qe+=b*We,_e+=b*Ke,Ee+=b*St,Ve+=b*Qe,ye+=b*Xe,Ae+=b*Dt,Be+=b*Ze,we+=b*Je,Pe+=b*Ot,Le+=b*Ye,Ce+=b*Ue,Ne+=b*Ft,st+=b*et,b=$[7],$e+=b*Ge,De+=b*ze,qe+=b*xt,_e+=b*We,Ee+=b*Ke,Ve+=b*St,ye+=b*Qe,Ae+=b*Xe,Be+=b*Dt,we+=b*Ze,Pe+=b*Je,Le+=b*Ot,Ce+=b*Ye,Ne+=b*Ue,st+=b*Ft,Te+=b*et,b=$[8],De+=b*Ge,qe+=b*ze,_e+=b*xt,Ee+=b*We,Ve+=b*Ke,ye+=b*St,Ae+=b*Qe,Be+=b*Xe,we+=b*Dt,Pe+=b*Ze,Le+=b*Je,Ce+=b*Ot,Ne+=b*Ye,st+=b*Ue,Te+=b*Ft,Re+=b*et,b=$[9],qe+=b*Ge,_e+=b*ze,Ee+=b*xt,Ve+=b*We,ye+=b*Ke,Ae+=b*St,Be+=b*Qe,we+=b*Xe,Pe+=b*Dt,Le+=b*Ze,Ce+=b*Je,Ne+=b*Ot,st+=b*Ye,Te+=b*Ue,Re+=b*Ft,Jt+=b*et,b=$[10],_e+=b*Ge,Ee+=b*ze,Ve+=b*xt,ye+=b*We,Ae+=b*Ke,Be+=b*St,we+=b*Qe,Pe+=b*Xe,Le+=b*Dt,Ce+=b*Ze,Ne+=b*Je,st+=b*Ot,Te+=b*Ye,Re+=b*Ue,Jt+=b*Ft,ut+=b*et,b=$[11],Ee+=b*Ge,Ve+=b*ze,ye+=b*xt,Ae+=b*We,Be+=b*Ke,we+=b*St,Pe+=b*Qe,Le+=b*Xe,Ce+=b*Dt,Ne+=b*Ze,st+=b*Je,Te+=b*Ot,Re+=b*Ye,Jt+=b*Ue,ut+=b*Ft,gt+=b*et,b=$[12],Ve+=b*Ge,ye+=b*ze,Ae+=b*xt,Be+=b*We,we+=b*Ke,Pe+=b*St,Le+=b*Qe,Ce+=b*Xe,Ne+=b*Dt,st+=b*Ze,Te+=b*Je,Re+=b*Ot,Jt+=b*Ye,ut+=b*Ue,gt+=b*Ft,Yt+=b*et,b=$[13],ye+=b*Ge,Ae+=b*ze,Be+=b*xt,we+=b*We,Pe+=b*Ke,Le+=b*St,Ce+=b*Qe,Ne+=b*Xe,st+=b*Dt,Te+=b*Ze,Re+=b*Je,Jt+=b*Ot,ut+=b*Ye,gt+=b*Ue,Yt+=b*Ft,yt+=b*et,b=$[14],Ae+=b*Ge,Be+=b*ze,we+=b*xt,Pe+=b*We,Le+=b*Ke,Ce+=b*St,Ne+=b*Qe,st+=b*Xe,Te+=b*Dt,Re+=b*Ze,Jt+=b*Je,ut+=b*Ot,gt+=b*Ye,Yt+=b*Ue,yt+=b*Ft,Et+=b*et,b=$[15],Be+=b*Ge,we+=b*ze,Pe+=b*xt,Le+=b*We,Ce+=b*Ke,Ne+=b*St,st+=b*Qe,Te+=b*Xe,Re+=b*Dt,Jt+=b*Ze,ut+=b*Je,gt+=b*Ot,Yt+=b*Ye,yt+=b*Ue,Et+=b*Ft,Rr+=b*et,te+=38*we,ae+=38*Pe,oe+=38*Le,Me+=38*Ce,Oe+=38*Ne,Ie+=38*st,At+=38*Te,$e+=38*Re,De+=38*Jt,qe+=38*ut,_e+=38*gt,Ee+=38*Yt,Ve+=38*yt,ye+=38*Et,Ae+=38*Rr,q=1,b=te+q+65535,q=Math.floor(b/65536),te=b-q*65536,b=ae+q+65535,q=Math.floor(b/65536),ae=b-q*65536,b=oe+q+65535,q=Math.floor(b/65536),oe=b-q*65536,b=Me+q+65535,q=Math.floor(b/65536),Me=b-q*65536,b=Oe+q+65535,q=Math.floor(b/65536),Oe=b-q*65536,b=Ie+q+65535,q=Math.floor(b/65536),Ie=b-q*65536,b=At+q+65535,q=Math.floor(b/65536),At=b-q*65536,b=$e+q+65535,q=Math.floor(b/65536),$e=b-q*65536,b=De+q+65535,q=Math.floor(b/65536),De=b-q*65536,b=qe+q+65535,q=Math.floor(b/65536),qe=b-q*65536,b=_e+q+65535,q=Math.floor(b/65536),_e=b-q*65536,b=Ee+q+65535,q=Math.floor(b/65536),Ee=b-q*65536,b=Ve+q+65535,q=Math.floor(b/65536),Ve=b-q*65536,b=ye+q+65535,q=Math.floor(b/65536),ye=b-q*65536,b=Ae+q+65535,q=Math.floor(b/65536),Ae=b-q*65536,b=Be+q+65535,q=Math.floor(b/65536),Be=b-q*65536,te+=q-1+37*(q-1),q=1,b=te+q+65535,q=Math.floor(b/65536),te=b-q*65536,b=ae+q+65535,q=Math.floor(b/65536),ae=b-q*65536,b=oe+q+65535,q=Math.floor(b/65536),oe=b-q*65536,b=Me+q+65535,q=Math.floor(b/65536),Me=b-q*65536,b=Oe+q+65535,q=Math.floor(b/65536),Oe=b-q*65536,b=Ie+q+65535,q=Math.floor(b/65536),Ie=b-q*65536,b=At+q+65535,q=Math.floor(b/65536),At=b-q*65536,b=$e+q+65535,q=Math.floor(b/65536),$e=b-q*65536,b=De+q+65535,q=Math.floor(b/65536),De=b-q*65536,b=qe+q+65535,q=Math.floor(b/65536),qe=b-q*65536,b=_e+q+65535,q=Math.floor(b/65536),_e=b-q*65536,b=Ee+q+65535,q=Math.floor(b/65536),Ee=b-q*65536,b=Ve+q+65535,q=Math.floor(b/65536),Ve=b-q*65536,b=ye+q+65535,q=Math.floor(b/65536),ye=b-q*65536,b=Ae+q+65535,q=Math.floor(b/65536),Ae=b-q*65536,b=Be+q+65535,q=Math.floor(b/65536),Be=b-q*65536,te+=q-1+37*(q-1),L[0]=te,L[1]=ae,L[2]=oe,L[3]=Me,L[4]=Oe,L[5]=Ie,L[6]=At,L[7]=$e,L[8]=De,L[9]=qe,L[10]=_e,L[11]=Ee,L[12]=Ve,L[13]=ye,L[14]=Ae,L[15]=Be}function N(L,$){m(L,$,$)}function ne(L,$){const V=s();let b;for(b=0;b<16;b++)V[b]=$[b];for(b=253;b>=0;b--)N(V,V),b!==2&&b!==4&&m(V,V,$);for(b=0;b<16;b++)L[b]=V[b]}function le(L,$){const V=s();let b;for(b=0;b<16;b++)V[b]=$[b];for(b=250;b>=0;b--)N(V,V),b!==1&&m(V,V,$);for(b=0;b<16;b++)L[b]=V[b]}function pe(L,$){const V=s(),b=s(),q=s(),te=s(),ae=s(),oe=s(),Me=s(),Oe=s(),Ie=s();H(V,L[1],L[0]),H(Ie,$[1],$[0]),m(V,V,Ie),U(b,L[0],L[1]),U(Ie,$[0],$[1]),m(b,b,Ie),m(q,L[3],$[3]),m(q,q,h),m(te,L[2],$[2]),U(te,te,te),H(ae,b,V),H(oe,te,q),U(Me,te,q),U(Oe,b,V),m(L[0],ae,oe),m(L[1],Oe,Me),m(L[2],Me,oe),m(L[3],ae,Oe)}function ve(L,$,V){for(let b=0;b<4;b++)z(L[b],$[b],V)}function d(L,$){const V=s(),b=s(),q=s();ne(q,$[2]),m(V,$[0],q),m(b,$[1],q),K(L,b),L[31]^=W(V)<<7}function p(L,$,V){E(L[0],c),E(L[1],u),E(L[2],u),E(L[3],c);for(let b=255;b>=0;--b){const q=V[b/8|0]>>(b&7)&1;ve(L,$,q),pe($,L),pe(L,L),ve(L,$,q)}}function _(L,$){const V=[s(),s(),s(),s()];E(V[0],g),E(V[1],w),E(V[2],u),m(V[3],g,w),p(L,V,$)}function D(L){if(L.length!==r.SEED_LENGTH)throw new Error(`ed25519: seed must be ${r.SEED_LENGTH} bytes`);const $=(0,t.hash)(L);$[0]&=248,$[31]&=127,$[31]|=64;const V=new Uint8Array(32),b=[s(),s(),s(),s()];_(b,$),d(V,b);const q=new Uint8Array(64);return q.set(L),q.set(V,32),{publicKey:V,secretKey:q}}r.generateKeyPairFromSeed=D;function P(L){const $=(0,e.randomBytes)(32,L),V=D($);return(0,i.wipe)($),V}r.generateKeyPair=P;function C(L){if(L.length!==r.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${r.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(L.subarray(32))}r.extractPublicKeyFromSecretKey=C;const F=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function M(L,$){let V,b,q,te;for(b=63;b>=32;--b){for(V=0,q=b-32,te=b-12;q<te;++q)$[q]+=V-16*$[b]*F[q-(b-32)],V=Math.floor(($[q]+128)/256),$[q]-=V*256;$[q]+=V,$[b]=0}for(V=0,q=0;q<32;q++)$[q]+=V-($[31]>>4)*F[q],V=$[q]>>8,$[q]&=255;for(q=0;q<32;q++)$[q]-=V*F[q];for(b=0;b<32;b++)$[b+1]+=$[b]>>8,L[b]=$[b]&255}function v(L){const $=new Float64Array(64);for(let V=0;V<64;V++)$[V]=L[V];for(let V=0;V<64;V++)L[V]=0;M(L,$)}function R(L,$){const V=new Float64Array(64),b=[s(),s(),s(),s()],q=(0,t.hash)(L.subarray(0,32));q[0]&=248,q[31]&=127,q[31]|=64;const te=new Uint8Array(64);te.set(q.subarray(32),32);const ae=new t.SHA512;ae.update(te.subarray(32)),ae.update($);const oe=ae.digest();ae.clean(),v(oe),_(b,oe),d(te,b),ae.reset(),ae.update(te.subarray(0,32)),ae.update(L.subarray(32)),ae.update($);const Me=ae.digest();v(Me);for(let Oe=0;Oe<32;Oe++)V[Oe]=oe[Oe];for(let Oe=0;Oe<32;Oe++)for(let Ie=0;Ie<32;Ie++)V[Oe+Ie]+=Me[Oe]*q[Ie];return M(te.subarray(32),V),te}r.sign=R;function re(L,$){const V=s(),b=s(),q=s(),te=s(),ae=s(),oe=s(),Me=s();return E(L[2],u),B(L[1],$),N(q,L[1]),m(te,q,l),H(q,q,L[2]),U(te,L[2],te),N(ae,te),N(oe,ae),m(Me,oe,ae),m(V,Me,q),m(V,V,te),le(V,V),m(V,V,q),m(V,V,te),m(V,V,te),m(L[0],V,te),N(b,L[0]),m(b,b,te),j(b,q)&&m(L[0],L[0],S),N(b,L[0]),m(b,b,te),j(b,q)?-1:(W(L[0])===$[31]>>7&&H(L[0],c,L[0]),m(L[3],L[0],L[1]),0)}function he(L,$,V){const b=new Uint8Array(32),q=[s(),s(),s(),s()],te=[s(),s(),s(),s()];if(V.length!==r.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${r.SIGNATURE_LENGTH} bytes`);if(re(te,L))return!1;const ae=new t.SHA512;ae.update(V.subarray(0,32)),ae.update(L),ae.update($);const oe=ae.digest();return v(oe),p(q,te,oe),_(te,V.subarray(32)),pe(q,te),d(b,q),!J(V,b)}r.verify=he;function A(L){let $=[s(),s(),s(),s()];if(re($,L))throw new Error("Ed25519: invalid public key");let V=s(),b=s(),q=$[1];U(V,u,q),H(b,u,q),ne(b,b),m(V,V,b);let te=new Uint8Array(32);return K(te,V),te}r.convertPublicKeyToX25519=A;function ee(L){const $=(0,t.hash)(L.subarray(0,32));$[0]&=248,$[31]&=127,$[31]|=64;const V=new Uint8Array($.subarray(0,32));return(0,i.wipe)($),V}r.convertSecretKeyToX25519=ee})(ld);const B7="EdDSA",q7="JWT",ku=".",mf="base64url",Lb="utf8",Ub="utf8",L7=":",U7="did",j7="key",r1="base58btc",$7="z",z7="K36",k7=32;function dd(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function jb(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?dd(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function H7(r,e){e||(e=r.reduce((s,a)=>s+a.length,0));const t=jb(e);let i=0;for(const s of r)t.set(s,i),i+=s.length;return dd(t)}function $b(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const i1=$b("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Gh=$b("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=jb(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),zb={utf8:i1,"utf-8":i1,hex:Uu.base16,latin1:Gh,ascii:Gh,binary:Gh,...Uu};function yf(r,e="utf8"){const t=zb[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}function Ja(r,e="utf8"){const t=zb[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?dd(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}const K7=r=>JSON.stringify(r,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),V7=r=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=r.replace(e,'$1"$2n"$3');return JSON.parse(t,(i,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function ra(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return V7(r)}catch{return r}}function es(r){return typeof r=="string"?r:K7(r)||""}function n1(r){return ra(yf(Ja(r,mf),Lb))}function Hu(r){return yf(Ja(es(r),Lb),mf)}function kb(r){const e=Ja(z7,r1),t=$7+yf(H7([e,r]),r1);return[U7,j7,t].join(L7)}function G7(r){return yf(r,mf)}function W7(r){return Ja(r,mf)}function J7(r){return Ja([Hu(r.header),Hu(r.payload)].join(ku),Ub)}function Y7(r){return[Hu(r.header),Hu(r.payload),G7(r.signature)].join(ku)}function Rl(r){const e=r.split(ku),t=n1(e[0]),i=n1(e[1]),s=W7(e[2]),a=Ja(e.slice(0,2).join(ku),Ub);return{header:t,payload:i,signature:s,data:a}}function s1(r=As.randomBytes(k7)){return ld.generateKeyPairFromSeed(r)}async function Q7(r,e,t,i,s=be.fromMiliseconds(Date.now())){const a={alg:B7,typ:q7},c=kb(i.publicKey),u=s+t,l={iss:c,sub:r,aud:e,iat:s,exp:u},h=J7({header:a,payload:l}),g=ld.sign(i.secretKey,h);return Y7({header:a,payload:l,signature:g})}const X7={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var Z7={};const e9=":";function Uo(r){const[e,t]=r.split(e9);return{namespace:e,reference:t}}function a1(r,e=[]){const t=[];return Object.keys(r).forEach(i=>{if(e.length&&!e.includes(i))return;const s=r[i];t.push(...s.accounts)}),t}function Hb(r,e){return r.includes(":")?[r]:e.chains||[]}var t9=Object.defineProperty,o1=Object.getOwnPropertySymbols,r9=Object.prototype.hasOwnProperty,i9=Object.prototype.propertyIsEnumerable,c1=(r,e,t)=>e in r?t9(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,u1=(r,e)=>{for(var t in e||(e={}))r9.call(e,t)&&c1(r,t,e[t]);if(o1)for(var t of o1(e))i9.call(e,t)&&c1(r,t,e[t]);return r};const n9="ReactNative",hi={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},s9="js";function Ku(){return typeof ei<"u"&&typeof ei.versions<"u"&&typeof ei.versions.node<"u"}function Ya(){return!nf()&&!!id()&&navigator.product===n9}function sc(){return!Ku()&&!!id()&&!!nf()}function ac(){return Ya()?hi.reactNative:Ku()?hi.node:sc()?hi.browser:hi.unknown}function a9(){var r;try{return Ya()&&typeof at<"u"&&typeof(at==null?void 0:at.Application)<"u"?(r=at.Application)==null?void 0:r.applicationId:void 0}catch{return}}function o9(r,e){let t=Vo.parse(r);return t=u1(u1({},t),e),r=Vo.stringify(t),r}function Kb(){return lb()||{name:"",description:"",url:"",icons:[""]}}function c9(){if(ac()===hi.reactNative&&typeof at<"u"&&typeof(at==null?void 0:at.Platform)<"u"){const{OS:t,Version:i}=at.Platform;return[t,i].join("-")}const r=p8();if(r===null)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[e,r.name,r.version].join("-"):[e,r.version].join("-")}function u9(){var r;const e=ac();return e===hi.browser?[e,((r=hb())==null?void 0:r.host)||"unknown"].join(":"):e}function Vb(r,e,t){const i=c9(),s=u9();return[[r,e].join("-"),[s9,t].join("-"),i,s].join("/")}function f9({protocol:r,version:e,relayUrl:t,sdkVersion:i,auth:s,projectId:a,useOnCloseEvent:c,bundleId:u}){const l=t.split("?"),h=Vb(r,e,i),g={auth:s,ua:h,projectId:a,useOnCloseEvent:c||void 0,origin:u||void 0},w=o9(l[1]||"",g);return l[0]+"?"+w}function Zs(r,e){return r.filter(t=>e.includes(t)).length===r.length}function Gb(r){return Object.fromEntries(r.entries())}function Wb(r){return new Map(Object.entries(r))}function Ys(r=be.FIVE_MINUTES,e){const t=be.toMiliseconds(r||be.FIVE_MINUTES);let i,s,a;return{resolve:c=>{a&&i&&(clearTimeout(a),i(c))},reject:c=>{a&&s&&(clearTimeout(a),s(c))},done:()=>new Promise((c,u)=>{a=setTimeout(()=>{u(new Error(e))},t),i=c,s=u})}}function Ua(r,e,t){return new Promise(async(i,s)=>{const a=setTimeout(()=>s(new Error(t)),e);try{const c=await r;i(c)}catch(c){s(c)}clearTimeout(a)})}function Jb(r,e){if(typeof e=="string"&&e.startsWith(`${r}:`))return e;if(r.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(r.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function h9(r){return Jb("topic",r)}function l9(r){return Jb("id",r)}function Yb(r){const[e,t]=r.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")i.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))i.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return i}function lr(r,e){return be.fromMiliseconds(Date.now()+be.toMiliseconds(r))}function gs(r){return Date.now()>=be.toMiliseconds(r)}function pt(r,e){return`${r}${e?`:${e}`:""}`}function Mu(r=[],e=[]){return[...new Set([...r,...e])]}async function d9({id:r,topic:e,wcDeepLink:t}){var i;try{if(!t)return;const s=typeof t=="string"?JSON.parse(t):t,a=s?.href;if(typeof a!="string")return;const c=p9(a,r,e),u=ac();if(u===hi.browser){if(!((i=nf())!=null&&i.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}c.startsWith("https://")||c.startsWith("http://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,b9()?"_blank":"_self","noreferrer noopener")}else u===hi.reactNative&&typeof(at==null?void 0:at.Linking)<"u"&&await at.Linking.openURL(c)}catch(s){console.error(s)}}function p9(r,e,t){const i=`requestId=${e}&sessionTopic=${t}`;r.endsWith("/")&&(r=r.slice(0,-1));let s=`${r}`;if(r.startsWith("https://t.me")){const a=r.includes("?")?"&startapp=":"?startapp=";s=`${s}${a}${v9(i,!0)}`}else s=`${s}/wc?${i}`;return s}async function g9(r,e){let t="";try{if(sc()&&(t=localStorage.getItem(e),t))return t;t=await r.getItem(e)}catch(i){console.error(i)}return t}function f1(r,e){if(!r.includes(e))return null;const t=r.split(/([&,?,=])/),i=t.indexOf(e);return t[i+2]}function h1(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,r=>{const e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)})}function pd(){return typeof ei<"u"&&Z7.IS_VITEST==="true"}function b9(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function v9(r,e=!1){const t=qi.from(r).toString("base64");return e?t.replace(/[=]/g,""):t}function Qb(r){return qi.from(r,"base64").toString("utf-8")}var Xb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof at<"u"?at:typeof self<"u"?self:{};function m9(r){var e=r.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),t}var Zb={exports:{}};/**
* [js-sha3]{@link https://github.com/emn178/js-sha3}
*
* @version 0.8.0
* @author Chen, Yi-Cyuan [emn178@gmail.com]
* @copyright Chen, Yi-Cyuan 2015-2018
* @license MIT
*/(function(r){(function(){var e="input is invalid type",t="finalize already called",i=typeof window=="object",s=i?window:{};s.JS_SHA3_NO_WINDOW&&(i=!1);var a=!i&&typeof self=="object",c=!s.JS_SHA3_NO_NODE_JS&&typeof ei=="object"&&ei.versions&&ei.versions.node;c?s=Xb:a&&(s=self);var u=!s.JS_SHA3_NO_COMMON_JS&&!0&&r.exports,l=!s.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",h="0123456789abcdef".split(""),g=[31,7936,2031616,520093696],w=[4,1024,262144,67108864],S=[1,256,65536,16777216],E=[6,1536,393216,100663296],I=[0,8,16,24],z=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],K=[224,256,384,512],J=[128,256],j=["hex","buffer","arrayBuffer","array","digest"],W={128:168,256:136};(s.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(A){return Object.prototype.toString.call(A)==="[object Array]"}),l&&(s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(A){return typeof A=="object"&&A.buffer&&A.buffer.constructor===ArrayBuffer});for(var B=function(A,ee,L){return function($){return new R(A,ee,A).update($)[L]()}},U=function(A,ee,L){return function($,V){return new R(A,ee,V).update($)[L]()}},H=function(A,ee,L){return function($,V,b,q){return p["cshake"+A].update($,V,b,q)[L]()}},m=function(A,ee,L){return function($,V,b,q){return p["kmac"+A].update($,V,b,q)[L]()}},N=function(A,ee,L,$){for(var V=0;V<j.length;++V){var b=j[V];A[b]=ee(L,$,b)}return A},ne=function(A,ee){var L=B(A,ee,"hex");return L.create=function(){return new R(A,ee,A)},L.update=function($){return L.create().update($)},N(L,B,A,ee)},le=function(A,ee){var L=U(A,ee,"hex");return L.create=function($){return new R(A,ee,$)},L.update=function($,V){return L.create(V).update($)},N(L,U,A,ee)},pe=function(A,ee){var L=W[A],$=H(A,ee,"hex");return $.create=function(V,b,q){return!b&&!q?p["shake"+A].create(V):new R(A,ee,V).bytepad([b,q],L)},$.update=function(V,b,q,te){return $.create(b,q,te).update(V)},N($,H,A,ee)},ve=function(A,ee){var L=W[A],$=m(A,ee,"hex");return $.create=function(V,b,q){return new re(A,ee,b).bytepad(["KMAC",q],L).bytepad([V],L)},$.update=function(V,b,q,te){return $.create(V,q,te).update(b)},N($,m,A,ee)},d=[{name:"keccak",padding:S,bits:K,createMethod:ne},{name:"sha3",padding:E,bits:K,createMethod:ne},{name:"shake",padding:g,bits:J,createMethod:le},{name:"cshake",padding:w,bits:J,createMethod:pe},{name:"kmac",padding:w,bits:J,createMethod:ve}],p={},_=[],D=0;D<d.length;++D)for(var P=d[D],C=P.bits,F=0;F<C.length;++F){var M=P.name+"_"+C[F];if(_.push(M),p[M]=P.createMethod(C[F],P.padding),P.name!=="sha3"){var v=P.name+C[F];_.push(v),p[v]=p[M]}}function R(A,ee,L){this.blocks=[],this.s=[],this.padding=ee,this.outputBits=L,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(A<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=L>>5,this.extraBytes=(L&31)>>3;for(var $=0;$<50;++$)this.s[$]=0}R.prototype.update=function(A){if(this.finalized)throw new Error(t);var ee,L=typeof A;if(L!=="string"){if(L==="object"){if(A===null)throw new Error(e);if(l&&A.constructor===ArrayBuffer)A=new Uint8Array(A);else if(!Array.isArray(A)&&(!l||!ArrayBuffer.isView(A)))throw new Error(e)}else throw new Error(e);ee=!0}for(var $=this.blocks,V=this.byteCount,b=A.length,q=this.blockCount,te=0,ae=this.s,oe,Me;te<b;){if(this.reset)for(this.reset=!1,$[0]=this.block,oe=1;oe<q+1;++oe)$[oe]=0;if(ee)for(oe=this.start;te<b&&oe<V;++te)$[oe>>2]|=A[te]<<I[oe++&3];else for(oe=this.start;te<b&&oe<V;++te)Me=A.charCodeAt(te),Me<128?$[oe>>2]|=Me<<I[oe++&3]:Me<2048?($[oe>>2]|=(192|Me>>6)<<I[oe++&3],$[oe>>2]|=(128|Me&63)<<I[oe++&3]):Me<55296||Me>=57344?($[oe>>2]|=(224|Me>>12)<<I[oe++&3],$[oe>>2]|=(128|Me>>6&63)<<I[oe++&3],$[oe>>2]|=(128|Me&63)<<I[oe++&3]):(Me=65536+((Me&1023)<<10|A.charCodeAt(++te)&1023),$[oe>>2]|=(240|Me>>18)<<I[oe++&3],$[oe>>2]|=(128|Me>>12&63)<<I[oe++&3],$[oe>>2]|=(128|Me>>6&63)<<I[oe++&3],$[oe>>2]|=(128|Me&63)<<I[oe++&3]);if(this.lastByteIndex=oe,oe>=V){for(this.start=oe-V,this.block=$[q],oe=0;oe<q;++oe)ae[oe]^=$[oe];he(ae),this.reset=!0}else this.start=oe}return this},R.prototype.encode=function(A,ee){var L=A&255,$=1,V=[L];for(A=A>>8,L=A&255;L>0;)V.unshift(L),A=A>>8,L=A&255,++$;return ee?V.push($):V.unshift($),this.update(V),V.length},R.prototype.encodeString=function(A){var ee,L=typeof A;if(L!=="string"){if(L==="object"){if(A===null)throw new Error(e);if(l&&A.constructor===ArrayBuffer)A=new Uint8Array(A);else if(!Array.isArray(A)&&(!l||!ArrayBuffer.isView(A)))throw new Error(e)}else throw new Error(e);ee=!0}var $=0,V=A.length;if(ee)$=V;else for(var b=0;b<A.length;++b){var q=A.charCodeAt(b);q<128?$+=1:q<2048?$+=2:q<55296||q>=57344?$+=3:(q=65536+((q&1023)<<10|A.charCodeAt(++b)&1023),$+=4)}return $+=this.encode($*8),this.update(A),$},R.prototype.bytepad=function(A,ee){for(var L=this.encode(ee),$=0;$<A.length;++$)L+=this.encodeString(A[$]);var V=ee-L%ee,b=[];return b.length=V,this.update(b),this},R.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var A=this.blocks,ee=this.lastByteIndex,L=this.blockCount,$=this.s;if(A[ee>>2]|=this.padding[ee&3],this.lastByteIndex===this.byteCount)for(A[0]=A[L],ee=1;ee<L+1;++ee)A[ee]=0;for(A[L-1]|=2147483648,ee=0;ee<L;++ee)$[ee]^=A[ee];he($)}},R.prototype.toString=R.prototype.hex=function(){this.finalize();for(var A=this.blockCount,ee=this.s,L=this.outputBlocks,$=this.extraBytes,V=0,b=0,q="",te;b<L;){for(V=0;V<A&&b<L;++V,++b)te=ee[V],q+=h[te>>4&15]+h[te&15]+h[te>>12&15]+h[te>>8&15]+h[te>>20&15]+h[te>>16&15]+h[te>>28&15]+h[te>>24&15];b%A===0&&(he(ee),V=0)}return $&&(te=ee[V],q+=h[te>>4&15]+h[te&15],$>1&&(q+=h[te>>12&15]+h[te>>8&15]),$>2&&(q+=h[te>>20&15]+h[te>>16&15])),q},R.prototype.arrayBuffer=function(){this.finalize();var A=this.blockCount,ee=this.s,L=this.outputBlocks,$=this.extraBytes,V=0,b=0,q=this.outputBits>>3,te;$?te=new ArrayBuffer(L+1<<2):te=new ArrayBuffer(q);for(var ae=new Uint32Array(te);b<L;){for(V=0;V<A&&b<L;++V,++b)ae[b]=ee[V];b%A===0&&he(ee)}return $&&(ae[V]=ee[V],te=te.slice(0,q)),te},R.prototype.buffer=R.prototype.arrayBuffer,R.prototype.digest=R.prototype.array=function(){this.finalize();for(var A=this.blockCount,ee=this.s,L=this.outputBlocks,$=this.extraBytes,V=0,b=0,q=[],te,ae;b<L;){for(V=0;V<A&&b<L;++V,++b)te=b<<2,ae=ee[V],q[te]=ae&255,q[te+1]=ae>>8&255,q[te+2]=ae>>16&255,q[te+3]=ae>>24&255;b%A===0&&he(ee)}return $&&(te=b<<2,ae=ee[V],q[te]=ae&255,$>1&&(q[te+1]=ae>>8&255),$>2&&(q[te+2]=ae>>16&255)),q};function re(A,ee,L){R.call(this,A,ee,L)}re.prototype=new R,re.prototype.finalize=function(){return this.encode(this.outputBits,!0),R.prototype.finalize.call(this)};var he=function(A){var ee,L,$,V,b,q,te,ae,oe,Me,Oe,Ie,At,$e,De,qe,_e,Ee,Ve,ye,Ae,Be,we,Pe,Le,Ce,Ne,st,Te,Re,Jt,ut,gt,Yt,yt,Et,Rr,Ge,ze,xt,We,Ke,St,Qe,Xe,Dt,Ze,Je,Ot,Ye,Ue,Ft,et,Ct,zi,Nt,lt,bi,vi,mi,yi,wi,dr;for($=0;$<48;$+=2)V=A[0]^A[10]^A[20]^A[30]^A[40],b=A[1]^A[11]^A[21]^A[31]^A[41],q=A[2]^A[12]^A[22]^A[32]^A[42],te=A[3]^A[13]^A[23]^A[33]^A[43],ae=A[4]^A[14]^A[24]^A[34]^A[44],oe=A[5]^A[15]^A[25]^A[35]^A[45],Me=A[6]^A[16]^A[26]^A[36]^A[46],Oe=A[7]^A[17]^A[27]^A[37]^A[47],Ie=A[8]^A[18]^A[28]^A[38]^A[48],At=A[9]^A[19]^A[29]^A[39]^A[49],ee=Ie^(q<<1|te>>>31),L=At^(te<<1|q>>>31),A[0]^=ee,A[1]^=L,A[10]^=ee,A[11]^=L,A[20]^=ee,A[21]^=L,A[30]^=ee,A[31]^=L,A[40]^=ee,A[41]^=L,ee=V^(ae<<1|oe>>>31),L=b^(oe<<1|ae>>>31),A[2]^=ee,A[3]^=L,A[12]^=ee,A[13]^=L,A[22]^=ee,A[23]^=L,A[32]^=ee,A[33]^=L,A[42]^=ee,A[43]^=L,ee=q^(Me<<1|Oe>>>31),L=te^(Oe<<1|Me>>>31),A[4]^=ee,A[5]^=L,A[14]^=ee,A[15]^=L,A[24]^=ee,A[25]^=L,A[34]^=ee,A[35]^=L,A[44]^=ee,A[45]^=L,ee=ae^(Ie<<1|At>>>31),L=oe^(At<<1|Ie>>>31),A[6]^=ee,A[7]^=L,A[16]^=ee,A[17]^=L,A[26]^=ee,A[27]^=L,A[36]^=ee,A[37]^=L,A[46]^=ee,A[47]^=L,ee=Me^(V<<1|b>>>31),L=Oe^(b<<1|V>>>31),A[8]^=ee,A[9]^=L,A[18]^=ee,A[19]^=L,A[28]^=ee,A[29]^=L,A[38]^=ee,A[39]^=L,A[48]^=ee,A[49]^=L,$e=A[0],De=A[1],Dt=A[11]<<4|A[10]>>>28,Ze=A[10]<<4|A[11]>>>28,st=A[20]<<3|A[21]>>>29,Te=A[21]<<3|A[20]>>>29,mi=A[31]<<9|A[30]>>>23,yi=A[30]<<9|A[31]>>>23,Ke=A[40]<<18|A[41]>>>14,St=A[41]<<18|A[40]>>>14,Yt=A[2]<<1|A[3]>>>31,yt=A[3]<<1|A[2]>>>31,qe=A[13]<<12|A[12]>>>20,_e=A[12]<<12|A[13]>>>20,Je=A[22]<<10|A[23]>>>22,Ot=A[23]<<10|A[22]>>>22,Re=A[33]<<13|A[32]>>>19,Jt=A[32]<<13|A[33]>>>19,wi=A[42]<<2|A[43]>>>30,dr=A[43]<<2|A[42]>>>30,Ct=A[5]<<30|A[4]>>>2,zi=A[4]<<30|A[5]>>>2,Et=A[14]<<6|A[15]>>>26,Rr=A[15]<<6|A[14]>>>26,Ee=A[25]<<11|A[24]>>>21,Ve=A[24]<<11|A[25]>>>21,Ye=A[34]<<15|A[35]>>>17,Ue=A[35]<<15|A[34]>>>17,ut=A[45]<<29|A[44]>>>3,gt=A[44]<<29|A[45]>>>3,Pe=A[6]<<28|A[7]>>>4,Le=A[7]<<28|A[6]>>>4,Nt=A[17]<<23|A[16]>>>9,lt=A[16]<<23|A[17]>>>9,Ge=A[26]<<25|A[27]>>>7,ze=A[27]<<25|A[26]>>>7,ye=A[36]<<21|A[37]>>>11,Ae=A[37]<<21|A[36]>>>11,Ft=A[47]<<24|A[46]>>>8,et=A[46]<<24|A[47]>>>8,Qe=A[8]<<27|A[9]>>>5,Xe=A[9]<<27|A[8]>>>5,Ce=A[18]<<20|A[19]>>>12,Ne=A[19]<<20|A[18]>>>12,bi=A[29]<<7|A[28]>>>25,vi=A[28]<<7|A[29]>>>25,xt=A[38]<<8|A[39]>>>24,We=A[39]<<8|A[38]>>>24,Be=A[48]<<14|A[49]>>>18,we=A[49]<<14|A[48]>>>18,A[0]=$e^~qe&Ee,A[1]=De^~_e&Ve,A[10]=Pe^~Ce&st,A[11]=Le^~Ne&Te,A[20]=Yt^~Et&Ge,A[21]=yt^~Rr&ze,A[30]=Qe^~Dt&Je,A[31]=Xe^~Ze&Ot,A[40]=Ct^~Nt&bi,A[41]=zi^~lt&vi,A[2]=qe^~Ee&ye,A[3]=_e^~Ve&Ae,A[12]=Ce^~st&Re,A[13]=Ne^~Te&Jt,A[22]=Et^~Ge&xt,A[23]=Rr^~ze&We,A[32]=Dt^~Je&Ye,A[33]=Ze^~Ot&Ue,A[42]=Nt^~bi&mi,A[43]=lt^~vi&yi,A[4]=Ee^~ye&Be,A[5]=Ve^~Ae&we,A[14]=st^~Re&ut,A[15]=Te^~Jt&gt,A[24]=Ge^~xt&Ke,A[25]=ze^~We&St,A[34]=Je^~Ye&Ft,A[35]=Ot^~Ue&et,A[44]=bi^~mi&wi,A[45]=vi^~yi&dr,A[6]=ye^~Be&$e,A[7]=Ae^~we&De,A[16]=Re^~ut&Pe,A[17]=Jt^~gt&Le,A[26]=xt^~Ke&Yt,A[27]=We^~St&yt,A[36]=Ye^~Ft&Qe,A[37]=Ue^~et&Xe,A[46]=mi^~wi&Ct,A[47]=yi^~dr&zi,A[8]=Be^~$e&qe,A[9]=we^~De&_e,A[18]=ut^~Pe&Ce,A[19]=gt^~Le&Ne,A[28]=Ke^~Yt&Et,A[29]=St^~yt&Rr,A[38]=Ft^~Qe&Dt,A[39]=et^~Xe&Ze,A[48]=wi^~Ct&Nt,A[49]=dr^~zi&lt,A[0]^=z[$],A[1]^=z[$+1]};if(u)r.exports=p;else for(D=0;D<_.length;++D)s[_[D]]=p[_[D]]})()})(Zb);var y9=Zb.exports;const w9="logger/5.7.0";let l1=!1,d1=!1;const Pu={debug:1,default:2,info:2,warning:3,error:4,off:5};let p1=Pu.default,Wh=null;function _9(){try{const r=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{r.push(e)}}),r.length)throw new Error("missing "+r.join(", "));if("é".normalize("NFD")!=="é")throw new Error("broken implementation")}catch(r){return r.message}return null}const g1=_9();var Tl;(function(r){r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF"})(Tl||(Tl={}));var Xi;(function(r){r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.TIMEOUT="TIMEOUT",r.BUFFER_OVERRUN="BUFFER_OVERRUN",r.NUMERIC_FAULT="NUMERIC_FAULT",r.MISSING_NEW="MISSING_NEW",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",r.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",r.TRANSACTION_REPLACED="TRANSACTION_REPLACED",r.ACTION_REJECTED="ACTION_REJECTED"})(Xi||(Xi={}));const b1="0123456789abcdef";let Sr=class hr{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const i=e.toLowerCase();Pu[i]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(p1>Pu[i])&&console.log.apply(console,t)}debug(...e){this._log(hr.levels.DEBUG,e)}info(...e){this._log(hr.levels.INFO,e)}warn(...e){this._log(hr.levels.WARNING,e)}makeError(e,t,i){if(d1)return this.makeError("censored error",t,{});t||(t=hr.errors.UNKNOWN_ERROR),i||(i={});const s=[];Object.keys(i).forEach(l=>{const h=i[l];try{if(h instanceof Uint8Array){let g="";for(let w=0;w<h.length;w++)g+=b1[h[w]>>4],g+=b1[h[w]&15];s.push(l+"=Uint8Array(0x"+g+")")}else s.push(l+"="+JSON.stringify(h))}catch{s.push(l+"="+JSON.stringify(i[l].toString()))}}),s.push(`code=${t}`),s.push(`version=${this.version}`);const a=e;let c="";switch(t){case Xi.NUMERIC_FAULT:{c="NUMERIC_FAULT";const l=e;switch(l){case"overflow":case"underflow":case"division-by-zero":c+="-"+l;break;case"negative-power":case"negative-width":c+="-unsupported";break;case"unbound-bitwise-result":c+="-unbound-result";break}break}case Xi.CALL_EXCEPTION:case Xi.INSUFFICIENT_FUNDS:case Xi.MISSING_NEW:case Xi.NONCE_EXPIRED:case Xi.REPLACEMENT_UNDERPRICED:case Xi.TRANSACTION_REPLACED:case Xi.UNPREDICTABLE_GAS_LIMIT:c=t;break}c&&(e+=" [ See: https://links.ethers.org/v5-errors-"+c+" ]"),s.length&&(e+=" ("+s.join(", ")+")");const u=new Error(e);return u.reason=a,u.code=t,Object.keys(i).forEach(function(l){u[l]=i[l]}),u}throwError(e,t,i){throw this.makeError(e,t,i)}throwArgumentError(e,t,i){return this.throwError(e,hr.errors.INVALID_ARGUMENT,{argument:t,value:i})}assert(e,t,i,s){e||this.throwError(t,i,s)}assertArgument(e,t,i,s){e||this.throwArgumentError(t,i,s)}checkNormalize(e){g1&&this.throwError("platform missing String.prototype.normalize",hr.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:g1})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,hr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,hr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,i){i?i=": "+i:i="",e<t&&this.throwError("missing argument"+i,hr.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+i,hr.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",hr.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",hr.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",hr.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Wh||(Wh=new hr(w9)),Wh}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",hr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),l1){if(!e)return;this.globalLogger().throwError("error censorship permanent",hr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}d1=!!e,l1=!!t}static setLogLevel(e){const t=Pu[e.toLowerCase()];if(t==null){hr.globalLogger().warn("invalid log level - "+e);return}p1=t}static from(e){return new hr(e)}};Sr.errors=Xi,Sr.levels=Tl;const E9="bytes/5.7.0",sr=new Sr(E9);function ev(r){return!!r.toHexString}function ja(r){return r.slice||(r.slice=function(){const e=Array.prototype.slice.call(arguments);return ja(new Uint8Array(Array.prototype.slice.apply(r,e)))}),r}function A9(r){return li(r)&&!(r.length%2)||Qa(r)}function v1(r){return typeof r=="number"&&r==r&&r%1===0}function Qa(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!v1(r.length)||r.length<0)return!1;for(let e=0;e<r.length;e++){const t=r[e];if(!v1(t)||t<0||t>=256)return!1}return!0}function er(r,e){if(e||(e={}),typeof r=="number"){sr.checkSafeUint53(r,"invalid arrayify value");const t=[];for(;r;)t.unshift(r&255),r=parseInt(String(r/256));return t.length===0&&t.push(0),ja(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),ev(r)&&(r=r.toHexString()),li(r)){let t=r.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":sr.throwArgumentError("hex data is odd-length","value",r));const i=[];for(let s=0;s<t.length;s+=2)i.push(parseInt(t.substring(s,s+2),16));return ja(new Uint8Array(i))}return Qa(r)?ja(new Uint8Array(r)):sr.throwArgumentError("invalid arrayify value","value",r)}function S9(r){const e=r.map(s=>er(s)),t=e.reduce((s,a)=>s+a.length,0),i=new Uint8Array(t);return e.reduce((s,a)=>(i.set(a,s),s+a.length),0),ja(i)}function I9(r,e){r=er(r),r.length>e&&sr.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(r,e-r.length),ja(t)}function li(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||e&&r.length!==2+2*e)}const Jh="0123456789abcdef";function Xr(r,e){if(e||(e={}),typeof r=="number"){sr.checkSafeUint53(r,"invalid hexlify value");let t="";for(;r;)t=Jh[r&15]+t,r=Math.floor(r/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),ev(r))return r.toHexString();if(li(r))return r.length%2&&(e.hexPad==="left"?r="0x0"+r.substring(2):e.hexPad==="right"?r+="0":sr.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(Qa(r)){let t="0x";for(let i=0;i<r.length;i++){let s=r[i];t+=Jh[(s&240)>>4]+Jh[s&15]}return t}return sr.throwArgumentError("invalid hexlify value","value",r)}function x9(r){if(typeof r!="string")r=Xr(r);else if(!li(r)||r.length%2)return null;return(r.length-2)/2}function m1(r,e,t){return typeof r!="string"?r=Xr(r):(!li(r)||r.length%2)&&sr.throwArgumentError("invalid hexData","value",r),e=2+2*e,t!=null?"0x"+r.substring(e,2+2*t):"0x"+r.substring(e)}function Sn(r,e){for(typeof r!="string"?r=Xr(r):li(r)||sr.throwArgumentError("invalid hex string","value",r),r.length>2*e+2&&sr.throwArgumentError("value out of range","value",arguments[1]);r.length<2*e+2;)r="0x0"+r.substring(2);return r}function tv(r){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(A9(r)){let t=er(r);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=Xr(t.slice(0,32)),e.s=Xr(t.slice(32,64))):t.length===65?(e.r=Xr(t.slice(0,32)),e.s=Xr(t.slice(32,64)),e.v=t[64]):sr.throwArgumentError("invalid signature string","signature",r),e.v<27&&(e.v===0||e.v===1?e.v+=27:sr.throwArgumentError("signature invalid v byte","signature",r)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=Xr(t.slice(32,64))}else{if(e.r=r.r,e.s=r.s,e.v=r.v,e.recoveryParam=r.recoveryParam,e._vs=r._vs,e._vs!=null){const s=I9(er(e._vs),32);e._vs=Xr(s);const a=s[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=a:e.recoveryParam!==a&&sr.throwArgumentError("signature recoveryParam mismatch _vs","signature",r),s[0]&=127;const c=Xr(s);e.s==null?e.s=c:e.s!==c&&sr.throwArgumentError("signature v mismatch _vs","signature",r)}if(e.recoveryParam==null)e.v==null?sr.throwArgumentError("signature missing v and recoveryParam","signature",r):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const s=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==s&&sr.throwArgumentError("signature recoveryParam mismatch v","signature",r)}e.r==null||!li(e.r)?sr.throwArgumentError("signature missing or invalid r","signature",r):e.r=Sn(e.r,32),e.s==null||!li(e.s)?sr.throwArgumentError("signature missing or invalid s","signature",r):e.s=Sn(e.s,32);const t=er(e.s);t[0]>=128&&sr.throwArgumentError("signature s out of range","signature",r),e.recoveryParam&&(t[0]|=128);const i=Xr(t);e._vs&&(li(e._vs)||sr.throwArgumentError("signature invalid _vs","signature",r),e._vs=Sn(e._vs,32)),e._vs==null?e._vs=i:e._vs!==i&&sr.throwArgumentError("signature _vs mismatch v and s","signature",r)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function gd(r){return"0x"+y9.keccak_256(er(r))}var rv={exports:{}},D9={},M9=Object.freeze({__proto__:null,default:D9}),P9=m9(M9);(function(r){(function(e,t){function i(d,p){if(!d)throw new Error(p||"Assertion failed")}function s(d,p){d.super_=p;var _=function(){};_.prototype=p.prototype,d.prototype=new _,d.prototype.constructor=d}function a(d,p,_){if(a.isBN(d))return d;this.negative=0,this.words=null,this.length=0,this.red=null,d!==null&&((p==="le"||p==="be")&&(_=p,p=10),this._init(d||0,p||10,_||"be"))}typeof e=="object"?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;var c;try{typeof window<"u"&&typeof window.Buffer<"u"?c=window.Buffer:c=P9.Buffer}catch{}a.isBN=function(d){return d instanceof a?!0:d!==null&&typeof d=="object"&&d.constructor.wordSize===a.wordSize&&Array.isArray(d.words)},a.max=function(d,p){return d.cmp(p)>0?d:p},a.min=function(d,p){return d.cmp(p)<0?d:p},a.prototype._init=function(d,p,_){if(typeof d=="number")return this._initNumber(d,p,_);if(typeof d=="object")return this._initArray(d,p,_);p==="hex"&&(p=16),i(p===(p|0)&&p>=2&&p<=36),d=d.toString().replace(/\s+/g,"");var D=0;d[0]==="-"&&(D++,this.negative=1),D<d.length&&(p===16?this._parseHex(d,D,_):(this._parseBase(d,p,D),_==="le"&&this._initArray(this.toArray(),p,_)))},a.prototype._initNumber=function(d,p,_){d<0&&(this.negative=1,d=-d),d<67108864?(this.words=[d&67108863],this.length=1):d<4503599627370496?(this.words=[d&67108863,d/67108864&67108863],this.length=2):(i(d<9007199254740992),this.words=[d&67108863,d/67108864&67108863,1],this.length=3),_==="le"&&this._initArray(this.toArray(),p,_)},a.prototype._initArray=function(d,p,_){if(i(typeof d.length=="number"),d.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(d.length/3),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var P,C,F=0;if(_==="be")for(D=d.length-1,P=0;D>=0;D-=3)C=d[D]|d[D-1]<<8|d[D-2]<<16,this.words[P]|=C<<F&67108863,this.words[P+1]=C>>>26-F&67108863,F+=24,F>=26&&(F-=26,P++);else if(_==="le")for(D=0,P=0;D<d.length;D+=3)C=d[D]|d[D+1]<<8|d[D+2]<<16,this.words[P]|=C<<F&67108863,this.words[P+1]=C>>>26-F&67108863,F+=24,F>=26&&(F-=26,P++);return this._strip()};function u(d,p){var _=d.charCodeAt(p);if(_>=48&&_<=57)return _-48;if(_>=65&&_<=70)return _-55;if(_>=97&&_<=102)return _-87;i(!1,"Invalid character in "+d)}function l(d,p,_){var D=u(d,_);return _-1>=p&&(D|=u(d,_-1)<<4),D}a.prototype._parseHex=function(d,p,_){this.length=Math.ceil((d.length-p)/6),this.words=new Array(this.length);for(var D=0;D<this.length;D++)this.words[D]=0;var P=0,C=0,F;if(_==="be")for(D=d.length-1;D>=p;D-=2)F=l(d,p,D)<<P,this.words[C]|=F&67108863,P>=18?(P-=18,C+=1,this.words[C]|=F>>>26):P+=8;else{var M=d.length-p;for(D=M%2===0?p+1:p;D<d.length;D+=2)F=l(d,p,D)<<P,this.words[C]|=F&67108863,P>=18?(P-=18,C+=1,this.words[C]|=F>>>26):P+=8}this._strip()};function h(d,p,_,D){for(var P=0,C=0,F=Math.min(d.length,_),M=p;M<F;M++){var v=d.charCodeAt(M)-48;P*=D,v>=49?C=v-49+10:v>=17?C=v-17+10:C=v,i(v>=0&&C<D,"Invalid character"),P+=C}return P}a.prototype._parseBase=function(d,p,_){this.words=[0],this.length=1;for(var D=0,P=1;P<=67108863;P*=p)D++;D--,P=P/p|0;for(var C=d.length-_,F=C%D,M=Math.min(C,C-F)+_,v=0,R=_;R<M;R+=D)v=h(d,R,R+D,p),this.imuln(P),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v);if(F!==0){var re=1;for(v=h(d,R,d.length,p),R=0;R<F;R++)re*=p;this.imuln(re),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v)}this._strip()},a.prototype.copy=function(d){d.words=new Array(this.length);for(var p=0;p<this.length;p++)d.words[p]=this.words[p];d.length=this.length,d.negative=this.negative,d.red=this.red};function g(d,p){d.words=p.words,d.length=p.length,d.negative=p.negative,d.red=p.red}if(a.prototype._move=function(d){g(d,this)},a.prototype.clone=function(){var d=new a(null);return this.copy(d),d},a.prototype._expand=function(d){for(;this.length<d;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=w}catch{a.prototype.inspect=w}else a.prototype.inspect=w;function w(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],E=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],I=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(d,p){d=d||10,p=p|0||1;var _;if(d===16||d==="hex"){_="";for(var D=0,P=0,C=0;C<this.length;C++){var F=this.words[C],M=((F<<D|P)&16777215).toString(16);P=F>>>24-D&16777215,D+=2,D>=26&&(D-=26,C--),P!==0||C!==this.length-1?_=S[6-M.length]+M+_:_=M+_}for(P!==0&&(_=P.toString(16)+_);_.length%p!==0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}if(d===(d|0)&&d>=2&&d<=36){var v=E[d],R=I[d];_="";var re=this.clone();for(re.negative=0;!re.isZero();){var he=re.modrn(R).toString(d);re=re.idivn(R),re.isZero()?_=he+_:_=S[v-he.length]+he+_}for(this.isZero()&&(_="0"+_);_.length%p!==0;)_="0"+_;return this.negative!==0&&(_="-"+_),_}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var d=this.words[0];return this.length===2?d+=this.words[1]*67108864:this.length===3&&this.words[2]===1?d+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-d:d},a.prototype.toJSON=function(){return this.toString(16,2)},c&&(a.prototype.toBuffer=function(d,p){return this.toArrayLike(c,d,p)}),a.prototype.toArray=function(d,p){return this.toArrayLike(Array,d,p)};var z=function(d,p){return d.allocUnsafe?d.allocUnsafe(p):new d(p)};a.prototype.toArrayLike=function(d,p,_){this._strip();var D=this.byteLength(),P=_||Math.max(1,D);i(D<=P,"byte array longer than desired length"),i(P>0,"Requested array length <= 0");var C=z(d,P),F=p==="le"?"LE":"BE";return this["_toArrayLike"+F](C,D),C},a.prototype._toArrayLikeLE=function(d,p){for(var _=0,D=0,P=0,C=0;P<this.length;P++){var F=this.words[P]<<C|D;d[_++]=F&255,_<d.length&&(d[_++]=F>>8&255),_<d.length&&(d[_++]=F>>16&255),C===6?(_<d.length&&(d[_++]=F>>24&255),D=0,C=0):(D=F>>>24,C+=2)}if(_<d.length)for(d[_++]=D;_<d.length;)d[_++]=0},a.prototype._toArrayLikeBE=function(d,p){for(var _=d.length-1,D=0,P=0,C=0;P<this.length;P++){var F=this.words[P]<<C|D;d[_--]=F&255,_>=0&&(d[_--]=F>>8&255),_>=0&&(d[_--]=F>>16&255),C===6?(_>=0&&(d[_--]=F>>24&255),D=0,C=0):(D=F>>>24,C+=2)}if(_>=0)for(d[_--]=D;_>=0;)d[_--]=0},Math.clz32?a.prototype._countBits=function(d){return 32-Math.clz32(d)}:a.prototype._countBits=function(d){var p=d,_=0;return p>=4096&&(_+=13,p>>>=13),p>=64&&(_+=7,p>>>=7),p>=8&&(_+=4,p>>>=4),p>=2&&(_+=2,p>>>=2),_+p},a.prototype._zeroBits=function(d){if(d===0)return 26;var p=d,_=0;return p&8191||(_+=13,p>>>=13),p&127||(_+=7,p>>>=7),p&15||(_+=4,p>>>=4),p&3||(_+=2,p>>>=2),p&1||_++,_},a.prototype.bitLength=function(){var d=this.words[this.length-1],p=this._countBits(d);return(this.length-1)*26+p};function K(d){for(var p=new Array(d.bitLength()),_=0;_<p.length;_++){var D=_/26|0,P=_%26;p[_]=d.words[D]>>>P&1}return p}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var d=0,p=0;p<this.length;p++){var _=this._zeroBits(this.words[p]);if(d+=_,_!==26)break}return d},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(d){return this.negative!==0?this.abs().inotn(d).iaddn(1):this.clone()},a.prototype.fromTwos=function(d){return this.testn(d-1)?this.notn(d).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(d){for(;this.length<d.length;)this.words[this.length++]=0;for(var p=0;p<d.length;p++)this.words[p]=this.words[p]|d.words[p];return this._strip()},a.prototype.ior=function(d){return i((this.negative|d.negative)===0),this.iuor(d)},a.prototype.or=function(d){return this.length>d.length?this.clone().ior(d):d.clone().ior(this)},a.prototype.uor=function(d){return this.length>d.length?this.clone().iuor(d):d.clone().iuor(this)},a.prototype.iuand=function(d){var p;this.length>d.length?p=d:p=this;for(var _=0;_<p.length;_++)this.words[_]=this.words[_]&d.words[_];return this.length=p.length,this._strip()},a.prototype.iand=function(d){return i((this.negative|d.negative)===0),this.iuand(d)},a.prototype.and=function(d){return this.length>d.length?this.clone().iand(d):d.clone().iand(this)},a.prototype.uand=function(d){return this.length>d.length?this.clone().iuand(d):d.clone().iuand(this)},a.prototype.iuxor=function(d){var p,_;this.length>d.length?(p=this,_=d):(p=d,_=this);for(var D=0;D<_.length;D++)this.words[D]=p.words[D]^_.words[D];if(this!==p)for(;D<p.length;D++)this.words[D]=p.words[D];return this.length=p.length,this._strip()},a.prototype.ixor=function(d){return i((this.negative|d.negative)===0),this.iuxor(d)},a.prototype.xor=function(d){return this.length>d.length?this.clone().ixor(d):d.clone().ixor(this)},a.prototype.uxor=function(d){return this.length>d.length?this.clone().iuxor(d):d.clone().iuxor(this)},a.prototype.inotn=function(d){i(typeof d=="number"&&d>=0);var p=Math.ceil(d/26)|0,_=d%26;this._expand(p),_>0&&p--;for(var D=0;D<p;D++)this.words[D]=~this.words[D]&67108863;return _>0&&(this.words[D]=~this.words[D]&67108863>>26-_),this._strip()},a.prototype.notn=function(d){return this.clone().inotn(d)},a.prototype.setn=function(d,p){i(typeof d=="number"&&d>=0);var _=d/26|0,D=d%26;return this._expand(_+1),p?this.words[_]=this.words[_]|1<<D:this.words[_]=this.words[_]&~(1<<D),this._strip()},a.prototype.iadd=function(d){var p;if(this.negative!==0&&d.negative===0)return this.negative=0,p=this.isub(d),this.negative^=1,this._normSign();if(this.negative===0&&d.negative!==0)return d.negative=0,p=this.isub(d),d.negative=1,p._normSign();var _,D;this.length>d.length?(_=this,D=d):(_=d,D=this);for(var P=0,C=0;C<D.length;C++)p=(_.words[C]|0)+(D.words[C]|0)+P,this.words[C]=p&67108863,P=p>>>26;for(;P!==0&&C<_.length;C++)p=(_.words[C]|0)+P,this.words[C]=p&67108863,P=p>>>26;if(this.length=_.length,P!==0)this.words[this.length]=P,this.length++;else if(_!==this)for(;C<_.length;C++)this.words[C]=_.words[C];return this},a.prototype.add=function(d){var p;return d.negative!==0&&this.negative===0?(d.negative=0,p=this.sub(d),d.negative^=1,p):d.negative===0&&this.negative!==0?(this.negative=0,p=d.sub(this),this.negative=1,p):this.length>d.length?this.clone().iadd(d):d.clone().iadd(this)},a.prototype.isub=function(d){if(d.negative!==0){d.negative=0;var p=this.iadd(d);return d.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(d),this.negative=1,this._normSign();var _=this.cmp(d);if(_===0)return this.negative=0,this.length=1,this.words[0]=0,this;var D,P;_>0?(D=this,P=d):(D=d,P=this);for(var C=0,F=0;F<P.length;F++)p=(D.words[F]|0)-(P.words[F]|0)+C,C=p>>26,this.words[F]=p&67108863;for(;C!==0&&F<D.length;F++)p=(D.words[F]|0)+C,C=p>>26,this.words[F]=p&67108863;if(C===0&&F<D.length&&D!==this)for(;F<D.length;F++)this.words[F]=D.words[F];return this.length=Math.max(this.length,F),D!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(d){return this.clone().isub(d)};function J(d,p,_){_.negative=p.negative^d.negative;var D=d.length+p.length|0;_.length=D,D=D-1|0;var P=d.words[0]|0,C=p.words[0]|0,F=P*C,M=F&67108863,v=F/67108864|0;_.words[0]=M;for(var R=1;R<D;R++){for(var re=v>>>26,he=v&67108863,A=Math.min(R,p.length-1),ee=Math.max(0,R-d.length+1);ee<=A;ee++){var L=R-ee|0;P=d.words[L]|0,C=p.words[ee]|0,F=P*C+he,re+=F/67108864|0,he=F&67108863}_.words[R]=he|0,v=re|0}return v!==0?_.words[R]=v|0:_.length--,_._strip()}var j=function(d,p,_){var D=d.words,P=p.words,C=_.words,F=0,M,v,R,re=D[0]|0,he=re&8191,A=re>>>13,ee=D[1]|0,L=ee&8191,$=ee>>>13,V=D[2]|0,b=V&8191,q=V>>>13,te=D[3]|0,ae=te&8191,oe=te>>>13,Me=D[4]|0,Oe=Me&8191,Ie=Me>>>13,At=D[5]|0,$e=At&8191,De=At>>>13,qe=D[6]|0,_e=qe&8191,Ee=qe>>>13,Ve=D[7]|0,ye=Ve&8191,Ae=Ve>>>13,Be=D[8]|0,we=Be&8191,Pe=Be>>>13,Le=D[9]|0,Ce=Le&8191,Ne=Le>>>13,st=P[0]|0,Te=st&8191,Re=st>>>13,Jt=P[1]|0,ut=Jt&8191,gt=Jt>>>13,Yt=P[2]|0,yt=Yt&8191,Et=Yt>>>13,Rr=P[3]|0,Ge=Rr&8191,ze=Rr>>>13,xt=P[4]|0,We=xt&8191,Ke=xt>>>13,St=P[5]|0,Qe=St&8191,Xe=St>>>13,Dt=P[6]|0,Ze=Dt&8191,Je=Dt>>>13,Ot=P[7]|0,Ye=Ot&8191,Ue=Ot>>>13,Ft=P[8]|0,et=Ft&8191,Ct=Ft>>>13,zi=P[9]|0,Nt=zi&8191,lt=zi>>>13;_.negative=d.negative^p.negative,_.length=19,M=Math.imul(he,Te),v=Math.imul(he,Re),v=v+Math.imul(A,Te)|0,R=Math.imul(A,Re);var bi=(F+M|0)+((v&8191)<<13)|0;F=(R+(v>>>13)|0)+(bi>>>26)|0,bi&=67108863,M=Math.imul(L,Te),v=Math.imul(L,Re),v=v+Math.imul($,Te)|0,R=Math.imul($,Re),M=M+Math.imul(he,ut)|0,v=v+Math.imul(he,gt)|0,v=v+Math.imul(A,ut)|0,R=R+Math.imul(A,gt)|0;var vi=(F+M|0)+((v&8191)<<13)|0;F=(R+(v>>>13)|0)+(vi>>>26)|0,vi&=67108863,M=Math.imul(b,Te),v=Math.imul(b,Re),v=v+Math.imul(q,Te)|0,R=Math.imul(q,Re),M=M+Math.imul(L,ut)|0,v=v+Math.imul(L,gt)|0,v=v+Math.imul($,ut)|0,R=R+Math.imul($,gt)|0,M=M+Math.imul(he,yt)|0,v=v+Math.imul(he,Et)|0,v=v+Math.imul(A,yt)|0,R=R+Math.imul(A,Et)|0;var mi=(F+M|0)+((v&8191)<<13)|0;F=(R+(v>>>13)|0)+(mi>>>26)|0,mi&=67108863,M=Math.imul(ae,Te),v=Math.imul(ae,Re),v=v+Math.imul(oe,Te)|0,R=Math.imul(oe,Re),M=M+Math.imul(b,ut)|0,v=v+Math.imul(b,gt)|0,v=v+Math.imul(q,ut)|0,R=R+Math.imul(q,gt)|0,M=M+Math.imul(L,yt)|0,v=v+Math.imul(L,Et)|0,v=v+Math.imul($,yt)|0,R=R+Math.imul($,Et)|0,M=M+Math.imul(he,Ge)|0,v=v+Math.imul(he,ze)|0,v=v+Math.imul(A,Ge)|0,R=R+Math.imul(A,ze)|0;var yi=(F+M|0)+((v&8191)<<13)|0;F=(R+(v>>>13)|0)+(yi>>>26)|0,yi&=67108863,M=Math.imul(Oe,Te),v=Math.imul(Oe,Re),v=v+Math.imul(Ie,Te)|0,R=Math.imul(Ie,Re),M=M+Math.imul(ae,ut)|0,v=v+Math.imul(ae,gt)|0,v=v+Math.imul(oe,ut)|0,R=R+Math.imul(oe,gt)|0,M=M+Math.imul(b,yt)|0,v=v+Math.imul(b,Et)|0,v=v+Math.imul(q,yt)|0,R=R+Math.imul(q,Et)|0,M=M+Math.imul(L,Ge)|0,v=v+Math.imul(L,ze)|0,v=v+Math.imul($,Ge)|0,R=R+Math.imul($,ze)|0,M=M+Math.imul(he,We)|0,v=v+Math.imul(he,Ke)|0,v=v+Math.imul(A,We)|0,R=R+Math.imul(A,Ke)|0;var wi=(F+M|0)+((v&8191)<<13)|0;F=(R+(v>>>13)|0)+(wi>>>26)|0,wi&=67108863,M=Math.imul($e,Te),v=Math.imul($e,Re),v=v+Math.imul(De,Te)|0,R=Math.imul(De,Re),M=M+Math.imul(Oe,ut)|0,v=v+Math.imul(Oe,gt)|0,v=v+Math.imul(Ie,ut)|0,R=R+Math.imul(Ie,gt)|0,M=M+Math.imul(ae,yt)|0,v=v+Math.imul(ae,Et)|0,v=v+Math.imul(oe,yt)|0,R=R+Math.imul(oe,Et)|0,M=M+Math.imul(b,Ge)|0,v=v+Math.imul(b,ze)|0,v=v+Math.imul(q,Ge)|0,R=R+Math.imul(q,ze)|0,M=M+Math.imul(L,We)|0,v=v+Math.imul(L,Ke)|0,v=v+Math.imul($,We)|0,R=R+Math.imul($,Ke)|0,M=M+Math.imul(he,Qe)|0,v=v+Math.imul(he,Xe)|0,v=v+Math.imul(A,Qe)|0,R=R+Math.imul(A,Xe)|0;var dr=(F+M|0)+((v&8191)<<13)|0;F=(R+(v>>>13)|0)+(dr>>>26)|0,dr&=67108863,M=Math.imul(_e,Te),v=Math.imul(_e,Re),v=v+Math.imul(Ee,Te)|0,R=Math.imul(Ee,Re),M=M+Math.imul($e,ut)|0,v=v+Math.imul($e,gt)|0,v=v+Math.imul(De,ut)|0,R=R+Math.imul(De,gt)|0,M=M+Math.imul(Oe,yt)|0,v=v+Math.imul(Oe,Et)|0,v=v+Math.imul(Ie,yt)|0,R=R+Math.imul(Ie,Et)|0,M=M+Math.imul(ae,Ge)|0,v=v+Math.imul(ae,ze)|0,v=v+Math.imul(oe,Ge)|0,R=R+Math.imul(oe,ze)|0,M=M+Math.imul(b,We)|0,v=v+Math.imul(b,Ke)|0,v=v+Math.imul(q,We)|0,R=R+Math.imul(q,Ke)|0,M=M+Math.imul(L,Qe)|0,v=v+Math.imul(L,Xe)|0,v=v+Math.imul($,Qe)|0,R=R+Math.imul($,Xe)|0,M=M+Math.imul(he,Ze)|0,v=v+Math.imul(he,Je)|0,v=v+Math.imul(A,Ze)|0,R=R+Math.imul(A,Je)|0;var on=(F+M|0)+((v&8191)<<13)|0;F=(R+(v>>>13)|0)+(on>>>26)|0,on&=67108863,M=Math.imul(ye,Te),v=Math.imul(ye,Re),v=v+Math.imul(Ae,Te)|0,R=Math.imul(Ae,Re),M=M+Math.imul(_e,ut)|0,v=v+Math.imul(_e,gt)|0,v=v+Math.imul(Ee,ut)|0,R=R+Math.imul(Ee,gt)|0,M=M+Math.imul($e,yt)|0,v=v+Math.imul($e,Et)|0,v=v+Math.imul(De,yt)|0,R=R+Math.imul(De,Et)|0,M=M+Math.imul(Oe,Ge)|0,v=v+Math.imul(Oe,ze)|0,v=v+Math.imul(Ie,Ge)|0,R=R+Math.imul(Ie,ze)|0,M=M+Math.imul(ae,We)|0,v=v+Math.imul(ae,Ke)|0,v=v+Math.imul(oe,We)|0,R=R+Math.imul(oe,Ke)|0,M=M+Math.imul(b,Qe)|0,v=v+Math.imul(b,Xe)|0,v=v+Math.imul(q,Qe)|0,R=R+Math.imul(q,Xe)|0,M=M+Math.imul(L,Ze)|0,v=v+Math.imul(L,Je)|0,v=v+Math.imul($,Ze)|0,R=R+Math.imul($,Je)|0,M=M+Math.imul(he,Ye)|0,v=v+Math.imul(he,Ue)|0,v=v+Math.imul(A,Ye)|0,R=R+Math.imul(A,Ue)|0;var Is=(F+M|0)+((v&8191)<<13)|0;F=(R+(v>>>13)|0)+(Is>>>26)|0,Is&=67108863,M=Math.imul(we,Te),v=Math.imul(we,Re),v=v+Math.imul(Pe,Te)|0,R=Math.imul(Pe,Re),M=M+Math.imul(ye,ut)|0,v=v+Math.imul(ye,gt)|0,v=v+Math.imul(Ae,ut)|0,R=R+Math.imul(Ae,gt)|0,M=M+Math.imul(_e,yt)|0,v=v+Math.imul(_e,Et)|0,v=v+Math.imul(Ee,yt)|0,R=R+Math.imul(Ee,Et)|0,M=M+Math.imul($e,Ge)|0,v=v+Math.imul($e,ze)|0,v=v+Math.imul(De,Ge)|0,R=R+Math.imul(De,ze)|0,M=M+Math.imul(Oe,We)|0,v=v+Math.imul(Oe,Ke)|0,v=v+Math.imul(Ie,We)|0,R=R+Math.imul(Ie,Ke)|0,M=M+Math.imul(ae,Qe)|0,v=v+Math.imul(ae,Xe)|0,v=v+Math.imul(oe,Qe)|0,R=R+Math.imul(oe,Xe)|0,M=M+Math.imul(b,Ze)|0,v=v+Math.imul(b,Je)|0,v=v+Math.imul(q,Ze)|0,R=R+Math.imul(q,Je)|0,M=M+Math.imul(L,Ye)|0,v=v+Math.imul(L,Ue)|0,v=v+Math.imul($,Ye)|0,R=R+Math.imul($,Ue)|0,M=M+Math.imul(he,et)|0,v=v+Math.imul(he,Ct)|0,v=v+Math.imul(A,et)|0,R=R+Math.imul(A,Ct)|0;var cn=(F+M|0)+((v&8191)<<13)|0;F=(R+(v>>>13)|0)+(cn>>>26)|0,cn&=67108863,M=Math.imul(Ce,Te),v=Math.imul(Ce,Re),v=v+Math.imul(Ne,Te)|0,R=Math.imul(Ne,Re),M=M+Math.imul(we,ut)|0,v=v+Math.imul(we,gt)|0,v=v+Math.imul(Pe,ut)|0,R=R+Math.imul(Pe,gt)|0,M=M+Math.imul(ye,yt)|0,v=v+Math.imul(ye,Et)|0,v=v+Math.imul(Ae,yt)|0,R=R+Math.imul(Ae,Et)|0,M=M+Math.imul(_e,Ge)|0,v=v+Math.imul(_e,ze)|0,v=v+Math.imul(Ee,Ge)|0,R=R+Math.imul(Ee,ze)|0,M=M+Math.imul($e,We)|0,v=v+Math.imul($e,Ke)|0,v=v+Math.imul(De,We)|0,R=R+Math.imul(De,Ke)|0,M=M+Math.imul(Oe,Qe)|0,v=v+Math.imul(Oe,Xe)|0,v=v+Math.imul(Ie,Qe)|0,R=R+Math.imul(Ie,Xe)|0,M=M+Math.imul(ae,Ze)|0,v=v+Math.imul(ae,Je)|0,v=v+Math.imul(oe,Ze)|0,R=R+Math.imul(oe,Je)|0,M=M+Math.imul(b,Ye)|0,v=v+Math.imul(b,Ue)|0,v=v+Math.imul(q,Ye)|0,R=R+Math.imul(q,Ue)|0,M=M+Math.imul(L,et)|0,v=v+Math.imul(L,Ct)|0,v=v+Math.imul($,et)|0,R=R+Math.imul($,Ct)|0,M=M+Math.imul(he,Nt)|0,v=v+Math.imul(he,lt)|0,v=v+Math.imul(A,Nt)|0,R=R+Math.imul(A,lt)|0;var xs=(F+M|0)+((v&8191)<<13)|0;F=(R+(v>>>13)|0)+(xs>>>26)|0,xs&=67108863,M=Math.imul(Ce,ut),v=Math.imul(Ce,gt),v=v+Math.imul(Ne,ut)|0,R=Math.imul(Ne,gt),M=M+Math.imul(we,yt)|0,v=v+Math.imul(we,Et)|0,v=v+Math.imul(Pe,yt)|0,R=R+Math.imul(Pe,Et)|0,M=M+Math.imul(ye,Ge)|0,v=v+Math.imul(ye,ze)|0,v=v+Math.imul(Ae,Ge)|0,R=R+Math.imul(Ae,ze)|0,M=M+Math.imul(_e,We)|0,v=v+Math.imul(_e,Ke)|0,v=v+Math.imul(Ee,We)|0,R=R+Math.imul(Ee,Ke)|0,M=M+Math.imul($e,Qe)|0,v=v+Math.imul($e,Xe)|0,v=v+Math.imul(De,Qe)|0,R=R+Math.imul(De,Xe)|0,M=M+Math.imul(Oe,Ze)|0,v=v+Math.imul(Oe,Je)|0,v=v+Math.imul(Ie,Ze)|0,R=R+Math.imul(Ie,Je)|0,M=M+Math.imul(ae,Ye)|0,v=v+Math.imul(ae,Ue)|0,v=v+Math.imul(oe,Ye)|0,R=R+Math.imul(oe,Ue)|0,M=M+Math.imul(b,et)|0,v=v+Math.imul(b,Ct)|0,v=v+Math.imul(q,et)|0,R=R+Math.imul(q,Ct)|0,M=M+Math.imul(L,Nt)|0,v=v+Math.imul(L,lt)|0,v=v+Math.imul($,Nt)|0,R=R+Math.imul($,lt)|0;var Ds=(F+M|0)+((v&8191)<<13)|0;F=(R+(v>>>13)|0)+(Ds>>>26)|0,Ds&=67108863,M=Math.imul(Ce,yt),v=Math.imul(Ce,Et),v=v+Math.imul(Ne,yt)|0,R=Math.imul(Ne,Et),M=M+Math.imul(we,Ge)|0,v=v+Math.imul(we,ze)|0,v=v+Math.imul(Pe,Ge)|0,R=R+Math.imul(Pe,ze)|0,M=M+Math.imul(ye,We)|0,v=v+Math.imul(ye,Ke)|0,v=v+Math.imul(Ae,We)|0,R=R+Math.imul(Ae,Ke)|0,M=M+Math.imul(_e,Qe)|0,v=v+Math.imul(_e,Xe)|0,v=v+Math.imul(Ee,Qe)|0,R=R+Math.imul(Ee,Xe)|0,M=M+Math.imul($e,Ze)|0,v=v+Math.imul($e,Je)|0,v=v+Math.imul(De,Ze)|0,R=R+Math.imul(De,Je)|0,M=M+Math.imul(Oe,Ye)|0,v=v+Math.imul(Oe,Ue)|0,v=v+Math.imul(Ie,Ye)|0,R=R+Math.imul(Ie,Ue)|0,M=M+Math.imul(ae,et)|0,v=v+Math.imul(ae,Ct)|0,v=v+Math.imul(oe,et)|0,R=R+Math.imul(oe,Ct)|0,M=M+Math.imul(b,Nt)|0,v=v+Math.imul(b,lt)|0,v=v+Math.imul(q,Nt)|0,R=R+Math.imul(q,lt)|0;var un=(F+M|0)+((v&8191)<<13)|0;F=(R+(v>>>13)|0)+(un>>>26)|0,un&=67108863,M=Math.imul(Ce,Ge),v=Math.imul(Ce,ze),v=v+Math.imul(Ne,Ge)|0,R=Math.imul(Ne,ze),M=M+Math.imul(we,We)|0,v=v+Math.imul(we,Ke)|0,v=v+Math.imul(Pe,We)|0,R=R+Math.imul(Pe,Ke)|0,M=M+Math.imul(ye,Qe)|0,v=v+Math.imul(ye,Xe)|0,v=v+Math.imul(Ae,Qe)|0,R=R+Math.imul(Ae,Xe)|0,M=M+Math.imul(_e,Ze)|0,v=v+Math.imul(_e,Je)|0,v=v+Math.imul(Ee,Ze)|0,R=R+Math.imul(Ee,Je)|0,M=M+Math.imul($e,Ye)|0,v=v+Math.imul($e,Ue)|0,v=v+Math.imul(De,Ye)|0,R=R+Math.imul(De,Ue)|0,M=M+Math.imul(Oe,et)|0,v=v+Math.imul(Oe,Ct)|0,v=v+Math.imul(Ie,et)|0,R=R+Math.imul(Ie,Ct)|0,M=M+Math.imul(ae,Nt)|0,v=v+Math.imul(ae,lt)|0,v=v+Math.imul(oe,Nt)|0,R=R+Math.imul(oe,lt)|0;var rs=(F+M|0)+((v&8191)<<13)|0;F=(R+(v>>>13)|0)+(rs>>>26)|0,rs&=67108863,M=Math.imul(Ce,We),v=Math.imul(Ce,Ke),v=v+Math.imul(Ne,We)|0,R=Math.imul(Ne,Ke),M=M+Math.imul(we,Qe)|0,v=v+Math.imul(we,Xe)|0,v=v+Math.imul(Pe,Qe)|0,R=R+Math.imul(Pe,Xe)|0,M=M+Math.imul(ye,Ze)|0,v=v+Math.imul(ye,Je)|0,v=v+Math.imul(Ae,Ze)|0,R=R+Math.imul(Ae,Je)|0,M=M+Math.imul(_e,Ye)|0,v=v+Math.imul(_e,Ue)|0,v=v+Math.imul(Ee,Ye)|0,R=R+Math.imul(Ee,Ue)|0,M=M+Math.imul($e,et)|0,v=v+Math.imul($e,Ct)|0,v=v+Math.imul(De,et)|0,R=R+Math.imul(De,Ct)|0,M=M+Math.imul(Oe,Nt)|0,v=v+Math.imul(Oe,lt)|0,v=v+Math.imul(Ie,Nt)|0,R=R+Math.imul(Ie,lt)|0;var is=(F+M|0)+((v&8191)<<13)|0;F=(R+(v>>>13)|0)+(is>>>26)|0,is&=67108863,M=Math.imul(Ce,Qe),v=Math.imul(Ce,Xe),v=v+Math.imul(Ne,Qe)|0,R=Math.imul(Ne,Xe),M=M+Math.imul(we,Ze)|0,v=v+Math.imul(we,Je)|0,v=v+Math.imul(Pe,Ze)|0,R=R+Math.imul(Pe,Je)|0,M=M+Math.imul(ye,Ye)|0,v=v+Math.imul(ye,Ue)|0,v=v+Math.imul(Ae,Ye)|0,R=R+Math.imul(Ae,Ue)|0,M=M+Math.imul(_e,et)|0,v=v+Math.imul(_e,Ct)|0,v=v+Math.imul(Ee,et)|0,R=R+Math.imul(Ee,Ct)|0,M=M+Math.imul($e,Nt)|0,v=v+Math.imul($e,lt)|0,v=v+Math.imul(De,Nt)|0,R=R+Math.imul(De,lt)|0;var Tr=(F+M|0)+((v&8191)<<13)|0;F=(R+(v>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,M=Math.imul(Ce,Ze),v=Math.imul(Ce,Je),v=v+Math.imul(Ne,Ze)|0,R=Math.imul(Ne,Je),M=M+Math.imul(we,Ye)|0,v=v+Math.imul(we,Ue)|0,v=v+Math.imul(Pe,Ye)|0,R=R+Math.imul(Pe,Ue)|0,M=M+Math.imul(ye,et)|0,v=v+Math.imul(ye,Ct)|0,v=v+Math.imul(Ae,et)|0,R=R+Math.imul(Ae,Ct)|0,M=M+Math.imul(_e,Nt)|0,v=v+Math.imul(_e,lt)|0,v=v+Math.imul(Ee,Nt)|0,R=R+Math.imul(Ee,lt)|0;var Ms=(F+M|0)+((v&8191)<<13)|0;F=(R+(v>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,M=Math.imul(Ce,Ye),v=Math.imul(Ce,Ue),v=v+Math.imul(Ne,Ye)|0,R=Math.imul(Ne,Ue),M=M+Math.imul(we,et)|0,v=v+Math.imul(we,Ct)|0,v=v+Math.imul(Pe,et)|0,R=R+Math.imul(Pe,Ct)|0,M=M+Math.imul(ye,Nt)|0,v=v+Math.imul(ye,lt)|0,v=v+Math.imul(Ae,Nt)|0,R=R+Math.imul(Ae,lt)|0;var Ps=(F+M|0)+((v&8191)<<13)|0;F=(R+(v>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,M=Math.imul(Ce,et),v=Math.imul(Ce,Ct),v=v+Math.imul(Ne,et)|0,R=Math.imul(Ne,Ct),M=M+Math.imul(we,Nt)|0,v=v+Math.imul(we,lt)|0,v=v+Math.imul(Pe,Nt)|0,R=R+Math.imul(Pe,lt)|0;var Os=(F+M|0)+((v&8191)<<13)|0;F=(R+(v>>>13)|0)+(Os>>>26)|0,Os&=67108863,M=Math.imul(Ce,Nt),v=Math.imul(Ce,lt),v=v+Math.imul(Ne,Nt)|0,R=Math.imul(Ne,lt);var Cs=(F+M|0)+((v&8191)<<13)|0;return F=(R+(v>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,C[0]=bi,C[1]=vi,C[2]=mi,C[3]=yi,C[4]=wi,C[5]=dr,C[6]=on,C[7]=Is,C[8]=cn,C[9]=xs,C[10]=Ds,C[11]=un,C[12]=rs,C[13]=is,C[14]=Tr,C[15]=Ms,C[16]=Ps,C[17]=Os,C[18]=Cs,F!==0&&(C[19]=F,_.length++),_};Math.imul||(j=J);function W(d,p,_){_.negative=p.negative^d.negative,_.length=d.length+p.length;for(var D=0,P=0,C=0;C<_.length-1;C++){var F=P;P=0;for(var M=D&67108863,v=Math.min(C,p.length-1),R=Math.max(0,C-d.length+1);R<=v;R++){var re=C-R,he=d.words[re]|0,A=p.words[R]|0,ee=he*A,L=ee&67108863;F=F+(ee/67108864|0)|0,L=L+M|0,M=L&67108863,F=F+(L>>>26)|0,P+=F>>>26,F&=67108863}_.words[C]=M,D=F,F=P}return D!==0?_.words[C]=D:_.length--,_._strip()}function B(d,p,_){return W(d,p,_)}a.prototype.mulTo=function(d,p){var _,D=this.length+d.length;return this.length===10&&d.length===10?_=j(this,d,p):D<63?_=J(this,d,p):D<1024?_=W(this,d,p):_=B(this,d,p),_},a.prototype.mul=function(d){var p=new a(null);return p.words=new Array(this.length+d.length),this.mulTo(d,p)},a.prototype.mulf=function(d){var p=new a(null);return p.words=new Array(this.length+d.length),B(this,d,p)},a.prototype.imul=function(d){return this.clone().mulTo(d,this)},a.prototype.imuln=function(d){var p=d<0;p&&(d=-d),i(typeof d=="number"),i(d<67108864);for(var _=0,D=0;D<this.length;D++){var P=(this.words[D]|0)*d,C=(P&67108863)+(_&67108863);_>>=26,_+=P/67108864|0,_+=C>>>26,this.words[D]=C&67108863}return _!==0&&(this.words[D]=_,this.length++),p?this.ineg():this},a.prototype.muln=function(d){return this.clone().imuln(d)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(d){var p=K(d);if(p.length===0)return new a(1);for(var _=this,D=0;D<p.length&&p[D]===0;D++,_=_.sqr());if(++D<p.length)for(var P=_.sqr();D<p.length;D++,P=P.sqr())p[D]!==0&&(_=_.mul(P));return _},a.prototype.iushln=function(d){i(typeof d=="number"&&d>=0);var p=d%26,_=(d-p)/26,D=67108863>>>26-p<<26-p,P;if(p!==0){var C=0;for(P=0;P<this.length;P++){var F=this.words[P]&D,M=(this.words[P]|0)-F<<p;this.words[P]=M|C,C=F>>>26-p}C&&(this.words[P]=C,this.length++)}if(_!==0){for(P=this.length-1;P>=0;P--)this.words[P+_]=this.words[P];for(P=0;P<_;P++)this.words[P]=0;this.length+=_}return this._strip()},a.prototype.ishln=function(d){return i(this.negative===0),this.iushln(d)},a.prototype.iushrn=function(d,p,_){i(typeof d=="number"&&d>=0);var D;p?D=(p-p%26)/26:D=0;var P=d%26,C=Math.min((d-P)/26,this.length),F=67108863^67108863>>>P<<P,M=_;if(D-=C,D=Math.max(0,D),M){for(var v=0;v<C;v++)M.words[v]=this.words[v];M.length=C}if(C!==0)if(this.length>C)for(this.length-=C,v=0;v<this.length;v++)this.words[v]=this.words[v+C];else this.words[0]=0,this.length=1;var R=0;for(v=this.length-1;v>=0&&(R!==0||v>=D);v--){var re=this.words[v]|0;this.words[v]=R<<26-P|re>>>P,R=re&F}return M&&R!==0&&(M.words[M.length++]=R),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(d,p,_){return i(this.negative===0),this.iushrn(d,p,_)},a.prototype.shln=function(d){return this.clone().ishln(d)},a.prototype.ushln=function(d){return this.clone().iushln(d)},a.prototype.shrn=function(d){return this.clone().ishrn(d)},a.prototype.ushrn=function(d){return this.clone().iushrn(d)},a.prototype.testn=function(d){i(typeof d=="number"&&d>=0);var p=d%26,_=(d-p)/26,D=1<<p;if(this.length<=_)return!1;var P=this.words[_];return!!(P&D)},a.prototype.imaskn=function(d){i(typeof d=="number"&&d>=0);var p=d%26,_=(d-p)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=_)return this;if(p!==0&&_++,this.length=Math.min(_,this.length),p!==0){var D=67108863^67108863>>>p<<p;this.words[this.length-1]&=D}return this._strip()},a.prototype.maskn=function(d){return this.clone().imaskn(d)},a.prototype.iaddn=function(d){return i(typeof d=="number"),i(d<67108864),d<0?this.isubn(-d):this.negative!==0?this.length===1&&(this.words[0]|0)<=d?(this.words[0]=d-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(d),this.negative=1,this):this._iaddn(d)},a.prototype._iaddn=function(d){this.words[0]+=d;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},a.prototype.isubn=function(d){if(i(typeof d=="number"),i(d<67108864),d<0)return this.iaddn(-d);if(this.negative!==0)return this.negative=0,this.iaddn(d),this.negative=1,this;if(this.words[0]-=d,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},a.prototype.addn=function(d){return this.clone().iaddn(d)},a.prototype.subn=function(d){return this.clone().isubn(d)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(d,p,_){var D=d.length+_,P;this._expand(D);var C,F=0;for(P=0;P<d.length;P++){C=(this.words[P+_]|0)+F;var M=(d.words[P]|0)*p;C-=M&67108863,F=(C>>26)-(M/67108864|0),this.words[P+_]=C&67108863}for(;P<this.length-_;P++)C=(this.words[P+_]|0)+F,F=C>>26,this.words[P+_]=C&67108863;if(F===0)return this._strip();for(i(F===-1),F=0,P=0;P<this.length;P++)C=-(this.words[P]|0)+F,F=C>>26,this.words[P]=C&67108863;return this.negative=1,this._strip()},a.prototype._wordDiv=function(d,p){var _=this.length-d.length,D=this.clone(),P=d,C=P.words[P.length-1]|0,F=this._countBits(C);_=26-F,_!==0&&(P=P.ushln(_),D.iushln(_),C=P.words[P.length-1]|0);var M=D.length-P.length,v;if(p!=="mod"){v=new a(null),v.length=M+1,v.words=new Array(v.length);for(var R=0;R<v.length;R++)v.words[R]=0}var re=D.clone()._ishlnsubmul(P,1,M);re.negative===0&&(D=re,v&&(v.words[M]=1));for(var he=M-1;he>=0;he--){var A=(D.words[P.length+he]|0)*67108864+(D.words[P.length+he-1]|0);for(A=Math.min(A/C|0,67108863),D._ishlnsubmul(P,A,he);D.negative!==0;)A--,D.negative=0,D._ishlnsubmul(P,1,he),D.isZero()||(D.negative^=1);v&&(v.words[he]=A)}return v&&v._strip(),D._strip(),p!=="div"&&_!==0&&D.iushrn(_),{div:v||null,mod:D}},a.prototype.divmod=function(d,p,_){if(i(!d.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var D,P,C;return this.negative!==0&&d.negative===0?(C=this.neg().divmod(d,p),p!=="mod"&&(D=C.div.neg()),p!=="div"&&(P=C.mod.neg(),_&&P.negative!==0&&P.iadd(d)),{div:D,mod:P}):this.negative===0&&d.negative!==0?(C=this.divmod(d.neg(),p),p!=="mod"&&(D=C.div.neg()),{div:D,mod:C.mod}):this.negative&d.negative?(C=this.neg().divmod(d.neg(),p),p!=="div"&&(P=C.mod.neg(),_&&P.negative!==0&&P.isub(d)),{div:C.div,mod:P}):d.length>this.length||this.cmp(d)<0?{div:new a(0),mod:this}:d.length===1?p==="div"?{div:this.divn(d.words[0]),mod:null}:p==="mod"?{div:null,mod:new a(this.modrn(d.words[0]))}:{div:this.divn(d.words[0]),mod:new a(this.modrn(d.words[0]))}:this._wordDiv(d,p)},a.prototype.div=function(d){return this.divmod(d,"div",!1).div},a.prototype.mod=function(d){return this.divmod(d,"mod",!1).mod},a.prototype.umod=function(d){return this.divmod(d,"mod",!0).mod},a.prototype.divRound=function(d){var p=this.divmod(d);if(p.mod.isZero())return p.div;var _=p.div.negative!==0?p.mod.isub(d):p.mod,D=d.ushrn(1),P=d.andln(1),C=_.cmp(D);return C<0||P===1&&C===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},a.prototype.modrn=function(d){var p=d<0;p&&(d=-d),i(d<=67108863);for(var _=(1<<26)%d,D=0,P=this.length-1;P>=0;P--)D=(_*D+(this.words[P]|0))%d;return p?-D:D},a.prototype.modn=function(d){return this.modrn(d)},a.prototype.idivn=function(d){var p=d<0;p&&(d=-d),i(d<=67108863);for(var _=0,D=this.length-1;D>=0;D--){var P=(this.words[D]|0)+_*67108864;this.words[D]=P/d|0,_=P%d}return this._strip(),p?this.ineg():this},a.prototype.divn=function(d){return this.clone().idivn(d)},a.prototype.egcd=function(d){i(d.negative===0),i(!d.isZero());var p=this,_=d.clone();p.negative!==0?p=p.umod(d):p=p.clone();for(var D=new a(1),P=new a(0),C=new a(0),F=new a(1),M=0;p.isEven()&&_.isEven();)p.iushrn(1),_.iushrn(1),++M;for(var v=_.clone(),R=p.clone();!p.isZero();){for(var re=0,he=1;!(p.words[0]&he)&&re<26;++re,he<<=1);if(re>0)for(p.iushrn(re);re-- >0;)(D.isOdd()||P.isOdd())&&(D.iadd(v),P.isub(R)),D.iushrn(1),P.iushrn(1);for(var A=0,ee=1;!(_.words[0]&ee)&&A<26;++A,ee<<=1);if(A>0)for(_.iushrn(A);A-- >0;)(C.isOdd()||F.isOdd())&&(C.iadd(v),F.isub(R)),C.iushrn(1),F.iushrn(1);p.cmp(_)>=0?(p.isub(_),D.isub(C),P.isub(F)):(_.isub(p),C.isub(D),F.isub(P))}return{a:C,b:F,gcd:_.iushln(M)}},a.prototype._invmp=function(d){i(d.negative===0),i(!d.isZero());var p=this,_=d.clone();p.negative!==0?p=p.umod(d):p=p.clone();for(var D=new a(1),P=new a(0),C=_.clone();p.cmpn(1)>0&&_.cmpn(1)>0;){for(var F=0,M=1;!(p.words[0]&M)&&F<26;++F,M<<=1);if(F>0)for(p.iushrn(F);F-- >0;)D.isOdd()&&D.iadd(C),D.iushrn(1);for(var v=0,R=1;!(_.words[0]&R)&&v<26;++v,R<<=1);if(v>0)for(_.iushrn(v);v-- >0;)P.isOdd()&&P.iadd(C),P.iushrn(1);p.cmp(_)>=0?(p.isub(_),D.isub(P)):(_.isub(p),P.isub(D))}var re;return p.cmpn(1)===0?re=D:re=P,re.cmpn(0)<0&&re.iadd(d),re},a.prototype.gcd=function(d){if(this.isZero())return d.abs();if(d.isZero())return this.abs();var p=this.clone(),_=d.clone();p.negative=0,_.negative=0;for(var D=0;p.isEven()&&_.isEven();D++)p.iushrn(1),_.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;_.isEven();)_.iushrn(1);var P=p.cmp(_);if(P<0){var C=p;p=_,_=C}else if(P===0||_.cmpn(1)===0)break;p.isub(_)}while(!0);return _.iushln(D)},a.prototype.invm=function(d){return this.egcd(d).a.umod(d)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(d){return this.words[0]&d},a.prototype.bincn=function(d){i(typeof d=="number");var p=d%26,_=(d-p)/26,D=1<<p;if(this.length<=_)return this._expand(_+1),this.words[_]|=D,this;for(var P=D,C=_;P!==0&&C<this.length;C++){var F=this.words[C]|0;F+=P,P=F>>>26,F&=67108863,this.words[C]=F}return P!==0&&(this.words[C]=P,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(d){var p=d<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var _;if(this.length>1)_=1;else{p&&(d=-d),i(d<=67108863,"Number is too big");var D=this.words[0]|0;_=D===d?0:D<d?-1:1}return this.negative!==0?-_|0:_},a.prototype.cmp=function(d){if(this.negative!==0&&d.negative===0)return-1;if(this.negative===0&&d.negative!==0)return 1;var p=this.ucmp(d);return this.negative!==0?-p|0:p},a.prototype.ucmp=function(d){if(this.length>d.length)return 1;if(this.length<d.length)return-1;for(var p=0,_=this.length-1;_>=0;_--){var D=this.words[_]|0,P=d.words[_]|0;if(D!==P){D<P?p=-1:D>P&&(p=1);break}}return p},a.prototype.gtn=function(d){return this.cmpn(d)===1},a.prototype.gt=function(d){return this.cmp(d)===1},a.prototype.gten=function(d){return this.cmpn(d)>=0},a.prototype.gte=function(d){return this.cmp(d)>=0},a.prototype.ltn=function(d){return this.cmpn(d)===-1},a.prototype.lt=function(d){return this.cmp(d)===-1},a.prototype.lten=function(d){return this.cmpn(d)<=0},a.prototype.lte=function(d){return this.cmp(d)<=0},a.prototype.eqn=function(d){return this.cmpn(d)===0},a.prototype.eq=function(d){return this.cmp(d)===0},a.red=function(d){return new pe(d)},a.prototype.toRed=function(d){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),d.convertTo(this)._forceRed(d)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(d){return this.red=d,this},a.prototype.forceRed=function(d){return i(!this.red,"Already a number in reduction context"),this._forceRed(d)},a.prototype.redAdd=function(d){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,d)},a.prototype.redIAdd=function(d){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,d)},a.prototype.redSub=function(d){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,d)},a.prototype.redISub=function(d){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,d)},a.prototype.redShl=function(d){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,d)},a.prototype.redMul=function(d){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.mul(this,d)},a.prototype.redIMul=function(d){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,d),this.red.imul(this,d)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(d){return i(this.red&&!d.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,d)};var U={k256:null,p224:null,p192:null,p25519:null};function H(d,p){this.name=d,this.p=new a(p,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}H.prototype._tmp=function(){var d=new a(null);return d.words=new Array(Math.ceil(this.n/13)),d},H.prototype.ireduce=function(d){var p=d,_;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),_=p.bitLength();while(_>this.n);var D=_<this.n?-1:p.ucmp(this.p);return D===0?(p.words[0]=0,p.length=1):D>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},H.prototype.split=function(d,p){d.iushrn(this.n,0,p)},H.prototype.imulK=function(d){return d.imul(this.k)};function m(){H.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(m,H),m.prototype.split=function(d,p){for(var _=4194303,D=Math.min(d.length,9),P=0;P<D;P++)p.words[P]=d.words[P];if(p.length=D,d.length<=9){d.words[0]=0,d.length=1;return}var C=d.words[9];for(p.words[p.length++]=C&_,P=10;P<d.length;P++){var F=d.words[P]|0;d.words[P-10]=(F&_)<<4|C>>>22,C=F}C>>>=22,d.words[P-10]=C,C===0&&d.length>10?d.length-=10:d.length-=9},m.prototype.imulK=function(d){d.words[d.length]=0,d.words[d.length+1]=0,d.length+=2;for(var p=0,_=0;_<d.length;_++){var D=d.words[_]|0;p+=D*977,d.words[_]=p&67108863,p=D*64+(p/67108864|0)}return d.words[d.length-1]===0&&(d.length--,d.words[d.length-1]===0&&d.length--),d};function N(){H.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(N,H);function ne(){H.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(ne,H);function le(){H.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(le,H),le.prototype.imulK=function(d){for(var p=0,_=0;_<d.length;_++){var D=(d.words[_]|0)*19+p,P=D&67108863;D>>>=26,d.words[_]=P,p=D}return p!==0&&(d.words[d.length++]=p),d},a._prime=function(d){if(U[d])return U[d];var p;if(d==="k256")p=new m;else if(d==="p224")p=new N;else if(d==="p192")p=new ne;else if(d==="p25519")p=new le;else throw new Error("Unknown prime "+d);return U[d]=p,p};function pe(d){if(typeof d=="string"){var p=a._prime(d);this.m=p.p,this.prime=p}else i(d.gtn(1),"modulus must be greater than 1"),this.m=d,this.prime=null}pe.prototype._verify1=function(d){i(d.negative===0,"red works only with positives"),i(d.red,"red works only with red numbers")},pe.prototype._verify2=function(d,p){i((d.negative|p.negative)===0,"red works only with positives"),i(d.red&&d.red===p.red,"red works only with red numbers")},pe.prototype.imod=function(d){return this.prime?this.prime.ireduce(d)._forceRed(this):(g(d,d.umod(this.m)._forceRed(this)),d)},pe.prototype.neg=function(d){return d.isZero()?d.clone():this.m.sub(d)._forceRed(this)},pe.prototype.add=function(d,p){this._verify2(d,p);var _=d.add(p);return _.cmp(this.m)>=0&&_.isub(this.m),_._forceRed(this)},pe.prototype.iadd=function(d,p){this._verify2(d,p);var _=d.iadd(p);return _.cmp(this.m)>=0&&_.isub(this.m),_},pe.prototype.sub=function(d,p){this._verify2(d,p);var _=d.sub(p);return _.cmpn(0)<0&&_.iadd(this.m),_._forceRed(this)},pe.prototype.isub=function(d,p){this._verify2(d,p);var _=d.isub(p);return _.cmpn(0)<0&&_.iadd(this.m),_},pe.prototype.shl=function(d,p){return this._verify1(d),this.imod(d.ushln(p))},pe.prototype.imul=function(d,p){return this._verify2(d,p),this.imod(d.imul(p))},pe.prototype.mul=function(d,p){return this._verify2(d,p),this.imod(d.mul(p))},pe.prototype.isqr=function(d){return this.imul(d,d.clone())},pe.prototype.sqr=function(d){return this.mul(d,d)},pe.prototype.sqrt=function(d){if(d.isZero())return d.clone();var p=this.m.andln(3);if(i(p%2===1),p===3){var _=this.m.add(new a(1)).iushrn(2);return this.pow(d,_)}for(var D=this.m.subn(1),P=0;!D.isZero()&&D.andln(1)===0;)P++,D.iushrn(1);i(!D.isZero());var C=new a(1).toRed(this),F=C.redNeg(),M=this.m.subn(1).iushrn(1),v=this.m.bitLength();for(v=new a(2*v*v).toRed(this);this.pow(v,M).cmp(F)!==0;)v.redIAdd(F);for(var R=this.pow(v,D),re=this.pow(d,D.addn(1).iushrn(1)),he=this.pow(d,D),A=P;he.cmp(C)!==0;){for(var ee=he,L=0;ee.cmp(C)!==0;L++)ee=ee.redSqr();i(L<A);var $=this.pow(R,new a(1).iushln(A-L-1));re=re.redMul($),R=$.redSqr(),he=he.redMul(R),A=L}return re},pe.prototype.invm=function(d){var p=d._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},pe.prototype.pow=function(d,p){if(p.isZero())return new a(1).toRed(this);if(p.cmpn(1)===0)return d.clone();var _=4,D=new Array(1<<_);D[0]=new a(1).toRed(this),D[1]=d;for(var P=2;P<D.length;P++)D[P]=this.mul(D[P-1],d);var C=D[0],F=0,M=0,v=p.bitLength()%26;for(v===0&&(v=26),P=p.length-1;P>=0;P--){for(var R=p.words[P],re=v-1;re>=0;re--){var he=R>>re&1;if(C!==D[0]&&(C=this.sqr(C)),he===0&&F===0){M=0;continue}F<<=1,F|=he,M++,!(M!==_&&(P!==0||re!==0))&&(C=this.mul(C,D[F]),M=0,F=0)}v=26}return C},pe.prototype.convertTo=function(d){var p=d.umod(this.m);return p===d?p.clone():p},pe.prototype.convertFrom=function(d){var p=d.clone();return p.red=null,p},a.mont=function(d){return new ve(d)};function ve(d){pe.call(this,d),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(ve,pe),ve.prototype.convertTo=function(d){return this.imod(d.ushln(this.shift))},ve.prototype.convertFrom=function(d){var p=this.imod(d.mul(this.rinv));return p.red=null,p},ve.prototype.imul=function(d,p){if(d.isZero()||p.isZero())return d.words[0]=0,d.length=1,d;var _=d.imul(p),D=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),P=_.isub(D).iushrn(this.shift),C=P;return P.cmp(this.m)>=0?C=P.isub(this.m):P.cmpn(0)<0&&(C=P.iadd(this.m)),C._forceRed(this)},ve.prototype.mul=function(d,p){if(d.isZero()||p.isZero())return new a(0)._forceRed(this);var _=d.mul(p),D=_.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),P=_.isub(D).iushrn(this.shift),C=P;return P.cmp(this.m)>=0?C=P.isub(this.m):P.cmpn(0)<0&&(C=P.iadd(this.m)),C._forceRed(this)},ve.prototype.invm=function(d){var p=this.imod(d._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(r,Xb)})(rv);var nt=rv.exports;const iv="bignumber/5.7.0";var Vu=nt.BN;const Wn=new Sr(iv),Yh={},y1=9007199254740991;function O9(r){return r!=null&&(kt.isBigNumber(r)||typeof r=="number"&&r%1===0||typeof r=="string"&&!!r.match(/^-?[0-9]+$/)||li(r)||typeof r=="bigint"||Qa(r))}let w1=!1;class kt{constructor(e,t){e!==Yh&&Wn.throwError("cannot call constructor directly; use BigNumber.from",Sr.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Jr(vt(this).fromTwos(e))}toTwos(e){return Jr(vt(this).toTwos(e))}abs(){return this._hex[0]==="-"?kt.from(this._hex.substring(1)):this}add(e){return Jr(vt(this).add(vt(e)))}sub(e){return Jr(vt(this).sub(vt(e)))}div(e){return kt.from(e).isZero()&&Pi("division-by-zero","div"),Jr(vt(this).div(vt(e)))}mul(e){return Jr(vt(this).mul(vt(e)))}mod(e){const t=vt(e);return t.isNeg()&&Pi("division-by-zero","mod"),Jr(vt(this).umod(t))}pow(e){const t=vt(e);return t.isNeg()&&Pi("negative-power","pow"),Jr(vt(this).pow(t))}and(e){const t=vt(e);return(this.isNegative()||t.isNeg())&&Pi("unbound-bitwise-result","and"),Jr(vt(this).and(t))}or(e){const t=vt(e);return(this.isNegative()||t.isNeg())&&Pi("unbound-bitwise-result","or"),Jr(vt(this).or(t))}xor(e){const t=vt(e);return(this.isNegative()||t.isNeg())&&Pi("unbound-bitwise-result","xor"),Jr(vt(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&Pi("negative-width","mask"),Jr(vt(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Pi("negative-width","shl"),Jr(vt(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Pi("negative-width","shr"),Jr(vt(this).shrn(e))}eq(e){return vt(this).eq(vt(e))}lt(e){return vt(this).lt(vt(e))}lte(e){return vt(this).lte(vt(e))}gt(e){return vt(this).gt(vt(e))}gte(e){return vt(this).gte(vt(e))}isNegative(){return this._hex[0]==="-"}isZero(){return vt(this).isZero()}toNumber(){try{return vt(this).toNumber()}catch{Pi("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Wn.throwError("this platform does not support BigInt",Sr.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?w1||(w1=!0,Wn.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Wn.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Sr.errors.UNEXPECTED_ARGUMENT,{}):Wn.throwError("BigNumber.toString does not accept parameters",Sr.errors.UNEXPECTED_ARGUMENT,{})),vt(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof kt)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new kt(Yh,Go(e)):e.match(/^-?[0-9]+$/)?new kt(Yh,Go(new Vu(e))):Wn.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Pi("underflow","BigNumber.from",e),(e>=y1||e<=-y1)&&Pi("overflow","BigNumber.from",e),kt.from(String(e));const t=e;if(typeof t=="bigint")return kt.from(t.toString());if(Qa(t))return kt.from(Xr(t));if(t)if(t.toHexString){const i=t.toHexString();if(typeof i=="string")return kt.from(i)}else{let i=t._hex;if(i==null&&t.type==="BigNumber"&&(i=t.hex),typeof i=="string"&&(li(i)||i[0]==="-"&&li(i.substring(1))))return kt.from(i)}return Wn.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function Go(r){if(typeof r!="string")return Go(r.toString(16));if(r[0]==="-")return r=r.substring(1),r[0]==="-"&&Wn.throwArgumentError("invalid hex","value",r),r=Go(r),r==="0x00"?r:"-"+r;if(r.substring(0,2)!=="0x"&&(r="0x"+r),r==="0x")return"0x00";for(r.length%2&&(r="0x0"+r.substring(2));r.length>4&&r.substring(0,4)==="0x00";)r="0x"+r.substring(4);return r}function Jr(r){return kt.from(Go(r))}function vt(r){const e=kt.from(r).toHexString();return e[0]==="-"?new Vu("-"+e.substring(3),16):new Vu(e.substring(2),16)}function Pi(r,e,t){const i={fault:r,operation:e};return t!=null&&(i.value=t),Wn.throwError(r,Sr.errors.NUMERIC_FAULT,i)}function C9(r){return new Vu(r,36).toString(16)}const $r=new Sr(iv),jo={},nv=kt.from(0),sv=kt.from(-1);function av(r,e,t,i){const s={fault:e,operation:t};return i!==void 0&&(s.value=i),$r.throwError(r,Sr.errors.NUMERIC_FAULT,s)}let $o="0";for(;$o.length<256;)$o+=$o;function bd(r){if(typeof r!="number")try{r=kt.from(r).toNumber()}catch{}return typeof r=="number"&&r>=0&&r<=256&&!(r%1)?"1"+$o.substring(0,r):$r.throwArgumentError("invalid decimal size","decimals",r)}function Qh(r,e){e==null&&(e=0);const t=bd(e);r=kt.from(r);const i=r.lt(nv);i&&(r=r.mul(sv));let s=r.mod(t).toString();for(;s.length<t.length-1;)s="0"+s;s=s.match(/^([0-9]*[1-9]|0)(0*)/)[1];const a=r.div(t).toString();return t.length===1?r=a:r=a+"."+s,i&&(r="-"+r),r}function Hn(r,e){e==null&&(e=0);const t=bd(e);(typeof r!="string"||!r.match(/^-?[0-9.]+$/))&&$r.throwArgumentError("invalid decimal value","value",r);const i=r.substring(0,1)==="-";i&&(r=r.substring(1)),r==="."&&$r.throwArgumentError("missing value","value",r);const s=r.split(".");s.length>2&&$r.throwArgumentError("too many decimal points","value",r);let a=s[0],c=s[1];for(a||(a="0"),c||(c="0");c[c.length-1]==="0";)c=c.substring(0,c.length-1);for(c.length>t.length-1&&av("fractional component exceeds decimals","underflow","parseFixed"),c===""&&(c="0");c.length<t.length-1;)c+="0";const u=kt.from(a),l=kt.from(c);let h=u.mul(t).add(l);return i&&(h=h.mul(sv)),h}let Xh=class Fl{constructor(e,t,i,s){e!==jo&&$r.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Sr.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=i,this.decimals=s,this.name=(t?"":"u")+"fixed"+String(i)+"x"+String(s),this._multiplier=bd(s),Object.freeze(this)}static from(e){if(e instanceof Fl)return e;typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,i=128,s=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const a=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);a||$r.throwArgumentError("invalid fixed format","format",e),t=a[1]!=="u",i=parseInt(a[2]),s=parseInt(a[3])}}else if(e){const a=(c,u,l)=>e[c]==null?l:(typeof e[c]!==u&&$r.throwArgumentError("invalid fixed format ("+c+" not "+u+")","format."+c,e[c]),e[c]);t=a("signed","boolean",t),i=a("width","number",i),s=a("decimals","number",s)}return i%8&&$r.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",i),s>80&&$r.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",s),new Fl(jo,t,i,s)}},ov=class Ur{constructor(e,t,i,s){e!==jo&&$r.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Sr.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=s,this._hex=t,this._value=i,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&$r.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=Hn(this._value,this.format.decimals),i=Hn(e._value,e.format.decimals);return Ur.fromValue(t.add(i),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=Hn(this._value,this.format.decimals),i=Hn(e._value,e.format.decimals);return Ur.fromValue(t.sub(i),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=Hn(this._value,this.format.decimals),i=Hn(e._value,e.format.decimals);return Ur.fromValue(t.mul(i).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=Hn(this._value,this.format.decimals),i=Hn(e._value,e.format.decimals);return Ur.fromValue(t.mul(this.format._multiplier).div(i),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Ur.from(e[0],this.format);const i=!e[1].match(/^(0*)$/);return this.isNegative()&&i&&(t=t.subUnsafe(_1.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Ur.from(e[0],this.format);const i=!e[1].match(/^(0*)$/);return!this.isNegative()&&i&&(t=t.addUnsafe(_1.toFormat(t.format))),t}round(e){e==null&&(e=0);const t=this.toString().split(".");if(t.length===1&&t.push("0"),(e<0||e>80||e%1)&&$r.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const i=Ur.from("1"+$o.substring(0,e),this.format),s=N9.toFormat(this.format);return this.mulUnsafe(i).addUnsafe(s).floor().divUnsafe(i)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&$r.throwArgumentError("invalid byte width","width",e);const t=kt.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return Sn(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Ur.fromString(this._value,e)}static fromValue(e,t,i){return i==null&&t!=null&&!O9(t)&&(i=t,t=null),t==null&&(t=0),i==null&&(i="fixed"),Ur.fromString(Qh(e,t),Xh.from(i))}static fromString(e,t){t==null&&(t="fixed");const i=Xh.from(t),s=Hn(e,i.decimals);!i.signed&&s.lt(nv)&&av("unsigned value cannot be negative","overflow","value",e);let a=null;i.signed?a=s.toTwos(i.width).toHexString():(a=s.toHexString(),a=Sn(a,i.width/8));const c=Qh(s,i.decimals);return new Ur(jo,a,c,i)}static fromBytes(e,t){t==null&&(t="fixed");const i=Xh.from(t);if(er(e).length>i.width/8)throw new Error("overflow");let s=kt.from(e);i.signed&&(s=s.fromTwos(i.width));const a=s.toTwos((i.signed?0:1)+i.width).toHexString(),c=Qh(s,i.decimals);return new Ur(jo,a,c,i)}static from(e,t){if(typeof e=="string")return Ur.fromString(e,t);if(Qa(e))return Ur.fromBytes(e,t);try{return Ur.fromValue(e,0,t)}catch(i){if(i.code!==Sr.errors.INVALID_ARGUMENT)throw i}return $r.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}};const _1=ov.from(1),N9=ov.from("0.5"),R9="strings/5.7.0",T9=new Sr(R9);var Gu;(function(r){r.current="",r.NFC="NFC",r.NFD="NFD",r.NFKC="NFKC",r.NFKD="NFKD"})(Gu||(Gu={}));var E1;(function(r){r.UNEXPECTED_CONTINUE="unexpected continuation byte",r.BAD_PREFIX="bad codepoint prefix",r.OVERRUN="string overrun",r.MISSING_CONTINUE="missing continuation byte",r.OUT_OF_RANGE="out of UTF-8 range",r.UTF16_SURROGATE="UTF-16 surrogate",r.OVERLONG="overlong representation"})(E1||(E1={}));function Zh(r,e=Gu.current){e!=Gu.current&&(T9.checkNormalize(),r=r.normalize(e));let t=[];for(let i=0;i<r.length;i++){const s=r.charCodeAt(i);if(s<128)t.push(s);else if(s<2048)t.push(s>>6|192),t.push(s&63|128);else if((s&64512)==55296){i++;const a=r.charCodeAt(i);if(i>=r.length||(a&64512)!==56320)throw new Error("invalid utf-8 string");const c=65536+((s&1023)<<10)+(a&1023);t.push(c>>18|240),t.push(c>>12&63|128),t.push(c>>6&63|128),t.push(c&63|128)}else t.push(s>>12|224),t.push(s>>6&63|128),t.push(s&63|128)}return er(t)}function F9(r){if(r.length%4!==0)throw new Error("bad data");let e=[];for(let t=0;t<r.length;t+=4)e.push(parseInt(r.substring(t,t+4),16));return e}function el(r,e){e||(e=function(s){return[parseInt(s,16)]});let t=0,i={};return r.split(",").forEach(s=>{let a=s.split(":");t+=parseInt(a[0],16),i[t]=e(a[1])}),i}function A1(r){let e=0;return r.split(",").map(t=>{let i=t.split("-");i.length===1?i[1]="0":i[1]===""&&(i[1]="1");let s=e+parseInt(i[0],16);return e=parseInt(i[1],16),{l:s,h:e}})}A1("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),"ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(r=>parseInt(r,16)),el("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),el("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),el("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",F9),A1("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function B9(r){r=atob(r);const e=[];for(let t=0;t<r.length;t++)e.push(r.charCodeAt(t));return er(e)}function cv(r,e){e==null&&(e=1);const t=[],i=t.forEach,s=function(a,c){i.call(a,function(u){c>0&&Array.isArray(u)?s(u,c-1):t.push(u)})};return s(r,e),t}function q9(r){const e={};for(let t=0;t<r.length;t++){const i=r[t];e[i[0]]=i[1]}return e}function L9(r){let e=0;function t(){return r[e++]<<8|r[e++]}let i=t(),s=1,a=[0,1];for(let U=1;U<i;U++)a.push(s+=t());let c=t(),u=e;e+=c;let l=0,h=0;function g(){return l==0&&(h=h<<8|r[e++],l=8),h>>--l&1}const w=31,S=Math.pow(2,w),E=S>>>1,I=E>>1,z=S-1;let K=0;for(let U=0;U<w;U++)K=K<<1|g();let J=[],j=0,W=S;for(;;){let U=Math.floor(((K-j+1)*s-1)/W),H=0,m=i;for(;m-H>1;){let le=H+m>>>1;U<a[le]?m=le:H=le}if(H==0)break;J.push(H);let N=j+Math.floor(W*a[H]/s),ne=j+Math.floor(W*a[H+1]/s)-1;for(;!((N^ne)&E);)K=K<<1&z|g(),N=N<<1&z,ne=ne<<1&z|1;for(;N&~ne&I;)K=K&E|K<<1&z>>>1|g(),N=N<<1^E,ne=(ne^E)<<1|E|1;j=N,W=1+ne-N}let B=i-4;return J.map(U=>{switch(U-B){case 3:return B+65792+(r[u++]<<16|r[u++]<<8|r[u++]);case 2:return B+256+(r[u++]<<8|r[u++]);case 1:return B+r[u++];default:return U-1}})}function U9(r){let e=0;return()=>r[e++]}function j9(r){return U9(L9(r))}function $9(r){return r&1?~r>>1:r>>1}function z9(r,e){let t=Array(r);for(let i=0;i<r;i++)t[i]=1+e();return t}function S1(r,e){let t=Array(r);for(let i=0,s=-1;i<r;i++)t[i]=s+=1+e();return t}function k9(r,e){let t=Array(r);for(let i=0,s=0;i<r;i++)t[i]=s+=$9(e());return t}function Wu(r,e){let t=S1(r(),r),i=r(),s=S1(i,r),a=z9(i,r);for(let c=0;c<i;c++)for(let u=0;u<a[c];u++)t.push(s[c]+u);return e?t.map(c=>e[c]):t}function H9(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(V9(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(G9(t,r))}return q9(cv(e))}function K9(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(t)}return e}function uv(r,e,t){let i=Array(r).fill(void 0).map(()=>[]);for(let s=0;s<e;s++)k9(r,t).forEach((a,c)=>i[c].push(a));return i}function V9(r,e){let t=1+e(),i=e(),s=K9(e),a=uv(s.length,1+r,e);return cv(a.map((c,u)=>{const l=c[0],h=c.slice(1);return Array(s[u]).fill(void 0).map((g,w)=>{let S=w*i;return[l+w*t,h.map(E=>E+S)]})}))}function G9(r,e){let t=1+e();return uv(t,1+r,e).map(i=>[i[0],i.slice(1)])}function W9(r){let e=Wu(r).sort((i,s)=>i-s);return t();function t(){let i=[];for(;;){let h=Wu(r,e);if(h.length==0)break;i.push({set:new Set(h),node:t()})}i.sort((h,g)=>g.set.size-h.set.size);let s=r(),a=s%3;s=s/3|0;let c=!!(s&1);s>>=1;let u=s==1,l=s==2;return{branches:i,valid:a,fe0f:c,save:u,check:l}}}function J9(){return j9(B9("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const bu=J9();new Set(Wu(bu)),new Set(Wu(bu)),H9(bu),W9(bu);const Y9=new Uint8Array(32);Y9.fill(0);const Q9=`Ethereum Signed Message:
`;function fv(r){return typeof r=="string"&&(r=Zh(r)),gd(S9([Zh(Q9),Zh(String(r.length)),r]))}const X9="address/5.7.0",Bo=new Sr(X9);function I1(r){li(r,20)||Bo.throwArgumentError("invalid address","address",r),r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let s=0;s<40;s++)t[s]=e[s].charCodeAt(0);const i=er(gd(t));for(let s=0;s<40;s+=2)i[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(i[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const Z9=9007199254740991;function eE(r){return Math.log10?Math.log10(r):Math.log(r)/Math.LN10}const vd={};for(let r=0;r<10;r++)vd[String(r)]=String(r);for(let r=0;r<26;r++)vd[String.fromCharCode(65+r)]=String(10+r);const x1=Math.floor(eE(Z9));function tE(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(i=>vd[i]).join("");for(;e.length>=x1;){let i=e.substring(0,x1);e=parseInt(i,10)%97+e.substring(i.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function rE(r){let e=null;if(typeof r!="string"&&Bo.throwArgumentError("invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/))r.substring(0,2)!=="0x"&&(r="0x"+r),e=I1(r),r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==r&&Bo.throwArgumentError("bad address checksum","address",r);else if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(r.substring(2,4)!==tE(r)&&Bo.throwArgumentError("bad icap checksum","address",r),e=C9(r.substring(4));e.length<40;)e="0"+e;e=I1("0x"+e)}else Bo.throwArgumentError("invalid address","address",r);return e}function xo(r,e,t){Object.defineProperty(r,e,{enumerable:!0,value:t,writable:!1})}const iE=new Uint8Array(32);iE.fill(0),kt.from(-1);const nE=kt.from(0),sE=kt.from(1);kt.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Sn(sE.toHexString(),32),Sn(nE.toHexString(),32);var mn={},mt={},oc=hv;function hv(r,e){if(!r)throw new Error(e||"Assertion failed")}hv.equal=function(r,e,t){if(r!=e)throw new Error(t||"Assertion failed: "+r+" != "+e)};var Bl={exports:{}};typeof Object.create=="function"?Bl.exports=function(r,e){e&&(r.super_=e,r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:Bl.exports=function(r,e){if(e){r.super_=e;var t=function(){};t.prototype=e.prototype,r.prototype=new t,r.prototype.constructor=r}};var aE=oc,oE=Bl.exports;mt.inherits=oE;function cE(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function uE(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),s=0;s<r.length;s+=2)t.push(parseInt(r[s]+r[s+1],16))}else for(var i=0,s=0;s<r.length;s++){var a=r.charCodeAt(s);a<128?t[i++]=a:a<2048?(t[i++]=a>>6|192,t[i++]=a&63|128):cE(r,s)?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),t[i++]=a>>18|240,t[i++]=a>>12&63|128,t[i++]=a>>6&63|128,t[i++]=a&63|128):(t[i++]=a>>12|224,t[i++]=a>>6&63|128,t[i++]=a&63|128)}else for(s=0;s<r.length;s++)t[s]=r[s]|0;return t}mt.toArray=uE;function fE(r){for(var e="",t=0;t<r.length;t++)e+=dv(r[t].toString(16));return e}mt.toHex=fE;function lv(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}mt.htonl=lv;function hE(r,e){for(var t="",i=0;i<r.length;i++){var s=r[i];e==="little"&&(s=lv(s)),t+=pv(s.toString(16))}return t}mt.toHex32=hE;function dv(r){return r.length===1?"0"+r:r}mt.zero2=dv;function pv(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}mt.zero8=pv;function lE(r,e,t,i){var s=t-e;aE(s%4===0);for(var a=new Array(s/4),c=0,u=e;c<a.length;c++,u+=4){var l;i==="big"?l=r[u]<<24|r[u+1]<<16|r[u+2]<<8|r[u+3]:l=r[u+3]<<24|r[u+2]<<16|r[u+1]<<8|r[u],a[c]=l>>>0}return a}mt.join32=lE;function dE(r,e){for(var t=new Array(r.length*4),i=0,s=0;i<r.length;i++,s+=4){var a=r[i];e==="big"?(t[s]=a>>>24,t[s+1]=a>>>16&255,t[s+2]=a>>>8&255,t[s+3]=a&255):(t[s+3]=a>>>24,t[s+2]=a>>>16&255,t[s+1]=a>>>8&255,t[s]=a&255)}return t}mt.split32=dE;function pE(r,e){return r>>>e|r<<32-e}mt.rotr32=pE;function gE(r,e){return r<<e|r>>>32-e}mt.rotl32=gE;function bE(r,e){return r+e>>>0}mt.sum32=bE;function vE(r,e,t){return r+e+t>>>0}mt.sum32_3=vE;function mE(r,e,t,i){return r+e+t+i>>>0}mt.sum32_4=mE;function yE(r,e,t,i,s){return r+e+t+i+s>>>0}mt.sum32_5=yE;function wE(r,e,t,i){var s=r[e],a=r[e+1],c=i+a>>>0,u=(c<i?1:0)+t+s;r[e]=u>>>0,r[e+1]=c}mt.sum64=wE;function _E(r,e,t,i){var s=e+i>>>0,a=(s<e?1:0)+r+t;return a>>>0}mt.sum64_hi=_E;function EE(r,e,t,i){var s=e+i;return s>>>0}mt.sum64_lo=EE;function AE(r,e,t,i,s,a,c,u){var l=0,h=e;h=h+i>>>0,l+=h<e?1:0,h=h+a>>>0,l+=h<a?1:0,h=h+u>>>0,l+=h<u?1:0;var g=r+t+s+c+l;return g>>>0}mt.sum64_4_hi=AE;function SE(r,e,t,i,s,a,c,u){var l=e+i+a+u;return l>>>0}mt.sum64_4_lo=SE;function IE(r,e,t,i,s,a,c,u,l,h){var g=0,w=e;w=w+i>>>0,g+=w<e?1:0,w=w+a>>>0,g+=w<a?1:0,w=w+u>>>0,g+=w<u?1:0,w=w+h>>>0,g+=w<h?1:0;var S=r+t+s+c+l+g;return S>>>0}mt.sum64_5_hi=IE;function xE(r,e,t,i,s,a,c,u,l,h){var g=e+i+a+u+h;return g>>>0}mt.sum64_5_lo=xE;function DE(r,e,t){var i=e<<32-t|r>>>t;return i>>>0}mt.rotr64_hi=DE;function ME(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}mt.rotr64_lo=ME;function PE(r,e,t){return r>>>t}mt.shr64_hi=PE;function OE(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}mt.shr64_lo=OE;var Xa={},D1=mt,CE=oc;function vu(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Xa.BlockHash=vu,vu.prototype.update=function(r,e){if(r=D1.toArray(r,e),this.pending?this.pending=this.pending.concat(r):this.pending=r,this.pendingTotal+=r.length,this.pending.length>=this._delta8){r=this.pending;var t=r.length%this._delta8;this.pending=r.slice(r.length-t,r.length),this.pending.length===0&&(this.pending=null),r=D1.join32(r,0,r.length-t,this.endian);for(var i=0;i<r.length;i+=this._delta32)this._update(r,i,i+this._delta32)}return this},vu.prototype.digest=function(r){return this.update(this._pad()),CE(this.pending===null),this._digest(r)},vu.prototype._pad=function(){var r=this.pendingTotal,e=this._delta8,t=e-(r+this.padLength)%e,i=new Array(t+this.padLength);i[0]=128;for(var s=1;s<t;s++)i[s]=0;if(r<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=r>>>24&255,i[s++]=r>>>16&255,i[s++]=r>>>8&255,i[s++]=r&255}else for(i[s++]=r&255,i[s++]=r>>>8&255,i[s++]=r>>>16&255,i[s++]=r>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,a=8;a<this.padLength;a++)i[s++]=0;return i};var Ta={},Nn={},NE=mt,In=NE.rotr32;function RE(r,e,t,i){if(r===0)return gv(e,t,i);if(r===1||r===3)return vv(e,t,i);if(r===2)return bv(e,t,i)}Nn.ft_1=RE;function gv(r,e,t){return r&e^~r&t}Nn.ch32=gv;function bv(r,e,t){return r&e^r&t^e&t}Nn.maj32=bv;function vv(r,e,t){return r^e^t}Nn.p32=vv;function TE(r){return In(r,2)^In(r,13)^In(r,22)}Nn.s0_256=TE;function FE(r){return In(r,6)^In(r,11)^In(r,25)}Nn.s1_256=FE;function BE(r){return In(r,7)^In(r,18)^r>>>3}Nn.g0_256=BE;function qE(r){return In(r,17)^In(r,19)^r>>>10}Nn.g1_256=qE;var ka=mt,LE=Xa,UE=Nn,tl=ka.rotl32,Do=ka.sum32,jE=ka.sum32_5,$E=UE.ft_1,mv=LE.BlockHash,zE=[1518500249,1859775393,2400959708,3395469782];function En(){if(!(this instanceof En))return new En;mv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}ka.inherits(En,mv);var kE=En;En.blockSize=512,En.outSize=160,En.hmacStrength=80,En.padLength=64,En.prototype._update=function(r,e){for(var t=this.W,i=0;i<16;i++)t[i]=r[e+i];for(;i<t.length;i++)t[i]=tl(t[i-3]^t[i-8]^t[i-14]^t[i-16],1);var s=this.h[0],a=this.h[1],c=this.h[2],u=this.h[3],l=this.h[4];for(i=0;i<t.length;i++){var h=~~(i/20),g=jE(tl(s,5),$E(h,a,c,u),l,t[i],zE[h]);l=u,u=c,c=tl(a,30),a=s,s=g}this.h[0]=Do(this.h[0],s),this.h[1]=Do(this.h[1],a),this.h[2]=Do(this.h[2],c),this.h[3]=Do(this.h[3],u),this.h[4]=Do(this.h[4],l)},En.prototype._digest=function(r){return r==="hex"?ka.toHex32(this.h,"big"):ka.split32(this.h,"big")};var Ha=mt,HE=Xa,Za=Nn,KE=oc,Wi=Ha.sum32,VE=Ha.sum32_4,GE=Ha.sum32_5,WE=Za.ch32,JE=Za.maj32,YE=Za.s0_256,QE=Za.s1_256,XE=Za.g0_256,ZE=Za.g1_256,yv=HE.BlockHash,eA=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function An(){if(!(this instanceof An))return new An;yv.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=eA,this.W=new Array(64)}Ha.inherits(An,yv);var wv=An;An.blockSize=512,An.outSize=256,An.hmacStrength=192,An.padLength=64,An.prototype._update=function(r,e){for(var t=this.W,i=0;i<16;i++)t[i]=r[e+i];for(;i<t.length;i++)t[i]=VE(ZE(t[i-2]),t[i-7],XE(t[i-15]),t[i-16]);var s=this.h[0],a=this.h[1],c=this.h[2],u=this.h[3],l=this.h[4],h=this.h[5],g=this.h[6],w=this.h[7];for(KE(this.k.length===t.length),i=0;i<t.length;i++){var S=GE(w,QE(l),WE(l,h,g),this.k[i],t[i]),E=Wi(YE(s),JE(s,a,c));w=g,g=h,h=l,l=Wi(u,S),u=c,c=a,a=s,s=Wi(S,E)}this.h[0]=Wi(this.h[0],s),this.h[1]=Wi(this.h[1],a),this.h[2]=Wi(this.h[2],c),this.h[3]=Wi(this.h[3],u),this.h[4]=Wi(this.h[4],l),this.h[5]=Wi(this.h[5],h),this.h[6]=Wi(this.h[6],g),this.h[7]=Wi(this.h[7],w)},An.prototype._digest=function(r){return r==="hex"?Ha.toHex32(this.h,"big"):Ha.split32(this.h,"big")};var ql=mt,_v=wv;function Yn(){if(!(this instanceof Yn))return new Yn;_v.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}ql.inherits(Yn,_v);var tA=Yn;Yn.blockSize=512,Yn.outSize=224,Yn.hmacStrength=192,Yn.padLength=64,Yn.prototype._digest=function(r){return r==="hex"?ql.toHex32(this.h.slice(0,7),"big"):ql.split32(this.h.slice(0,7),"big")};var ii=mt,rA=Xa,iA=oc,xn=ii.rotr64_hi,Dn=ii.rotr64_lo,Ev=ii.shr64_hi,Av=ii.shr64_lo,ps=ii.sum64,rl=ii.sum64_hi,il=ii.sum64_lo,nA=ii.sum64_4_hi,sA=ii.sum64_4_lo,aA=ii.sum64_5_hi,oA=ii.sum64_5_lo,Sv=rA.BlockHash,cA=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Zi(){if(!(this instanceof Zi))return new Zi;Sv.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=cA,this.W=new Array(160)}ii.inherits(Zi,Sv);var Iv=Zi;Zi.blockSize=1024,Zi.outSize=512,Zi.hmacStrength=192,Zi.padLength=128,Zi.prototype._prepareBlock=function(r,e){for(var t=this.W,i=0;i<32;i++)t[i]=r[e+i];for(;i<t.length;i+=2){var s=yA(t[i-4],t[i-3]),a=wA(t[i-4],t[i-3]),c=t[i-14],u=t[i-13],l=vA(t[i-30],t[i-29]),h=mA(t[i-30],t[i-29]),g=t[i-32],w=t[i-31];t[i]=nA(s,a,c,u,l,h,g,w),t[i+1]=sA(s,a,c,u,l,h,g,w)}},Zi.prototype._update=function(r,e){this._prepareBlock(r,e);var t=this.W,i=this.h[0],s=this.h[1],a=this.h[2],c=this.h[3],u=this.h[4],l=this.h[5],h=this.h[6],g=this.h[7],w=this.h[8],S=this.h[9],E=this.h[10],I=this.h[11],z=this.h[12],K=this.h[13],J=this.h[14],j=this.h[15];iA(this.k.length===t.length);for(var W=0;W<t.length;W+=2){var B=J,U=j,H=gA(w,S),m=bA(w,S),N=uA(w,S,E,I,z),ne=fA(w,S,E,I,z,K),le=this.k[W],pe=this.k[W+1],ve=t[W],d=t[W+1],p=aA(B,U,H,m,N,ne,le,pe,ve,d),_=oA(B,U,H,m,N,ne,le,pe,ve,d);B=dA(i,s),U=pA(i,s),H=hA(i,s,a,c,u),m=lA(i,s,a,c,u,l);var D=rl(B,U,H,m),P=il(B,U,H,m);J=z,j=K,z=E,K=I,E=w,I=S,w=rl(h,g,p,_),S=il(g,g,p,_),h=u,g=l,u=a,l=c,a=i,c=s,i=rl(p,_,D,P),s=il(p,_,D,P)}ps(this.h,0,i,s),ps(this.h,2,a,c),ps(this.h,4,u,l),ps(this.h,6,h,g),ps(this.h,8,w,S),ps(this.h,10,E,I),ps(this.h,12,z,K),ps(this.h,14,J,j)},Zi.prototype._digest=function(r){return r==="hex"?ii.toHex32(this.h,"big"):ii.split32(this.h,"big")};function uA(r,e,t,i,s){var a=r&t^~r&s;return a<0&&(a+=4294967296),a}function fA(r,e,t,i,s,a){var c=e&i^~e&a;return c<0&&(c+=4294967296),c}function hA(r,e,t,i,s){var a=r&t^r&s^t&s;return a<0&&(a+=4294967296),a}function lA(r,e,t,i,s,a){var c=e&i^e&a^i&a;return c<0&&(c+=4294967296),c}function dA(r,e){var t=xn(r,e,28),i=xn(e,r,2),s=xn(e,r,7),a=t^i^s;return a<0&&(a+=4294967296),a}function pA(r,e){var t=Dn(r,e,28),i=Dn(e,r,2),s=Dn(e,r,7),a=t^i^s;return a<0&&(a+=4294967296),a}function gA(r,e){var t=xn(r,e,14),i=xn(r,e,18),s=xn(e,r,9),a=t^i^s;return a<0&&(a+=4294967296),a}function bA(r,e){var t=Dn(r,e,14),i=Dn(r,e,18),s=Dn(e,r,9),a=t^i^s;return a<0&&(a+=4294967296),a}function vA(r,e){var t=xn(r,e,1),i=xn(r,e,8),s=Ev(r,e,7),a=t^i^s;return a<0&&(a+=4294967296),a}function mA(r,e){var t=Dn(r,e,1),i=Dn(r,e,8),s=Av(r,e,7),a=t^i^s;return a<0&&(a+=4294967296),a}function yA(r,e){var t=xn(r,e,19),i=xn(e,r,29),s=Ev(r,e,6),a=t^i^s;return a<0&&(a+=4294967296),a}function wA(r,e){var t=Dn(r,e,19),i=Dn(e,r,29),s=Av(r,e,6),a=t^i^s;return a<0&&(a+=4294967296),a}var Ll=mt,xv=Iv;function Qn(){if(!(this instanceof Qn))return new Qn;xv.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Ll.inherits(Qn,xv);var _A=Qn;Qn.blockSize=1024,Qn.outSize=384,Qn.hmacStrength=192,Qn.padLength=128,Qn.prototype._digest=function(r){return r==="hex"?Ll.toHex32(this.h.slice(0,12),"big"):Ll.split32(this.h.slice(0,12),"big")},Ta.sha1=kE,Ta.sha224=tA,Ta.sha256=wv,Ta.sha384=_A,Ta.sha512=Iv;var Dv={},ta=mt,EA=Xa,mu=ta.rotl32,M1=ta.sum32,Mo=ta.sum32_3,P1=ta.sum32_4,Mv=EA.BlockHash;function yn(){if(!(this instanceof yn))return new yn;Mv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}ta.inherits(yn,Mv),Dv.ripemd160=yn,yn.blockSize=512,yn.outSize=160,yn.hmacStrength=192,yn.padLength=64,yn.prototype._update=function(r,e){for(var t=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],c=this.h[4],u=t,l=i,h=s,g=a,w=c,S=0;S<80;S++){var E=M1(mu(P1(t,O1(S,i,s,a),r[IA[S]+e],AA(S)),DA[S]),c);t=c,c=a,a=mu(s,10),s=i,i=E,E=M1(mu(P1(u,O1(79-S,l,h,g),r[xA[S]+e],SA(S)),MA[S]),w),u=w,w=g,g=mu(h,10),h=l,l=E}E=Mo(this.h[1],s,g),this.h[1]=Mo(this.h[2],a,w),this.h[2]=Mo(this.h[3],c,u),this.h[3]=Mo(this.h[4],t,l),this.h[4]=Mo(this.h[0],i,h),this.h[0]=E},yn.prototype._digest=function(r){return r==="hex"?ta.toHex32(this.h,"little"):ta.split32(this.h,"little")};function O1(r,e,t,i){return r<=15?e^t^i:r<=31?e&t|~e&i:r<=47?(e|~t)^i:r<=63?e&i|t&~i:e^(t|~i)}function AA(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function SA(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var IA=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],xA=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],DA=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],MA=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],PA=mt,OA=oc;function $a(r,e,t){if(!(this instanceof $a))return new $a(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(PA.toArray(e,t))}var CA=$a;$a.prototype._init=function(r){r.length>this.blockSize&&(r=new this.Hash().update(r).digest()),OA(r.length<=this.blockSize);for(var e=r.length;e<this.blockSize;e++)r.push(0);for(e=0;e<r.length;e++)r[e]^=54;for(this.inner=new this.Hash().update(r),e=0;e<r.length;e++)r[e]^=106;this.outer=new this.Hash().update(r)},$a.prototype.update=function(r,e){return this.inner.update(r,e),this},$a.prototype.digest=function(r){return this.outer.update(this.inner.digest()),this.outer.digest(r)},function(r){var e=r;e.utils=mt,e.common=Xa,e.sha=Ta,e.ripemd=Dv,e.hmac=CA,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(mn);function eo(r,e,t){return t={path:e,exports:{},require:function(i,s){return NA(i,s??t.path)}},r(t,t.exports),t.exports}function NA(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var md=Pv;function Pv(r,e){if(!r)throw new Error(e||"Assertion failed")}Pv.equal=function(r,e,t){if(r!=e)throw new Error(t||"Assertion failed: "+r+" != "+e)};var rn=eo(function(r,e){var t=e;function i(c,u){if(Array.isArray(c))return c.slice();if(!c)return[];var l=[];if(typeof c!="string"){for(var h=0;h<c.length;h++)l[h]=c[h]|0;return l}if(u==="hex"){c=c.replace(/[^a-z0-9]+/ig,""),c.length%2!==0&&(c="0"+c);for(var h=0;h<c.length;h+=2)l.push(parseInt(c[h]+c[h+1],16))}else for(var h=0;h<c.length;h++){var g=c.charCodeAt(h),w=g>>8,S=g&255;w?l.push(w,S):l.push(S)}return l}t.toArray=i;function s(c){return c.length===1?"0"+c:c}t.zero2=s;function a(c){for(var u="",l=0;l<c.length;l++)u+=s(c[l].toString(16));return u}t.toHex=a,t.encode=function(c,u){return u==="hex"?a(c):c}}),di=eo(function(r,e){var t=e;t.assert=md,t.toArray=rn.toArray,t.zero2=rn.zero2,t.toHex=rn.toHex,t.encode=rn.encode;function i(l,h,g){var w=new Array(Math.max(l.bitLength(),g)+1);w.fill(0);for(var S=1<<h+1,E=l.clone(),I=0;I<w.length;I++){var z,K=E.andln(S-1);E.isOdd()?(K>(S>>1)-1?z=(S>>1)-K:z=K,E.isubn(z)):z=0,w[I]=z,E.iushrn(1)}return w}t.getNAF=i;function s(l,h){var g=[[],[]];l=l.clone(),h=h.clone();for(var w=0,S=0,E;l.cmpn(-w)>0||h.cmpn(-S)>0;){var I=l.andln(3)+w&3,z=h.andln(3)+S&3;I===3&&(I=-1),z===3&&(z=-1);var K;I&1?(E=l.andln(7)+w&7,(E===3||E===5)&&z===2?K=-I:K=I):K=0,g[0].push(K);var J;z&1?(E=h.andln(7)+S&7,(E===3||E===5)&&I===2?J=-z:J=z):J=0,g[1].push(J),2*w===K+1&&(w=1-w),2*S===J+1&&(S=1-S),l.iushrn(1),h.iushrn(1)}return g}t.getJSF=s;function a(l,h,g){var w="_"+h;l.prototype[h]=function(){return this[w]!==void 0?this[w]:this[w]=g.call(this)}}t.cachedProperty=a;function c(l){return typeof l=="string"?t.toArray(l,"hex"):l}t.parseBytes=c;function u(l){return new nt(l,"hex","le")}t.intFromLE=u}),yu=di.getNAF,RA=di.getJSF,Ju=di.assert;function ms(r,e){this.type=r,this.p=new nt(e.p,16),this.red=e.prime?nt.red(e.prime):nt.mont(this.p),this.zero=new nt(0).toRed(this.red),this.one=new nt(1).toRed(this.red),this.two=new nt(2).toRed(this.red),this.n=e.n&&new nt(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var oa=ms;ms.prototype.point=function(){throw new Error("Not implemented")},ms.prototype.validate=function(){throw new Error("Not implemented")},ms.prototype._fixedNafMul=function(r,e){Ju(r.precomputed);var t=r._getDoubles(),i=yu(e,1,this._bitLength),s=(1<<t.step+1)-(t.step%2===0?2:1);s/=3;var a=[],c,u;for(c=0;c<i.length;c+=t.step){u=0;for(var l=c+t.step-1;l>=c;l--)u=(u<<1)+i[l];a.push(u)}for(var h=this.jpoint(null,null,null),g=this.jpoint(null,null,null),w=s;w>0;w--){for(c=0;c<a.length;c++)u=a[c],u===w?g=g.mixedAdd(t.points[c]):u===-w&&(g=g.mixedAdd(t.points[c].neg()));h=h.add(g)}return h.toP()},ms.prototype._wnafMul=function(r,e){var t=4,i=r._getNAFPoints(t);t=i.wnd;for(var s=i.points,a=yu(e,t,this._bitLength),c=this.jpoint(null,null,null),u=a.length-1;u>=0;u--){for(var l=0;u>=0&&a[u]===0;u--)l++;if(u>=0&&l++,c=c.dblp(l),u<0)break;var h=a[u];Ju(h!==0),r.type==="affine"?h>0?c=c.mixedAdd(s[h-1>>1]):c=c.mixedAdd(s[-h-1>>1].neg()):h>0?c=c.add(s[h-1>>1]):c=c.add(s[-h-1>>1].neg())}return r.type==="affine"?c.toP():c},ms.prototype._wnafMulAdd=function(r,e,t,i,s){var a=this._wnafT1,c=this._wnafT2,u=this._wnafT3,l=0,h,g,w;for(h=0;h<i;h++){w=e[h];var S=w._getNAFPoints(r);a[h]=S.wnd,c[h]=S.points}for(h=i-1;h>=1;h-=2){var E=h-1,I=h;if(a[E]!==1||a[I]!==1){u[E]=yu(t[E],a[E],this._bitLength),u[I]=yu(t[I],a[I],this._bitLength),l=Math.max(u[E].length,l),l=Math.max(u[I].length,l);continue}var z=[e[E],null,null,e[I]];e[E].y.cmp(e[I].y)===0?(z[1]=e[E].add(e[I]),z[2]=e[E].toJ().mixedAdd(e[I].neg())):e[E].y.cmp(e[I].y.redNeg())===0?(z[1]=e[E].toJ().mixedAdd(e[I]),z[2]=e[E].add(e[I].neg())):(z[1]=e[E].toJ().mixedAdd(e[I]),z[2]=e[E].toJ().mixedAdd(e[I].neg()));var K=[-3,-1,-5,-7,0,7,5,1,3],J=RA(t[E],t[I]);for(l=Math.max(J[0].length,l),u[E]=new Array(l),u[I]=new Array(l),g=0;g<l;g++){var j=J[0][g]|0,W=J[1][g]|0;u[E][g]=K[(j+1)*3+(W+1)],u[I][g]=0,c[E]=z}}var B=this.jpoint(null,null,null),U=this._wnafT4;for(h=l;h>=0;h--){for(var H=0;h>=0;){var m=!0;for(g=0;g<i;g++)U[g]=u[g][h]|0,U[g]!==0&&(m=!1);if(!m)break;H++,h--}if(h>=0&&H++,B=B.dblp(H),h<0)break;for(g=0;g<i;g++){var N=U[g];N!==0&&(N>0?w=c[g][N-1>>1]:N<0&&(w=c[g][-N-1>>1].neg()),w.type==="affine"?B=B.mixedAdd(w):B=B.add(w))}}for(h=0;h<i;h++)c[h]=null;return s?B:B.toP()};function Oi(r,e){this.curve=r,this.type=e,this.precomputed=null}ms.BasePoint=Oi,Oi.prototype.eq=function(){throw new Error("Not implemented")},Oi.prototype.validate=function(){return this.curve.validate(this)},ms.prototype.decodePoint=function(r,e){r=di.toArray(r,e);var t=this.p.byteLength();if((r[0]===4||r[0]===6||r[0]===7)&&r.length-1===2*t){r[0]===6?Ju(r[r.length-1]%2===0):r[0]===7&&Ju(r[r.length-1]%2===1);var i=this.point(r.slice(1,1+t),r.slice(1+t,1+2*t));return i}else if((r[0]===2||r[0]===3)&&r.length-1===t)return this.pointFromX(r.slice(1,1+t),r[0]===3);throw new Error("Unknown point format")},Oi.prototype.encodeCompressed=function(r){return this.encode(r,!0)},Oi.prototype._encode=function(r){var e=this.curve.p.byteLength(),t=this.getX().toArray("be",e);return r?[this.getY().isEven()?2:3].concat(t):[4].concat(t,this.getY().toArray("be",e))},Oi.prototype.encode=function(r,e){return di.encode(this._encode(e),r)},Oi.prototype.precompute=function(r){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,r),e.beta=this._getBeta(),this.precomputed=e,this},Oi.prototype._hasDoubles=function(r){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return e?e.points.length>=Math.ceil((r.bitLength()+1)/e.step):!1},Oi.prototype._getDoubles=function(r,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var t=[this],i=this,s=0;s<e;s+=r){for(var a=0;a<r;a++)i=i.dbl();t.push(i)}return{step:r,points:t}},Oi.prototype._getNAFPoints=function(r){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],t=(1<<r)-1,i=t===1?null:this.dbl(),s=1;s<t;s++)e[s]=e[s-1].add(i);return{wnd:r,points:e}},Oi.prototype._getBeta=function(){return null},Oi.prototype.dblp=function(r){for(var e=this,t=0;t<r;t++)e=e.dbl();return e};var yd=eo(function(r){typeof Object.create=="function"?r.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}}),TA=di.assert;function Fi(r){oa.call(this,"short",r),this.a=new nt(r.a,16).toRed(this.red),this.b=new nt(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}yd(Fi,oa);var FA=Fi;Fi.prototype._getEndomorphism=function(r){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var e,t;if(r.beta)e=new nt(r.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);e=i[0].cmp(i[1])<0?i[0]:i[1],e=e.toRed(this.red)}if(r.lambda)t=new nt(r.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(e))===0?t=s[0]:(t=s[1],TA(this.g.mul(t).x.cmp(this.g.x.redMul(e))===0))}var a;return r.basis?a=r.basis.map(function(c){return{a:new nt(c.a,16),b:new nt(c.b,16)}}):a=this._getEndoBasis(t),{beta:e,lambda:t,basis:a}}},Fi.prototype._getEndoRoots=function(r){var e=r===this.p?this.red:nt.mont(r),t=new nt(2).toRed(e).redInvm(),i=t.redNeg(),s=new nt(3).toRed(e).redNeg().redSqrt().redMul(t),a=i.redAdd(s).fromRed(),c=i.redSub(s).fromRed();return[a,c]},Fi.prototype._getEndoBasis=function(r){for(var e=this.n.ushrn(Math.floor(this.n.bitLength()/2)),t=r,i=this.n.clone(),s=new nt(1),a=new nt(0),c=new nt(0),u=new nt(1),l,h,g,w,S,E,I,z=0,K,J;t.cmpn(0)!==0;){var j=i.div(t);K=i.sub(j.mul(t)),J=c.sub(j.mul(s));var W=u.sub(j.mul(a));if(!g&&K.cmp(e)<0)l=I.neg(),h=s,g=K.neg(),w=J;else if(g&&++z===2)break;I=K,i=t,t=K,c=s,s=J,u=a,a=W}S=K.neg(),E=J;var B=g.sqr().add(w.sqr()),U=S.sqr().add(E.sqr());return U.cmp(B)>=0&&(S=l,E=h),g.negative&&(g=g.neg(),w=w.neg()),S.negative&&(S=S.neg(),E=E.neg()),[{a:g,b:w},{a:S,b:E}]},Fi.prototype._endoSplit=function(r){var e=this.endo.basis,t=e[0],i=e[1],s=i.b.mul(r).divRound(this.n),a=t.b.neg().mul(r).divRound(this.n),c=s.mul(t.a),u=a.mul(i.a),l=s.mul(t.b),h=a.mul(i.b),g=r.sub(c).sub(u),w=l.add(h).neg();return{k1:g,k2:w}},Fi.prototype.pointFromX=function(r,e){r=new nt(r,16),r.red||(r=r.toRed(this.red));var t=r.redSqr().redMul(r).redIAdd(r.redMul(this.a)).redIAdd(this.b),i=t.redSqrt();if(i.redSqr().redSub(t).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(e&&!s||!e&&s)&&(i=i.redNeg()),this.point(r,i)},Fi.prototype.validate=function(r){if(r.inf)return!0;var e=r.x,t=r.y,i=this.a.redMul(e),s=e.redSqr().redMul(e).redIAdd(i).redIAdd(this.b);return t.redSqr().redISub(s).cmpn(0)===0},Fi.prototype._endoWnafMulAdd=function(r,e,t){for(var i=this._endoWnafT1,s=this._endoWnafT2,a=0;a<r.length;a++){var c=this._endoSplit(e[a]),u=r[a],l=u._getBeta();c.k1.negative&&(c.k1.ineg(),u=u.neg(!0)),c.k2.negative&&(c.k2.ineg(),l=l.neg(!0)),i[a*2]=u,i[a*2+1]=l,s[a*2]=c.k1,s[a*2+1]=c.k2}for(var h=this._wnafMulAdd(1,i,s,a*2,t),g=0;g<a*2;g++)i[g]=null,s[g]=null;return h};function br(r,e,t,i){oa.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new nt(e,16),this.y=new nt(t,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}yd(br,oa.BasePoint),Fi.prototype.point=function(r,e,t){return new br(this,r,e,t)},Fi.prototype.pointFromJSON=function(r,e){return br.fromJSON(this,r,e)},br.prototype._getBeta=function(){if(this.curve.endo){var r=this.precomputed;if(r&&r.beta)return r.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(r){var t=this.curve,i=function(s){return t.point(s.x.redMul(t.endo.beta),s.y)};r.beta=e,e.precomputed={beta:null,naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return e}},br.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},br.fromJSON=function(r,e,t){typeof e=="string"&&(e=JSON.parse(e));var i=r.point(e[0],e[1],t);if(!e[2])return i;function s(c){return r.point(c[0],c[1],t)}var a=e[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}},i},br.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},br.prototype.isInfinity=function(){return this.inf},br.prototype.add=function(r){if(this.inf)return r;if(r.inf)return this;if(this.eq(r))return this.dbl();if(this.neg().eq(r))return this.curve.point(null,null);if(this.x.cmp(r.x)===0)return this.curve.point(null,null);var e=this.y.redSub(r.y);e.cmpn(0)!==0&&(e=e.redMul(this.x.redSub(r.x).redInvm()));var t=e.redSqr().redISub(this.x).redISub(r.x),i=e.redMul(this.x.redSub(t)).redISub(this.y);return this.curve.point(t,i)},br.prototype.dbl=function(){if(this.inf)return this;var r=this.y.redAdd(this.y);if(r.cmpn(0)===0)return this.curve.point(null,null);var e=this.curve.a,t=this.x.redSqr(),i=r.redInvm(),s=t.redAdd(t).redIAdd(t).redIAdd(e).redMul(i),a=s.redSqr().redISub(this.x.redAdd(this.x)),c=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,c)},br.prototype.getX=function(){return this.x.fromRed()},br.prototype.getY=function(){return this.y.fromRed()},br.prototype.mul=function(r){return r=new nt(r,16),this.isInfinity()?this:this._hasDoubles(r)?this.curve._fixedNafMul(this,r):this.curve.endo?this.curve._endoWnafMulAdd([this],[r]):this.curve._wnafMul(this,r)},br.prototype.mulAdd=function(r,e,t){var i=[this,e],s=[r,t];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)},br.prototype.jmulAdd=function(r,e,t){var i=[this,e],s=[r,t];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)},br.prototype.eq=function(r){return this===r||this.inf===r.inf&&(this.inf||this.x.cmp(r.x)===0&&this.y.cmp(r.y)===0)},br.prototype.neg=function(r){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(r&&this.precomputed){var t=this.precomputed,i=function(s){return s.neg()};e.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return e},br.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var r=this.curve.jpoint(this.x,this.y,this.curve.one);return r};function Ar(r,e,t,i){oa.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new nt(0)):(this.x=new nt(e,16),this.y=new nt(t,16),this.z=new nt(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}yd(Ar,oa.BasePoint),Fi.prototype.jpoint=function(r,e,t){return new Ar(this,r,e,t)},Ar.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var r=this.z.redInvm(),e=r.redSqr(),t=this.x.redMul(e),i=this.y.redMul(e).redMul(r);return this.curve.point(t,i)},Ar.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Ar.prototype.add=function(r){if(this.isInfinity())return r;if(r.isInfinity())return this;var e=r.z.redSqr(),t=this.z.redSqr(),i=this.x.redMul(e),s=r.x.redMul(t),a=this.y.redMul(e.redMul(r.z)),c=r.y.redMul(t.redMul(this.z)),u=i.redSub(s),l=a.redSub(c);if(u.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var h=u.redSqr(),g=h.redMul(u),w=i.redMul(h),S=l.redSqr().redIAdd(g).redISub(w).redISub(w),E=l.redMul(w.redISub(S)).redISub(a.redMul(g)),I=this.z.redMul(r.z).redMul(u);return this.curve.jpoint(S,E,I)},Ar.prototype.mixedAdd=function(r){if(this.isInfinity())return r.toJ();if(r.isInfinity())return this;var e=this.z.redSqr(),t=this.x,i=r.x.redMul(e),s=this.y,a=r.y.redMul(e).redMul(this.z),c=t.redSub(i),u=s.redSub(a);if(c.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=c.redSqr(),h=l.redMul(c),g=t.redMul(l),w=u.redSqr().redIAdd(h).redISub(g).redISub(g),S=u.redMul(g.redISub(w)).redISub(s.redMul(h)),E=this.z.redMul(c);return this.curve.jpoint(w,S,E)},Ar.prototype.dblp=function(r){if(r===0)return this;if(this.isInfinity())return this;if(!r)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var t=this;for(e=0;e<r;e++)t=t.dbl();return t}var i=this.curve.a,s=this.curve.tinv,a=this.x,c=this.y,u=this.z,l=u.redSqr().redSqr(),h=c.redAdd(c);for(e=0;e<r;e++){var g=a.redSqr(),w=h.redSqr(),S=w.redSqr(),E=g.redAdd(g).redIAdd(g).redIAdd(i.redMul(l)),I=a.redMul(w),z=E.redSqr().redISub(I.redAdd(I)),K=I.redISub(z),J=E.redMul(K);J=J.redIAdd(J).redISub(S);var j=h.redMul(u);e+1<r&&(l=l.redMul(S)),a=z,u=j,h=J}return this.curve.jpoint(a,h.redMul(s),u)},Ar.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Ar.prototype._zeroDbl=function(){var r,e,t;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),c=this.x.redAdd(s).redSqr().redISub(i).redISub(a);c=c.redIAdd(c);var u=i.redAdd(i).redIAdd(i),l=u.redSqr().redISub(c).redISub(c),h=a.redIAdd(a);h=h.redIAdd(h),h=h.redIAdd(h),r=l,e=u.redMul(c.redISub(l)).redISub(h),t=this.y.redAdd(this.y)}else{var g=this.x.redSqr(),w=this.y.redSqr(),S=w.redSqr(),E=this.x.redAdd(w).redSqr().redISub(g).redISub(S);E=E.redIAdd(E);var I=g.redAdd(g).redIAdd(g),z=I.redSqr(),K=S.redIAdd(S);K=K.redIAdd(K),K=K.redIAdd(K),r=z.redISub(E).redISub(E),e=I.redMul(E.redISub(r)).redISub(K),t=this.y.redMul(this.z),t=t.redIAdd(t)}return this.curve.jpoint(r,e,t)},Ar.prototype._threeDbl=function(){var r,e,t;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),c=this.x.redAdd(s).redSqr().redISub(i).redISub(a);c=c.redIAdd(c);var u=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=u.redSqr().redISub(c).redISub(c);r=l;var h=a.redIAdd(a);h=h.redIAdd(h),h=h.redIAdd(h),e=u.redMul(c.redISub(l)).redISub(h),t=this.y.redAdd(this.y)}else{var g=this.z.redSqr(),w=this.y.redSqr(),S=this.x.redMul(w),E=this.x.redSub(g).redMul(this.x.redAdd(g));E=E.redAdd(E).redIAdd(E);var I=S.redIAdd(S);I=I.redIAdd(I);var z=I.redAdd(I);r=E.redSqr().redISub(z),t=this.y.redAdd(this.z).redSqr().redISub(w).redISub(g);var K=w.redSqr();K=K.redIAdd(K),K=K.redIAdd(K),K=K.redIAdd(K),e=E.redMul(I.redISub(r)).redISub(K)}return this.curve.jpoint(r,e,t)},Ar.prototype._dbl=function(){var r=this.curve.a,e=this.x,t=this.y,i=this.z,s=i.redSqr().redSqr(),a=e.redSqr(),c=t.redSqr(),u=a.redAdd(a).redIAdd(a).redIAdd(r.redMul(s)),l=e.redAdd(e);l=l.redIAdd(l);var h=l.redMul(c),g=u.redSqr().redISub(h.redAdd(h)),w=h.redISub(g),S=c.redSqr();S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var E=u.redMul(w).redISub(S),I=t.redAdd(t).redMul(i);return this.curve.jpoint(g,E,I)},Ar.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var r=this.x.redSqr(),e=this.y.redSqr(),t=this.z.redSqr(),i=e.redSqr(),s=r.redAdd(r).redIAdd(r),a=s.redSqr(),c=this.x.redAdd(e).redSqr().redISub(r).redISub(i);c=c.redIAdd(c),c=c.redAdd(c).redIAdd(c),c=c.redISub(a);var u=c.redSqr(),l=i.redIAdd(i);l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l);var h=s.redIAdd(c).redSqr().redISub(a).redISub(u).redISub(l),g=e.redMul(h);g=g.redIAdd(g),g=g.redIAdd(g);var w=this.x.redMul(u).redISub(g);w=w.redIAdd(w),w=w.redIAdd(w);var S=this.y.redMul(h.redMul(l.redISub(h)).redISub(c.redMul(u)));S=S.redIAdd(S),S=S.redIAdd(S),S=S.redIAdd(S);var E=this.z.redAdd(c).redSqr().redISub(t).redISub(u);return this.curve.jpoint(w,S,E)},Ar.prototype.mul=function(r,e){return r=new nt(r,e),this.curve._wnafMul(this,r)},Ar.prototype.eq=function(r){if(r.type==="affine")return this.eq(r.toJ());if(this===r)return!0;var e=this.z.redSqr(),t=r.z.redSqr();if(this.x.redMul(t).redISub(r.x.redMul(e)).cmpn(0)!==0)return!1;var i=e.redMul(this.z),s=t.redMul(r.z);return this.y.redMul(s).redISub(r.y.redMul(i)).cmpn(0)===0},Ar.prototype.eqXToP=function(r){var e=this.z.redSqr(),t=r.toRed(this.curve.red).redMul(e);if(this.x.cmp(t)===0)return!0;for(var i=r.clone(),s=this.curve.redN.redMul(e);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(s),this.x.cmp(t)===0)return!0}},Ar.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Ar.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Ou=eo(function(r,e){var t=e;t.base=oa,t.short=FA,t.mont=null,t.edwards=null}),Cu=eo(function(r,e){var t=e,i=di.assert;function s(u){u.type==="short"?this.curve=new Ou.short(u):u.type==="edwards"?this.curve=new Ou.edwards(u):this.curve=new Ou.mont(u),this.g=this.curve.g,this.n=this.curve.n,this.hash=u.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=s;function a(u,l){Object.defineProperty(t,u,{configurable:!0,enumerable:!0,get:function(){var h=new s(l);return Object.defineProperty(t,u,{configurable:!0,enumerable:!0,value:h}),h}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:mn.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:mn.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:mn.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:mn.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:mn.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:mn.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:mn.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=null.crash()}catch{c=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:mn.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})});function ys(r){if(!(this instanceof ys))return new ys(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=rn.toArray(r.entropy,r.entropyEnc||"hex"),t=rn.toArray(r.nonce,r.nonceEnc||"hex"),i=rn.toArray(r.pers,r.persEnc||"hex");md(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,i)}var C1=ys;ys.prototype._init=function(r,e,t){var i=r.concat(e).concat(t);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},ys.prototype._hmac=function(){return new mn.hmac(this.hash,this.K)},ys.prototype._update=function(r){var e=this._hmac().update(this.V).update([0]);r&&(e=e.update(r)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),r&&(this.K=this._hmac().update(this.V).update([1]).update(r).digest(),this.V=this._hmac().update(this.V).digest())},ys.prototype.reseed=function(r,e,t,i){typeof e!="string"&&(i=t,t=e,e=null),r=rn.toArray(r,e),t=rn.toArray(t,i),md(r.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(r.concat(t||[])),this._reseed=1},ys.prototype.generate=function(r,e,t,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof e!="string"&&(i=t,t=e,e=null),t&&(t=rn.toArray(t,i||"hex"),this._update(t));for(var s=[];s.length<r;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,r);return this._update(t),this._reseed++,rn.encode(a,e)};var nl=di.assert;function Cr(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var sl=Cr;Cr.fromPublic=function(r,e,t){return e instanceof Cr?e:new Cr(r,{pub:e,pubEnc:t})},Cr.fromPrivate=function(r,e,t){return e instanceof Cr?e:new Cr(r,{priv:e,privEnc:t})},Cr.prototype.validate=function(){var r=this.getPublic();return r.isInfinity()?{result:!1,reason:"Invalid public key"}:r.validate()?r.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Cr.prototype.getPublic=function(r,e){return typeof r=="string"&&(e=r,r=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,r):this.pub},Cr.prototype.getPrivate=function(r){return r==="hex"?this.priv.toString(16,2):this.priv},Cr.prototype._importPrivate=function(r,e){this.priv=new nt(r,e||16),this.priv=this.priv.umod(this.ec.curve.n)},Cr.prototype._importPublic=function(r,e){if(r.x||r.y){this.ec.curve.type==="mont"?nl(r.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&nl(r.x&&r.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(r.x,r.y);return}this.pub=this.ec.curve.decodePoint(r,e)},Cr.prototype.derive=function(r){return r.validate()||nl(r.validate(),"public point not validated"),r.mul(this.priv).getX()},Cr.prototype.sign=function(r,e,t){return this.ec.sign(r,this,e,t)},Cr.prototype.verify=function(r,e){return this.ec.verify(r,e,this)},Cr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var BA=di.assert;function wf(r,e){if(r instanceof wf)return r;this._importDER(r,e)||(BA(r.r&&r.s,"Signature without r or s"),this.r=new nt(r.r,16),this.s=new nt(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var wu=wf;function qA(){this.place=0}function al(r,e){var t=r[e.place++];if(!(t&128))return t;var i=t&15;if(i===0||i>4)return!1;for(var s=0,a=0,c=e.place;a<i;a++,c++)s<<=8,s|=r[c],s>>>=0;return s<=127?!1:(e.place=c,s)}function N1(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}wf.prototype._importDER=function(r,e){r=di.toArray(r,e);var t=new qA;if(r[t.place++]!==48)return!1;var i=al(r,t);if(i===!1||i+t.place!==r.length||r[t.place++]!==2)return!1;var s=al(r,t);if(s===!1)return!1;var a=r.slice(t.place,s+t.place);if(t.place+=s,r[t.place++]!==2)return!1;var c=al(r,t);if(c===!1||r.length!==c+t.place)return!1;var u=r.slice(t.place,c+t.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;return this.r=new nt(a),this.s=new nt(u),this.recoveryParam=null,!0};function ol(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}wf.prototype.toDER=function(r){var e=this.r.toArray(),t=this.s.toArray();for(e[0]&128&&(e=[0].concat(e)),t[0]&128&&(t=[0].concat(t)),e=N1(e),t=N1(t);!t[0]&&!(t[1]&128);)t=t.slice(1);var i=[2];ol(i,e.length),i=i.concat(e),i.push(2),ol(i,t.length);var s=i.concat(t),a=[48];return ol(a,s.length),a=a.concat(s),di.encode(a,r)};var LA=function(){throw new Error("unsupported")},Ov=di.assert;function Ri(r){if(!(this instanceof Ri))return new Ri(r);typeof r=="string"&&(Ov(Object.prototype.hasOwnProperty.call(Cu,r),"Unknown curve "+r),r=Cu[r]),r instanceof Cu.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var UA=Ri;Ri.prototype.keyPair=function(r){return new sl(this,r)},Ri.prototype.keyFromPrivate=function(r,e){return sl.fromPrivate(this,r,e)},Ri.prototype.keyFromPublic=function(r,e){return sl.fromPublic(this,r,e)},Ri.prototype.genKeyPair=function(r){r||(r={});for(var e=new C1({hash:this.hash,pers:r.pers,persEnc:r.persEnc||"utf8",entropy:r.entropy||LA(this.hash.hmacStrength),entropyEnc:r.entropy&&r.entropyEnc||"utf8",nonce:this.n.toArray()}),t=this.n.byteLength(),i=this.n.sub(new nt(2));;){var s=new nt(e.generate(t));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}},Ri.prototype._truncateToN=function(r,e){var t=r.byteLength()*8-this.n.bitLength();return t>0&&(r=r.ushrn(t)),!e&&r.cmp(this.n)>=0?r.sub(this.n):r},Ri.prototype.sign=function(r,e,t,i){typeof t=="object"&&(i=t,t=null),i||(i={}),e=this.keyFromPrivate(e,t),r=this._truncateToN(new nt(r,16));for(var s=this.n.byteLength(),a=e.getPrivate().toArray("be",s),c=r.toArray("be",s),u=new C1({hash:this.hash,entropy:a,nonce:c,pers:i.pers,persEnc:i.persEnc||"utf8"}),l=this.n.sub(new nt(1)),h=0;;h++){var g=i.k?i.k(h):new nt(u.generate(this.n.byteLength()));if(g=this._truncateToN(g,!0),!(g.cmpn(1)<=0||g.cmp(l)>=0)){var w=this.g.mul(g);if(!w.isInfinity()){var S=w.getX(),E=S.umod(this.n);if(E.cmpn(0)!==0){var I=g.invm(this.n).mul(E.mul(e.getPrivate()).iadd(r));if(I=I.umod(this.n),I.cmpn(0)!==0){var z=(w.getY().isOdd()?1:0)|(S.cmp(E)!==0?2:0);return i.canonical&&I.cmp(this.nh)>0&&(I=this.n.sub(I),z^=1),new wu({r:E,s:I,recoveryParam:z})}}}}}},Ri.prototype.verify=function(r,e,t,i){r=this._truncateToN(new nt(r,16)),t=this.keyFromPublic(t,i),e=new wu(e,"hex");var s=e.r,a=e.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var c=a.invm(this.n),u=c.mul(r).umod(this.n),l=c.mul(s).umod(this.n),h;return this.curve._maxwellTrick?(h=this.g.jmulAdd(u,t.getPublic(),l),h.isInfinity()?!1:h.eqXToP(s)):(h=this.g.mulAdd(u,t.getPublic(),l),h.isInfinity()?!1:h.getX().umod(this.n).cmp(s)===0)},Ri.prototype.recoverPubKey=function(r,e,t,i){Ov((3&t)===t,"The recovery param is more than two bits"),e=new wu(e,i);var s=this.n,a=new nt(r),c=e.r,u=e.s,l=t&1,h=t>>1;if(c.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");h?c=this.curve.pointFromX(c.add(this.curve.n),l):c=this.curve.pointFromX(c,l);var g=e.r.invm(s),w=s.sub(a).mul(g).umod(s),S=u.mul(g).umod(s);return this.g.mulAdd(w,c,S)},Ri.prototype.getKeyRecoveryParam=function(r,e,t,i){if(e=new wu(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var s=0;s<4;s++){var a;try{a=this.recoverPubKey(r,e,s)}catch{continue}if(a.eq(t))return s}throw new Error("Unable to find valid recovery factor")};var jA=eo(function(r,e){var t=e;t.version="6.5.4",t.utils=di,t.rand=function(){throw new Error("unsupported")},t.curve=Ou,t.curves=Cu,t.ec=UA,t.eddsa=null}),$A=jA.ec;const zA="signing-key/5.7.0",Ul=new Sr(zA);let cl=null;function bs(){return cl||(cl=new $A("secp256k1")),cl}class kA{constructor(e){xo(this,"curve","secp256k1"),xo(this,"privateKey",Xr(e)),x9(this.privateKey)!==32&&Ul.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=bs().keyFromPrivate(er(this.privateKey));xo(this,"publicKey","0x"+t.getPublic(!1,"hex")),xo(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),xo(this,"_isSigningKey",!0)}_addPoint(e){const t=bs().keyFromPublic(er(this.publicKey)),i=bs().keyFromPublic(er(e));return"0x"+t.pub.add(i.pub).encodeCompressed("hex")}signDigest(e){const t=bs().keyFromPrivate(er(this.privateKey)),i=er(e);i.length!==32&&Ul.throwArgumentError("bad digest length","digest",e);const s=t.sign(i,{canonical:!0});return tv({recoveryParam:s.recoveryParam,r:Sn("0x"+s.r.toString(16),32),s:Sn("0x"+s.s.toString(16),32)})}computeSharedSecret(e){const t=bs().keyFromPrivate(er(this.privateKey)),i=bs().keyFromPublic(er(Cv(e)));return Sn("0x"+t.derive(i.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function HA(r,e){const t=tv(e),i={r:er(t.r),s:er(t.s)};return"0x"+bs().recoverPubKey(er(r),i,t.recoveryParam).encode("hex",!1)}function Cv(r,e){const t=er(r);return t.length===32?new kA(t).publicKey:t.length===33?"0x"+bs().keyFromPublic(t).getPublic(!1,"hex"):t.length===65?Xr(t):Ul.throwArgumentError("invalid public or private key","key","[REDACTED]")}var R1;(function(r){r[r.legacy=0]="legacy",r[r.eip2930=1]="eip2930",r[r.eip1559=2]="eip1559"})(R1||(R1={}));function KA(r){const e=Cv(r);return rE(m1(gd(m1(e,1)),12))}function VA(r,e){return KA(HA(er(r),e))}const GA="https://rpc.walletconnect.org/v1";async function WA(r,e,t,i,s,a){switch(t.t){case"eip191":return JA(r,e,t.s);case"eip1271":return await YA(r,e,t.s,i,s,a);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${t.t}`)}}function JA(r,e,t){return VA(fv(e),t).toLowerCase()===r.toLowerCase()}async function YA(r,e,t,i,s,a){try{const c="0x1626ba7e",u="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",h=t.substring(2),g=fv(e).substring(2),w=c+g+u+l+h,S=await fetch(`${a||GA}/?chainId=${i}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:QA(),jsonrpc:"2.0",method:"eth_call",params:[{to:r,data:w},"latest"]})}),{result:E}=await S.json();return E?E.slice(0,c.length).toLowerCase()===c.toLowerCase():!1}catch(c){return console.error("isValidEip1271Signature: ",c),!1}}function QA(){return Date.now()+Math.floor(Math.random()*1e3)}var XA=Object.defineProperty,ZA=Object.defineProperties,eS=Object.getOwnPropertyDescriptors,T1=Object.getOwnPropertySymbols,tS=Object.prototype.hasOwnProperty,rS=Object.prototype.propertyIsEnumerable,F1=(r,e,t)=>e in r?XA(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,iS=(r,e)=>{for(var t in e||(e={}))tS.call(e,t)&&F1(r,t,e[t]);if(T1)for(var t of T1(e))rS.call(e,t)&&F1(r,t,e[t]);return r},nS=(r,e)=>ZA(r,eS(e));const sS="did:pkh:",wd=r=>r?.split(":"),Nv=r=>{const e=r&&wd(r);if(e)return r.includes(sS)?e[3]:e[1]},B1=r=>{const e=r&&wd(r);if(e)return e[2]+":"+e[3]},Yu=r=>{const e=r&&wd(r);if(e)return e.pop()};async function q1(r){const{cacao:e,projectId:t}=r,{s:i,p:s}=e,a=Rv(s,s.iss),c=Yu(s.iss);return await WA(c,a,i,Nv(s.iss),t)}const Rv=(r,e)=>{const t=`${r.domain} wants you to sign in with your Ethereum account:`,i=Yu(e);if(!r.aud&&!r.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=r.statement||void 0;const a=`URI: ${r.aud||r.uri}`,c=`Version: ${r.version}`,u=`Chain ID: ${Nv(e)}`,l=`Nonce: ${r.nonce}`,h=`Issued At: ${r.iat}`,g=r.exp?`Expiration Time: ${r.exp}`:void 0,w=r.nbf?`Not Before: ${r.nbf}`:void 0,S=r.requestId?`Request ID: ${r.requestId}`:void 0,E=r.resources?`Resources:${r.resources.map(z=>`
- ${z}`).join("")}`:void 0,I=Nu(r.resources);if(I){const z=Wo(I);s=pS(s,z)}return[t,i,"",s,"",a,c,u,l,h,g,w,S,E].filter(z=>z!=null).join(`
`)};function aS(r){return qi.from(JSON.stringify(r)).toString("base64")}function oS(r){return JSON.parse(qi.from(r,"base64").toString("utf-8"))}function ia(r){if(!r)throw new Error("No recap provided, value is undefined");if(!r.att)throw new Error("No `att` property found");const e=Object.keys(r.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(t=>{const i=r.att[t];if(Array.isArray(i))throw new Error(`Resource must be an object: ${t}`);if(typeof i!="object")throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(i).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(i).forEach(s=>{const a=i[s];if(!Array.isArray(a))throw new Error(`Ability limits ${s} must be an array of objects, found: ${a}`);if(!a.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);a.forEach(c=>{if(typeof c!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${c}`)})})})}function cS(r,e,t,i={}){return t?.sort((s,a)=>s.localeCompare(a)),{att:{[r]:uS(e,t,i)}}}function uS(r,e,t={}){e=e?.sort((s,a)=>s.localeCompare(a));const i=e.map(s=>({[`${r}/${s}`]:[t]}));return Object.assign({},...i)}function Tv(r){return ia(r),`urn:recap:${aS(r).replace(/=/g,"")}`}function Wo(r){const e=oS(r.replace("urn:recap:",""));return ia(e),e}function fS(r,e,t){const i=cS(r,e,t);return Tv(i)}function hS(r){return r&&r.includes("urn:recap:")}function lS(r,e){const t=Wo(r),i=Wo(e),s=dS(t,i);return Tv(s)}function dS(r,e){ia(r),ia(e);const t=Object.keys(r.att).concat(Object.keys(e.att)).sort((s,a)=>s.localeCompare(a)),i={att:{}};return t.forEach(s=>{var a,c;Object.keys(((a=r.att)==null?void 0:a[s])||{}).concat(Object.keys(((c=e.att)==null?void 0:c[s])||{})).sort((u,l)=>u.localeCompare(l)).forEach(u=>{var l,h;i.att[s]=nS(iS({},i.att[s]),{[u]:((l=r.att[s])==null?void 0:l[u])||((h=e.att[s])==null?void 0:h[u])})})}),i}function pS(r="",e){ia(e);const t="I further authorize the stated URI to perform the following actions on my behalf: ";if(r.includes(t))return r;const i=[];let s=0;Object.keys(e.att).forEach(u=>{const l=Object.keys(e.att[u]).map(w=>({ability:w.split("/")[0],action:w.split("/")[1]}));l.sort((w,S)=>w.action.localeCompare(S.action));const h={};l.forEach(w=>{h[w.ability]||(h[w.ability]=[]),h[w.ability].push(w.action)});const g=Object.keys(h).map(w=>(s++,`(${s}) '${w}': '${h[w].join("', '")}' for '${u}'.`));i.push(g.join(", ").replace(".,","."))});const a=i.join(" "),c=`${t}${a}`;return`${r?r+" ":""}${c}`}function L1(r){var e;const t=Wo(r);ia(t);const i=(e=t.att)==null?void 0:e.eip155;return i?Object.keys(i).map(s=>s.split("/")[1]):[]}function U1(r){const e=Wo(r);ia(e);const t=[];return Object.values(e.att).forEach(i=>{Object.values(i).forEach(s=>{var a;(a=s?.[0])!=null&&a.chains&&t.push(s[0].chains)})}),[...new Set(t.flat())]}function Nu(r){if(!r)return;const e=r?.[r.length-1];return hS(e)?e:void 0}const Fv="base10",zr="base16",ws="base64pad",Po="base64url",cc="utf8",Bv=0,Zn=1,uc=2,gS=0,j1=1,zo=12,_d=32;function bS(){const r=od.generateKeyPair();return{privateKey:ti(r.secretKey,zr),publicKey:ti(r.publicKey,zr)}}function jl(){const r=As.randomBytes(_d);return ti(r,zr)}function vS(r,e){const t=od.sharedKey(Bi(r,zr),Bi(e,zr),!0),i=new H4(tc.SHA256,t).expand(_d);return ti(i,zr)}function Ru(r){const e=tc.hash(Bi(r,zr));return ti(e,zr)}function Jn(r){const e=tc.hash(Bi(r,cc));return ti(e,zr)}function qv(r){return Bi(`${r}`,Fv)}function na(r){return Number(ti(r,Fv))}function mS(r){const e=qv(typeof r.type<"u"?r.type:Bv);if(na(e)===Zn&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?Bi(r.senderPublicKey,zr):void 0,i=typeof r.iv<"u"?Bi(r.iv,zr):As.randomBytes(zo),s=new sd.ChaCha20Poly1305(Bi(r.symKey,zr)).seal(i,Bi(r.message,cc));return Lv({type:e,sealed:s,iv:i,senderPublicKey:t,encoding:r.encoding})}function yS(r,e){const t=qv(uc),i=As.randomBytes(zo),s=Bi(r,cc);return Lv({type:t,sealed:s,iv:i,encoding:e})}function wS(r){const e=new sd.ChaCha20Poly1305(Bi(r.symKey,zr)),{sealed:t,iv:i}=Jo({encoded:r.encoded,encoding:r?.encoding}),s=e.open(i,t);if(s===null)throw new Error("Failed to decrypt");return ti(s,cc)}function _S(r,e){const{sealed:t}=Jo({encoded:r,encoding:e});return ti(t,cc)}function Lv(r){const{encoding:e=ws}=r;if(na(r.type)===uc)return ti($h([r.type,r.sealed]),e);if(na(r.type)===Zn){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ti($h([r.type,r.senderPublicKey,r.iv,r.sealed]),e)}return ti($h([r.type,r.iv,r.sealed]),e)}function Jo(r){const{encoded:e,encoding:t=ws}=r,i=Bi(e,t),s=i.slice(gS,j1),a=j1;if(na(s)===Zn){const h=a+_d,g=h+zo,w=i.slice(a,h),S=i.slice(h,g),E=i.slice(g);return{type:s,sealed:E,iv:S,senderPublicKey:w}}if(na(s)===uc){const h=i.slice(a),g=As.randomBytes(zo);return{type:s,sealed:h,iv:g}}const c=a+zo,u=i.slice(a,c),l=i.slice(c);return{type:s,sealed:l,iv:u}}function ES(r,e){const t=Jo({encoded:r,encoding:e?.encoding});return Uv({type:na(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?ti(t.senderPublicKey,zr):void 0,receiverPublicKey:e?.receiverPublicKey})}function Uv(r){const e=r?.type||Bv;if(e===Zn){if(typeof r?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof r?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r?.senderPublicKey,receiverPublicKey:r?.receiverPublicKey}}function $1(r){return r.type===Zn&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}function z1(r){return r.type===uc}function AS(r){return new Ob.ec("p256").keyFromPublic({x:qi.from(r.x,"base64").toString("hex"),y:qi.from(r.y,"base64").toString("hex")},"hex")}function SS(r){let e=r.replace(/-/g,"+").replace(/_/g,"/");const t=e.length%4;return t>0&&(e+="=".repeat(4-t)),e}function IS(r){return qi.from(SS(r),"base64")}function xS(r,e){const[t,i,s]=r.split("."),a=IS(s);if(a.length!==64)throw new Error("Invalid signature length");const c=a.slice(0,32).toString("hex"),u=a.slice(32,64).toString("hex"),l=`${t}.${i}`,h=new tc.SHA256().update(qi.from(l)).digest(),g=AS(e),w=qi.from(h).toString("hex");if(!g.verify(w,{r:c,s:u}))throw new Error("Invalid signature");return Rl(r).payload}const DS="irn";function $l(r){return r?.relay||{protocol:DS}}function qo(r){const e=X7[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}var MS=Object.defineProperty,PS=Object.defineProperties,OS=Object.getOwnPropertyDescriptors,k1=Object.getOwnPropertySymbols,CS=Object.prototype.hasOwnProperty,NS=Object.prototype.propertyIsEnumerable,H1=(r,e,t)=>e in r?MS(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,K1=(r,e)=>{for(var t in e||(e={}))CS.call(e,t)&&H1(r,t,e[t]);if(k1)for(var t of k1(e))NS.call(e,t)&&H1(r,t,e[t]);return r},RS=(r,e)=>PS(r,OS(e));function TS(r,e="-"){const t={},i="relay"+e;return Object.keys(r).forEach(s=>{if(s.startsWith(i)){const a=s.replace(i,""),c=r[s];t[a]=c}}),t}function V1(r){if(!r.includes("wc:")){const l=Qb(r);l!=null&&l.includes("wc:")&&(r=l)}r=r.includes("wc://")?r.replace("wc://",""):r,r=r.includes("wc:")?r.replace("wc:",""):r;const e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,i=r.substring(0,e),s=r.substring(e+1,t).split("@"),a=typeof t<"u"?r.substring(t):"",c=Vo.parse(a),u=typeof c.methods=="string"?c.methods.split(","):void 0;return{protocol:i,topic:FS(s[0]),version:parseInt(s[1],10),symKey:c.symKey,relay:TS(c),methods:u,expiryTimestamp:c.expiryTimestamp?parseInt(c.expiryTimestamp,10):void 0}}function FS(r){return r.startsWith("//")?r.substring(2):r}function BS(r,e="-"){const t="relay",i={};return Object.keys(r).forEach(s=>{const a=t+e+s;r[s]&&(i[a]=r[s])}),i}function G1(r){return`${r.protocol}:${r.topic}@${r.version}?`+Vo.stringify(K1(RS(K1({symKey:r.symKey},BS(r.relay)),{expiryTimestamp:r.expiryTimestamp}),r.methods?{methods:r.methods.join(",")}:{}))}function _u(r,e,t){return`${r}?wc_ev=${t}&topic=${e}`}function to(r){const e=[];return r.forEach(t=>{const[i,s]=t.split(":");e.push(`${i}:${s}`)}),e}function qS(r){const e=[];return Object.values(r).forEach(t=>{e.push(...to(t.accounts))}),e}function LS(r,e){const t=[];return Object.values(r).forEach(i=>{to(i.accounts).includes(e)&&t.push(...i.methods)}),t}function US(r,e){const t=[];return Object.values(r).forEach(i=>{to(i.accounts).includes(e)&&t.push(...i.events)}),t}function Ed(r){return r.includes(":")}function Lo(r){return Ed(r)?r.split(":")[0]:r}function jS(r){const e={};return r?.forEach(t=>{const[i,s]=t.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[]}),e[i].accounts.push(t),e[i].chains.push(`${i}:${s}`)}),e}function W1(r,e){e=e.map(i=>i.replace("did:pkh:",""));const t=jS(e);for(const[i,s]of Object.entries(t))s.methods?s.methods=Mu(s.methods,r):s.methods=r,s.events=["chainChanged","accountsChanged"];return t}const $S={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},zS={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ge(r,e){const{message:t,code:i}=zS[r];return{message:e?`${t} ${e}`:t,code:i}}function Tt(r,e){const{message:t,code:i}=$S[r];return{message:e?`${t} ${e}`:t,code:i}}function Pn(r,e){return!!Array.isArray(r)}function Yo(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function Zr(r){return typeof r>"u"}function ar(r,e){return e&&Zr(r)?!0:typeof r=="string"&&!!r.trim().length}function Ad(r,e){return typeof r=="number"&&!isNaN(r)}function kS(r,e){const{requiredNamespaces:t}=e,i=Object.keys(r.namespaces),s=Object.keys(t);let a=!0;return Zs(s,i)?(i.forEach(c=>{const{accounts:u,methods:l,events:h}=r.namespaces[c],g=to(u),w=t[c];(!Zs(Hb(c,w),g)||!Zs(w.methods,l)||!Zs(w.events,h))&&(a=!1)}),a):!1}function Qu(r){return ar(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function HS(r){if(ar(r,!1)&&r.includes(":")){const e=r.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&Qu(t)}}return!1}function KS(r){function e(t){try{return typeof new URL(t)<"u"}catch{return!1}}try{if(ar(r,!1)){if(e(r))return!0;const t=Qb(r);return e(t)}}catch{}return!1}function VS(r){var e;return(e=r?.proposer)==null?void 0:e.publicKey}function GS(r){return r?.topic}function WS(r,e){let t=null;return ar(r?.publicKey,!1)||(t=ge("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function J1(r){let e=!0;return Pn(r)?r.length&&(e=r.every(t=>ar(t,!1))):e=!1,e}function JS(r,e,t){let i=null;return Pn(e)&&e.length?e.forEach(s=>{i||Qu(s)||(i=Tt("UNSUPPORTED_CHAINS",`${t}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Qu(r)||(i=Tt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function YS(r,e,t){let i=null;return Object.entries(r).forEach(([s,a])=>{if(i)return;const c=JS(s,Hb(s,a),`${e} ${t}`);c&&(i=c)}),i}function QS(r,e){let t=null;return Pn(r)?r.forEach(i=>{t||HS(i)||(t=Tt("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):t=Tt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function XS(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const s=QS(i?.accounts,`${e} namespace`);s&&(t=s)}),t}function ZS(r,e){let t=null;return J1(r?.methods)?J1(r?.events)||(t=Tt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=Tt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function jv(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const s=ZS(i,`${e}, namespace`);s&&(t=s)}),t}function eI(r,e,t){let i=null;if(r&&Yo(r)){const s=jv(r,e);s&&(i=s);const a=YS(r,e,t);a&&(i=a)}else i=ge("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return i}function ul(r,e){let t=null;if(r&&Yo(r)){const i=jv(r,e);i&&(t=i);const s=XS(r,e);s&&(t=s)}else t=ge("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function $v(r){return ar(r.protocol,!0)}function tI(r,e){let t=!1;return r?r&&Pn(r)&&r.length&&r.forEach(i=>{t=$v(i)}):t=!0,t}function rI(r){return typeof r=="number"}function Qr(r){return typeof r<"u"&&typeof r!==null}function iI(r){return!(!r||typeof r!="object"||!r.code||!Ad(r.code)||!r.message||!ar(r.message,!1))}function nI(r){return!(Zr(r)||!ar(r.method,!1))}function sI(r){return!(Zr(r)||Zr(r.result)&&Zr(r.error)||!Ad(r.id)||!ar(r.jsonrpc,!1))}function aI(r){return!(Zr(r)||!ar(r.name,!1))}function Y1(r,e){return!(!Qu(e)||!qS(r).includes(e))}function oI(r,e,t){return ar(t,!1)?LS(r,e).includes(t):!1}function cI(r,e,t){return ar(t,!1)?US(r,e).includes(t):!1}function Q1(r,e,t){let i=null;const s=uI(r),a=fI(e),c=Object.keys(s),u=Object.keys(a),l=X1(Object.keys(r)),h=X1(Object.keys(e)),g=l.filter(w=>!h.includes(w));return g.length&&(i=ge("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${g.toString()}
      Received: ${Object.keys(e).toString()}`)),Zs(c,u)||(i=ge("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${u.toString()}`)),Object.keys(e).forEach(w=>{if(!w.includes(":")||i)return;const S=to(e[w].accounts);S.includes(w)||(i=ge("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${w}
        Required: ${w}
        Approved: ${S.toString()}`))}),c.forEach(w=>{i||(Zs(s[w].methods,a[w].methods)?Zs(s[w].events,a[w].events)||(i=ge("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${w}`)):i=ge("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${w}`))}),i}function uI(r){const e={};return Object.keys(r).forEach(t=>{var i;t.includes(":")?e[t]=r[t]:(i=r[t].chains)==null||i.forEach(s=>{e[s]={methods:r[t].methods,events:r[t].events}})}),e}function X1(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}function fI(r){const e={};return Object.keys(r).forEach(t=>{t.includes(":")?e[t]=r[t]:to(r[t].accounts)?.forEach(s=>{e[s]={accounts:r[t].accounts.filter(a=>a.includes(`${s}:`)),methods:r[t].methods,events:r[t].events}})}),e}function hI(r,e){return Ad(r)&&r<=e.max&&r>=e.min}function Z1(){const r=ac();return new Promise(e=>{switch(r){case hi.browser:e(lI());break;case hi.reactNative:e(dI());break;case hi.node:e(pI());break;default:e(!0)}})}function lI(){return sc()&&navigator?.onLine}async function dI(){return Ya()&&typeof at<"u"&&at!=null&&at.NetInfo?(await(at==null?void 0:at.NetInfo.fetch()))?.isConnected:!0}function pI(){return!0}function gI(r){switch(ac()){case hi.browser:bI(r);break;case hi.reactNative:vI(r);break}}function bI(r){!Ya()&&sc()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)))}function vI(r){Ya()&&typeof at<"u"&&at!=null&&at.NetInfo&&at?.NetInfo.addEventListener(e=>r(e?.isConnected))}const fl={};class Oo{static get(e){return fl[e]}static set(e,t){fl[e]=t}static delete(e){delete fl[e]}}let ca=class{},mI=class extends ca{constructor(e){super()}};const eg=be.FIVE_SECONDS,ro={pulse:"heartbeat_pulse"};let yI=class zv extends mI{constructor(e){super(e),this.events=new Ui.EventEmitter,this.interval=eg,this.interval=e?.interval||eg}static async init(e){const t=new zv(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),be.toMiliseconds(this.interval))}pulse(){this.events.emit(ro.pulse)}};const wI=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,_I=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,EI=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function AI(r,e){if(r==="__proto__"||r==="constructor"&&e&&typeof e=="object"&&"prototype"in e){SI(r);return}return e}function SI(r){console.warn(`[destr] Dropping "${r}" key to prevent prototype pollution.`)}function Eu(r,e={}){if(typeof r!="string")return r;const t=r.trim();if(r[0]==='"'&&r.endsWith('"')&&!r.includes("\\"))return t.slice(1,-1);if(t.length<=9){const i=t.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;if(i==="undefined")return;if(i==="null")return null;if(i==="nan")return Number.NaN;if(i==="infinity")return Number.POSITIVE_INFINITY;if(i==="-infinity")return Number.NEGATIVE_INFINITY}if(!EI.test(r)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return r}try{if(wI.test(r)||_I.test(r)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(r,AI)}return JSON.parse(r)}catch(i){if(e.strict)throw i;return r}}function II(r){return!r||typeof r.then!="function"?Promise.resolve(r):r}function mr(r,...e){try{return II(r(...e))}catch(t){return Promise.reject(t)}}function xI(r){const e=typeof r;return r===null||e!=="object"&&e!=="function"}function DI(r){const e=Object.getPrototypeOf(r);return!e||e.isPrototypeOf(Object)}function Tu(r){if(xI(r))return String(r);if(DI(r)||Array.isArray(r))return JSON.stringify(r);if(typeof r.toJSON=="function")return Tu(r.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function kv(){if(typeof qi===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const zl="base64:";function MI(r){if(typeof r=="string")return r;kv();const e=qi.from(r).toString("base64");return zl+e}function PI(r){return typeof r!="string"||!r.startsWith(zl)?r:(kv(),qi.from(r.slice(zl.length),"base64"))}function Yr(r){return r?r.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function OI(...r){return Yr(r.join(":"))}function Au(r){return r=Yr(r),r?r+":":""}const CI="memory",NI=()=>{const r=new Map;return{name:CI,options:{},hasItem(e){return r.has(e)},getItem(e){return r.get(e)??null},getItemRaw(e){return r.get(e)??null},setItem(e,t){r.set(e,t)},setItemRaw(e,t){r.set(e,t)},removeItem(e){r.delete(e)},getKeys(){return Array.from(r.keys())},clear(){r.clear()},dispose(){r.clear()}}};function RI(r={}){const e={mounts:{"":r.driver||NI()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=h=>{for(const g of e.mountpoints)if(h.startsWith(g))return{base:g,relativeKey:h.slice(g.length),driver:e.mounts[g]};return{base:"",relativeKey:h,driver:e.mounts[""]}},i=(h,g)=>e.mountpoints.filter(w=>w.startsWith(h)||g&&h.startsWith(w)).map(w=>({relativeBase:h.length>w.length?h.slice(w.length):void 0,mountpoint:w,driver:e.mounts[w]})),s=(h,g)=>{if(e.watching){g=Yr(g);for(const w of e.watchListeners)w(h,g)}},a=async()=>{if(!e.watching){e.watching=!0;for(const h in e.mounts)e.unwatch[h]=await tg(e.mounts[h],s,h)}},c=async()=>{if(e.watching){for(const h in e.unwatch)await e.unwatch[h]();e.unwatch={},e.watching=!1}},u=(h,g,w)=>{const S=new Map,E=I=>{let z=S.get(I.base);return z||(z={driver:I.driver,base:I.base,items:[]},S.set(I.base,z)),z};for(const I of h){const z=typeof I=="string",K=Yr(z?I:I.key),J=z?void 0:I.value,j=z||!I.options?g:{...g,...I.options},W=t(K);E(W).items.push({key:K,value:J,relativeKey:W.relativeKey,options:j})}return Promise.all([...S.values()].map(I=>w(I))).then(I=>I.flat())},l={hasItem(h,g={}){h=Yr(h);const{relativeKey:w,driver:S}=t(h);return mr(S.hasItem,w,g)},getItem(h,g={}){h=Yr(h);const{relativeKey:w,driver:S}=t(h);return mr(S.getItem,w,g).then(E=>Eu(E))},getItems(h,g){return u(h,g,w=>w.driver.getItems?mr(w.driver.getItems,w.items.map(S=>({key:S.relativeKey,options:S.options})),g).then(S=>S.map(E=>({key:OI(w.base,E.key),value:Eu(E.value)}))):Promise.all(w.items.map(S=>mr(w.driver.getItem,S.relativeKey,S.options).then(E=>({key:S.key,value:Eu(E)})))))},getItemRaw(h,g={}){h=Yr(h);const{relativeKey:w,driver:S}=t(h);return S.getItemRaw?mr(S.getItemRaw,w,g):mr(S.getItem,w,g).then(E=>PI(E))},async setItem(h,g,w={}){if(g===void 0)return l.removeItem(h);h=Yr(h);const{relativeKey:S,driver:E}=t(h);E.setItem&&(await mr(E.setItem,S,Tu(g),w),E.watch||s("update",h))},async setItems(h,g){await u(h,g,async w=>{if(w.driver.setItems)return mr(w.driver.setItems,w.items.map(S=>({key:S.relativeKey,value:Tu(S.value),options:S.options})),g);w.driver.setItem&&await Promise.all(w.items.map(S=>mr(w.driver.setItem,S.relativeKey,Tu(S.value),S.options)))})},async setItemRaw(h,g,w={}){if(g===void 0)return l.removeItem(h,w);h=Yr(h);const{relativeKey:S,driver:E}=t(h);if(E.setItemRaw)await mr(E.setItemRaw,S,g,w);else if(E.setItem)await mr(E.setItem,S,MI(g),w);else return;E.watch||s("update",h)},async removeItem(h,g={}){typeof g=="boolean"&&(g={removeMeta:g}),h=Yr(h);const{relativeKey:w,driver:S}=t(h);S.removeItem&&(await mr(S.removeItem,w,g),(g.removeMeta||g.removeMata)&&await mr(S.removeItem,w+"$",g),S.watch||s("remove",h))},async getMeta(h,g={}){typeof g=="boolean"&&(g={nativeOnly:g}),h=Yr(h);const{relativeKey:w,driver:S}=t(h),E=Object.create(null);if(S.getMeta&&Object.assign(E,await mr(S.getMeta,w,g)),!g.nativeOnly){const I=await mr(S.getItem,w+"$",g).then(z=>Eu(z));I&&typeof I=="object"&&(typeof I.atime=="string"&&(I.atime=new Date(I.atime)),typeof I.mtime=="string"&&(I.mtime=new Date(I.mtime)),Object.assign(E,I))}return E},setMeta(h,g,w={}){return this.setItem(h+"$",g,w)},removeMeta(h,g={}){return this.removeItem(h+"$",g)},async getKeys(h,g={}){h=Au(h);const w=i(h,!0);let S=[];const E=[];for(const I of w){const K=(await mr(I.driver.getKeys,I.relativeBase,g)).map(J=>I.mountpoint+Yr(J)).filter(J=>!S.some(j=>J.startsWith(j)));E.push(...K),S=[I.mountpoint,...S.filter(J=>!J.startsWith(I.mountpoint))]}return h?E.filter(I=>I.startsWith(h)&&!I.endsWith("$")):E.filter(I=>!I.endsWith("$"))},async clear(h,g={}){h=Au(h),await Promise.all(i(h,!1).map(async w=>{if(w.driver.clear)return mr(w.driver.clear,w.relativeBase,g);if(w.driver.removeItem){const S=await w.driver.getKeys(w.relativeBase||"",g);return Promise.all(S.map(E=>w.driver.removeItem(E,g)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(h=>rg(h)))},async watch(h){return await a(),e.watchListeners.push(h),async()=>{e.watchListeners=e.watchListeners.filter(g=>g!==h),e.watchListeners.length===0&&await c()}},async unwatch(){e.watchListeners=[],await c()},mount(h,g){if(h=Au(h),h&&e.mounts[h])throw new Error(`already mounted at ${h}`);return h&&(e.mountpoints.push(h),e.mountpoints.sort((w,S)=>S.length-w.length)),e.mounts[h]=g,e.watching&&Promise.resolve(tg(g,s,h)).then(w=>{e.unwatch[h]=w}).catch(console.error),l},async unmount(h,g=!0){h=Au(h),!(!h||!e.mounts[h])&&(e.watching&&h in e.unwatch&&(e.unwatch[h](),delete e.unwatch[h]),g&&await rg(e.mounts[h]),e.mountpoints=e.mountpoints.filter(w=>w!==h),delete e.mounts[h])},getMount(h=""){h=Yr(h)+":";const g=t(h);return{driver:g.driver,base:g.base}},getMounts(h="",g={}){return h=Yr(h),i(h,g.parents).map(S=>({driver:S.driver,base:S.mountpoint}))}};return l}function tg(r,e,t){return r.watch?r.watch((i,s)=>e(i,t+s)):()=>{}}async function rg(r){typeof r.dispose=="function"&&await mr(r.dispose)}function ua(r){return new Promise((e,t)=>{r.oncomplete=r.onsuccess=()=>e(r.result),r.onabort=r.onerror=()=>t(r.error)})}function Hv(r,e){const t=indexedDB.open(r);t.onupgradeneeded=()=>t.result.createObjectStore(e);const i=ua(t);return(s,a)=>i.then(c=>a(c.transaction(e,s).objectStore(e)))}let hl;function fc(){return hl||(hl=Hv("keyval-store","keyval")),hl}function ig(r,e=fc()){return e("readonly",t=>ua(t.get(r)))}function TI(r,e,t=fc()){return t("readwrite",i=>(i.put(e,r),ua(i.transaction)))}function FI(r,e=fc()){return e("readwrite",t=>(t.delete(r),ua(t.transaction)))}function BI(r=fc()){return r("readwrite",e=>(e.clear(),ua(e.transaction)))}function qI(r,e){return r.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},ua(r.transaction)}function LI(r=fc()){return r("readonly",e=>{if(e.getAllKeys)return ua(e.getAllKeys());const t=[];return qI(e,i=>t.push(i.key)).then(()=>t)})}const UI="idb-keyval";var jI=(r={})=>{const e=r.base&&r.base.length>0?`${r.base}:`:"",t=s=>e+s;let i;return r.dbName&&r.storeName&&(i=Hv(r.dbName,r.storeName)),{name:UI,options:r,async hasItem(s){return!(typeof await ig(t(s),i)>"u")},async getItem(s){return await ig(t(s),i)??null},setItem(s,a){return TI(t(s),a,i)},removeItem(s){return FI(t(s),i)},getKeys(){return LI(i)},clear(){return BI(i)}}};const $I="WALLET_CONNECT_V2_INDEXED_DB",zI="keyvaluestorage";let kI=class{constructor(){this.indexedDb=RI({driver:jI({dbName:$I,storeName:zI})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,es(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var ll=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof at<"u"?at:typeof self<"u"?self:{},Fu={exports:{}};(function(){let r;function e(){}r=e,r.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},r.prototype.setItem=function(t,i){this[t]=String(i)},r.prototype.removeItem=function(t){delete this[t]},r.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(i){t[i]=void 0,delete t[i]})},r.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof ll<"u"&&ll.localStorage?Fu.exports=ll.localStorage:typeof window<"u"&&window.localStorage?Fu.exports=window.localStorage:Fu.exports=new e})();function HI(r){var e;return[r[0],ra((e=r[1])!=null?e:"")]}class KI{constructor(){this.localStorage=Fu.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(HI)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return ra(t)}async setItem(e,t){this.localStorage.setItem(e,es(t))}async removeItem(e){this.localStorage.removeItem(e)}}const VI="wc_storage_version",ng=1,GI=async(r,e,t)=>{const i=VI,s=await e.getItem(i);if(s&&s>=ng){t(e);return}const a=await r.getKeys();if(!a.length){t(e);return}const c=[];for(;a.length;){const u=a.shift();if(!u)continue;const l=u.toLowerCase();if(l.includes("wc@")||l.includes("walletconnect")||l.includes("wc_")||l.includes("wallet_connect")){const h=await r.getItem(u);await e.setItem(u,h),c.push(u)}}await e.setItem(i,ng),t(e),WI(r,c)},WI=async(r,e)=>{e.length&&e.forEach(async t=>{await r.removeItem(t)})};let JI=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new KI;this.storage=e;try{const t=new kI;GI(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};function YI(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}var QI=XI;function XI(r,e,t){var i=t&&t.stringify||YI,s=1;if(typeof r=="object"&&r!==null){var a=e.length+s;if(a===1)return r;var c=new Array(a);c[0]=i(r);for(var u=1;u<a;u++)c[u]=i(e[u]);return c.join(" ")}if(typeof r!="string")return r;var l=e.length;if(l===0)return r;for(var h="",g=1-s,w=-1,S=r&&r.length||0,E=0;E<S;){if(r.charCodeAt(E)===37&&E+1<S){switch(w=w>-1?w:0,r.charCodeAt(E+1)){case 100:case 102:if(g>=l||e[g]==null)break;w<E&&(h+=r.slice(w,E)),h+=Number(e[g]),w=E+2,E++;break;case 105:if(g>=l||e[g]==null)break;w<E&&(h+=r.slice(w,E)),h+=Math.floor(Number(e[g])),w=E+2,E++;break;case 79:case 111:case 106:if(g>=l||e[g]===void 0)break;w<E&&(h+=r.slice(w,E));var I=typeof e[g];if(I==="string"){h+="'"+e[g]+"'",w=E+2,E++;break}if(I==="function"){h+=e[g].name||"<anonymous>",w=E+2,E++;break}h+=i(e[g]),w=E+2,E++;break;case 115:if(g>=l)break;w<E&&(h+=r.slice(w,E)),h+=String(e[g]),w=E+2,E++;break;case 37:w<E&&(h+=r.slice(w,E)),h+="%",w=E+2,E++,g--;break}++g}++E}return w===-1?r:(w<S&&(h+=r.slice(w)),h)}const sg=QI;var Fa=Mn;const Qo=cx().console||{},ZI={mapHttpRequest:Su,mapHttpResponse:Su,wrapRequestSerializer:dl,wrapResponseSerializer:dl,wrapErrorSerializer:dl,req:Su,res:Su,err:nx};function ex(r,e){return Array.isArray(r)?r.filter(function(i){return i!=="!stdSerializers.err"}):r===!0?Object.keys(e):!1}function Mn(r){r=r||{},r.browser=r.browser||{};const e=r.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const t=r.browser.write||Qo;r.browser.write&&(r.browser.asObject=!0);const i=r.serializers||{},s=ex(r.browser.serialize,i);let a=r.browser.serialize;Array.isArray(r.browser.serialize)&&r.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);const c=["error","fatal","warn","info","debug","trace"];typeof t=="function"&&(t.error=t.fatal=t.warn=t.info=t.debug=t.trace=t),r.enabled===!1&&(r.level="silent");const u=r.level||"info",l=Object.create(t);l.log||(l.log=Xo),Object.defineProperty(l,"levelVal",{get:g}),Object.defineProperty(l,"level",{get:w,set:S});const h={transmit:e,serialize:s,asObject:r.browser.asObject,levels:c,timestamp:sx(r)};l.levels=Mn.levels,l.level=u,l.setMaxListeners=l.getMaxListeners=l.emit=l.addListener=l.on=l.prependListener=l.once=l.prependOnceListener=l.removeListener=l.removeAllListeners=l.listeners=l.listenerCount=l.eventNames=l.write=l.flush=Xo,l.serializers=i,l._serialize=s,l._stdErrSerialize=a,l.child=E,e&&(l._logEvent=kl());function g(){return this.level==="silent"?1/0:this.levels.values[this.level]}function w(){return this._level}function S(I){if(I!=="silent"&&!this.levels.values[I])throw Error("unknown level "+I);this._level=I,Ca(h,l,"error","log"),Ca(h,l,"fatal","error"),Ca(h,l,"warn","error"),Ca(h,l,"info","log"),Ca(h,l,"debug","log"),Ca(h,l,"trace","log")}function E(I,z){if(!I)throw new Error("missing bindings for child Pino");z=z||{},s&&I.serializers&&(z.serializers=I.serializers);const K=z.serializers;if(s&&K){var J=Object.assign({},i,K),j=r.browser.serialize===!0?Object.keys(J):s;delete I.serializers,_f([I],j,J,this._stdErrSerialize)}function W(B){this._childLevel=(B._childLevel|0)+1,this.error=Na(B,I,"error"),this.fatal=Na(B,I,"fatal"),this.warn=Na(B,I,"warn"),this.info=Na(B,I,"info"),this.debug=Na(B,I,"debug"),this.trace=Na(B,I,"trace"),J&&(this.serializers=J,this._serialize=j),e&&(this._logEvent=kl([].concat(B._logEvent.bindings,I)))}return W.prototype=this,new W(this)}return l}Mn.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Mn.stdSerializers=ZI;Mn.stdTimeFunctions=Object.assign({},{nullTime:Kv,epochTime:Vv,unixTime:ax,isoTime:ox});function Ca(r,e,t,i){const s=Object.getPrototypeOf(e);e[t]=e.levelVal>e.levels.values[t]?Xo:s[t]?s[t]:Qo[t]||Qo[i]||Xo,tx(r,e,t)}function tx(r,e,t){!r.transmit&&e[t]===Xo||(e[t]=function(i){return function(){const a=r.timestamp(),c=new Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Qo?Qo:this;for(var l=0;l<c.length;l++)c[l]=arguments[l];if(r.serialize&&!r.asObject&&_f(c,this._serialize,this.serializers,this._stdErrSerialize),r.asObject?i.call(u,rx(this,t,c,a)):i.apply(u,c),r.transmit){const h=r.transmit.level||e.level,g=Mn.levels.values[h],w=Mn.levels.values[t];if(w<g)return;ix(this,{ts:a,methodLevel:t,methodValue:w,transmitLevel:h,transmitValue:Mn.levels.values[r.transmit.level||e.level],send:r.transmit.send,val:e.levelVal},c)}}}(e[t]))}function rx(r,e,t,i){r._serialize&&_f(t,r._serialize,r.serializers,r._stdErrSerialize);const s=t.slice();let a=s[0];const c={};i&&(c.time=i),c.level=Mn.levels.values[e];let u=(r._childLevel|0)+1;if(u<1&&(u=1),a!==null&&typeof a=="object"){for(;u--&&typeof s[0]=="object";)Object.assign(c,s.shift());a=s.length?sg(s.shift(),s):void 0}else typeof a=="string"&&(a=sg(s.shift(),s));return a!==void 0&&(c.msg=a),c}function _f(r,e,t,i){for(const s in r)if(i&&r[s]instanceof Error)r[s]=Mn.stdSerializers.err(r[s]);else if(typeof r[s]=="object"&&!Array.isArray(r[s]))for(const a in r[s])e&&e.indexOf(a)>-1&&a in t&&(r[s][a]=t[a](r[s][a]))}function Na(r,e,t){return function(){const i=new Array(1+arguments.length);i[0]=e;for(var s=1;s<i.length;s++)i[s]=arguments[s-1];return r[t].apply(this,i)}}function ix(r,e,t){const i=e.send,s=e.ts,a=e.methodLevel,c=e.methodValue,u=e.val,l=r._logEvent.bindings;_f(t,r._serialize||Object.keys(r.serializers),r.serializers,r._stdErrSerialize===void 0?!0:r._stdErrSerialize),r._logEvent.ts=s,r._logEvent.messages=t.filter(function(h){return l.indexOf(h)===-1}),r._logEvent.level.label=a,r._logEvent.level.value=c,i(a,r._logEvent,u),r._logEvent=kl(l)}function kl(r){return{ts:0,messages:[],bindings:r||[],level:{label:"",value:0}}}function nx(r){const e={type:r.constructor.name,msg:r.message,stack:r.stack};for(const t in r)e[t]===void 0&&(e[t]=r[t]);return e}function sx(r){return typeof r.timestamp=="function"?r.timestamp:r.timestamp===!1?Kv:Vv}function Su(){return{}}function dl(r){return r}function Xo(){}function Kv(){return!1}function Vv(){return Date.now()}function ax(){return Math.round(Date.now()/1e3)}function ox(){return new Date(Date.now()).toISOString()}function cx(){function r(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return r(self)||r(window)||r(this)||{}}}const hc=td(Fa),ux={level:"info"},lc="custom_context",Sd=1e3*1024;let fx=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},ag=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new fx(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;t!==null;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}},Gv=class{constructor(e,t=Sd){this.level=e??"error",this.levelValue=Fa.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new ag(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===Fa.levels.values.error?console.error(e):t===Fa.levels.values.warn?console.warn(e):t===Fa.levels.values.debug?console.debug(e):t===Fa.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(es({timestamp:new Date().toISOString(),log:e}));const t=typeof e=="string"?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new ag(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(es({extraMetadata:e})),new Blob(t,{type:"application/json"})}},hx=class{constructor(e,t=Sd){this.baseChunkLogger=new Gv(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),i=document.createElement("a");i.href=t,i.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t)}};class lx{constructor(e,t=Sd){this.baseChunkLogger=new Gv(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var dx=Object.defineProperty,px=Object.defineProperties,gx=Object.getOwnPropertyDescriptors,og=Object.getOwnPropertySymbols,bx=Object.prototype.hasOwnProperty,vx=Object.prototype.propertyIsEnumerable,cg=(r,e,t)=>e in r?dx(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Xu=(r,e)=>{for(var t in e||(e={}))bx.call(e,t)&&cg(r,t,e[t]);if(og)for(var t of og(e))vx.call(e,t)&&cg(r,t,e[t]);return r},Zu=(r,e)=>px(r,gx(e));function Ef(r){return Zu(Xu({},r),{level:r?.level||ux.level})}function mx(r,e=lc){return r[e]||""}function yx(r,e,t=lc){return r[t]=e,r}function ni(r,e=lc){let t="";return typeof r.bindings>"u"?t=mx(r,e):t=r.bindings().context||"",t}function wx(r,e,t=lc){const i=ni(r,t);return i.trim()?`${i}/${e}`:e}function kr(r,e,t=lc){const i=wx(r,e,t),s=r.child({context:i});return yx(s,i,t)}function _x(r){var e,t;const i=new hx((e=r.opts)==null?void 0:e.level,r.maxSizeInBytes);return{logger:hc(Zu(Xu({},r.opts),{level:"trace",browser:Zu(Xu({},(t=r.opts)==null?void 0:t.browser),{write:s=>i.write(s)})})),chunkLoggerController:i}}function Ex(r){var e;const t=new lx((e=r.opts)==null?void 0:e.level,r.maxSizeInBytes);return{logger:hc(Zu(Xu({},r.opts),{level:"trace"}),t),chunkLoggerController:t}}function Ax(r){return typeof r.loggerOverride<"u"&&typeof r.loggerOverride!="string"?{logger:r.loggerOverride,chunkLoggerController:null}:typeof window<"u"?_x(r):Ex(r)}class Sx extends ca{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}let Ix=class extends ca{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}},xx=class{constructor(e,t){this.logger=e,this.core=t}},Dx=class extends ca{constructor(e,t){super(),this.relayer=e,this.logger=t}},Mx=class extends ca{constructor(e){super()}},Px=class{constructor(e,t,i,s){this.core=e,this.logger=t,this.name=i}},Ox=class extends ca{constructor(e,t){super(),this.relayer=e,this.logger=t}},Cx=class extends ca{constructor(e,t){super(),this.core=e,this.logger=t}},Nx=class{constructor(e,t,i){this.core=e,this.logger=t,this.store=i}},Rx=class{constructor(e,t){this.projectId=e,this.logger=t}},Tx=class{constructor(e,t,i){this.core=e,this.logger=t,this.telemetryEnabled=i}},Fx=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},Bx=class{constructor(e){this.client=e}};const qx="PARSE_ERROR",Lx="INVALID_REQUEST",Ux="METHOD_NOT_FOUND",jx="INVALID_PARAMS",Wv="INTERNAL_ERROR",Id="SERVER_ERROR",$x=[-32700,-32600,-32601,-32602,-32603],ko={[qx]:{code:-32700,message:"Parse error"},[Lx]:{code:-32600,message:"Invalid Request"},[Ux]:{code:-32601,message:"Method not found"},[jx]:{code:-32602,message:"Invalid params"},[Wv]:{code:-32603,message:"Internal error"},[Id]:{code:-32e3,message:"Server error"}},Jv=Id;function zx(r){return $x.includes(r)}function ug(r){return Object.keys(ko).includes(r)?ko[r]:ko[Jv]}function kx(r){const e=Object.values(ko).find(t=>t.code===r);return e||ko[Jv]}function Yv(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}var Qv={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Hl=function(r,e){return Hl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},Hl(r,e)};function Hx(r,e){Hl(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Kl=function(){return Kl=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Kl.apply(this,arguments)};function Kx(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(r);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(r,i[s])&&(t[i[s]]=r[i[s]]);return t}function Vx(r,e,t,i){var s=arguments.length,a=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,e,t,i);else for(var u=r.length-1;u>=0;u--)(c=r[u])&&(a=(s<3?c(a):s>3?c(e,t,a):c(e,t))||a);return s>3&&a&&Object.defineProperty(e,t,a),a}function Gx(r,e){return function(t,i){e(t,i,r)}}function Wx(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function Jx(r,e,t,i){function s(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function u(g){try{h(i.next(g))}catch(w){c(w)}}function l(g){try{h(i.throw(g))}catch(w){c(w)}}function h(g){g.done?a(g.value):s(g.value).then(u,l)}h((i=i.apply(r,e||[])).next())})}function Yx(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(h){return function(g){return l([h,g])}}function l(h){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,s&&(a=h[0]&2?s.return:h[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,h[1])).done)return a;switch(s=0,a&&(h=[h[0]&2,a.value]),h[0]){case 0:case 1:a=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,s=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!a||h[1]>a[0]&&h[1]<a[3])){t.label=h[1];break}if(h[0]===6&&t.label<a[1]){t.label=a[1],a=h;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(h);break}a[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(r,t)}catch(g){h=[6,g],s=0}finally{i=a=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Qx(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function Xx(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function Vl(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xv(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),s,a=[],c;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(u){c={error:u}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(c)throw c.error}}return a}function Zx(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Xv(arguments[e]));return r}function eD(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),s=0,e=0;e<t;e++)for(var a=arguments[e],c=0,u=a.length;c<u;c++,s++)i[s]=a[c];return i}function Zo(r){return this instanceof Zo?(this.v=r,this):new Zo(r)}function tD(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),s,a=[];return s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s;function c(S){i[S]&&(s[S]=function(E){return new Promise(function(I,z){a.push([S,E,I,z])>1||u(S,E)})})}function u(S,E){try{l(i[S](E))}catch(I){w(a[0][3],I)}}function l(S){S.value instanceof Zo?Promise.resolve(S.value.v).then(h,g):w(a[0][2],S)}function h(S){u("next",S)}function g(S){u("throw",S)}function w(S,E){S(E),a.shift(),a.length&&u(a[0][0],a[0][1])}}function rD(r){var e,t;return e={},i("next"),i("throw",function(s){throw s}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(s,a){e[s]=r[s]?function(c){return(t=!t)?{value:Zo(r[s](c)),done:s==="return"}:a?a(c):c}:a}}function iD(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Vl=="function"?Vl(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=r[a]&&function(c){return new Promise(function(u,l){c=r[a](c),s(u,l,c.done,c.value)})}}function s(a,c,u,l){Promise.resolve(l).then(function(h){a({value:h,done:u})},c)}}function nD(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function sD(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function aD(r){return r&&r.__esModule?r:{default:r}}function oD(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function cD(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const uD=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Kl},__asyncDelegator:rD,__asyncGenerator:tD,__asyncValues:iD,__await:Zo,__awaiter:Jx,__classPrivateFieldGet:oD,__classPrivateFieldSet:cD,__createBinding:Qx,__decorate:Vx,__exportStar:Xx,__extends:Hx,__generator:Yx,__importDefault:aD,__importStar:sD,__makeTemplateObject:nD,__metadata:Wx,__param:Gx,__read:Xv,__rest:Kx,__spread:Zx,__spreadArrays:eD,__values:Vl},Symbol.toStringTag,{value:"Module"})),fD=ab(uD);var Kn={},fg;function hD(){if(fg)return Kn;fg=1,Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.isBrowserCryptoAvailable=Kn.getSubtleCrypto=Kn.getBrowerCrypto=void 0;function r(){return(en===null||en===void 0?void 0:en.crypto)||(en===null||en===void 0?void 0:en.msCrypto)||{}}Kn.getBrowerCrypto=r;function e(){const i=r();return i.subtle||i.webkitSubtle}Kn.getSubtleCrypto=e;function t(){return!!r()&&!!e()}return Kn.isBrowserCryptoAvailable=t,Kn}var Vn={},hg;function lD(){if(hg)return Vn;hg=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.isBrowser=Vn.isNode=Vn.isReactNative=void 0;function r(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Vn.isReactNative=r;function e(){return typeof ei<"u"&&typeof ei.versions<"u"&&typeof ei.versions.node<"u"}Vn.isNode=e;function t(){return!r()&&!e()}return Vn.isBrowser=t,Vn}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=fD;e.__exportStar(hD(),r),e.__exportStar(lD(),r)})(Qv);function vs(r=3){const e=Date.now()*Math.pow(10,r),t=Math.floor(Math.random()*Math.pow(10,r));return e+t}function ea(r=6){return BigInt(vs(r))}function _s(r,e,t){return{id:t||vs(),jsonrpc:"2.0",method:r,params:e}}function Af(r,e){return{id:r,jsonrpc:"2.0",result:e}}function Sf(r,e,t){return{id:r,jsonrpc:"2.0",error:dD(e)}}function dD(r,e){return typeof r>"u"?ug(Wv):(typeof r=="string"&&(r=Object.assign(Object.assign({},ug(Id)),{message:r})),zx(r.code)&&(r=kx(r.code)),r)}class pD{}class gD extends pD{constructor(){super()}}class bD extends gD{constructor(e){super()}}const vD="^https?:",mD="^wss?:";function yD(r){const e=r.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Zv(r,e){const t=yD(r);return typeof t>"u"?!1:new RegExp(e).test(t)}function lg(r){return Zv(r,vD)}function dg(r){return Zv(r,mD)}function wD(r){return new RegExp("wss?://localhost(:d{2,5})?").test(r)}function e2(r){return typeof r=="object"&&"id"in r&&"jsonrpc"in r&&r.jsonrpc==="2.0"}function xd(r){return e2(r)&&"method"in r}function If(r){return e2(r)&&(wn(r)||Ti(r))}function wn(r){return"result"in r}function Ti(r){return"error"in r}let sn=class extends bD{constructor(e){super(e),this.events=new Ui.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(_s(e.method,e.params||[],e.id||ea().toString()),t)}async requestStrict(e,t){return new Promise(async(i,s)=>{if(!this.connection.connected)try{await this.open()}catch(a){s(a)}this.events.on(`${e.id}`,a=>{Ti(a)?s(a.error):i(a.result)});try{await this.connection.send(e,t)}catch(a){s(a)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),If(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const _D=()=>typeof WebSocket<"u"?WebSocket:typeof at<"u"&&typeof at.WebSocket<"u"?at.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),ED=()=>typeof WebSocket<"u"||typeof at<"u"&&typeof at.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",pg=r=>r.split("?")[0],gg=10,AD=_D();let SD=class{constructor(e){if(this.url=e,this.events=new Ui.EventEmitter,this.registering=!1,!dg(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(es(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!dg(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,s)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),s(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,i)=>{const s=new URLSearchParams(e).get("origin"),a=Qv.isReactNative()?{headers:{origin:s}}:{rejectUnauthorized:!wD(e)},c=new AD(e,[],a);ED()?c.onerror=u=>{const l=u;i(this.emitError(l.error))}:c.on("error",u=>{i(this.emitError(u))}),c.onopen=()=>{this.onOpen(c),t(c)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?ra(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),s=i.message||i.toString(),a=Sf(e,s);this.events.emit("payload",a)}parseError(e,t=this.url){return Yv(e,pg(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>gg&&this.events.setMaxListeners(gg)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${pg(this.url)}`));return this.events.emit("register_error",t),t}};var ef={exports:{}};ef.exports;(function(r,e){var t=200,i="__lodash_hash_undefined__",s=1,a=2,c=9007199254740991,u="[object Arguments]",l="[object Array]",h="[object AsyncFunction]",g="[object Boolean]",w="[object Date]",S="[object Error]",E="[object Function]",I="[object GeneratorFunction]",z="[object Map]",K="[object Number]",J="[object Null]",j="[object Object]",W="[object Promise]",B="[object Proxy]",U="[object RegExp]",H="[object Set]",m="[object String]",N="[object Symbol]",ne="[object Undefined]",le="[object WeakMap]",pe="[object ArrayBuffer]",ve="[object DataView]",d="[object Float32Array]",p="[object Float64Array]",_="[object Int8Array]",D="[object Int16Array]",P="[object Int32Array]",C="[object Uint8Array]",F="[object Uint8ClampedArray]",M="[object Uint16Array]",v="[object Uint32Array]",R=/[\\^$.*+?()[\]{}|]/g,re=/^\[object .+?Constructor\]$/,he=/^(?:0|[1-9]\d*)$/,A={};A[d]=A[p]=A[_]=A[D]=A[P]=A[C]=A[F]=A[M]=A[v]=!0,A[u]=A[l]=A[pe]=A[g]=A[ve]=A[w]=A[S]=A[E]=A[z]=A[K]=A[j]=A[U]=A[H]=A[m]=A[le]=!1;var ee=typeof en=="object"&&en&&en.Object===Object&&en,L=typeof self=="object"&&self&&self.Object===Object&&self,$=ee||L||Function("return this")(),V=e&&!e.nodeType&&e,b=V&&!0&&r&&!r.nodeType&&r,q=b&&b.exports===V,te=q&&ee.process,ae=function(){try{return te&&te.binding&&te.binding("util")}catch{}}(),oe=ae&&ae.isTypedArray;function Me(k,Q){for(var fe=-1,Se=k==null?0:k.length,Lt=0,rt=[];++fe<Se;){var Kt=k[fe];Q(Kt,fe,k)&&(rt[Lt++]=Kt)}return rt}function Oe(k,Q){for(var fe=-1,Se=Q.length,Lt=k.length;++fe<Se;)k[Lt+fe]=Q[fe];return k}function Ie(k,Q){for(var fe=-1,Se=k==null?0:k.length;++fe<Se;)if(Q(k[fe],fe,k))return!0;return!1}function At(k,Q){for(var fe=-1,Se=Array(k);++fe<k;)Se[fe]=Q(fe);return Se}function $e(k){return function(Q){return k(Q)}}function De(k,Q){return k.has(Q)}function qe(k,Q){return k?.[Q]}function _e(k){var Q=-1,fe=Array(k.size);return k.forEach(function(Se,Lt){fe[++Q]=[Lt,Se]}),fe}function Ee(k,Q){return function(fe){return k(Q(fe))}}function Ve(k){var Q=-1,fe=Array(k.size);return k.forEach(function(Se){fe[++Q]=Se}),fe}var ye=Array.prototype,Ae=Function.prototype,Be=Object.prototype,we=$["__core-js_shared__"],Pe=Ae.toString,Le=Be.hasOwnProperty,Ce=function(){var k=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||"");return k?"Symbol(src)_1."+k:""}(),Ne=Be.toString,st=RegExp("^"+Pe.call(Le).replace(R,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Te=q?$.Buffer:void 0,Re=$.Symbol,Jt=$.Uint8Array,ut=Be.propertyIsEnumerable,gt=ye.splice,Yt=Re?Re.toStringTag:void 0,yt=Object.getOwnPropertySymbols,Et=Te?Te.isBuffer:void 0,Rr=Ee(Object.keys,Object),Ge=si($,"DataView"),ze=si($,"Map"),xt=si($,"Promise"),We=si($,"Set"),Ke=si($,"WeakMap"),St=si(Object,"create"),Qe=Tn(Ge),Xe=Tn(ze),Dt=Tn(xt),Ze=Tn(We),Je=Tn(Ke),Ot=Re?Re.prototype:void 0,Ye=Ot?Ot.valueOf:void 0;function Ue(k){var Q=-1,fe=k==null?0:k.length;for(this.clear();++Q<fe;){var Se=k[Q];this.set(Se[0],Se[1])}}function Ft(){this.__data__=St?St(null):{},this.size=0}function et(k){var Q=this.has(k)&&delete this.__data__[k];return this.size-=Q?1:0,Q}function Ct(k){var Q=this.__data__;if(St){var fe=Q[k];return fe===i?void 0:fe}return Le.call(Q,k)?Q[k]:void 0}function zi(k){var Q=this.__data__;return St?Q[k]!==void 0:Le.call(Q,k)}function Nt(k,Q){var fe=this.__data__;return this.size+=this.has(k)?0:1,fe[k]=St&&Q===void 0?i:Q,this}Ue.prototype.clear=Ft,Ue.prototype.delete=et,Ue.prototype.get=Ct,Ue.prototype.has=zi,Ue.prototype.set=Nt;function lt(k){var Q=-1,fe=k==null?0:k.length;for(this.clear();++Q<fe;){var Se=k[Q];this.set(Se[0],Se[1])}}function bi(){this.__data__=[],this.size=0}function vi(k){var Q=this.__data__,fe=Ns(Q,k);if(fe<0)return!1;var Se=Q.length-1;return fe==Se?Q.pop():gt.call(Q,fe,1),--this.size,!0}function mi(k){var Q=this.__data__,fe=Ns(Q,k);return fe<0?void 0:Q[fe][1]}function yi(k){return Ns(this.__data__,k)>-1}function wi(k,Q){var fe=this.__data__,Se=Ns(fe,k);return Se<0?(++this.size,fe.push([k,Q])):fe[Se][1]=Q,this}lt.prototype.clear=bi,lt.prototype.delete=vi,lt.prototype.get=mi,lt.prototype.has=yi,lt.prototype.set=wi;function dr(k){var Q=-1,fe=k==null?0:k.length;for(this.clear();++Q<fe;){var Se=k[Q];this.set(Se[0],Se[1])}}function on(){this.size=0,this.__data__={hash:new Ue,map:new(ze||lt),string:new Ue}}function Is(k){var Q=ns(this,k).delete(k);return this.size-=Q?1:0,Q}function cn(k){return ns(this,k).get(k)}function xs(k){return ns(this,k).has(k)}function Ds(k,Q){var fe=ns(this,k),Se=fe.size;return fe.set(k,Q),this.size+=fe.size==Se?0:1,this}dr.prototype.clear=on,dr.prototype.delete=Is,dr.prototype.get=cn,dr.prototype.has=xs,dr.prototype.set=Ds;function un(k){var Q=-1,fe=k==null?0:k.length;for(this.__data__=new dr;++Q<fe;)this.add(k[Q])}function rs(k){return this.__data__.set(k,i),this}function is(k){return this.__data__.has(k)}un.prototype.add=un.prototype.push=rs,un.prototype.has=is;function Tr(k){var Q=this.__data__=new lt(k);this.size=Q.size}function Ms(){this.__data__=new lt,this.size=0}function Ps(k){var Q=this.__data__,fe=Q.delete(k);return this.size=Q.size,fe}function Os(k){return this.__data__.get(k)}function Cs(k){return this.__data__.has(k)}function pc(k,Q){var fe=this.__data__;if(fe instanceof lt){var Se=fe.__data__;if(!ze||Se.length<t-1)return Se.push([k,Q]),this.size=++fe.size,this;fe=this.__data__=new dr(Se)}return fe.set(k,Q),this.size=fe.size,this}Tr.prototype.clear=Ms,Tr.prototype.delete=Ps,Tr.prototype.get=Os,Tr.prototype.has=Cs,Tr.prototype.set=pc;function gc(k,Q){var fe=ga(k),Se=!fe&&Dc(k),Lt=!fe&&!Se&&ao(k),rt=!fe&&!Se&&!Lt&&Oc(k),Kt=fe||Se||Lt||rt,or=Kt?At(k.length,String):[],wt=or.length;for(var Ut in k)Le.call(k,Ut)&&!(Kt&&(Ut=="length"||Lt&&(Ut=="offset"||Ut=="parent")||rt&&(Ut=="buffer"||Ut=="byteLength"||Ut=="byteOffset")||Ec(Ut,wt)))&&or.push(Ut);return or}function Ns(k,Q){for(var fe=k.length;fe--;)if(xc(k[fe][0],Q))return fe;return-1}function no(k,Q,fe){var Se=Q(k);return ga(k)?Se:Oe(Se,fe(k))}function Rs(k){return k==null?k===void 0?ne:J:Yt&&Yt in Object(k)?wc(k):Of(k)}function so(k){return Fs(k)&&Rs(k)==u}function Ts(k,Q,fe,Se,Lt){return k===Q?!0:k==null||Q==null||!Fs(k)&&!Fs(Q)?k!==k&&Q!==Q:bc(k,Q,fe,Se,Ts,Lt)}function bc(k,Q,fe,Se,Lt,rt){var Kt=ga(k),or=ga(Q),wt=Kt?l:fn(k),Ut=or?l:fn(Q);wt=wt==u?j:wt,Ut=Ut==u?j:Ut;var rr=wt==j,Hr=Ut==j,cr=wt==Ut;if(cr&&ao(k)){if(!ao(Q))return!1;Kt=!0,rr=!1}if(cr&&!rr)return rt||(rt=new Tr),Kt||Oc(k)?da(k,Q,fe,Se,Lt,rt):Pf(k,Q,wt,fe,Se,Lt,rt);if(!(fe&s)){var Vt=rr&&Le.call(k,"__wrapped__"),Fr=Hr&&Le.call(Q,"__wrapped__");if(Vt||Fr){var ki=Vt?k.value():k,_i=Fr?Q.value():Q;return rt||(rt=new Tr),Lt(ki,_i,fe,Se,rt)}}return cr?(rt||(rt=new Tr),yc(k,Q,fe,Se,Lt,rt)):!1}function Mf(k){if(!Pc(k)||Sc(k))return!1;var Q=ba(k)?st:re;return Q.test(Tn(k))}function vc(k){return Fs(k)&&Mc(k.length)&&!!A[Rs(k)]}function mc(k){if(!Ic(k))return Rr(k);var Q=[];for(var fe in Object(k))Le.call(k,fe)&&fe!="constructor"&&Q.push(fe);return Q}function da(k,Q,fe,Se,Lt,rt){var Kt=fe&s,or=k.length,wt=Q.length;if(or!=wt&&!(Kt&&wt>or))return!1;var Ut=rt.get(k);if(Ut&&rt.get(Q))return Ut==Q;var rr=-1,Hr=!0,cr=fe&a?new un:void 0;for(rt.set(k,Q),rt.set(Q,k);++rr<or;){var Vt=k[rr],Fr=Q[rr];if(Se)var ki=Kt?Se(Fr,Vt,rr,Q,k,rt):Se(Vt,Fr,rr,k,Q,rt);if(ki!==void 0){if(ki)continue;Hr=!1;break}if(cr){if(!Ie(Q,function(_i,hn){if(!De(cr,hn)&&(Vt===_i||Lt(Vt,_i,fe,Se,rt)))return cr.push(hn)})){Hr=!1;break}}else if(!(Vt===Fr||Lt(Vt,Fr,fe,Se,rt))){Hr=!1;break}}return rt.delete(k),rt.delete(Q),Hr}function Pf(k,Q,fe,Se,Lt,rt,Kt){switch(fe){case ve:if(k.byteLength!=Q.byteLength||k.byteOffset!=Q.byteOffset)return!1;k=k.buffer,Q=Q.buffer;case pe:return!(k.byteLength!=Q.byteLength||!rt(new Jt(k),new Jt(Q)));case g:case w:case K:return xc(+k,+Q);case S:return k.name==Q.name&&k.message==Q.message;case U:case m:return k==Q+"";case z:var or=_e;case H:var wt=Se&s;if(or||(or=Ve),k.size!=Q.size&&!wt)return!1;var Ut=Kt.get(k);if(Ut)return Ut==Q;Se|=a,Kt.set(k,Q);var rr=da(or(k),or(Q),Se,Lt,rt,Kt);return Kt.delete(k),rr;case N:if(Ye)return Ye.call(k)==Ye.call(Q)}return!1}function yc(k,Q,fe,Se,Lt,rt){var Kt=fe&s,or=pa(k),wt=or.length,Ut=pa(Q),rr=Ut.length;if(wt!=rr&&!Kt)return!1;for(var Hr=wt;Hr--;){var cr=or[Hr];if(!(Kt?cr in Q:Le.call(Q,cr)))return!1}var Vt=rt.get(k);if(Vt&&rt.get(Q))return Vt==Q;var Fr=!0;rt.set(k,Q),rt.set(Q,k);for(var ki=Kt;++Hr<wt;){cr=or[Hr];var _i=k[cr],hn=Q[cr];if(Se)var oo=Kt?Se(hn,_i,cr,Q,k,rt):Se(_i,hn,cr,k,Q,rt);if(!(oo===void 0?_i===hn||Lt(_i,hn,fe,Se,rt):oo)){Fr=!1;break}ki||(ki=cr=="constructor")}if(Fr&&!ki){var Bs=k.constructor,pr=Q.constructor;Bs!=pr&&"constructor"in k&&"constructor"in Q&&!(typeof Bs=="function"&&Bs instanceof Bs&&typeof pr=="function"&&pr instanceof pr)&&(Fr=!1)}return rt.delete(k),rt.delete(Q),Fr}function pa(k){return no(k,Rf,_c)}function ns(k,Q){var fe=k.__data__;return Ac(Q)?fe[typeof Q=="string"?"string":"hash"]:fe.map}function si(k,Q){var fe=qe(k,Q);return Mf(fe)?fe:void 0}function wc(k){var Q=Le.call(k,Yt),fe=k[Yt];try{k[Yt]=void 0;var Se=!0}catch{}var Lt=Ne.call(k);return Se&&(Q?k[Yt]=fe:delete k[Yt]),Lt}var _c=yt?function(k){return k==null?[]:(k=Object(k),Me(yt(k),function(Q){return ut.call(k,Q)}))}:qt,fn=Rs;(Ge&&fn(new Ge(new ArrayBuffer(1)))!=ve||ze&&fn(new ze)!=z||xt&&fn(xt.resolve())!=W||We&&fn(new We)!=H||Ke&&fn(new Ke)!=le)&&(fn=function(k){var Q=Rs(k),fe=Q==j?k.constructor:void 0,Se=fe?Tn(fe):"";if(Se)switch(Se){case Qe:return ve;case Xe:return z;case Dt:return W;case Ze:return H;case Je:return le}return Q});function Ec(k,Q){return Q=Q??c,!!Q&&(typeof k=="number"||he.test(k))&&k>-1&&k%1==0&&k<Q}function Ac(k){var Q=typeof k;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?k!=="__proto__":k===null}function Sc(k){return!!Ce&&Ce in k}function Ic(k){var Q=k&&k.constructor,fe=typeof Q=="function"&&Q.prototype||Be;return k===fe}function Of(k){return Ne.call(k)}function Tn(k){if(k!=null){try{return Pe.call(k)}catch{}try{return k+""}catch{}}return""}function xc(k,Q){return k===Q||k!==k&&Q!==Q}var Dc=so(function(){return arguments}())?so:function(k){return Fs(k)&&Le.call(k,"callee")&&!ut.call(k,"callee")},ga=Array.isArray;function Cf(k){return k!=null&&Mc(k.length)&&!ba(k)}var ao=Et||Bt;function Nf(k,Q){return Ts(k,Q)}function ba(k){if(!Pc(k))return!1;var Q=Rs(k);return Q==E||Q==I||Q==h||Q==B}function Mc(k){return typeof k=="number"&&k>-1&&k%1==0&&k<=c}function Pc(k){var Q=typeof k;return k!=null&&(Q=="object"||Q=="function")}function Fs(k){return k!=null&&typeof k=="object"}var Oc=oe?$e(oe):vc;function Rf(k){return Cf(k)?gc(k):mc(k)}function qt(){return[]}function Bt(){return!1}r.exports=Nf})(ef,ef.exports);var ID=ef.exports;const xD=td(ID),t2="wc",r2=2,Dd="core",On=`${t2}@2:${Dd}:`,DD={name:Dd,logger:"error"},MD={database:":memory:"},PD="crypto",bg="client_ed25519_seed",OD=be.ONE_DAY,CD="keychain",ND="0.3",RD="messages",TD="0.3",FD=be.SIX_HOURS,BD="publisher",i2="irn",qD="error",n2="wss://relay.walletconnect.org",LD="relayer",jr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},UD="_subscription",Ci={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},jD=.1,Gl="2.17.0",$t={link_mode:"link_mode",relay:"relay"},$D="0.3",zD="WALLETCONNECT_CLIENT_ID",vg="WALLETCONNECT_LINK_MODE_APPS",_n={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},kD="subscription",HD="0.3",KD=be.FIVE_SECONDS*1e3,VD="pairing",GD="0.3",Co={wc_pairingDelete:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:be.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:be.ONE_DAY,prompt:!1,tag:0},res:{ttl:be.ONE_DAY,prompt:!1,tag:0}}},Xs={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Ji={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},WD="history",JD="0.3",YD="expirer",Ni={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},QD="0.3",XD="verify-api",ZD="https://verify.walletconnect.com",s2="https://verify.walletconnect.org",Ho=s2,eM=`${Ho}/v3`,tM=[ZD,s2],rM="echo",iM="https://echo.walletconnect.com",vn={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Gn={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Yi={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Ws={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Js={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},No={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},nM=.1,sM="event-client",aM=86400,oM="https://pulse.walletconnect.org/batch";function cM(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var a=r.charAt(s),c=a.charCodeAt(0);if(t[c]!==255)throw new TypeError(a+" is ambiguous");t[c]=s}var u=r.length,l=r.charAt(0),h=Math.log(u)/Math.log(256),g=Math.log(256)/Math.log(u);function w(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var z=0,K=0,J=0,j=I.length;J!==j&&I[J]===0;)J++,z++;for(var W=(j-J)*g+1>>>0,B=new Uint8Array(W);J!==j;){for(var U=I[J],H=0,m=W-1;(U!==0||H<K)&&m!==-1;m--,H++)U+=256*B[m]>>>0,B[m]=U%u>>>0,U=U/u>>>0;if(U!==0)throw new Error("Non-zero carry");K=H,J++}for(var N=W-K;N!==W&&B[N]===0;)N++;for(var ne=l.repeat(z);N<W;++N)ne+=r.charAt(B[N]);return ne}function S(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;var z=0;if(I[z]!==" "){for(var K=0,J=0;I[z]===l;)K++,z++;for(var j=(I.length-z)*h+1>>>0,W=new Uint8Array(j);I[z];){var B=t[I.charCodeAt(z)];if(B===255)return;for(var U=0,H=j-1;(B!==0||U<J)&&H!==-1;H--,U++)B+=u*W[H]>>>0,W[H]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");J=U,z++}if(I[z]!==" "){for(var m=j-J;m!==j&&W[m]===0;)m++;for(var N=new Uint8Array(K+(j-m)),ne=K;m!==j;)N[ne++]=W[m++];return N}}}function E(I){var z=S(I);if(z)return z;throw new Error(`Non-${e} character`)}return{encode:w,decodeUnsafe:S,decode:E}}var uM=cM,fM=uM;const a2=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},hM=r=>new TextEncoder().encode(r),lM=r=>new TextDecoder().decode(r);class dM{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class pM{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return o2(this,e)}}class gM{constructor(e){this.decoders=e}or(e){return o2(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const o2=(r,e)=>new gM({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class bM{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new dM(e,t,i),this.decoder=new pM(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const xf=({name:r,prefix:e,encode:t,decode:i})=>new bM(r,e,t,i),dc=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:s}=fM(t,e);return xf({prefix:r,name:e,encode:i,decode:a=>a2(s(a))})},vM=(r,e,t,i)=>{const s={};for(let g=0;g<e.length;++g)s[e[g]]=g;let a=r.length;for(;r[a-1]==="=";)--a;const c=new Uint8Array(a*t/8|0);let u=0,l=0,h=0;for(let g=0;g<a;++g){const w=s[r[g]];if(w===void 0)throw new SyntaxError(`Non-${i} character`);l=l<<t|w,u+=t,u>=8&&(u-=8,c[h++]=255&l>>u)}if(u>=t||255&l<<8-u)throw new SyntaxError("Unexpected end of data");return c},mM=(r,e,t)=>{const i=e[e.length-1]==="=",s=(1<<t)-1;let a="",c=0,u=0;for(let l=0;l<r.length;++l)for(u=u<<8|r[l],c+=8;c>t;)c-=t,a+=e[s&u>>c];if(c&&(a+=e[s&u<<t-c]),i)for(;a.length*t&7;)a+="=";return a},Dr=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>xf({prefix:e,name:r,encode(s){return mM(s,i,t)},decode(s){return vM(s,i,t,r)}}),yM=xf({prefix:"\0",name:"identity",encode:r=>lM(r),decode:r=>hM(r)});var wM=Object.freeze({__proto__:null,identity:yM});const _M=Dr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var EM=Object.freeze({__proto__:null,base2:_M});const AM=Dr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var SM=Object.freeze({__proto__:null,base8:AM});const IM=dc({prefix:"9",name:"base10",alphabet:"0123456789"});var xM=Object.freeze({__proto__:null,base10:IM});const DM=Dr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),MM=Dr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var PM=Object.freeze({__proto__:null,base16:DM,base16upper:MM});const OM=Dr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),CM=Dr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),NM=Dr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),RM=Dr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),TM=Dr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),FM=Dr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),BM=Dr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),qM=Dr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),LM=Dr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var UM=Object.freeze({__proto__:null,base32:OM,base32upper:CM,base32pad:NM,base32padupper:RM,base32hex:TM,base32hexupper:FM,base32hexpad:BM,base32hexpadupper:qM,base32z:LM});const jM=dc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),$M=dc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var zM=Object.freeze({__proto__:null,base36:jM,base36upper:$M});const kM=dc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),HM=dc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var KM=Object.freeze({__proto__:null,base58btc:kM,base58flickr:HM});const VM=Dr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),GM=Dr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),WM=Dr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),JM=Dr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var YM=Object.freeze({__proto__:null,base64:VM,base64pad:GM,base64url:WM,base64urlpad:JM});const c2=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),QM=c2.reduce((r,e,t)=>(r[t]=e,r),[]),XM=c2.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function ZM(r){return r.reduce((e,t)=>(e+=QM[t],e),"")}function eP(r){const e=[];for(const t of r){const i=XM[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const tP=xf({prefix:"🚀",name:"base256emoji",encode:ZM,decode:eP});var rP=Object.freeze({__proto__:null,base256emoji:tP}),iP=u2,mg=128,nP=127,sP=~nP,aP=Math.pow(2,31);function u2(r,e,t){e=e||[],t=t||0;for(var i=t;r>=aP;)e[t++]=r&255|mg,r/=128;for(;r&sP;)e[t++]=r&255|mg,r>>>=7;return e[t]=r|0,u2.bytes=t-i+1,e}var oP=Wl,cP=128,yg=127;function Wl(r,i){var t=0,i=i||0,s=0,a=i,c,u=r.length;do{if(a>=u)throw Wl.bytes=0,new RangeError("Could not decode varint");c=r[a++],t+=s<28?(c&yg)<<s:(c&yg)*Math.pow(2,s),s+=7}while(c>=cP);return Wl.bytes=a-i,t}var uP=Math.pow(2,7),fP=Math.pow(2,14),hP=Math.pow(2,21),lP=Math.pow(2,28),dP=Math.pow(2,35),pP=Math.pow(2,42),gP=Math.pow(2,49),bP=Math.pow(2,56),vP=Math.pow(2,63),mP=function(r){return r<uP?1:r<fP?2:r<hP?3:r<lP?4:r<dP?5:r<pP?6:r<gP?7:r<bP?8:r<vP?9:10},yP={encode:iP,decode:oP,encodingLength:mP},f2=yP;const wg=(r,e,t=0)=>(f2.encode(r,e,t),e),_g=r=>f2.encodingLength(r),Jl=(r,e)=>{const t=e.byteLength,i=_g(r),s=i+_g(t),a=new Uint8Array(s+t);return wg(r,a,0),wg(t,a,i),a.set(e,s),new wP(r,t,e,a)};class wP{constructor(e,t,i,s){this.code=e,this.size=t,this.digest=i,this.bytes=s}}const h2=({name:r,code:e,encode:t})=>new _P(r,e,t);class _P{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Jl(this.code,t):t.then(i=>Jl(this.code,i))}else throw Error("Unknown type, must be binary type")}}const l2=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),EP=h2({name:"sha2-256",code:18,encode:l2("SHA-256")}),AP=h2({name:"sha2-512",code:19,encode:l2("SHA-512")});var SP=Object.freeze({__proto__:null,sha256:EP,sha512:AP});const d2=0,IP="identity",p2=a2,xP=r=>Jl(d2,p2(r)),DP={code:d2,name:IP,encode:p2,digest:xP};var MP=Object.freeze({__proto__:null,identity:DP});new TextEncoder,new TextDecoder;const Eg={...wM,...EM,...SM,...xM,...PM,...UM,...zM,...KM,...YM,...rP};({...SP,...MP});function PP(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function g2(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const Ag=g2("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),pl=g2("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=PP(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),OP={utf8:Ag,"utf-8":Ag,hex:Eg.base16,latin1:pl,ascii:pl,binary:pl,...Eg};function CP(r,e="utf8"){const t=OP[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}class NP{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=CD,this.version=ND,this.initialized=!1,this.storagePrefix=On,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,s)=>{this.isInitialized(),this.keychain.set(i,s),await this.persist()},this.get=i=>{this.isInitialized();const s=this.keychain.get(i);if(typeof s>"u"){const{message:a}=ge("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(a)}return s},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=kr(t,this.name)}get context(){return ni(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Gb(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Wb(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}class RP{constructor(e,t,i){this.core=e,this.logger=t,this.name=PD,this.randomSessionIdentifier=jl(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=s=>(this.isInitialized(),this.keychain.has(s)),this.getClientId=async()=>{this.isInitialized();const s=await this.getClientSeed(),a=s1(s);return kb(a.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const s=bS();return this.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=async s=>{this.isInitialized();const a=await this.getClientSeed(),c=s1(a),u=this.randomSessionIdentifier;return await Q7(u,s,OD,c)},this.generateSharedKey=(s,a,c)=>{this.isInitialized();const u=this.getPrivateKey(s),l=vS(u,a);return this.setSymKey(l,c)},this.setSymKey=async(s,a)=>{this.isInitialized();const c=a||Ru(s);return await this.keychain.set(c,s),c},this.deleteKeyPair=async s=>{this.isInitialized(),await this.keychain.del(s)},this.deleteSymKey=async s=>{this.isInitialized(),await this.keychain.del(s)},this.encode=async(s,a,c)=>{this.isInitialized();const u=Uv(c),l=es(a);if(z1(u))return yS(l,c?.encoding);if($1(u)){const S=u.senderPublicKey,E=u.receiverPublicKey;s=await this.generateSharedKey(S,E)}const h=this.getSymKey(s),{type:g,senderPublicKey:w}=u;return mS({type:g,symKey:h,message:l,senderPublicKey:w,encoding:c?.encoding})},this.decode=async(s,a,c)=>{this.isInitialized();const u=ES(a,c);if(z1(u)){const l=_S(a,c?.encoding);return ra(l)}if($1(u)){const l=u.receiverPublicKey,h=u.senderPublicKey;s=await this.generateSharedKey(l,h)}try{const l=this.getSymKey(s),h=wS({symKey:l,encoded:a,encoding:c?.encoding});return ra(h)}catch(l){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(l)}},this.getPayloadType=(s,a=ws)=>{const c=Jo({encoded:s,encoding:a});return na(c.type)},this.getPayloadSenderPublicKey=(s,a=ws)=>{const c=Jo({encoded:s,encoding:a});return c.senderPublicKey?ti(c.senderPublicKey,zr):void 0},this.core=e,this.logger=kr(t,this.name),this.keychain=i||new NP(this.core,this.logger)}get context(){return ni(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(bg)}catch{e=jl(),await this.keychain.set(bg,e)}return CP(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}class TP extends xx{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=RD,this.version=TD,this.initialized=!1,this.storagePrefix=On,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,s)=>{this.isInitialized();const a=Jn(s);let c=this.messages.get(i);return typeof c>"u"&&(c={}),typeof c[a]<"u"||(c[a]=s,this.messages.set(i,c),await this.persist()),a},this.get=i=>{this.isInitialized();let s=this.messages.get(i);return typeof s>"u"&&(s={}),s},this.has=(i,s)=>{this.isInitialized();const a=this.get(i),c=Jn(s);return typeof a[c]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=kr(e,this.name),this.core=t}get context(){return ni(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Gb(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Wb(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}class FP extends Dx{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new Ui.EventEmitter,this.name=BD,this.queue=new Map,this.publishTimeout=be.toMiliseconds(be.ONE_MINUTE),this.failedPublishTimeout=be.toMiliseconds(be.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(i,s,a)=>{var c;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:a}});const u=a?.ttl||FD,l=$l(a),h=a?.prompt||!1,g=a?.tag||0,w=a?.id||ea().toString(),S={topic:i,message:s,opts:{ttl:u,relay:l,prompt:h,tag:g,id:w,attestation:a?.attestation}},E=`Failed to publish payload, please try again. id:${w} tag:${g}`,I=Date.now();let z,K=1;try{for(;z===void 0;){if(Date.now()-I>this.publishTimeout)throw new Error(E);this.logger.trace({id:w,attempts:K},`publisher.publish - attempt ${K}`),z=await await Ua(this.rpcPublish(i,s,u,l,h,g,w,a?.attestation).catch(J=>this.logger.warn(J)),this.publishTimeout,E),K++,z||await new Promise(J=>setTimeout(J,this.failedPublishTimeout))}this.relayer.events.emit(jr.publish,S),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:w,topic:i,message:s,opts:a}})}catch(J){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(J),(c=a?.internal)!=null&&c.throwOnFailedPublish)throw J;this.queue.set(w,S)}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.relayer=e,this.logger=kr(t,this.name),this.registerEventListeners()}get context(){return ni(this.logger)}rpcPublish(e,t,i,s,a,c,u,l){var h,g,w,S;const E={method:qo(s.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:a,tag:c,attestation:l},id:u};return Zr((h=E.params)==null?void 0:h.prompt)&&((g=E.params)==null||delete g.prompt),Zr((w=E.params)==null?void 0:w.tag)&&((S=E.params)==null||delete S.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:E}),this.relayer.request(E)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:i,opts:s}=e;await this.publish(t,i,s)})}registerEventListeners(){this.relayer.core.heartbeat.on(ro.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(jr.connection_stalled);return}this.checkQueue()}),this.relayer.on(jr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class BP{constructor(){this.map=new Map,this.set=(e,t)=>{const i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,t))return;const s=i.filter(a=>a!==t);if(!s.length){this.map.delete(e);return}this.map.set(e,s)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var qP=Object.defineProperty,LP=Object.defineProperties,UP=Object.getOwnPropertyDescriptors,Sg=Object.getOwnPropertySymbols,jP=Object.prototype.hasOwnProperty,$P=Object.prototype.propertyIsEnumerable,Ig=(r,e,t)=>e in r?qP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ro=(r,e)=>{for(var t in e||(e={}))jP.call(e,t)&&Ig(r,t,e[t]);if(Sg)for(var t of Sg(e))$P.call(e,t)&&Ig(r,t,e[t]);return r},gl=(r,e)=>LP(r,UP(e));class zP extends Ox{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new BP,this.events=new Ui.EventEmitter,this.name=kD,this.version=HD,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=On,this.subscribeTimeout=be.toMiliseconds(be.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId(),await this.restore()),this.initialized=!0},this.subscribe=async(i,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}});try{const a=$l(s),c={topic:i,relay:a,transportType:s?.transportType};this.pending.set(i,c);const u=await this.rpcSubscribe(i,a,s?.transportType);return typeof u=="string"&&(this.onSubscribe(u,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}})),u}catch(a){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(a),a}},this.unsubscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),typeof s?.id<"u"?await this.unsubscribeById(i,s.id,s):await this.unsubscribeByTopic(i,s)},this.isSubscribed=async i=>{if(this.topics.includes(i))return!0;const s=`${this.pendingSubscriptionWatchLabel}_${i}`;return await new Promise((a,c)=>{const u=new be.Watch;u.start(s);const l=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(l),u.stop(s),a(!0)),u.elapsed(s)>=KD&&(clearInterval(l),u.stop(s),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=kr(t,this.name),this.clientId=""}get context(){return ni(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const i=this.topicMap.get(e);await Promise.all(i.map(async s=>await this.unsubscribeById(e,s,t)))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{const s=$l(i);await this.rpcUnsubscribe(e,t,s);const a=Tt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,a),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,t,i=$t.relay){i===$t.relay&&await this.restartToComplete();const s={method:qo(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{const a=Jn(e+this.clientId);return i===$t.link_mode?(setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(c=>this.logger.warn(c))},be.toMiliseconds(be.ONE_SECOND)),a):await await Ua(this.relayer.request(s).catch(c=>this.logger.warn(c)),this.subscribeTimeout)?a:null}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(jr.connection_stalled)}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,i={method:qo(t.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await Ua(this.relayer.request(i).catch(s=>this.logger.warn(s)),this.subscribeTimeout)}catch{this.relayer.events.emit(jr.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,i={method:qo(t.protocol).batchFetchMessages,params:{topics:e.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});let s;try{s=await await Ua(this.relayer.request(i).catch(a=>this.logger.warn(a)),this.subscribeTimeout)}catch{this.relayer.events.emit(jr.connection_stalled)}return s}rpcUnsubscribe(e,t,i){const s={method:qo(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,gl(Ro({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,Ro({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,Ro({},t)),this.topicMap.set(t.topic,e),this.events.emit(_n.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:i}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(_n.deleted,gl(Ro({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(_n.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchFetchMessages(i),await this.batchSubscribe(i)}}this.events.emit(_n.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);Pn(t)&&this.onBatchSubscribe(t.map((i,s)=>gl(Ro({},e[s]),{id:i})))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(t.messages))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e),this.pendingBatchMessages.length&&(await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])}registerEventListeners(){this.relayer.core.heartbeat.on(ro.pulse,async()=>{await this.checkPending()}),this.events.on(_n.created,async e=>{const t=_n.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(_n.deleted,async e=>{const t=_n.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){!this.relayer.connected&&!this.relayer.connecting&&await this.relayer.transportOpen(),this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var kP=Object.defineProperty,xg=Object.getOwnPropertySymbols,HP=Object.prototype.hasOwnProperty,KP=Object.prototype.propertyIsEnumerable,Dg=(r,e,t)=>e in r?kP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,VP=(r,e)=>{for(var t in e||(e={}))HP.call(e,t)&&Dg(r,t,e[t]);if(xg)for(var t of xg(e))KP.call(e,t)&&Dg(r,t,e[t]);return r};class GP extends Mx{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Ui.EventEmitter,this.name=LD,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=be.toMiliseconds(be.THIRTY_SECONDS+be.ONE_SECOND),this.request=async t=>{var i,s;this.logger.debug("Publishing Request Payload");const a=t.id||ea().toString();await this.toEstablishConnection();try{const c=this.provider.request(t);this.requestsInFlight.set(a,{promise:c,request:t}),this.logger.trace({id:a,method:t.method,topic:(i=t.params)==null?void 0:i.topic},"relayer.request - attempt to publish...");const u=await new Promise(async(l,h)=>{const g=()=>{h(new Error(`relayer.request - publish interrupted, id: ${a}`))};this.provider.on(Ci.disconnect,g);const w=await c;this.provider.off(Ci.disconnect,g),l(w)});return this.logger.trace({id:a,method:t.method,topic:(s=t.params)==null?void 0:s.topic},"relayer.request - published"),u}catch(c){throw this.logger.debug(`Failed to Publish Request: ${a}`),c}finally{this.requestsInFlight.delete(a)}},this.resetPingTimeout=()=>{if(Ku())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var t,i,s;(s=(i=(t=this.provider)==null?void 0:t.connection)==null?void 0:i.socket)==null||s.terminate()},this.heartBeatTimeout)}catch(t){this.logger.warn(t)}},this.onPayloadHandler=t=>{this.onProviderPayload(t),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.trace("relayer connected"),this.startPingTimeout(),this.events.emit(jr.connect)},this.onDisconnectHandler=()=>{this.logger.trace("relayer disconnected"),this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(jr.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Ci.payload,this.onPayloadHandler),this.provider.on(Ci.connect,this.onConnectHandler),this.provider.on(Ci.disconnect,this.onDisconnectHandler),this.provider.on(Ci.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?kr(e.logger,this.name):hc(Ef({level:e.logger||qD})),this.messages=new TP(this.logger,e.core),this.subscriber=new zP(this,this.logger),this.publisher=new FP(this,this.logger),this.relayUrl=e?.relayUrl||n2,this.projectId=e.projectId,this.bundleId=a9(),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.cached.length>0)try{await this.transportOpen()}catch(e){this.logger.warn(e)}}get context(){return ni(this.logger)}get connected(){var e,t,i;return((i=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:i.readyState)===1}get connecting(){var e,t,i;return((i=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:i.readyState)===0}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:$t.relay})}async subscribe(e,t){var i;this.isInitialized(),t?.transportType==="relay"&&await this.toEstablishConnection();let s=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",a;const c=u=>{u.topic===e&&(this.subscriber.off(_n.created,c),a())};return await Promise.all([new Promise(u=>{a=u,this.subscriber.on(_n.created,c)}),new Promise(async u=>{s=await this.subscriber.subscribe(e,t)||s,u()})]),s}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map(e=>e.promise))}catch(e){this.logger.warn(e)}this.hasExperiencedNetworkDisruption||this.connected?await Ua(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),await this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise(async(t,i)=>{const s=()=>{this.provider.off(Ci.disconnect,s),i(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(Ci.disconnect,s),await Ua(this.provider.connect(),be.toMiliseconds(be.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch(a=>{i(a)}).finally(()=>{clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),this.subscriber.start().catch(a=>{this.logger.error(a),this.onDisconnectHandler()}),this.hasExperiencedNetworkDisruption=!1,t()})}catch(t){this.logger.error(t);const i=t;if(this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(i.message))throw t}finally{this.connectionAttemptInProgress=!1}}async restartTransport(e){this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Z1())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const t=e.sort((i,s)=>i.publishedAt-s.publishedAt);this.logger.trace(`Batch of ${t.length} message events sorted`);for(const i of t)try{await this.onMessageEvent(i)}catch(s){this.logger.warn(s)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:i}=e;if(!t.sessionExists){const s=lr(be.FIVE_MINUTES),a={topic:i,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(i,a)}this.events.emit(jr.message,e),await this.recordMessageEvent(e)}startPingTimeout(){var e,t,i,s,a;if(Ku())try{(t=(e=this.provider)==null?void 0:e.connection)!=null&&t.socket&&((a=(s=(i=this.provider)==null?void 0:i.connection)==null?void 0:s.socket)==null||a.once("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(c){this.logger.warn(c)}}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new sn(new SD(f9({sdkVersion:Gl,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){const{topic:t,message:i}=e;if(!i||i.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const s=this.messages.has(t,i);return s&&this.logger.debug(`Ignoring duplicate message: ${i}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),xd(e)){if(!e.method.endsWith(UD))return;const t=e.params,{topic:i,message:s,publishedAt:a,attestation:c}=t.data,u={topic:i,message:s,publishedAt:a,transportType:$t.relay,attestation:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(VP({type:"event",event:t.id},u)),this.events.emit(t.id,u),await this.acknowledgePayload(e),await this.onMessageEvent(u)}else If(e)&&this.events.emit(jr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(jr.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=Af(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(Ci.payload,this.onPayloadHandler),this.provider.off(Ci.connect,this.onConnectHandler),this.provider.off(Ci.disconnect,this.onDisconnectHandler),this.provider.off(Ci.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Z1();gI(async t=>{e!==t&&(e=t,t?await this.restartTransport().catch(i=>this.logger.error(i)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(jr.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e))},be.toMiliseconds(jD))))}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)}),await this.transportOpen())}}var WP=Object.defineProperty,Mg=Object.getOwnPropertySymbols,JP=Object.prototype.hasOwnProperty,YP=Object.prototype.propertyIsEnumerable,Pg=(r,e,t)=>e in r?WP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Og=(r,e)=>{for(var t in e||(e={}))JP.call(e,t)&&Pg(r,t,e[t]);if(Mg)for(var t of Mg(e))YP.call(e,t)&&Pg(r,t,e[t]);return r};class fa extends Px{constructor(e,t,i,s=On,a=void 0){super(e,t,i,s),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version=$D,this.cached=[],this.initialized=!1,this.storagePrefix=On,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{this.getKey&&c!==null&&!Zr(c)?this.map.set(this.getKey(c),c):VS(c)?this.map.set(c.id,c):GS(c)&&this.map.set(c.topic,c)}),this.cached=[],this.initialized=!0)},this.set=async(c,u)=>{this.isInitialized(),this.map.has(c)?await this.update(c,u):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:u}),this.map.set(c,u),await this.persist())},this.get=c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c)),this.getAll=c=>(this.isInitialized(),c?this.values.filter(u=>Object.keys(c).every(l=>xD(u[l],c[l]))):this.values),this.update=async(c,u)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:u});const l=Og(Og({},this.getData(c)),u);this.map.set(c,l),await this.persist()},this.delete=async(c,u)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:u}),this.map.delete(c),this.addToRecentlyDeleted(c),await this.persist())},this.logger=kr(t,this.name),this.storagePrefix=s,this.getKey=a}get context(){return ni(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:s}=ge("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:i}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}class QP{constructor(e,t){this.core=e,this.logger=t,this.name=VD,this.version=GD,this.events=new rd,this.initialized=!1,this.storagePrefix=On,this.ignoredPayloadTypes=[Zn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async i=>{this.isInitialized();const s=jl(),a=await this.core.crypto.setSymKey(s),c=lr(be.FIVE_MINUTES),u={protocol:i2},l={topic:a,expiry:c,relay:u,active:!1,methods:i?.methods},h=G1({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:s,relay:u,expiryTimestamp:c,methods:i?.methods});return this.events.emit(Xs.create,l),this.core.expirer.set(a,c),await this.pairings.set(a,l),await this.core.relayer.subscribe(a,{transportType:i?.transportType}),{topic:a,uri:h}},this.pair=async i=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:i?.uri,trace:[vn.pairing_started]}});this.isValidPair(i,s);const{topic:a,symKey:c,relay:u,expiryTimestamp:l,methods:h}=V1(i.uri);s.props.properties.topic=a,s.addTrace(vn.pairing_uri_validation_success),s.addTrace(vn.pairing_uri_not_expired);let g;if(this.pairings.keys.includes(a)){if(g=this.pairings.get(a),s.addTrace(vn.existing_pairing),g.active)throw s.setError(Gn.active_pairing_already_exists),new Error(`Pairing already exists: ${a}. Please try again with a new connection URI.`);s.addTrace(vn.pairing_not_expired)}const w=l||lr(be.FIVE_MINUTES),S={topic:a,relay:u,expiry:w,active:!1,methods:h};this.core.expirer.set(a,w),await this.pairings.set(a,S),s.addTrace(vn.store_new_pairing),i.activatePairing&&await this.activate({topic:a}),this.events.emit(Xs.create,S),s.addTrace(vn.emit_inactive_pairing),this.core.crypto.keychain.has(a)||await this.core.crypto.setSymKey(c,a),s.addTrace(vn.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Gn.no_internet_connection)}try{await this.core.relayer.subscribe(a,{relay:u})}catch(E){throw s.setError(Gn.subscribe_pairing_topic_failure),E}return s.addTrace(vn.subscribe_pairing_topic_success),S},this.activate=async({topic:i})=>{this.isInitialized();const s=lr(be.THIRTY_DAYS);this.core.expirer.set(i,s),await this.pairings.update(i,{active:!0,expiry:s})},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:s}=i;if(this.pairings.keys.includes(s)){const a=await this.sendRequest(s,"wc_pairingPing",{}),{done:c,resolve:u,reject:l}=Ys();this.events.once(pt("pairing_ping",a),({error:h})=>{h?l(h):u()}),await c()}},this.updateExpiry=async({topic:i,expiry:s})=>{this.isInitialized(),await this.pairings.update(i,{expiry:s})},this.updateMetadata=async({topic:i,metadata:s})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:s})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:s}=i;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Tt("USER_DISCONNECTED")),await this.deletePairing(s))},this.formatUriFromPairing=i=>{this.isInitialized();const{topic:s,relay:a,expiry:c,methods:u}=i,l=this.core.crypto.keychain.get(s);return G1({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:l,relay:a,expiryTimestamp:c,methods:u})},this.sendRequest=async(i,s,a)=>{const c=_s(s,a),u=await this.core.crypto.encode(i,c),l=Co[s].req;return this.core.history.set(i,c),this.core.relayer.publish(i,u,l),c.id},this.sendResult=async(i,s,a)=>{const c=Af(i,a),u=await this.core.crypto.encode(s,c),l=await this.core.history.get(s,i),h=Co[l.request.method].res;await this.core.relayer.publish(s,u,h),await this.core.history.resolve(c)},this.sendError=async(i,s,a)=>{const c=Sf(i,a),u=await this.core.crypto.encode(s,c),l=await this.core.history.get(s,i),h=Co[l.request.method]?Co[l.request.method].res:Co.unregistered_method.res;await this.core.relayer.publish(s,u,h),await this.core.history.resolve(c)},this.deletePairing=async(i,s)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,Tt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),s?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(s=>gs(s.expiry));await Promise.all(i.map(s=>this.deletePairing(s.topic)))},this.onRelayEventRequest=i=>{const{topic:s,payload:a}=i;switch(a.method){case"wc_pairingPing":return this.onPairingPingRequest(s,a);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,a);default:return this.onUnknownRpcMethodRequest(s,a)}},this.onRelayEventResponse=async i=>{const{topic:s,payload:a}=i,c=(await this.core.history.get(s,a.id)).request.method;switch(c){case"wc_pairingPing":return this.onPairingPingResponse(s,a);default:return this.onUnknownRpcMethodResponse(c)}},this.onPairingPingRequest=async(i,s)=>{const{id:a}=s;try{this.isValidPing({topic:i}),await this.sendResult(a,i,!0),this.events.emit(Xs.ping,{id:a,topic:i})}catch(c){await this.sendError(a,i,c),this.logger.error(c)}},this.onPairingPingResponse=(i,s)=>{const{id:a}=s;setTimeout(()=>{wn(s)?this.events.emit(pt("pairing_ping",a),{}):Ti(s)&&this.events.emit(pt("pairing_ping",a),{error:s.error})},500)},this.onPairingDeleteRequest=async(i,s)=>{const{id:a}=s;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(Xs.delete,{id:a,topic:i})}catch(c){await this.sendError(a,i,c),this.logger.error(c)}},this.onUnknownRpcMethodRequest=async(i,s)=>{const{id:a,method:c}=s;try{if(this.registeredMethods.includes(c))return;const u=Tt("WC_METHOD_UNSUPPORTED",c);await this.sendError(a,i,u),this.logger.error(u)}catch(u){await this.sendError(a,i,u),this.logger.error(u)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(Tt("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=(i,s)=>{var a;if(!Qr(i)){const{message:u}=ge("MISSING_OR_INVALID",`pair() params: ${i}`);throw s.setError(Gn.malformed_pairing_uri),new Error(u)}if(!KS(i.uri)){const{message:u}=ge("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw s.setError(Gn.malformed_pairing_uri),new Error(u)}const c=V1(i?.uri);if(!((a=c?.relay)!=null&&a.protocol)){const{message:u}=ge("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Gn.malformed_pairing_uri),new Error(u)}if(!(c!=null&&c.symKey)){const{message:u}=ge("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Gn.malformed_pairing_uri),new Error(u)}if(c!=null&&c.expiryTimestamp&&be.toMiliseconds(c?.expiryTimestamp)<Date.now()){s.setError(Gn.pairing_expired);const{message:u}=ge("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(u)}},this.isValidPing=async i=>{if(!Qr(i)){const{message:a}=ge("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(a)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidDisconnect=async i=>{if(!Qr(i)){const{message:a}=ge("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(a)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidPairingTopic=async i=>{if(!ar(i,!1)){const{message:s}=ge("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(s)}if(!this.pairings.keys.includes(i)){const{message:s}=ge("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(s)}if(gs(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:s}=ge("EXPIRED",`pairing topic: ${i}`);throw new Error(s)}},this.core=e,this.logger=kr(t,this.name),this.pairings=new fa(this.core,this.logger,this.name,this.storagePrefix)}get context(){return ni(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(jr.message,async e=>{const{topic:t,message:i,transportType:s}=e;if(!this.pairings.keys.includes(t)||s===$t.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const a=await this.core.crypto.decode(t,i);try{xd(a)?(this.core.history.set(t,a),this.onRelayEventRequest({topic:t,payload:a})):If(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:t,payload:a}),this.core.history.delete(t,a.id))}catch(c){this.logger.error(c)}})}registerExpirerEvents(){this.core.expirer.on(Ni.expired,async e=>{const{topic:t}=Yb(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(Xs.expire,{topic:t}))})}}class XP extends Ix{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new Ui.EventEmitter,this.name=WD,this.version=JD,this.cached=[],this.initialized=!1,this.storagePrefix=On,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,s,a)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:s,chainId:a}),this.records.has(s.id))return;const c={id:s.id,topic:i,request:{method:s.method,params:s.params||null},chainId:a,expiry:lr(be.THIRTY_DAYS)};this.records.set(c.id,c),this.persist(),this.events.emit(Ji.created,c)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const s=await this.getRecord(i.id);typeof s.response>"u"&&(s.response=Ti(i)?{error:i.error}:{result:i.result},this.records.set(s.id,s),this.persist(),this.events.emit(Ji.updated,s))},this.get=async(i,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:s}),await this.getRecord(s)),this.delete=(i,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(a=>{if(a.topic===i){if(typeof s<"u"&&a.id!==s)return;this.records.delete(a.id),this.events.emit(Ji.deleted,a)}}),this.persist()},this.exists=async(i,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===i:!1),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=kr(t,this.name)}get context(){return ni(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const i={topic:t.topic,request:_s(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:i}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Ji.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Ji.created,e=>{const t=Ji.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Ji.updated,e=>{const t=Ji.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(Ji.deleted,e=>{const t=Ji.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(ro.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{be.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(Ji.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}class ZP extends Cx{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new Ui.EventEmitter,this.name=YD,this.version=QD,this.cached=[],this.initialized=!1,this.storagePrefix=On,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const s=this.formatTarget(i);return typeof this.getExpiration(s)<"u"}catch{return!1}},this.set=(i,s)=>{this.isInitialized();const a=this.formatTarget(i),c={target:a,expiry:s};this.expirations.set(a,c),this.checkExpiry(a,c),this.events.emit(Ni.created,{target:a,expiration:c})},this.get=i=>{this.isInitialized();const s=this.formatTarget(i);return this.getExpiration(s)},this.del=i=>{if(this.isInitialized(),this.has(i)){const s=this.formatTarget(i),a=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Ni.deleted,{target:s,expiration:a})}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=kr(t,this.name)}get context(){return ni(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return h9(e);if(typeof e=="number")return l9(e);const{message:t}=ge("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ni.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:i}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(i),new Error(i)}return t}checkExpiry(e,t){const{expiry:i}=t;be.toMiliseconds(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Ni.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(ro.pulse,()=>this.checkExpirations()),this.events.on(Ni.created,e=>{const t=Ni.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Ni.expired,e=>{const t=Ni.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Ni.deleted,e=>{const t=Ni.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.getLocalStorage=Gt.getLocalStorageOrThrow=Gt.getCrypto=Gt.getCryptoOrThrow=Gt.getLocation=Gt.getLocationOrThrow=Gt.getNavigator=Gt.getNavigatorOrThrow=b2=Gt.getDocument=Gt.getDocumentOrThrow=Gt.getFromWindowOrThrow=Gt.getFromWindow=void 0;function ha(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}Gt.getFromWindow=ha;function io(r){const e=ha(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}Gt.getFromWindowOrThrow=io;function eO(){return io("document")}Gt.getDocumentOrThrow=eO;function tO(){return ha("document")}var b2=Gt.getDocument=tO;function rO(){return io("navigator")}Gt.getNavigatorOrThrow=rO;function iO(){return ha("navigator")}Gt.getNavigator=iO;function nO(){return io("location")}Gt.getLocationOrThrow=nO;function sO(){return ha("location")}Gt.getLocation=sO;function aO(){return io("crypto")}Gt.getCryptoOrThrow=aO;function oO(){return ha("crypto")}Gt.getCrypto=oO;function cO(){return io("localStorage")}Gt.getLocalStorageOrThrow=cO;function uO(){return ha("localStorage")}Gt.getLocalStorage=uO;class fO extends Nx{constructor(e,t,i){super(e,t,i),this.core=e,this.logger=t,this.store=i,this.name=XD,this.verifyUrlV3=eM,this.storagePrefix=On,this.version=r2,this.init=async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&be.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))},this.register=async s=>{if(!sc()||this.isDevEnv)return;const a=window.location.origin,{id:c,decryptedId:u}=s,l=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${a}&id=${c}&decryptedId=${u}`;try{const h=b2(),g=this.startAbortTimer(be.ONE_SECOND*5),w=await new Promise((S,E)=>{const I=()=>{window.removeEventListener("message",K),h.body.removeChild(z),E("attestation aborted")};this.abortController.signal.addEventListener("abort",I);const z=h.createElement("iframe");z.src=l,z.style.display="none",z.addEventListener("error",I,{signal:this.abortController.signal});const K=J=>{if(J.data&&typeof J.data=="string")try{const j=JSON.parse(J.data);if(j.type==="verify_attestation"){if(Rl(j.attestation).payload.id!==c)return;clearInterval(g),h.body.removeChild(z),this.abortController.signal.removeEventListener("abort",I),window.removeEventListener("message",K),S(j.attestation===null?"":j.attestation)}}catch(j){this.logger.warn(j)}};h.body.appendChild(z),window.addEventListener("message",K,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",w),w}catch(h){this.logger.warn(h)}return""},this.resolve=async s=>{if(this.isDevEnv)return"";const{attestationId:a,hash:c,encryptedId:u}=s;if(a===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(a){if(Rl(a).payload.id!==u)return;const h=await this.isValidJwtAttestation(a);if(h){if(!h.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return h}}if(!c)return;const l=this.getVerifyUrl(s?.verifyUrl);return this.fetchAttestation(c,l)},this.fetchAttestation=async(s,a)=>{this.logger.debug(`resolving attestation: ${s} from url: ${a}`);const c=this.startAbortTimer(be.ONE_SECOND*5),u=await fetch(`${a}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(c),u.status===200?await u.json():void 0},this.getVerifyUrl=s=>{let a=s||Ho;return tM.includes(a)||(this.logger.info(`verify url: ${a}, not included in trusted list, assigning default: ${Ho}`),a=Ho),a},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(be.FIVE_SECONDS),a=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await a.json()}catch(s){this.logger.warn(s)}},this.persistPublicKey=async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async s=>{const a=await this.getPublicKey();try{if(a)return this.validateAttestation(s,a)}catch(u){this.logger.error(u),this.logger.warn("error validating attestation")}const c=await this.fetchAndPersistPublicKey();try{if(c)return this.validateAttestation(s,c)}catch(u){this.logger.error(u),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async a=>{const c=await this.fetchPublicKey();c&&(await this.persistPublicKey(c),a(c))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s},this.validateAttestation=(s,a)=>{const c=xS(s,a.publicKey),u={hasExpired:be.toMiliseconds(c.exp)<Date.now(),payload:c};if(u.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:u.payload.origin,isScam:u.payload.isScam,isVerified:u.payload.isVerified}},this.logger=kr(t,this.name),this.abortController=new AbortController,this.isDevEnv=pd(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return ni(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),be.toMiliseconds(e))}}class hO extends Rx{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context=rM,this.registerDeviceToken=async i=>{const{clientId:s,token:a,notificationType:c,enableEncrypted:u=!1}=i,l=`${iM}/${this.projectId}/clients`;await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:c,token:a,always_raw:u})})},this.logger=kr(t,this.context)}}var lO=Object.defineProperty,Cg=Object.getOwnPropertySymbols,dO=Object.prototype.hasOwnProperty,pO=Object.prototype.propertyIsEnumerable,Ng=(r,e,t)=>e in r?lO(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,To=(r,e)=>{for(var t in e||(e={}))dO.call(e,t)&&Ng(r,t,e[t]);if(Cg)for(var t of Cg(e))pO.call(e,t)&&Ng(r,t,e[t]);return r};class gO extends Tx{constructor(e,t,i=!0){super(e,t,i),this.core=e,this.logger=t,this.context=sM,this.storagePrefix=On,this.storageVersion=nM,this.events=new Map,this.shouldPersist=!1,this.init=async()=>{if(!pd())try{const s={eventId:h1(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:Vb(this.core.relayer.protocol,this.core.relayer.version,Gl)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}},this.createEvent=s=>{const{event:a="ERROR",type:c="",properties:{topic:u,trace:l}}=s,h=h1(),g=this.core.projectId||"",w=Date.now(),S=To({eventId:h,timestamp:w,props:{event:a,type:c,properties:{topic:u,trace:l}},bundleId:g,domain:this.getAppDomain()},this.setMethods(h));return this.telemetryEnabled&&(this.events.set(h,S),this.shouldPersist=!0),S},this.getEvent=s=>{const{eventId:a,topic:c}=s;if(a)return this.events.get(a);const u=Array.from(this.events.values()).find(l=>l.props.properties.topic===c);if(u)return To(To({},u),this.setMethods(u.eventId))},this.deleteEvent=s=>{const{eventId:a}=s;this.events.delete(a),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(ro.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{be.fromMiliseconds(Date.now())-be.fromMiliseconds(s.timestamp)>aM&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})},this.setMethods=s=>({addTrace:a=>this.addTrace(s,a),setError:a=>this.setError(s,a)}),this.addTrace=(s,a)=>{const c=this.events.get(s);c&&(c.props.properties.trace.push(a),this.events.set(s,c),this.shouldPersist=!0)},this.setError=(s,a)=>{const c=this.events.get(s);c&&(c.props.type=a,c.timestamp=Date.now(),this.events.set(s,c),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(a=>{this.events.set(a.eventId,To(To({},a),this.setMethods(a.eventId)))})}catch(s){this.logger.warn(s)}},this.submit=async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[a,c]of this.events)c.props.type&&s.push(c);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const a of s)this.events.delete(a.eventId),this.shouldPersist=!0}catch(a){this.logger.warn(a)}},this.sendEvent=async s=>{const a=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${oM}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Gl}${a}`,{method:"POST",body:JSON.stringify(s)})},this.getAppDomain=()=>Kb().url,this.logger=kr(t,this.context),this.telemetryEnabled=i,i?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var bO=Object.defineProperty,Rg=Object.getOwnPropertySymbols,vO=Object.prototype.hasOwnProperty,mO=Object.prototype.propertyIsEnumerable,Tg=(r,e,t)=>e in r?bO(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Fg=(r,e)=>{for(var t in e||(e={}))vO.call(e,t)&&Tg(r,t,e[t]);if(Rg)for(var t of Rg(e))mO.call(e,t)&&Tg(r,t,e[t]);return r};class Md extends Sx{constructor(e){var t;super(e),this.protocol=t2,this.version=r2,this.name=Dd,this.events=new Ui.EventEmitter,this.initialized=!1,this.on=(c,u)=>this.events.on(c,u),this.once=(c,u)=>this.events.once(c,u),this.off=(c,u)=>this.events.off(c,u),this.removeListener=(c,u)=>this.events.removeListener(c,u),this.dispatchEnvelope=({topic:c,message:u,sessionExists:l})=>{if(!c||!u)return;const h={topic:c,message:u,publishedAt:Date.now(),transportType:$t.link_mode};this.relayer.onLinkMessageEvent(h,{sessionExists:l})},this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||n2,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=Ef({level:typeof e?.logger=="string"&&e.logger?e.logger:DD.logger}),{logger:s,chunkLoggerController:a}=Ax({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=a,(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var c,u;(c=this.logChunkController)!=null&&c.downloadLogsBlobInBrowser&&((u=this.logChunkController)==null||u.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=kr(s,this.name),this.heartbeat=new yI,this.crypto=new RP(this,this.logger,e?.keychain),this.history=new XP(this,this.logger),this.expirer=new ZP(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new JI(Fg(Fg({},MD),e?.storageOptions)),this.relayer=new GP({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new QP(this,this.logger),this.verify=new fO(this,this.logger,this.storage),this.echoClient=new hO(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new gO(this,this.logger,e?.telemetryEnabled)}static async init(e){const t=new Md(e);await t.initialize();const i=await t.crypto.getClientId();return await t.storage.setItem(zD,i),t}get context(){return ni(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(vg,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.eventClient.init(),this.linkModeSupportedApps=await this.storage.getItem(vg)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const yO=Md,v2="wc",m2=2,y2="client",Pd=`${v2}@${m2}:${y2}:`,bl={name:y2,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"},Bg="WALLETCONNECT_DEEPLINK_CHOICE",wO="proposal",w2="Proposal expired",_O="session",Ra=be.SEVEN_DAYS,EO="engine",vr={wc_sessionPropose:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1104},res:{ttl:be.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1106},res:{ttl:be.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1112},res:{ttl:be.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1114},res:{ttl:be.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:be.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:be.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1119}}},vl={min:be.FIVE_MINUTES,max:be.SEVEN_DAYS},bn={idle:"IDLE",active:"ACTIVE"},AO="request",SO=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],IO="wc",xO="auth",DO="authKeys",MO="pairingTopics",PO="requests",Df=`${IO}@${1.5}:${xO}:`,Bu=`${Df}:PUB_KEY`;var OO=Object.defineProperty,CO=Object.defineProperties,NO=Object.getOwnPropertyDescriptors,qg=Object.getOwnPropertySymbols,RO=Object.prototype.hasOwnProperty,TO=Object.prototype.propertyIsEnumerable,Lg=(r,e,t)=>e in r?OO(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Zt=(r,e)=>{for(var t in e||(e={}))RO.call(e,t)&&Lg(r,t,e[t]);if(qg)for(var t of qg(e))TO.call(e,t)&&Lg(r,t,e[t]);return r},Qi=(r,e)=>CO(r,NO(e));class FO extends Bx{constructor(e){super(e),this.name=EO,this.events=new rd,this.initialized=!1,this.requestQueue={state:bn.idle,queue:[]},this.sessionRequestQueue={state:bn.idle,queue:[]},this.requestQueueDelay=be.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(vr)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},be.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const i=Qi(Zt({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:s,requiredNamespaces:a,optionalNamespaces:c,sessionProperties:u,relays:l}=i;let h=s,g,w=!1;try{h&&(w=this.client.core.pairing.pairings.get(h).active)}catch(B){throw this.client.logger.error(`connect() -> pairing.get(${h}) failed`),B}if(!h||!w){const{topic:B,uri:U}=await this.client.core.pairing.create();h=B,g=U}if(!h){const{message:B}=ge("NO_MATCHING_KEY",`connect() pairing topic: ${h}`);throw new Error(B)}const S=await this.client.core.crypto.generateKeyPair(),E=vr.wc_sessionPropose.req.ttl||be.FIVE_MINUTES,I=lr(E),z=Zt({requiredNamespaces:a,optionalNamespaces:c,relays:l??[{protocol:i2}],proposer:{publicKey:S,metadata:this.client.metadata},expiryTimestamp:I,pairingTopic:h},u&&{sessionProperties:u}),{reject:K,resolve:J,done:j}=Ys(E,w2);this.events.once(pt("session_connect"),async({error:B,session:U})=>{if(B)K(B);else if(U){U.self.publicKey=S;const H=Qi(Zt({},U),{pairingTopic:z.pairingTopic,requiredNamespaces:z.requiredNamespaces,optionalNamespaces:z.optionalNamespaces,transportType:$t.relay});await this.client.session.set(U.topic,H),await this.setExpiry(U.topic,U.expiry),h&&await this.client.core.pairing.updateMetadata({topic:h,metadata:U.peer.metadata}),this.cleanupDuplicatePairings(H),J(H)}});const W=await this.sendRequest({topic:h,method:"wc_sessionPropose",params:z,throwOnFailedPublish:!0});return await this.setProposal(W,Zt({id:W},z)),{uri:g,approval:j}},this.pair=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(t)}catch(i){throw this.client.logger.error("pair() failed"),i}},this.approve=async t=>{var i,s,a;const c=this.client.core.eventClient.createEvent({properties:{topic:(i=t?.id)==null?void 0:i.toString(),trace:[Yi.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(N){throw c.setError(Ws.no_internet_connection),N}try{await this.isValidProposalId(t?.id)}catch(N){throw this.client.logger.error(`approve() -> proposal.get(${t?.id}) failed`),c.setError(Ws.proposal_not_found),N}try{await this.isValidApprove(t)}catch(N){throw this.client.logger.error("approve() -> isValidApprove() failed"),c.setError(Ws.session_approve_namespace_validation_failure),N}const{id:u,relayProtocol:l,namespaces:h,sessionProperties:g,sessionConfig:w}=t,S=this.client.proposal.get(u);this.client.core.eventClient.deleteEvent({eventId:c.eventId});const{pairingTopic:E,proposer:I,requiredNamespaces:z,optionalNamespaces:K}=S;let J=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:E});J||(J=(a=this.client.core.eventClient)==null?void 0:a.createEvent({type:Yi.session_approve_started,properties:{topic:E,trace:[Yi.session_approve_started,Yi.session_namespaces_validation_success]}}));const j=await this.client.core.crypto.generateKeyPair(),W=I.publicKey,B=await this.client.core.crypto.generateSharedKey(j,W),U=Zt(Zt({relay:{protocol:l??"irn"},namespaces:h,controller:{publicKey:j,metadata:this.client.metadata},expiry:lr(Ra)},g&&{sessionProperties:g}),w&&{sessionConfig:w}),H=$t.relay;J.addTrace(Yi.subscribing_session_topic);try{await this.client.core.relayer.subscribe(B,{transportType:H})}catch(N){throw J.setError(Ws.subscribe_session_topic_failure),N}J.addTrace(Yi.subscribe_session_topic_success);const m=Qi(Zt({},U),{topic:B,requiredNamespaces:z,optionalNamespaces:K,pairingTopic:E,acknowledged:!1,self:U.controller,peer:{publicKey:I.publicKey,metadata:I.metadata},controller:j,transportType:$t.relay});await this.client.session.set(B,m),J.addTrace(Yi.store_session);try{J.addTrace(Yi.publishing_session_settle),await this.sendRequest({topic:B,method:"wc_sessionSettle",params:U,throwOnFailedPublish:!0}).catch(N=>{throw J?.setError(Ws.session_settle_publish_failure),N}),J.addTrace(Yi.session_settle_publish_success),J.addTrace(Yi.publishing_session_approve),await this.sendResult({id:u,topic:E,result:{relay:{protocol:l??"irn"},responderPublicKey:j},throwOnFailedPublish:!0}).catch(N=>{throw J?.setError(Ws.session_approve_publish_failure),N}),J.addTrace(Yi.session_approve_publish_success)}catch(N){throw this.client.logger.error(N),this.client.session.delete(B,Tt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(B),N}return this.client.core.eventClient.deleteEvent({eventId:J.eventId}),await this.client.core.pairing.updateMetadata({topic:E,metadata:I.metadata}),await this.client.proposal.delete(u,Tt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:E}),await this.setExpiry(B,lr(Ra)),{topic:B,acknowledged:()=>Promise.resolve(this.client.session.get(B))}},this.reject=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(t)}catch(c){throw this.client.logger.error("reject() -> isValidReject() failed"),c}const{id:i,reason:s}=t;let a;try{a=this.client.proposal.get(i).pairingTopic}catch(c){throw this.client.logger.error(`reject() -> proposal.get(${i}) failed`),c}a&&(await this.sendError({id:i,topic:a,error:s,rpcOpts:vr.wc_sessionPropose.reject}),await this.client.proposal.delete(i,Tt("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(t)}catch(w){throw this.client.logger.error("update() -> isValidUpdate() failed"),w}const{topic:i,namespaces:s}=t,{done:a,resolve:c,reject:u}=Ys(),l=vs(),h=ea().toString(),g=this.client.session.get(i).namespaces;return this.events.once(pt("session_update",l),({error:w})=>{w?u(w):c()}),await this.client.session.update(i,{namespaces:s}),await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:l,relayRpcId:h}).catch(w=>{this.client.logger.error(w),this.client.session.update(i,{namespaces:g}),u(w)}),{acknowledged:a}},this.extend=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(t)}catch(l){throw this.client.logger.error("extend() -> isValidExtend() failed"),l}const{topic:i}=t,s=vs(),{done:a,resolve:c,reject:u}=Ys();return this.events.once(pt("session_extend",s),({error:l})=>{l?u(l):c()}),await this.setExpiry(i,lr(Ra)),this.sendRequest({topic:i,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(l=>{u(l)}),{acknowledged:a}},this.request=async t=>{this.isInitialized();try{await this.isValidRequest(t)}catch(I){throw this.client.logger.error("request() -> isValidRequest() failed"),I}const{chainId:i,request:s,topic:a,expiry:c=vr.wc_sessionRequest.req.ttl}=t,u=this.client.session.get(a);u?.transportType===$t.relay&&await this.confirmOnlineStateOrThrow();const l=vs(),h=ea().toString(),{done:g,resolve:w,reject:S}=Ys(c,"Request expired. Please try again.");this.events.once(pt("session_request",l),({error:I,result:z})=>{I?S(I):w(z)});const E=this.getAppLinkIfEnabled(u.peer.metadata,u.transportType);return E?(await this.sendRequest({clientRpcId:l,relayRpcId:h,topic:a,method:"wc_sessionRequest",params:{request:Qi(Zt({},s),{expiryTimestamp:lr(c)}),chainId:i},expiry:c,throwOnFailedPublish:!0,appLink:E}).catch(I=>S(I)),this.client.events.emit("session_request_sent",{topic:a,request:s,chainId:i,id:l}),await g()):await Promise.all([new Promise(async I=>{await this.sendRequest({clientRpcId:l,relayRpcId:h,topic:a,method:"wc_sessionRequest",params:{request:Qi(Zt({},s),{expiryTimestamp:lr(c)}),chainId:i},expiry:c,throwOnFailedPublish:!0}).catch(z=>S(z)),this.client.events.emit("session_request_sent",{topic:a,request:s,chainId:i,id:l}),I()}),new Promise(async I=>{var z;if(!((z=u.sessionConfig)!=null&&z.disableDeepLink)){const K=await g9(this.client.core.storage,Bg);await d9({id:l,topic:a,wcDeepLink:K})}I()}),g()]).then(I=>I[2])},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:i,response:s}=t,{id:a}=s,c=this.client.session.get(i);c.transportType===$t.relay&&await this.confirmOnlineStateOrThrow();const u=this.getAppLinkIfEnabled(c.peer.metadata,c.transportType);wn(s)?await this.sendResult({id:a,topic:i,result:s.result,throwOnFailedPublish:!0,appLink:u}):Ti(s)&&await this.sendError({id:a,topic:i,error:s.error,appLink:u}),this.cleanupAfterResponse(t)},this.ping=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(t)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:i}=t;if(this.client.session.keys.includes(i)){const s=vs(),a=ea().toString(),{done:c,resolve:u,reject:l}=Ys();this.events.once(pt("session_ping",s),({error:h})=>{h?l(h):u()}),await Promise.all([this.sendRequest({topic:i,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:a}),c()])}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(t);const{topic:i,event:s,chainId:a}=t,c=ea().toString();await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:s,chainId:a},throwOnFailedPublish:!0,relayRpcId:c})},this.disconnect=async t=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(t);const{topic:i}=t;if(this.client.session.keys.includes(i))await this.sendRequest({topic:i,method:"wc_sessionDelete",params:Tt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:i,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(i))await this.client.core.pairing.disconnect({topic:i});else{const{message:s}=ge("MISMATCHED_TOPIC",`Session or pairing topic not found: ${i}`);throw new Error(s)}},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(i=>kS(i,t))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async(t,i)=>{var s;this.isInitialized(),this.isValidAuthenticate(t);const a=i&&this.client.core.linkModeSupportedApps.includes(i)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),c=a?$t.link_mode:$t.relay;c===$t.relay&&await this.confirmOnlineStateOrThrow();const{chains:u,statement:l="",uri:h,domain:g,nonce:w,type:S,exp:E,nbf:I,methods:z=[],expiry:K}=t,J=[...t.resources||[]],{topic:j,uri:W}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:c});this.client.logger.info({message:"Generated new pairing",pairing:{topic:j,uri:W}});const B=await this.client.core.crypto.generateKeyPair(),U=Ru(B);if(await Promise.all([this.client.auth.authKeys.set(Bu,{responseTopic:U,publicKey:B}),this.client.auth.pairingTopics.set(U,{topic:U,pairingTopic:j})]),await this.client.core.relayer.subscribe(U,{transportType:c}),this.client.logger.info(`sending request to new pairing topic: ${j}`),z.length>0){const{namespace:C}=Uo(u[0]);let F=fS(C,"request",z);Nu(J)&&(F=lS(F,J.pop())),J.push(F)}const H=K&&K>vr.wc_sessionAuthenticate.req.ttl?K:vr.wc_sessionAuthenticate.req.ttl,m={authPayload:{type:S??"caip122",chains:u,statement:l,aud:h,domain:g,version:"1",nonce:w,iat:new Date().toISOString(),exp:E,nbf:I,resources:J},requester:{publicKey:B,metadata:this.client.metadata},expiryTimestamp:lr(H)},N={eip155:{chains:u,methods:[...new Set(["personal_sign",...z])],events:["chainChanged","accountsChanged"]}},ne={requiredNamespaces:{},optionalNamespaces:N,relays:[{protocol:"irn"}],pairingTopic:j,proposer:{publicKey:B,metadata:this.client.metadata},expiryTimestamp:lr(vr.wc_sessionPropose.req.ttl)},{done:le,resolve:pe,reject:ve}=Ys(H,"Request expired"),d=async({error:C,session:F})=>{if(this.events.off(pt("session_request",_),p),C)ve(C);else if(F){F.self.publicKey=B,await this.client.session.set(F.topic,F),await this.setExpiry(F.topic,F.expiry),j&&await this.client.core.pairing.updateMetadata({topic:j,metadata:F.peer.metadata});const M=this.client.session.get(F.topic);await this.deleteProposal(D),pe({session:M})}},p=async C=>{var F,M,v;if(await this.deletePendingAuthRequest(_,{message:"fulfilled",code:0}),C.error){const $=Tt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return C.error.code===$.code?void 0:(this.events.off(pt("session_connect"),d),ve(C.error.message))}await this.deleteProposal(D),this.events.off(pt("session_connect"),d);const{cacaos:R,responder:re}=C.result,he=[],A=[];for(const $ of R){await q1({cacao:$,projectId:this.client.core.projectId})||(this.client.logger.error($,"Signature verification failed"),ve(Tt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:V}=$,b=Nu(V.resources),q=[B1(V.iss)],te=Yu(V.iss);if(b){const ae=L1(b),oe=U1(b);he.push(...ae),q.push(...oe)}for(const ae of q)A.push(`${ae}:${te}`)}const ee=await this.client.core.crypto.generateSharedKey(B,re.publicKey);let L;he.length>0&&(L={topic:ee,acknowledged:!0,self:{publicKey:B,metadata:this.client.metadata},peer:re,controller:re.publicKey,expiry:lr(Ra),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:j,namespaces:W1([...new Set(he)],[...new Set(A)]),transportType:c},await this.client.core.relayer.subscribe(ee,{transportType:c}),await this.client.session.set(ee,L),j&&await this.client.core.pairing.updateMetadata({topic:j,metadata:re.metadata}),L=this.client.session.get(ee)),(F=this.client.metadata.redirect)!=null&&F.linkMode&&(M=re.metadata.redirect)!=null&&M.linkMode&&(v=re.metadata.redirect)!=null&&v.universal&&i&&(this.client.core.addLinkModeSupportedApp(re.metadata.redirect.universal),this.client.session.update(ee,{transportType:$t.link_mode})),pe({auths:R,session:L})},_=vs(),D=vs();this.events.once(pt("session_connect"),d),this.events.once(pt("session_request",_),p);let P;try{if(a){const C=_s("wc_sessionAuthenticate",m,_);this.client.core.history.set(j,C);const F=await this.client.core.crypto.encode("",C,{type:uc,encoding:Po});P=_u(i,j,F)}else await Promise.all([this.sendRequest({topic:j,method:"wc_sessionAuthenticate",params:m,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:_}),this.sendRequest({topic:j,method:"wc_sessionPropose",params:ne,expiry:vr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:D})])}catch(C){throw this.events.off(pt("session_connect"),d),this.events.off(pt("session_request",_),p),C}return await this.setProposal(D,Zt({id:D},ne)),await this.setAuthRequest(_,{request:Qi(Zt({},m),{verifyContext:{}}),pairingTopic:j,transportType:c}),{uri:P??W,response:le}},this.approveSessionAuthenticate=async t=>{const{id:i,auths:s}=t,a=this.client.core.eventClient.createEvent({properties:{topic:i.toString(),trace:[Js.authenticated_session_approve_started]}});try{this.isInitialized()}catch(K){throw a.setError(No.no_internet_connection),K}const c=this.getPendingAuthRequest(i);if(!c)throw a.setError(No.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${i}`);const u=c.transportType||$t.relay;u===$t.relay&&await this.confirmOnlineStateOrThrow();const l=c.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),g=Ru(l),w={type:Zn,receiverPublicKey:l,senderPublicKey:h},S=[],E=[];for(const K of s){if(!await q1({cacao:K,projectId:this.client.core.projectId})){a.setError(No.invalid_cacao);const U=Tt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:i,topic:g,error:U,encodeOpts:w}),new Error(U.message)}a.addTrace(Js.cacaos_verified);const{p:J}=K,j=Nu(J.resources),W=[B1(J.iss)],B=Yu(J.iss);if(j){const U=L1(j),H=U1(j);S.push(...U),W.push(...H)}for(const U of W)E.push(`${U}:${B}`)}const I=await this.client.core.crypto.generateSharedKey(h,l);a.addTrace(Js.create_authenticated_session_topic);let z;if(S?.length>0){z={topic:I,acknowledged:!0,self:{publicKey:h,metadata:this.client.metadata},peer:{publicKey:l,metadata:c.requester.metadata},controller:l,expiry:lr(Ra),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:c.pairingTopic,namespaces:W1([...new Set(S)],[...new Set(E)]),transportType:u},a.addTrace(Js.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(I,{transportType:u})}catch(K){throw a.setError(No.subscribe_authenticated_session_topic_failure),K}a.addTrace(Js.subscribe_authenticated_session_topic_success),await this.client.session.set(I,z),a.addTrace(Js.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:c.pairingTopic,metadata:c.requester.metadata})}a.addTrace(Js.publishing_authenticated_session_approve);try{await this.sendResult({topic:g,id:i,result:{cacaos:s,responder:{publicKey:h,metadata:this.client.metadata}},encodeOpts:w,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(c.requester.metadata,u)})}catch(K){throw a.setError(No.authenticated_session_approve_publish_failure),K}return await this.client.auth.requests.delete(i,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:c.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:a.eventId}),{session:z}},this.rejectSessionAuthenticate=async t=>{this.isInitialized();const{id:i,reason:s}=t,a=this.getPendingAuthRequest(i);if(!a)throw new Error(`Could not find pending auth request with id ${i}`);a.transportType===$t.relay&&await this.confirmOnlineStateOrThrow();const c=a.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),l=Ru(c),h={type:Zn,receiverPublicKey:c,senderPublicKey:u};await this.sendError({id:i,topic:l,error:s,encodeOpts:h,rpcOpts:vr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(a.requester.metadata,a.transportType)}),await this.client.auth.requests.delete(i,{message:"rejected",code:0}),await this.client.proposal.delete(i,Tt("USER_DISCONNECTED"))},this.formatAuthMessage=t=>{this.isInitialized();const{request:i,iss:s}=t;return Rv(i,s)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const t=this.relayMessageCache.shift();t&&await this.onRelayMessage(t)}catch(t){this.client.logger.error(t)}},50)},this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const i=this.client.core.pairing.pairings.get(t.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(a=>{var c,u;return((c=a.peerMetadata)==null?void 0:c.url)&&((u=a.peerMetadata)==null?void 0:u.url)===t.peer.metadata.url&&a.topic&&a.topic!==i.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(a=>this.client.core.pairing.disconnect({topic:a.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async t=>{var i;const{topic:s,expirerHasDeleted:a=!1,emitEvent:c=!0,id:u=0}=t,{self:l}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Tt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(l.publicKey)&&await this.client.core.crypto.deleteKeyPair(l.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),a||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Bg).catch(h=>this.client.logger.warn(h)),this.getPendingSessionRequests().forEach(h=>{h.topic===s&&this.deletePendingSessionRequest(h.id,Tt("USER_DISCONNECTED"))}),s===((i=this.sessionRequestQueue.queue[0])==null?void 0:i.topic)&&(this.sessionRequestQueue.state=bn.idle),c&&this.client.events.emit("session_delete",{id:u,topic:s})},this.deleteProposal=async(t,i)=>{if(i)try{const s=this.client.proposal.get(t);this.client.core.eventClient.getEvent({topic:s.pairingTopic})?.setError(Ws.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(t,Tt("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")},this.deletePendingSessionRequest=async(t,i,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,i),s?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(a=>a.id!==t),s&&(this.sessionRequestQueue.state=bn.idle,this.client.events.emit("session_request_expire",{id:t}))},this.deletePendingAuthRequest=async(t,i,s=!1)=>{await Promise.all([this.client.auth.requests.delete(t,i),s?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,i)=>{this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,i),await this.client.session.update(t,{expiry:i}))},this.setProposal=async(t,i)=>{this.client.core.expirer.set(t,lr(vr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(t,i)},this.setAuthRequest=async(t,i)=>{const{request:s,pairingTopic:a,transportType:c=$t.relay}=i;this.client.core.expirer.set(t,s.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:t,pairingTopic:a,verifyContext:s.verifyContext,transportType:c})},this.setPendingSessionRequest=async t=>{const{id:i,topic:s,params:a,verifyContext:c}=t,u=a.request.expiryTimestamp||lr(vr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(i,u),await this.client.pendingRequest.set(i,{id:i,topic:s,params:a,verifyContext:c})},this.sendRequest=async t=>{const{topic:i,method:s,params:a,expiry:c,relayRpcId:u,clientRpcId:l,throwOnFailedPublish:h,appLink:g}=t,w=_s(s,a,l);let S;const E=!!g;try{const K=E?Po:ws;S=await this.client.core.crypto.encode(i,w,{encoding:K})}catch(K){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${i} failed`),K}let I;if(SO.includes(s)){const K=Jn(JSON.stringify(w)),J=Jn(S);I=await this.client.core.verify.register({id:J,decryptedId:K})}const z=vr[s].req;if(z.attestation=I,c&&(z.ttl=c),u&&(z.id=u),this.client.core.history.set(i,w),E){const K=_u(g,i,S);await at.Linking.openURL(K,this.client.name)}else{const K=vr[s].req;c&&(K.ttl=c),u&&(K.id=u),h?(K.internal=Qi(Zt({},K.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,S,K)):this.client.core.relayer.publish(i,S,K).catch(J=>this.client.logger.error(J))}return w.id},this.sendResult=async t=>{const{id:i,topic:s,result:a,throwOnFailedPublish:c,encodeOpts:u,appLink:l}=t,h=Af(i,a);let g;const w=l&&typeof(at==null?void 0:at.Linking)<"u";try{const E=w?Po:ws;g=await this.client.core.crypto.encode(s,h,Qi(Zt({},u||{}),{encoding:E}))}catch(E){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),E}let S;try{S=await this.client.core.history.get(s,i)}catch(E){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${i}) failed`),E}if(w){const E=_u(l,s,g);await at.Linking.openURL(E,this.client.name)}else{const E=vr[S.request.method].res;c?(E.internal=Qi(Zt({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,g,E)):this.client.core.relayer.publish(s,g,E).catch(I=>this.client.logger.error(I))}await this.client.core.history.resolve(h)},this.sendError=async t=>{const{id:i,topic:s,error:a,encodeOpts:c,rpcOpts:u,appLink:l}=t,h=Sf(i,a);let g;const w=l&&typeof(at==null?void 0:at.Linking)<"u";try{const E=w?Po:ws;g=await this.client.core.crypto.encode(s,h,Qi(Zt({},c||{}),{encoding:E}))}catch(E){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),E}let S;try{S=await this.client.core.history.get(s,i)}catch(E){throw this.client.logger.error(`sendError() -> history.get(${s}, ${i}) failed`),E}if(w){const E=_u(l,s,g);await at.Linking.openURL(E,this.client.name)}else{const E=u||vr[S.request.method].res;this.client.core.relayer.publish(s,g,E)}await this.client.core.history.resolve(h)},this.cleanup=async()=>{const t=[],i=[];this.client.session.getAll().forEach(s=>{let a=!1;gs(s.expiry)&&(a=!0),this.client.core.crypto.keychain.has(s.topic)||(a=!0),a&&t.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{gs(s.expiryTimestamp)&&i.push(s.id)}),await Promise.all([...t.map(s=>this.deleteSession({topic:s})),...i.map(s=>this.deleteProposal(s))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===bn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=bn.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=bn.idle},this.processRequest=async t=>{const{topic:i,payload:s,attestation:a,transportType:c,encryptedId:u}=t,l=s.method;if(!this.shouldIgnorePairingRequest({topic:i,requestMethod:l}))switch(l){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:i,payload:s,attestation:a,encryptedId:u});case"wc_sessionSettle":return await this.onSessionSettleRequest(i,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(i,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(i,s);case"wc_sessionPing":return await this.onSessionPingRequest(i,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(i,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:i,payload:s,attestation:a,encryptedId:u,transportType:c});case"wc_sessionEvent":return await this.onSessionEventRequest(i,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:i,payload:s,attestation:a,encryptedId:u,transportType:c});default:return this.client.logger.info(`Unsupported request method ${l}`)}},this.onRelayEventResponse=async t=>{const{topic:i,payload:s,transportType:a}=t,c=(await this.client.core.history.get(i,s.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(i,s,a);case"wc_sessionSettle":return this.onSessionSettleResponse(i,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,s);case"wc_sessionExtend":return this.onSessionExtendResponse(i,s);case"wc_sessionPing":return this.onSessionPingResponse(i,s);case"wc_sessionRequest":return this.onSessionRequestResponse(i,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(i,s);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:i}=t,{message:s}=ge("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)},this.shouldIgnorePairingRequest=t=>{const{topic:i,requestMethod:s}=t,a=this.expectedPairingMethodMap.get(i);return!a||a.includes(s)?!1:!!(a.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async t=>{const{topic:i,payload:s,attestation:a,encryptedId:c}=t,{params:u,id:l}=s;try{const h=this.client.core.eventClient.getEvent({topic:i});this.isValidConnect(Zt({},s.params));const g=u.expiryTimestamp||lr(vr.wc_sessionPropose.req.ttl),w=Zt({id:l,pairingTopic:i,expiryTimestamp:g},u);await this.setProposal(l,w);const S=await this.getVerifyContext({attestationId:a,hash:Jn(JSON.stringify(s)),encryptedId:c,metadata:w.proposer.metadata});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),h?.setError(Gn.proposal_listener_not_found)),h?.addTrace(vn.emit_session_proposal),this.client.events.emit("session_proposal",{id:l,params:w,verifyContext:S})}catch(h){await this.sendError({id:l,topic:i,error:h,rpcOpts:vr.wc_sessionPropose.autoReject}),this.client.logger.error(h)}},this.onSessionProposeResponse=async(t,i,s)=>{const{id:a}=i;if(wn(i)){const{result:c}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const u=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:u});const l=u.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:l});const h=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:h});const g=await this.client.core.crypto.generateSharedKey(l,h);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:g});const w=await this.client.core.relayer.subscribe(g,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:w}),await this.client.core.pairing.activate({topic:t})}else if(Ti(i)){await this.client.proposal.delete(a,Tt("USER_DISCONNECTED"));const c=pt("session_connect");if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners, 954`);this.events.emit(pt("session_connect"),{error:i.error})}},this.onSessionSettleRequest=async(t,i)=>{const{id:s,params:a}=i;try{this.isValidSessionSettleRequest(a);const{relay:c,controller:u,expiry:l,namespaces:h,sessionProperties:g,sessionConfig:w}=i.params,S=Qi(Zt(Zt({topic:t,relay:c,expiry:l,namespaces:h,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:u.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:u.publicKey,metadata:u.metadata}},g&&{sessionProperties:g}),w&&{sessionConfig:w}),{transportType:$t.relay}),E=pt("session_connect");if(this.events.listenerCount(E)===0)throw new Error(`emitting ${E} without any listeners 997`);this.events.emit(pt("session_connect"),{session:S}),await this.sendResult({id:i.id,topic:t,result:!0,throwOnFailedPublish:!0})}catch(c){await this.sendError({id:s,topic:t,error:c}),this.client.logger.error(c)}},this.onSessionSettleResponse=async(t,i)=>{const{id:s}=i;wn(i)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(pt("session_approve",s),{})):Ti(i)&&(await this.client.session.delete(t,Tt("USER_DISCONNECTED")),this.events.emit(pt("session_approve",s),{error:i.error}))},this.onSessionUpdateRequest=async(t,i)=>{const{params:s,id:a}=i;try{const c=`${t}_session_update`,u=Oo.get(c);if(u&&this.isRequestOutOfSync(u,a)){this.client.logger.info(`Discarding out of sync request - ${a}`),this.sendError({id:a,topic:t,error:Tt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Zt({topic:t},s));try{Oo.set(c,a),await this.client.session.update(t,{namespaces:s.namespaces}),await this.sendResult({id:a,topic:t,result:!0,throwOnFailedPublish:!0})}catch(l){throw Oo.delete(c),l}this.client.events.emit("session_update",{id:a,topic:t,params:s})}catch(c){await this.sendError({id:a,topic:t,error:c}),this.client.logger.error(c)}},this.isRequestOutOfSync=(t,i)=>parseInt(i.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,i)=>{const{id:s}=i,a=pt("session_update",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);wn(i)?this.events.emit(pt("session_update",s),{}):Ti(i)&&this.events.emit(pt("session_update",s),{error:i.error})},this.onSessionExtendRequest=async(t,i)=>{const{id:s}=i;try{this.isValidExtend({topic:t}),await this.setExpiry(t,lr(Ra)),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:t})}catch(a){await this.sendError({id:s,topic:t,error:a}),this.client.logger.error(a)}},this.onSessionExtendResponse=(t,i)=>{const{id:s}=i,a=pt("session_extend",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);wn(i)?this.events.emit(pt("session_extend",s),{}):Ti(i)&&this.events.emit(pt("session_extend",s),{error:i.error})},this.onSessionPingRequest=async(t,i)=>{const{id:s}=i;try{this.isValidPing({topic:t}),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:t})}catch(a){await this.sendError({id:s,topic:t,error:a}),this.client.logger.error(a)}},this.onSessionPingResponse=(t,i)=>{const{id:s}=i,a=pt("session_ping",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);setTimeout(()=>{wn(i)?this.events.emit(pt("session_ping",s),{}):Ti(i)&&this.events.emit(pt("session_ping",s),{error:i.error})},500)},this.onSessionDeleteRequest=async(t,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:t,reason:i.params}),Promise.all([new Promise(a=>{this.client.core.relayer.once(jr.publish,async()=>{a(await this.deleteSession({topic:t,id:s}))})}),this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:Tt("USER_DISCONNECTED")})]).catch(a=>this.client.logger.error(a))}catch(a){this.client.logger.error(a)}},this.onSessionRequest=async t=>{var i,s,a;const{topic:c,payload:u,attestation:l,encryptedId:h,transportType:g}=t,{id:w,params:S}=u;try{await this.isValidRequest(Zt({topic:c},S));const E=this.client.session.get(c),I=await this.getVerifyContext({attestationId:l,hash:Jn(JSON.stringify(_s("wc_sessionRequest",S,w))),encryptedId:h,metadata:E.peer.metadata,transportType:g}),z={id:w,topic:c,params:S,verifyContext:I};await this.setPendingSessionRequest(z),g===$t.link_mode&&(i=E.peer.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp((s=E.peer.metadata.redirect)==null?void 0:s.universal),(a=this.client.signConfig)!=null&&a.disableRequestQueue?this.emitSessionRequest(z):(this.addSessionRequestToSessionRequestQueue(z),this.processSessionRequestQueue())}catch(E){await this.sendError({id:w,topic:c,error:E}),this.client.logger.error(E)}},this.onSessionRequestResponse=(t,i)=>{const{id:s}=i,a=pt("session_request",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);wn(i)?this.events.emit(pt("session_request",s),{result:i.result}):Ti(i)&&this.events.emit(pt("session_request",s),{error:i.error})},this.onSessionEventRequest=async(t,i)=>{const{id:s,params:a}=i;try{const c=`${t}_session_event_${a.event.name}`,u=Oo.get(c);if(u&&this.isRequestOutOfSync(u,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Zt({topic:t},a)),this.client.events.emit("session_event",{id:s,topic:t,params:a}),Oo.set(c,s)}catch(c){await this.sendError({id:s,topic:t,error:c}),this.client.logger.error(c)}},this.onSessionAuthenticateResponse=(t,i)=>{const{id:s}=i;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:i}),wn(i)?this.events.emit(pt("session_request",s),{result:i.result}):Ti(i)&&this.events.emit(pt("session_request",s),{error:i.error})},this.onSessionAuthenticateRequest=async t=>{var i;const{topic:s,payload:a,attestation:c,encryptedId:u,transportType:l}=t;try{const{requester:h,authPayload:g,expiryTimestamp:w}=a.params,S=await this.getVerifyContext({attestationId:c,hash:Jn(JSON.stringify(a)),encryptedId:u,metadata:h.metadata,transportType:l}),E={requester:h,pairingTopic:s,id:a.id,authPayload:g,verifyContext:S,expiryTimestamp:w};await this.setAuthRequest(a.id,{request:E,pairingTopic:s,transportType:l}),l===$t.link_mode&&(i=h.metadata.redirect)!=null&&i.universal&&this.client.core.addLinkModeSupportedApp(h.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:a.params,id:a.id,verifyContext:S})}catch(h){this.client.logger.error(h);const g=a.params.requester.publicKey,w=await this.client.core.crypto.generateKeyPair(),S=this.getAppLinkIfEnabled(a.params.requester.metadata,l),E={type:Zn,receiverPublicKey:g,senderPublicKey:w};await this.sendError({id:a.id,topic:s,error:h,encodeOpts:E,rpcOpts:vr.wc_sessionAuthenticate.autoReject,appLink:S})}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=bn.idle,this.processSessionRequestQueue()},be.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:t,error:i})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(a=>a.topic===t&&a.request.method==="wc_sessionRequest").forEach(a=>{const c=a.request.id,u=pt("session_request",c);if(this.events.listenerCount(u)===0)throw new Error(`emitting ${u} without any listeners`);this.events.emit(pt("session_request",a.request.id),{error:i})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===bn.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=bn.active,this.emitSessionRequest(t)}catch(i){this.client.logger.error(i)}},this.emitSessionRequest=t=>{this.client.events.emit("session_request",t)},this.onPairingCreated=t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const i=this.client.proposal.getAll().find(s=>s.pairingTopic===t.topic);i&&this.onSessionProposeRequest({topic:t.topic,payload:_s("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id)})},this.isValidConnect=async t=>{if(!Qr(t)){const{message:l}=ge("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(l)}const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:a,sessionProperties:c,relays:u}=t;if(Zr(i)||await this.isValidPairingTopic(i),!tI(u)){const{message:l}=ge("MISSING_OR_INVALID",`connect() relays: ${u}`);throw new Error(l)}!Zr(s)&&Yo(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!Zr(a)&&Yo(a)!==0&&this.validateNamespaces(a,"optionalNamespaces"),Zr(c)||this.validateSessionProps(c,"sessionProperties")},this.validateNamespaces=(t,i)=>{const s=eI(t,"connect()",i);if(s)throw new Error(s.message)},this.isValidApprove=async t=>{if(!Qr(t))throw new Error(ge("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:i,namespaces:s,relayProtocol:a,sessionProperties:c}=t;this.checkRecentlyDeleted(i),await this.isValidProposalId(i);const u=this.client.proposal.get(i),l=ul(s,"approve()");if(l)throw new Error(l.message);const h=Q1(u.requiredNamespaces,s,"approve()");if(h)throw new Error(h.message);if(!ar(a,!0)){const{message:g}=ge("MISSING_OR_INVALID",`approve() relayProtocol: ${a}`);throw new Error(g)}Zr(c)||this.validateSessionProps(c,"sessionProperties")},this.isValidReject=async t=>{if(!Qr(t)){const{message:a}=ge("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(a)}const{id:i,reason:s}=t;if(this.checkRecentlyDeleted(i),await this.isValidProposalId(i),!iI(s)){const{message:a}=ge("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(a)}},this.isValidSessionSettleRequest=t=>{if(!Qr(t)){const{message:h}=ge("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(h)}const{relay:i,controller:s,namespaces:a,expiry:c}=t;if(!$v(i)){const{message:h}=ge("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(h)}const u=WS(s,"onSessionSettleRequest()");if(u)throw new Error(u.message);const l=ul(a,"onSessionSettleRequest()");if(l)throw new Error(l.message);if(gs(c)){const{message:h}=ge("EXPIRED","onSessionSettleRequest()");throw new Error(h)}},this.isValidUpdate=async t=>{if(!Qr(t)){const{message:l}=ge("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(l)}const{topic:i,namespaces:s}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const a=this.client.session.get(i),c=ul(s,"update()");if(c)throw new Error(c.message);const u=Q1(a.requiredNamespaces,s,"update()");if(u)throw new Error(u.message)},this.isValidExtend=async t=>{if(!Qr(t)){const{message:s}=ge("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(s)}const{topic:i}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i)},this.isValidRequest=async t=>{if(!Qr(t)){const{message:l}=ge("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(l)}const{topic:i,request:s,chainId:a,expiry:c}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const{namespaces:u}=this.client.session.get(i);if(!Y1(u,a)){const{message:l}=ge("MISSING_OR_INVALID",`request() chainId: ${a}`);throw new Error(l)}if(!nI(s)){const{message:l}=ge("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(l)}if(!oI(u,a,s.method)){const{message:l}=ge("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(l)}if(c&&!hI(c,vl)){const{message:l}=ge("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${vl.min} and ${vl.max}`);throw new Error(l)}},this.isValidRespond=async t=>{var i;if(!Qr(t)){const{message:c}=ge("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(c)}const{topic:s,response:a}=t;try{await this.isValidSessionTopic(s)}catch(c){throw(i=t?.response)!=null&&i.id&&this.cleanupAfterResponse(t),c}if(!sI(a)){const{message:c}=ge("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(c)}},this.isValidPing=async t=>{if(!Qr(t)){const{message:s}=ge("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(s)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async t=>{if(!Qr(t)){const{message:u}=ge("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(u)}const{topic:i,event:s,chainId:a}=t;await this.isValidSessionTopic(i);const{namespaces:c}=this.client.session.get(i);if(!Y1(c,a)){const{message:u}=ge("MISSING_OR_INVALID",`emit() chainId: ${a}`);throw new Error(u)}if(!aI(s)){const{message:u}=ge("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(u)}if(!cI(c,a,s.name)){const{message:u}=ge("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(u)}},this.isValidDisconnect=async t=>{if(!Qr(t)){const{message:s}=ge("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(s)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.isValidAuthenticate=t=>{const{chains:i,uri:s,domain:a,nonce:c}=t;if(!Array.isArray(i)||i.length===0)throw new Error("chains is required and must be a non-empty array");if(!ar(s,!1))throw new Error("uri is required parameter");if(!ar(a,!1))throw new Error("domain is required parameter");if(!ar(c,!1))throw new Error("nonce is required parameter");if([...new Set(i.map(l=>Uo(l).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:u}=Uo(i[0]);if(u!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async t=>{const{attestationId:i,hash:s,encryptedId:a,metadata:c,transportType:u}=t,l={verified:{verifyUrl:c.verifyUrl||Ho,validation:"UNKNOWN",origin:c.url||""}};try{if(u===$t.link_mode){const g=this.getAppLinkIfEnabled(c,u);return l.verified.validation=g&&new URL(g).origin===new URL(c.url).origin?"VALID":"INVALID",l}const h=await this.client.core.verify.resolve({attestationId:i,hash:s,encryptedId:a,verifyUrl:c.verifyUrl});h&&(l.verified.origin=h.origin,l.verified.isScam=h.isScam,l.verified.validation=h.origin===new URL(c.url).origin?"VALID":"INVALID")}catch(h){this.client.logger.warn(h)}return this.client.logger.debug(`Verify context: ${JSON.stringify(l)}`),l},this.validateSessionProps=(t,i)=>{Object.values(t).forEach(s=>{if(!ar(s,!1)){const{message:a}=ge("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(s)}`);throw new Error(a)}})},this.getPendingAuthRequest=t=>{const i=this.client.auth.requests.get(t);return typeof i=="object"?i:void 0},this.addToRecentlyDeleted=(t,i)=>{if(this.recentlyDeletedMap.set(t,i),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const a=this.recentlyDeletedLimit/2;for(const c of this.recentlyDeletedMap.keys()){if(s++>=a)break;this.recentlyDeletedMap.delete(c)}}},this.checkRecentlyDeleted=t=>{const i=this.recentlyDeletedMap.get(t);if(i){const{message:s}=ge("MISSING_OR_INVALID",`Record was recently deleted - ${i}: ${t}`);throw new Error(s)}},this.isLinkModeEnabled=(t,i)=>{var s,a,c,u,l,h,g,w,S;return!t||i!==$t.link_mode?!1:((a=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:a.linkMode)===!0&&((u=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:u.universal)!==void 0&&((h=(l=this.client.metadata)==null?void 0:l.redirect)==null?void 0:h.universal)!==""&&((g=t?.redirect)==null?void 0:g.universal)!==void 0&&((w=t?.redirect)==null?void 0:w.universal)!==""&&((S=t?.redirect)==null?void 0:S.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(t.redirect.universal)&&typeof(at==null?void 0:at.Linking)<"u"},this.getAppLinkIfEnabled=(t,i)=>{var s;return this.isLinkModeEnabled(t,i)?(s=t?.redirect)==null?void 0:s.universal:void 0},this.handleLinkModeMessage=({url:t})=>{if(!t||!t.includes("wc_ev")||!t.includes("topic"))return;const i=f1(t,"topic")||"",s=decodeURIComponent(f1(t,"wc_ev")||""),a=this.client.session.keys.includes(i);a&&this.client.session.update(i,{transportType:$t.link_mode}),this.client.core.dispatchEnvelope({topic:i,message:s,sessionExists:a})},this.registerLinkModeListeners=async()=>{var t;if(pd()||Ya()&&(t=this.client.metadata.redirect)!=null&&t.linkMode){const i=at==null?void 0:at.Linking;if(typeof i<"u"){i.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await i.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(jr.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){const{topic:t,message:i,attestation:s,transportType:a}=e,{publicKey:c}=this.client.auth.authKeys.keys.includes(Bu)?this.client.auth.authKeys.get(Bu):{responseTopic:void 0,publicKey:void 0},u=await this.client.core.crypto.decode(t,i,{receiverPublicKey:c,encoding:a===$t.link_mode?Po:ws});try{xd(u)?(this.client.core.history.set(t,u),this.onRelayEventRequest({topic:t,payload:u,attestation:s,transportType:a,encryptedId:Jn(i)})):If(u)?(await this.client.core.history.resolve(u),await this.onRelayEventResponse({topic:t,payload:u,transportType:a}),this.client.core.history.delete(t,u.id)):this.onRelayEventUnknownPayload({topic:t,payload:u,transportType:a})}catch(l){this.client.logger.error(l)}}registerExpirerEvents(){this.client.core.expirer.on(Ni.expired,async e=>{const{topic:t,id:i}=Yb(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,ge("EXPIRED"),!0);if(i&&this.client.auth.requests.keys.includes(i))return await this.deletePendingAuthRequest(i,ge("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(Xs.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Xs.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!ar(e,!1)){const{message:t}=ge("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=ge("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(gs(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=ge("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!ar(e,!1)){const{message:t}=ge("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=ge("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(gs(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=ge("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=ge("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(ar(e,!1)){const{message:t}=ge("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=ge("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!rI(e)){const{message:t}=ge("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=ge("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(gs(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=ge("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class BO extends fa{constructor(e,t){super(e,t,wO,Pd),this.core=e,this.logger=t}}class qO extends fa{constructor(e,t){super(e,t,_O,Pd),this.core=e,this.logger=t}}class LO extends fa{constructor(e,t){super(e,t,AO,Pd,i=>i.id),this.core=e,this.logger=t}}class UO extends fa{constructor(e,t){super(e,t,DO,Df,()=>Bu),this.core=e,this.logger=t}}class jO extends fa{constructor(e,t){super(e,t,MO,Df),this.core=e,this.logger=t}}class $O extends fa{constructor(e,t){super(e,t,PO,Df,i=>i.id),this.core=e,this.logger=t}}class zO{constructor(e,t){this.core=e,this.logger=t,this.authKeys=new UO(this.core,this.logger),this.pairingTopics=new jO(this.core,this.logger),this.requests=new $O(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class Od extends Fx{constructor(e){super(e),this.protocol=v2,this.version=m2,this.name=bl.name,this.events=new Ui.EventEmitter,this.on=(i,s)=>this.events.on(i,s),this.once=(i,s)=>this.events.once(i,s),this.off=(i,s)=>this.events.off(i,s),this.removeListener=(i,s)=>this.events.removeListener(i,s),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(s){throw this.logger.error(s.message),s}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(s){throw this.logger.error(s.message),s}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(s){throw this.logger.error(s.message),s}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(s){throw this.logger.error(s.message),s}},this.update=async i=>{try{return await this.engine.update(i)}catch(s){throw this.logger.error(s.message),s}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(s){throw this.logger.error(s.message),s}},this.request=async i=>{try{return await this.engine.request(i)}catch(s){throw this.logger.error(s.message),s}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(s){throw this.logger.error(s.message),s}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(s){throw this.logger.error(s.message),s}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(s){throw this.logger.error(s.message),s}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(s){throw this.logger.error(s.message),s}},this.find=i=>{try{return this.engine.find(i)}catch(s){throw this.logger.error(s.message),s}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.authenticate=async(i,s)=>{try{return await this.engine.authenticate(i,s)}catch(a){throw this.logger.error(a.message),a}},this.formatAuthMessage=i=>{try{return this.engine.formatAuthMessage(i)}catch(s){throw this.logger.error(s.message),s}},this.approveSessionAuthenticate=async i=>{try{return await this.engine.approveSessionAuthenticate(i)}catch(s){throw this.logger.error(s.message),s}},this.rejectSessionAuthenticate=async i=>{try{return await this.engine.rejectSessionAuthenticate(i)}catch(s){throw this.logger.error(s.message),s}},this.name=e?.name||bl.name,this.metadata=e?.metadata||Kb(),this.signConfig=e?.signConfig;const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:hc(Ef({level:e?.logger||bl.logger}));this.core=e?.core||new yO(e),this.logger=kr(t,this.name),this.session=new qO(this.core,this.logger),this.proposal=new BO(this.core,this.logger),this.pendingRequest=new LO(this.core,this.logger),this.engine=new FO(this),this.auth=new zO(this.core,this.logger)}static async init(e){const t=new Od(e);return await t.initialize(),t}get context(){return ni(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),this.engine.processRelayMessageCache()}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var Yl={exports:{}};(function(r,e){var t=typeof self<"u"?self:en,i=function(){function a(){this.fetch=!1,this.DOMException=t.DOMException}return a.prototype=t,new a}();(function(a){(function(c){var u={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(p){return p&&DataView.prototype.isPrototypeOf(p)}if(u.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(p){return p&&h.indexOf(Object.prototype.toString.call(p))>-1};function w(p){if(typeof p!="string"&&(p=String(p)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(p))throw new TypeError("Invalid character in header field name");return p.toLowerCase()}function S(p){return typeof p!="string"&&(p=String(p)),p}function E(p){var _={next:function(){var D=p.shift();return{done:D===void 0,value:D}}};return u.iterable&&(_[Symbol.iterator]=function(){return _}),_}function I(p){this.map={},p instanceof I?p.forEach(function(_,D){this.append(D,_)},this):Array.isArray(p)?p.forEach(function(_){this.append(_[0],_[1])},this):p&&Object.getOwnPropertyNames(p).forEach(function(_){this.append(_,p[_])},this)}I.prototype.append=function(p,_){p=w(p),_=S(_);var D=this.map[p];this.map[p]=D?D+", "+_:_},I.prototype.delete=function(p){delete this.map[w(p)]},I.prototype.get=function(p){return p=w(p),this.has(p)?this.map[p]:null},I.prototype.has=function(p){return this.map.hasOwnProperty(w(p))},I.prototype.set=function(p,_){this.map[w(p)]=S(_)},I.prototype.forEach=function(p,_){for(var D in this.map)this.map.hasOwnProperty(D)&&p.call(_,this.map[D],D,this)},I.prototype.keys=function(){var p=[];return this.forEach(function(_,D){p.push(D)}),E(p)},I.prototype.values=function(){var p=[];return this.forEach(function(_){p.push(_)}),E(p)},I.prototype.entries=function(){var p=[];return this.forEach(function(_,D){p.push([D,_])}),E(p)},u.iterable&&(I.prototype[Symbol.iterator]=I.prototype.entries);function z(p){if(p.bodyUsed)return Promise.reject(new TypeError("Already read"));p.bodyUsed=!0}function K(p){return new Promise(function(_,D){p.onload=function(){_(p.result)},p.onerror=function(){D(p.error)}})}function J(p){var _=new FileReader,D=K(_);return _.readAsArrayBuffer(p),D}function j(p){var _=new FileReader,D=K(_);return _.readAsText(p),D}function W(p){for(var _=new Uint8Array(p),D=new Array(_.length),P=0;P<_.length;P++)D[P]=String.fromCharCode(_[P]);return D.join("")}function B(p){if(p.slice)return p.slice(0);var _=new Uint8Array(p.byteLength);return _.set(new Uint8Array(p)),_.buffer}function U(){return this.bodyUsed=!1,this._initBody=function(p){this._bodyInit=p,p?typeof p=="string"?this._bodyText=p:u.blob&&Blob.prototype.isPrototypeOf(p)?this._bodyBlob=p:u.formData&&FormData.prototype.isPrototypeOf(p)?this._bodyFormData=p:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)?this._bodyText=p.toString():u.arrayBuffer&&u.blob&&l(p)?(this._bodyArrayBuffer=B(p.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(p)||g(p))?this._bodyArrayBuffer=B(p):this._bodyText=p=Object.prototype.toString.call(p):this._bodyText="",this.headers.get("content-type")||(typeof p=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var p=z(this);if(p)return p;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?z(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(J)}),this.text=function(){var p=z(this);if(p)return p;if(this._bodyBlob)return j(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(W(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(ne)}),this.json=function(){return this.text().then(JSON.parse)},this}var H=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(p){var _=p.toUpperCase();return H.indexOf(_)>-1?_:p}function N(p,_){_=_||{};var D=_.body;if(p instanceof N){if(p.bodyUsed)throw new TypeError("Already read");this.url=p.url,this.credentials=p.credentials,_.headers||(this.headers=new I(p.headers)),this.method=p.method,this.mode=p.mode,this.signal=p.signal,!D&&p._bodyInit!=null&&(D=p._bodyInit,p.bodyUsed=!0)}else this.url=String(p);if(this.credentials=_.credentials||this.credentials||"same-origin",(_.headers||!this.headers)&&(this.headers=new I(_.headers)),this.method=m(_.method||this.method||"GET"),this.mode=_.mode||this.mode||null,this.signal=_.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&D)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(D)}N.prototype.clone=function(){return new N(this,{body:this._bodyInit})};function ne(p){var _=new FormData;return p.trim().split("&").forEach(function(D){if(D){var P=D.split("="),C=P.shift().replace(/\+/g," "),F=P.join("=").replace(/\+/g," ");_.append(decodeURIComponent(C),decodeURIComponent(F))}}),_}function le(p){var _=new I,D=p.replace(/\r?\n[\t ]+/g," ");return D.split(/\r?\n/).forEach(function(P){var C=P.split(":"),F=C.shift().trim();if(F){var M=C.join(":").trim();_.append(F,M)}}),_}U.call(N.prototype);function pe(p,_){_||(_={}),this.type="default",this.status=_.status===void 0?200:_.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in _?_.statusText:"OK",this.headers=new I(_.headers),this.url=_.url||"",this._initBody(p)}U.call(pe.prototype),pe.prototype.clone=function(){return new pe(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new I(this.headers),url:this.url})},pe.error=function(){var p=new pe(null,{status:0,statusText:""});return p.type="error",p};var ve=[301,302,303,307,308];pe.redirect=function(p,_){if(ve.indexOf(_)===-1)throw new RangeError("Invalid status code");return new pe(null,{status:_,headers:{location:p}})},c.DOMException=a.DOMException;try{new c.DOMException}catch{c.DOMException=function(_,D){this.message=_,this.name=D;var P=Error(_);this.stack=P.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function d(p,_){return new Promise(function(D,P){var C=new N(p,_);if(C.signal&&C.signal.aborted)return P(new c.DOMException("Aborted","AbortError"));var F=new XMLHttpRequest;function M(){F.abort()}F.onload=function(){var v={status:F.status,statusText:F.statusText,headers:le(F.getAllResponseHeaders()||"")};v.url="responseURL"in F?F.responseURL:v.headers.get("X-Request-URL");var R="response"in F?F.response:F.responseText;D(new pe(R,v))},F.onerror=function(){P(new TypeError("Network request failed"))},F.ontimeout=function(){P(new TypeError("Network request failed"))},F.onabort=function(){P(new c.DOMException("Aborted","AbortError"))},F.open(C.method,C.url,!0),C.credentials==="include"?F.withCredentials=!0:C.credentials==="omit"&&(F.withCredentials=!1),"responseType"in F&&u.blob&&(F.responseType="blob"),C.headers.forEach(function(v,R){F.setRequestHeader(R,v)}),C.signal&&(C.signal.addEventListener("abort",M),F.onreadystatechange=function(){F.readyState===4&&C.signal.removeEventListener("abort",M)}),F.send(typeof C._bodyInit>"u"?null:C._bodyInit)})}return d.polyfill=!0,a.fetch||(a.fetch=d,a.Headers=I,a.Request=N,a.Response=pe),c.Headers=I,c.Request=N,c.Response=pe,c.fetch=d,Object.defineProperty(c,"__esModule",{value:!0}),c})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=i;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,r.exports=e})(Yl,Yl.exports);var kO=Yl.exports;const Ug=td(kO);var HO=Object.defineProperty,KO=Object.defineProperties,VO=Object.getOwnPropertyDescriptors,jg=Object.getOwnPropertySymbols,GO=Object.prototype.hasOwnProperty,WO=Object.prototype.propertyIsEnumerable,$g=(r,e,t)=>e in r?HO(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,zg=(r,e)=>{for(var t in e||(e={}))GO.call(e,t)&&$g(r,t,e[t]);if(jg)for(var t of jg(e))WO.call(e,t)&&$g(r,t,e[t]);return r},kg=(r,e)=>KO(r,VO(e));const JO={Accept:"application/json","Content-Type":"application/json"},YO="POST",Hg={headers:JO,method:YO},Kg=10;class Rn{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new Ui.EventEmitter,this.isAvailable=!1,this.registering=!1,!lg(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=es(e),i=await(await Ug(this.url,kg(zg({},Hg),{body:t}))).json();this.onPayload({data:i})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!lg(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,s)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),s(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));i()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=es({id:1,jsonrpc:"2.0",method:"test",params:[]});await Ug(e,kg(zg({},Hg),{body:t}))}this.onOpen()}catch(t){const i=this.parseError(t);throw this.events.emit("register_error",i),this.onClose(),i}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?ra(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),s=i.message||i.toString(),a=Sf(e,s);this.events.emit("payload",a)}parseError(e,t=this.url){return Yv(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Kg&&this.events.setMaxListeners(Kg)}}const Vg="error",QO="wss://relay.walletconnect.org",XO="wc",ZO="universal_provider",Gg=`${XO}@2:${ZO}:`,_2="https://rpc.walletconnect.org/v1/",Ba="generic",eC=`${_2}bundler`,an={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Fo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof at<"u"?at:typeof self<"u"?self:{},Ql={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(r,e){(function(){var t,i="4.17.21",s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",u="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",h=500,g="__lodash_placeholder__",w=1,S=2,E=4,I=1,z=2,K=1,J=2,j=4,W=8,B=16,U=32,H=64,m=128,N=256,ne=512,le=30,pe="...",ve=800,d=16,p=1,_=2,D=3,P=1/0,C=9007199254740991,F=17976931348623157e292,M=NaN,v=4294967295,R=v-1,re=v>>>1,he=[["ary",m],["bind",K],["bindKey",J],["curry",W],["curryRight",B],["flip",ne],["partial",U],["partialRight",H],["rearg",N]],A="[object Arguments]",ee="[object Array]",L="[object AsyncFunction]",$="[object Boolean]",V="[object Date]",b="[object DOMException]",q="[object Error]",te="[object Function]",ae="[object GeneratorFunction]",oe="[object Map]",Me="[object Number]",Oe="[object Null]",Ie="[object Object]",At="[object Promise]",$e="[object Proxy]",De="[object RegExp]",qe="[object Set]",_e="[object String]",Ee="[object Symbol]",Ve="[object Undefined]",ye="[object WeakMap]",Ae="[object WeakSet]",Be="[object ArrayBuffer]",we="[object DataView]",Pe="[object Float32Array]",Le="[object Float64Array]",Ce="[object Int8Array]",Ne="[object Int16Array]",st="[object Int32Array]",Te="[object Uint8Array]",Re="[object Uint8ClampedArray]",Jt="[object Uint16Array]",ut="[object Uint32Array]",gt=/\b__p \+= '';/g,Yt=/\b(__p \+=) '' \+/g,yt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Et=/&(?:amp|lt|gt|quot|#39);/g,Rr=/[&<>"']/g,Ge=RegExp(Et.source),ze=RegExp(Rr.source),xt=/<%-([\s\S]+?)%>/g,We=/<%([\s\S]+?)%>/g,Ke=/<%=([\s\S]+?)%>/g,St=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qe=/^\w*$/,Xe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dt=/[\\^$.*+?()[\]{}|]/g,Ze=RegExp(Dt.source),Je=/^\s+/,Ot=/\s/,Ye=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ue=/\{\n\/\* \[wrapped with (.+)\] \*/,Ft=/,? & /,et=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ct=/[()=,{}\[\]\/\s]/,zi=/\\(\\)?/g,Nt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,lt=/\w*$/,bi=/^[-+]0x[0-9a-f]+$/i,vi=/^0b[01]+$/i,mi=/^\[object .+?Constructor\]$/,yi=/^0o[0-7]+$/i,wi=/^(?:0|[1-9]\d*)$/,dr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,on=/($^)/,Is=/['\n\r\u2028\u2029\\]/g,cn="\\ud800-\\udfff",xs="\\u0300-\\u036f",Ds="\\ufe20-\\ufe2f",un="\\u20d0-\\u20ff",rs=xs+Ds+un,is="\\u2700-\\u27bf",Tr="a-z\\xdf-\\xf6\\xf8-\\xff",Ms="\\xac\\xb1\\xd7\\xf7",Ps="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Os="\\u2000-\\u206f",Cs=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pc="A-Z\\xc0-\\xd6\\xd8-\\xde",gc="\\ufe0e\\ufe0f",Ns=Ms+Ps+Os+Cs,no="['’]",Rs="["+cn+"]",so="["+Ns+"]",Ts="["+rs+"]",bc="\\d+",Mf="["+is+"]",vc="["+Tr+"]",mc="[^"+cn+Ns+bc+is+Tr+pc+"]",da="\\ud83c[\\udffb-\\udfff]",Pf="(?:"+Ts+"|"+da+")",yc="[^"+cn+"]",pa="(?:\\ud83c[\\udde6-\\uddff]){2}",ns="[\\ud800-\\udbff][\\udc00-\\udfff]",si="["+pc+"]",wc="\\u200d",_c="(?:"+vc+"|"+mc+")",fn="(?:"+si+"|"+mc+")",Ec="(?:"+no+"(?:d|ll|m|re|s|t|ve))?",Ac="(?:"+no+"(?:D|LL|M|RE|S|T|VE))?",Sc=Pf+"?",Ic="["+gc+"]?",Of="(?:"+wc+"(?:"+[yc,pa,ns].join("|")+")"+Ic+Sc+")*",Tn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Dc=Ic+Sc+Of,ga="(?:"+[Mf,pa,ns].join("|")+")"+Dc,Cf="(?:"+[yc+Ts+"?",Ts,pa,ns,Rs].join("|")+")",ao=RegExp(no,"g"),Nf=RegExp(Ts,"g"),ba=RegExp(da+"(?="+da+")|"+Cf+Dc,"g"),Mc=RegExp([si+"?"+vc+"+"+Ec+"(?="+[so,si,"$"].join("|")+")",fn+"+"+Ac+"(?="+[so,si+_c,"$"].join("|")+")",si+"?"+_c+"+"+Ec,si+"+"+Ac,xc,Tn,bc,ga].join("|"),"g"),Pc=RegExp("["+wc+cn+rs+gc+"]"),Fs=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Oc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Rf=-1,qt={};qt[Pe]=qt[Le]=qt[Ce]=qt[Ne]=qt[st]=qt[Te]=qt[Re]=qt[Jt]=qt[ut]=!0,qt[A]=qt[ee]=qt[Be]=qt[$]=qt[we]=qt[V]=qt[q]=qt[te]=qt[oe]=qt[Me]=qt[Ie]=qt[De]=qt[qe]=qt[_e]=qt[ye]=!1;var Bt={};Bt[A]=Bt[ee]=Bt[Be]=Bt[we]=Bt[$]=Bt[V]=Bt[Pe]=Bt[Le]=Bt[Ce]=Bt[Ne]=Bt[st]=Bt[oe]=Bt[Me]=Bt[Ie]=Bt[De]=Bt[qe]=Bt[_e]=Bt[Ee]=Bt[Te]=Bt[Re]=Bt[Jt]=Bt[ut]=!0,Bt[q]=Bt[te]=Bt[ye]=!1;var k={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},fe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Se={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Lt=parseFloat,rt=parseInt,Kt=typeof Fo=="object"&&Fo&&Fo.Object===Object&&Fo,or=typeof self=="object"&&self&&self.Object===Object&&self,wt=Kt||or||Function("return this")(),Ut=e&&!e.nodeType&&e,rr=Ut&&!0&&r&&!r.nodeType&&r,Hr=rr&&rr.exports===Ut,cr=Hr&&Kt.process,Vt=function(){try{var X=rr&&rr.require&&rr.require("util").types;return X||cr&&cr.binding&&cr.binding("util")}catch{}}(),Fr=Vt&&Vt.isArrayBuffer,ki=Vt&&Vt.isDate,_i=Vt&&Vt.isMap,hn=Vt&&Vt.isRegExp,oo=Vt&&Vt.isSet,Bs=Vt&&Vt.isTypedArray;function pr(X,se,ie){switch(ie.length){case 0:return X.call(se);case 1:return X.call(se,ie[0]);case 2:return X.call(se,ie[0],ie[1]);case 3:return X.call(se,ie[0],ie[1],ie[2])}return X.apply(se,ie)}function S2(X,se,ie,xe){for(var tt=-1,It=X==null?0:X.length;++tt<It;){var ur=X[tt];se(xe,ur,ie(ur),X)}return xe}function Ei(X,se){for(var ie=-1,xe=X==null?0:X.length;++ie<xe&&se(X[ie],ie,X)!==!1;);return X}function I2(X,se){for(var ie=X==null?0:X.length;ie--&&se(X[ie],ie,X)!==!1;);return X}function Rd(X,se){for(var ie=-1,xe=X==null?0:X.length;++ie<xe;)if(!se(X[ie],ie,X))return!1;return!0}function ss(X,se){for(var ie=-1,xe=X==null?0:X.length,tt=0,It=[];++ie<xe;){var ur=X[ie];se(ur,ie,X)&&(It[tt++]=ur)}return It}function Cc(X,se){var ie=X==null?0:X.length;return!!ie&&va(X,se,0)>-1}function Tf(X,se,ie){for(var xe=-1,tt=X==null?0:X.length;++xe<tt;)if(ie(se,X[xe]))return!0;return!1}function Wt(X,se){for(var ie=-1,xe=X==null?0:X.length,tt=Array(xe);++ie<xe;)tt[ie]=se(X[ie],ie,X);return tt}function as(X,se){for(var ie=-1,xe=se.length,tt=X.length;++ie<xe;)X[tt+ie]=se[ie];return X}function Ff(X,se,ie,xe){var tt=-1,It=X==null?0:X.length;for(xe&&It&&(ie=X[++tt]);++tt<It;)ie=se(ie,X[tt],tt,X);return ie}function x2(X,se,ie,xe){var tt=X==null?0:X.length;for(xe&&tt&&(ie=X[--tt]);tt--;)ie=se(ie,X[tt],tt,X);return ie}function Bf(X,se){for(var ie=-1,xe=X==null?0:X.length;++ie<xe;)if(se(X[ie],ie,X))return!0;return!1}var D2=qf("length");function M2(X){return X.split("")}function P2(X){return X.match(et)||[]}function Td(X,se,ie){var xe;return ie(X,function(tt,It,ur){if(se(tt,It,ur))return xe=It,!1}),xe}function Nc(X,se,ie,xe){for(var tt=X.length,It=ie+(xe?1:-1);xe?It--:++It<tt;)if(se(X[It],It,X))return It;return-1}function va(X,se,ie){return se===se?$2(X,se,ie):Nc(X,Fd,ie)}function O2(X,se,ie,xe){for(var tt=ie-1,It=X.length;++tt<It;)if(xe(X[tt],se))return tt;return-1}function Fd(X){return X!==X}function Bd(X,se){var ie=X==null?0:X.length;return ie?Uf(X,se)/ie:M}function qf(X){return function(se){return se==null?t:se[X]}}function Lf(X){return function(se){return X==null?t:X[se]}}function qd(X,se,ie,xe,tt){return tt(X,function(It,ur,jt){ie=xe?(xe=!1,It):se(ie,It,ur,jt)}),ie}function C2(X,se){var ie=X.length;for(X.sort(se);ie--;)X[ie]=X[ie].value;return X}function Uf(X,se){for(var ie,xe=-1,tt=X.length;++xe<tt;){var It=se(X[xe]);It!==t&&(ie=ie===t?It:ie+It)}return ie}function jf(X,se){for(var ie=-1,xe=Array(X);++ie<X;)xe[ie]=se(ie);return xe}function N2(X,se){return Wt(se,function(ie){return[ie,X[ie]]})}function Ld(X){return X&&X.slice(0,zd(X)+1).replace(Je,"")}function ai(X){return function(se){return X(se)}}function $f(X,se){return Wt(se,function(ie){return X[ie]})}function co(X,se){return X.has(se)}function Ud(X,se){for(var ie=-1,xe=X.length;++ie<xe&&va(se,X[ie],0)>-1;);return ie}function jd(X,se){for(var ie=X.length;ie--&&va(se,X[ie],0)>-1;);return ie}function R2(X,se){for(var ie=X.length,xe=0;ie--;)X[ie]===se&&++xe;return xe}var T2=Lf(k),F2=Lf(Q);function B2(X){return"\\"+Se[X]}function q2(X,se){return X==null?t:X[se]}function ma(X){return Pc.test(X)}function L2(X){return Fs.test(X)}function U2(X){for(var se,ie=[];!(se=X.next()).done;)ie.push(se.value);return ie}function zf(X){var se=-1,ie=Array(X.size);return X.forEach(function(xe,tt){ie[++se]=[tt,xe]}),ie}function $d(X,se){return function(ie){return X(se(ie))}}function os(X,se){for(var ie=-1,xe=X.length,tt=0,It=[];++ie<xe;){var ur=X[ie];(ur===se||ur===g)&&(X[ie]=g,It[tt++]=ie)}return It}function Rc(X){var se=-1,ie=Array(X.size);return X.forEach(function(xe){ie[++se]=xe}),ie}function j2(X){var se=-1,ie=Array(X.size);return X.forEach(function(xe){ie[++se]=[xe,xe]}),ie}function $2(X,se,ie){for(var xe=ie-1,tt=X.length;++xe<tt;)if(X[xe]===se)return xe;return-1}function z2(X,se,ie){for(var xe=ie+1;xe--;)if(X[xe]===se)return xe;return xe}function ya(X){return ma(X)?H2(X):D2(X)}function Hi(X){return ma(X)?K2(X):M2(X)}function zd(X){for(var se=X.length;se--&&Ot.test(X.charAt(se)););return se}var k2=Lf(fe);function H2(X){for(var se=ba.lastIndex=0;ba.test(X);)++se;return se}function K2(X){return X.match(ba)||[]}function V2(X){return X.match(Mc)||[]}var G2=function X(se){se=se==null?wt:wa.defaults(wt.Object(),se,wa.pick(wt,Oc));var ie=se.Array,xe=se.Date,tt=se.Error,It=se.Function,ur=se.Math,jt=se.Object,kf=se.RegExp,W2=se.String,Ai=se.TypeError,Tc=ie.prototype,J2=It.prototype,_a=jt.prototype,Fc=se["__core-js_shared__"],Bc=J2.toString,Rt=_a.hasOwnProperty,Y2=0,kd=function(){var n=/[^.]+$/.exec(Fc&&Fc.keys&&Fc.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),qc=_a.toString,Q2=Bc.call(jt),X2=wt._,Z2=kf("^"+Bc.call(Rt).replace(Dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lc=Hr?se.Buffer:t,cs=se.Symbol,Uc=se.Uint8Array,Hd=Lc?Lc.allocUnsafe:t,jc=$d(jt.getPrototypeOf,jt),Kd=jt.create,Vd=_a.propertyIsEnumerable,$c=Tc.splice,Gd=cs?cs.isConcatSpreadable:t,uo=cs?cs.iterator:t,qs=cs?cs.toStringTag:t,zc=function(){try{var n=zs(jt,"defineProperty");return n({},"",{}),n}catch{}}(),em=se.clearTimeout!==wt.clearTimeout&&se.clearTimeout,tm=xe&&xe.now!==wt.Date.now&&xe.now,rm=se.setTimeout!==wt.setTimeout&&se.setTimeout,kc=ur.ceil,Hc=ur.floor,Hf=jt.getOwnPropertySymbols,im=Lc?Lc.isBuffer:t,Wd=se.isFinite,nm=Tc.join,sm=$d(jt.keys,jt),fr=ur.max,Mr=ur.min,am=xe.now,om=se.parseInt,Jd=ur.random,cm=Tc.reverse,Kf=zs(se,"DataView"),fo=zs(se,"Map"),Vf=zs(se,"Promise"),Ea=zs(se,"Set"),ho=zs(se,"WeakMap"),lo=zs(jt,"create"),Kc=ho&&new ho,Aa={},um=ks(Kf),fm=ks(fo),hm=ks(Vf),lm=ks(Ea),dm=ks(ho),Vc=cs?cs.prototype:t,po=Vc?Vc.valueOf:t,Yd=Vc?Vc.toString:t;function O(n){if(Xt(n)&&!it(n)&&!(n instanceof bt)){if(n instanceof Si)return n;if(Rt.call(n,"__wrapped__"))return Q0(n)}return new Si(n)}var Sa=function(){function n(){}return function(o){if(!Qt(o))return{};if(Kd)return Kd(o);n.prototype=o;var f=new n;return n.prototype=t,f}}();function Gc(){}function Si(n,o){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=t}O.templateSettings={escape:xt,evaluate:We,interpolate:Ke,variable:"",imports:{_:O}},O.prototype=Gc.prototype,O.prototype.constructor=O,Si.prototype=Sa(Gc.prototype),Si.prototype.constructor=Si;function bt(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function pm(){var n=new bt(this.__wrapped__);return n.__actions__=Kr(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Kr(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Kr(this.__views__),n}function gm(){if(this.__filtered__){var n=new bt(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function bm(){var n=this.__wrapped__.value(),o=this.__dir__,f=it(n),y=o<0,x=f?n.length:0,T=My(0,x,this.__views__),G=T.start,Y=T.end,Z=Y-G,ce=y?Y:G-1,ue=this.__iteratees__,de=ue.length,me=0,Fe=Mr(Z,this.__takeCount__);if(!f||!y&&x==Z&&Fe==Z)return w0(n,this.__actions__);var ke=[];e:for(;Z--&&me<Fe;){ce+=o;for(var ft=-1,He=n[ce];++ft<de;){var dt=ue[ft],_t=dt.iteratee,ui=dt.type,Lr=_t(He);if(ui==_)He=Lr;else if(!Lr){if(ui==p)continue e;break e}}ke[me++]=He}return ke}bt.prototype=Sa(Gc.prototype),bt.prototype.constructor=bt;function Ls(n){var o=-1,f=n==null?0:n.length;for(this.clear();++o<f;){var y=n[o];this.set(y[0],y[1])}}function vm(){this.__data__=lo?lo(null):{},this.size=0}function mm(n){var o=this.has(n)&&delete this.__data__[n];return this.size-=o?1:0,o}function ym(n){var o=this.__data__;if(lo){var f=o[n];return f===l?t:f}return Rt.call(o,n)?o[n]:t}function wm(n){var o=this.__data__;return lo?o[n]!==t:Rt.call(o,n)}function _m(n,o){var f=this.__data__;return this.size+=this.has(n)?0:1,f[n]=lo&&o===t?l:o,this}Ls.prototype.clear=vm,Ls.prototype.delete=mm,Ls.prototype.get=ym,Ls.prototype.has=wm,Ls.prototype.set=_m;function Fn(n){var o=-1,f=n==null?0:n.length;for(this.clear();++o<f;){var y=n[o];this.set(y[0],y[1])}}function Em(){this.__data__=[],this.size=0}function Am(n){var o=this.__data__,f=Wc(o,n);if(f<0)return!1;var y=o.length-1;return f==y?o.pop():$c.call(o,f,1),--this.size,!0}function Sm(n){var o=this.__data__,f=Wc(o,n);return f<0?t:o[f][1]}function Im(n){return Wc(this.__data__,n)>-1}function xm(n,o){var f=this.__data__,y=Wc(f,n);return y<0?(++this.size,f.push([n,o])):f[y][1]=o,this}Fn.prototype.clear=Em,Fn.prototype.delete=Am,Fn.prototype.get=Sm,Fn.prototype.has=Im,Fn.prototype.set=xm;function Bn(n){var o=-1,f=n==null?0:n.length;for(this.clear();++o<f;){var y=n[o];this.set(y[0],y[1])}}function Dm(){this.size=0,this.__data__={hash:new Ls,map:new(fo||Fn),string:new Ls}}function Mm(n){var o=au(this,n).delete(n);return this.size-=o?1:0,o}function Pm(n){return au(this,n).get(n)}function Om(n){return au(this,n).has(n)}function Cm(n,o){var f=au(this,n),y=f.size;return f.set(n,o),this.size+=f.size==y?0:1,this}Bn.prototype.clear=Dm,Bn.prototype.delete=Mm,Bn.prototype.get=Pm,Bn.prototype.has=Om,Bn.prototype.set=Cm;function Us(n){var o=-1,f=n==null?0:n.length;for(this.__data__=new Bn;++o<f;)this.add(n[o])}function Nm(n){return this.__data__.set(n,l),this}function Rm(n){return this.__data__.has(n)}Us.prototype.add=Us.prototype.push=Nm,Us.prototype.has=Rm;function Ki(n){var o=this.__data__=new Fn(n);this.size=o.size}function Tm(){this.__data__=new Fn,this.size=0}function Fm(n){var o=this.__data__,f=o.delete(n);return this.size=o.size,f}function Bm(n){return this.__data__.get(n)}function qm(n){return this.__data__.has(n)}function Lm(n,o){var f=this.__data__;if(f instanceof Fn){var y=f.__data__;if(!fo||y.length<s-1)return y.push([n,o]),this.size=++f.size,this;f=this.__data__=new Bn(y)}return f.set(n,o),this.size=f.size,this}Ki.prototype.clear=Tm,Ki.prototype.delete=Fm,Ki.prototype.get=Bm,Ki.prototype.has=qm,Ki.prototype.set=Lm;function Qd(n,o){var f=it(n),y=!f&&Hs(n),x=!f&&!y&&ds(n),T=!f&&!y&&!x&&Ma(n),G=f||y||x||T,Y=G?jf(n.length,W2):[],Z=Y.length;for(var ce in n)(o||Rt.call(n,ce))&&!(G&&(ce=="length"||x&&(ce=="offset"||ce=="parent")||T&&(ce=="buffer"||ce=="byteLength"||ce=="byteOffset")||jn(ce,Z)))&&Y.push(ce);return Y}function Xd(n){var o=n.length;return o?n[ih(0,o-1)]:t}function Um(n,o){return ou(Kr(n),js(o,0,n.length))}function jm(n){return ou(Kr(n))}function Gf(n,o,f){(f!==t&&!Vi(n[o],f)||f===t&&!(o in n))&&qn(n,o,f)}function go(n,o,f){var y=n[o];(!(Rt.call(n,o)&&Vi(y,f))||f===t&&!(o in n))&&qn(n,o,f)}function Wc(n,o){for(var f=n.length;f--;)if(Vi(n[f][0],o))return f;return-1}function $m(n,o,f,y){return us(n,function(x,T,G){o(y,x,f(x),G)}),y}function Zd(n,o){return n&&dn(o,gr(o),n)}function zm(n,o){return n&&dn(o,Gr(o),n)}function qn(n,o,f){o=="__proto__"&&zc?zc(n,o,{configurable:!0,enumerable:!0,value:f,writable:!0}):n[o]=f}function Wf(n,o){for(var f=-1,y=o.length,x=ie(y),T=n==null;++f<y;)x[f]=T?t:Mh(n,o[f]);return x}function js(n,o,f){return n===n&&(f!==t&&(n=n<=f?n:f),o!==t&&(n=n>=o?n:o)),n}function Ii(n,o,f,y,x,T){var G,Y=o&w,Z=o&S,ce=o&E;if(f&&(G=x?f(n,y,x,T):f(n)),G!==t)return G;if(!Qt(n))return n;var ue=it(n);if(ue){if(G=Oy(n),!Y)return Kr(n,G)}else{var de=Pr(n),me=de==te||de==ae;if(ds(n))return A0(n,Y);if(de==Ie||de==A||me&&!x){if(G=Z||me?{}:z0(n),!Y)return Z?yy(n,zm(G,n)):my(n,Zd(G,n))}else{if(!Bt[de])return x?n:{};G=Cy(n,de,Y)}}T||(T=new Ki);var Fe=T.get(n);if(Fe)return Fe;T.set(n,G),vp(n)?n.forEach(function(He){G.add(Ii(He,o,f,He,n,T))}):gp(n)&&n.forEach(function(He,dt){G.set(dt,Ii(He,o,f,dt,n,T))});var ke=ce?Z?ph:dh:Z?Gr:gr,ft=ue?t:ke(n);return Ei(ft||n,function(He,dt){ft&&(dt=He,He=n[dt]),go(G,dt,Ii(He,o,f,dt,n,T))}),G}function km(n){var o=gr(n);return function(f){return e0(f,n,o)}}function e0(n,o,f){var y=f.length;if(n==null)return!y;for(n=jt(n);y--;){var x=f[y],T=o[x],G=n[x];if(G===t&&!(x in n)||!T(G))return!1}return!0}function t0(n,o,f){if(typeof n!="function")throw new Ai(c);return Eo(function(){n.apply(t,f)},o)}function bo(n,o,f,y){var x=-1,T=Cc,G=!0,Y=n.length,Z=[],ce=o.length;if(!Y)return Z;f&&(o=Wt(o,ai(f))),y?(T=Tf,G=!1):o.length>=s&&(T=co,G=!1,o=new Us(o));e:for(;++x<Y;){var ue=n[x],de=f==null?ue:f(ue);if(ue=y||ue!==0?ue:0,G&&de===de){for(var me=ce;me--;)if(o[me]===de)continue e;Z.push(ue)}else T(o,de,y)||Z.push(ue)}return Z}var us=M0(ln),r0=M0(Yf,!0);function Hm(n,o){var f=!0;return us(n,function(y,x,T){return f=!!o(y,x,T),f}),f}function Jc(n,o,f){for(var y=-1,x=n.length;++y<x;){var T=n[y],G=o(T);if(G!=null&&(Y===t?G===G&&!ci(G):f(G,Y)))var Y=G,Z=T}return Z}function Km(n,o,f,y){var x=n.length;for(f=ct(f),f<0&&(f=-f>x?0:x+f),y=y===t||y>x?x:ct(y),y<0&&(y+=x),y=f>y?0:yp(y);f<y;)n[f++]=o;return n}function i0(n,o){var f=[];return us(n,function(y,x,T){o(y,x,T)&&f.push(y)}),f}function Er(n,o,f,y,x){var T=-1,G=n.length;for(f||(f=Ry),x||(x=[]);++T<G;){var Y=n[T];o>0&&f(Y)?o>1?Er(Y,o-1,f,y,x):as(x,Y):y||(x[x.length]=Y)}return x}var Jf=P0(),n0=P0(!0);function ln(n,o){return n&&Jf(n,o,gr)}function Yf(n,o){return n&&n0(n,o,gr)}function Yc(n,o){return ss(o,function(f){return $n(n[f])})}function $s(n,o){o=hs(o,n);for(var f=0,y=o.length;n!=null&&f<y;)n=n[pn(o[f++])];return f&&f==y?n:t}function s0(n,o,f){var y=o(n);return it(n)?y:as(y,f(n))}function Br(n){return n==null?n===t?Ve:Oe:qs&&qs in jt(n)?Dy(n):jy(n)}function Qf(n,o){return n>o}function Vm(n,o){return n!=null&&Rt.call(n,o)}function Gm(n,o){return n!=null&&o in jt(n)}function Wm(n,o,f){return n>=Mr(o,f)&&n<fr(o,f)}function Xf(n,o,f){for(var y=f?Tf:Cc,x=n[0].length,T=n.length,G=T,Y=ie(T),Z=1/0,ce=[];G--;){var ue=n[G];G&&o&&(ue=Wt(ue,ai(o))),Z=Mr(ue.length,Z),Y[G]=!f&&(o||x>=120&&ue.length>=120)?new Us(G&&ue):t}ue=n[0];var de=-1,me=Y[0];e:for(;++de<x&&ce.length<Z;){var Fe=ue[de],ke=o?o(Fe):Fe;if(Fe=f||Fe!==0?Fe:0,!(me?co(me,ke):y(ce,ke,f))){for(G=T;--G;){var ft=Y[G];if(!(ft?co(ft,ke):y(n[G],ke,f)))continue e}me&&me.push(ke),ce.push(Fe)}}return ce}function Jm(n,o,f,y){return ln(n,function(x,T,G){o(y,f(x),T,G)}),y}function vo(n,o,f){o=hs(o,n),n=V0(n,o);var y=n==null?n:n[pn(Di(o))];return y==null?t:pr(y,n,f)}function a0(n){return Xt(n)&&Br(n)==A}function Ym(n){return Xt(n)&&Br(n)==Be}function Qm(n){return Xt(n)&&Br(n)==V}function mo(n,o,f,y,x){return n===o?!0:n==null||o==null||!Xt(n)&&!Xt(o)?n!==n&&o!==o:Xm(n,o,f,y,mo,x)}function Xm(n,o,f,y,x,T){var G=it(n),Y=it(o),Z=G?ee:Pr(n),ce=Y?ee:Pr(o);Z=Z==A?Ie:Z,ce=ce==A?Ie:ce;var ue=Z==Ie,de=ce==Ie,me=Z==ce;if(me&&ds(n)){if(!ds(o))return!1;G=!0,ue=!1}if(me&&!ue)return T||(T=new Ki),G||Ma(n)?U0(n,o,f,y,x,T):Iy(n,o,Z,f,y,x,T);if(!(f&I)){var Fe=ue&&Rt.call(n,"__wrapped__"),ke=de&&Rt.call(o,"__wrapped__");if(Fe||ke){var ft=Fe?n.value():n,He=ke?o.value():o;return T||(T=new Ki),x(ft,He,f,y,T)}}return me?(T||(T=new Ki),xy(n,o,f,y,x,T)):!1}function Zm(n){return Xt(n)&&Pr(n)==oe}function Zf(n,o,f,y){var x=f.length,T=x,G=!y;if(n==null)return!T;for(n=jt(n);x--;){var Y=f[x];if(G&&Y[2]?Y[1]!==n[Y[0]]:!(Y[0]in n))return!1}for(;++x<T;){Y=f[x];var Z=Y[0],ce=n[Z],ue=Y[1];if(G&&Y[2]){if(ce===t&&!(Z in n))return!1}else{var de=new Ki;if(y)var me=y(ce,ue,Z,n,o,de);if(!(me===t?mo(ue,ce,I|z,y,de):me))return!1}}return!0}function o0(n){if(!Qt(n)||Fy(n))return!1;var o=$n(n)?Z2:mi;return o.test(ks(n))}function ey(n){return Xt(n)&&Br(n)==De}function ty(n){return Xt(n)&&Pr(n)==qe}function ry(n){return Xt(n)&&du(n.length)&&!!qt[Br(n)]}function c0(n){return typeof n=="function"?n:n==null?Wr:typeof n=="object"?it(n)?h0(n[0],n[1]):f0(n):Op(n)}function eh(n){if(!_o(n))return sm(n);var o=[];for(var f in jt(n))Rt.call(n,f)&&f!="constructor"&&o.push(f);return o}function iy(n){if(!Qt(n))return Uy(n);var o=_o(n),f=[];for(var y in n)y=="constructor"&&(o||!Rt.call(n,y))||f.push(y);return f}function th(n,o){return n<o}function u0(n,o){var f=-1,y=Vr(n)?ie(n.length):[];return us(n,function(x,T,G){y[++f]=o(x,T,G)}),y}function f0(n){var o=bh(n);return o.length==1&&o[0][2]?H0(o[0][0],o[0][1]):function(f){return f===n||Zf(f,n,o)}}function h0(n,o){return mh(n)&&k0(o)?H0(pn(n),o):function(f){var y=Mh(f,n);return y===t&&y===o?Ph(f,n):mo(o,y,I|z)}}function Qc(n,o,f,y,x){n!==o&&Jf(o,function(T,G){if(x||(x=new Ki),Qt(T))ny(n,o,G,f,Qc,y,x);else{var Y=y?y(wh(n,G),T,G+"",n,o,x):t;Y===t&&(Y=T),Gf(n,G,Y)}},Gr)}function ny(n,o,f,y,x,T,G){var Y=wh(n,f),Z=wh(o,f),ce=G.get(Z);if(ce){Gf(n,f,ce);return}var ue=T?T(Y,Z,f+"",n,o,G):t,de=ue===t;if(de){var me=it(Z),Fe=!me&&ds(Z),ke=!me&&!Fe&&Ma(Z);ue=Z,me||Fe||ke?it(Y)?ue=Y:ir(Y)?ue=Kr(Y):Fe?(de=!1,ue=A0(Z,!0)):ke?(de=!1,ue=S0(Z,!0)):ue=[]:Ao(Z)||Hs(Z)?(ue=Y,Hs(Y)?ue=wp(Y):(!Qt(Y)||$n(Y))&&(ue=z0(Z))):de=!1}de&&(G.set(Z,ue),x(ue,Z,y,T,G),G.delete(Z)),Gf(n,f,ue)}function l0(n,o){var f=n.length;if(f)return o+=o<0?f:0,jn(o,f)?n[o]:t}function d0(n,o,f){o.length?o=Wt(o,function(T){return it(T)?function(G){return $s(G,T.length===1?T[0]:T)}:T}):o=[Wr];var y=-1;o=Wt(o,ai(je()));var x=u0(n,function(T,G,Y){var Z=Wt(o,function(ce){return ce(T)});return{criteria:Z,index:++y,value:T}});return C2(x,function(T,G){return vy(T,G,f)})}function sy(n,o){return p0(n,o,function(f,y){return Ph(n,y)})}function p0(n,o,f){for(var y=-1,x=o.length,T={};++y<x;){var G=o[y],Y=$s(n,G);f(Y,G)&&yo(T,hs(G,n),Y)}return T}function ay(n){return function(o){return $s(o,n)}}function rh(n,o,f,y){var x=y?O2:va,T=-1,G=o.length,Y=n;for(n===o&&(o=Kr(o)),f&&(Y=Wt(n,ai(f)));++T<G;)for(var Z=0,ce=o[T],ue=f?f(ce):ce;(Z=x(Y,ue,Z,y))>-1;)Y!==n&&$c.call(Y,Z,1),$c.call(n,Z,1);return n}function g0(n,o){for(var f=n?o.length:0,y=f-1;f--;){var x=o[f];if(f==y||x!==T){var T=x;jn(x)?$c.call(n,x,1):ah(n,x)}}return n}function ih(n,o){return n+Hc(Jd()*(o-n+1))}function oy(n,o,f,y){for(var x=-1,T=fr(kc((o-n)/(f||1)),0),G=ie(T);T--;)G[y?T:++x]=n,n+=f;return G}function nh(n,o){var f="";if(!n||o<1||o>C)return f;do o%2&&(f+=n),o=Hc(o/2),o&&(n+=n);while(o);return f}function ht(n,o){return _h(K0(n,o,Wr),n+"")}function cy(n){return Xd(Pa(n))}function uy(n,o){var f=Pa(n);return ou(f,js(o,0,f.length))}function yo(n,o,f,y){if(!Qt(n))return n;o=hs(o,n);for(var x=-1,T=o.length,G=T-1,Y=n;Y!=null&&++x<T;){var Z=pn(o[x]),ce=f;if(Z==="__proto__"||Z==="constructor"||Z==="prototype")return n;if(x!=G){var ue=Y[Z];ce=y?y(ue,Z,Y):t,ce===t&&(ce=Qt(ue)?ue:jn(o[x+1])?[]:{})}go(Y,Z,ce),Y=Y[Z]}return n}var b0=Kc?function(n,o){return Kc.set(n,o),n}:Wr,fy=zc?function(n,o){return zc(n,"toString",{configurable:!0,enumerable:!1,value:Ch(o),writable:!0})}:Wr;function hy(n){return ou(Pa(n))}function xi(n,o,f){var y=-1,x=n.length;o<0&&(o=-o>x?0:x+o),f=f>x?x:f,f<0&&(f+=x),x=o>f?0:f-o>>>0,o>>>=0;for(var T=ie(x);++y<x;)T[y]=n[y+o];return T}function ly(n,o){var f;return us(n,function(y,x,T){return f=o(y,x,T),!f}),!!f}function Xc(n,o,f){var y=0,x=n==null?y:n.length;if(typeof o=="number"&&o===o&&x<=re){for(;y<x;){var T=y+x>>>1,G=n[T];G!==null&&!ci(G)&&(f?G<=o:G<o)?y=T+1:x=T}return x}return sh(n,o,Wr,f)}function sh(n,o,f,y){var x=0,T=n==null?0:n.length;if(T===0)return 0;o=f(o);for(var G=o!==o,Y=o===null,Z=ci(o),ce=o===t;x<T;){var ue=Hc((x+T)/2),de=f(n[ue]),me=de!==t,Fe=de===null,ke=de===de,ft=ci(de);if(G)var He=y||ke;else ce?He=ke&&(y||me):Y?He=ke&&me&&(y||!Fe):Z?He=ke&&me&&!Fe&&(y||!ft):Fe||ft?He=!1:He=y?de<=o:de<o;He?x=ue+1:T=ue}return Mr(T,R)}function v0(n,o){for(var f=-1,y=n.length,x=0,T=[];++f<y;){var G=n[f],Y=o?o(G):G;if(!f||!Vi(Y,Z)){var Z=Y;T[x++]=G===0?0:G}}return T}function m0(n){return typeof n=="number"?n:ci(n)?M:+n}function oi(n){if(typeof n=="string")return n;if(it(n))return Wt(n,oi)+"";if(ci(n))return Yd?Yd.call(n):"";var o=n+"";return o=="0"&&1/n==-P?"-0":o}function fs(n,o,f){var y=-1,x=Cc,T=n.length,G=!0,Y=[],Z=Y;if(f)G=!1,x=Tf;else if(T>=s){var ce=o?null:Ay(n);if(ce)return Rc(ce);G=!1,x=co,Z=new Us}else Z=o?[]:Y;e:for(;++y<T;){var ue=n[y],de=o?o(ue):ue;if(ue=f||ue!==0?ue:0,G&&de===de){for(var me=Z.length;me--;)if(Z[me]===de)continue e;o&&Z.push(de),Y.push(ue)}else x(Z,de,f)||(Z!==Y&&Z.push(de),Y.push(ue))}return Y}function ah(n,o){return o=hs(o,n),n=V0(n,o),n==null||delete n[pn(Di(o))]}function y0(n,o,f,y){return yo(n,o,f($s(n,o)),y)}function Zc(n,o,f,y){for(var x=n.length,T=y?x:-1;(y?T--:++T<x)&&o(n[T],T,n););return f?xi(n,y?0:T,y?T+1:x):xi(n,y?T+1:0,y?x:T)}function w0(n,o){var f=n;return f instanceof bt&&(f=f.value()),Ff(o,function(y,x){return x.func.apply(x.thisArg,as([y],x.args))},f)}function oh(n,o,f){var y=n.length;if(y<2)return y?fs(n[0]):[];for(var x=-1,T=ie(y);++x<y;)for(var G=n[x],Y=-1;++Y<y;)Y!=x&&(T[x]=bo(T[x]||G,n[Y],o,f));return fs(Er(T,1),o,f)}function _0(n,o,f){for(var y=-1,x=n.length,T=o.length,G={};++y<x;){var Y=y<T?o[y]:t;f(G,n[y],Y)}return G}function ch(n){return ir(n)?n:[]}function uh(n){return typeof n=="function"?n:Wr}function hs(n,o){return it(n)?n:mh(n,o)?[n]:Y0(Mt(n))}var dy=ht;function ls(n,o,f){var y=n.length;return f=f===t?y:f,!o&&f>=y?n:xi(n,o,f)}var E0=em||function(n){return wt.clearTimeout(n)};function A0(n,o){if(o)return n.slice();var f=n.length,y=Hd?Hd(f):new n.constructor(f);return n.copy(y),y}function fh(n){var o=new n.constructor(n.byteLength);return new Uc(o).set(new Uc(n)),o}function py(n,o){var f=o?fh(n.buffer):n.buffer;return new n.constructor(f,n.byteOffset,n.byteLength)}function gy(n){var o=new n.constructor(n.source,lt.exec(n));return o.lastIndex=n.lastIndex,o}function by(n){return po?jt(po.call(n)):{}}function S0(n,o){var f=o?fh(n.buffer):n.buffer;return new n.constructor(f,n.byteOffset,n.length)}function I0(n,o){if(n!==o){var f=n!==t,y=n===null,x=n===n,T=ci(n),G=o!==t,Y=o===null,Z=o===o,ce=ci(o);if(!Y&&!ce&&!T&&n>o||T&&G&&Z&&!Y&&!ce||y&&G&&Z||!f&&Z||!x)return 1;if(!y&&!T&&!ce&&n<o||ce&&f&&x&&!y&&!T||Y&&f&&x||!G&&x||!Z)return-1}return 0}function vy(n,o,f){for(var y=-1,x=n.criteria,T=o.criteria,G=x.length,Y=f.length;++y<G;){var Z=I0(x[y],T[y]);if(Z){if(y>=Y)return Z;var ce=f[y];return Z*(ce=="desc"?-1:1)}}return n.index-o.index}function x0(n,o,f,y){for(var x=-1,T=n.length,G=f.length,Y=-1,Z=o.length,ce=fr(T-G,0),ue=ie(Z+ce),de=!y;++Y<Z;)ue[Y]=o[Y];for(;++x<G;)(de||x<T)&&(ue[f[x]]=n[x]);for(;ce--;)ue[Y++]=n[x++];return ue}function D0(n,o,f,y){for(var x=-1,T=n.length,G=-1,Y=f.length,Z=-1,ce=o.length,ue=fr(T-Y,0),de=ie(ue+ce),me=!y;++x<ue;)de[x]=n[x];for(var Fe=x;++Z<ce;)de[Fe+Z]=o[Z];for(;++G<Y;)(me||x<T)&&(de[Fe+f[G]]=n[x++]);return de}function Kr(n,o){var f=-1,y=n.length;for(o||(o=ie(y));++f<y;)o[f]=n[f];return o}function dn(n,o,f,y){var x=!f;f||(f={});for(var T=-1,G=o.length;++T<G;){var Y=o[T],Z=y?y(f[Y],n[Y],Y,f,n):t;Z===t&&(Z=n[Y]),x?qn(f,Y,Z):go(f,Y,Z)}return f}function my(n,o){return dn(n,vh(n),o)}function yy(n,o){return dn(n,j0(n),o)}function eu(n,o){return function(f,y){var x=it(f)?S2:$m,T=o?o():{};return x(f,n,je(y,2),T)}}function Ia(n){return ht(function(o,f){var y=-1,x=f.length,T=x>1?f[x-1]:t,G=x>2?f[2]:t;for(T=n.length>3&&typeof T=="function"?(x--,T):t,G&&qr(f[0],f[1],G)&&(T=x<3?t:T,x=1),o=jt(o);++y<x;){var Y=f[y];Y&&n(o,Y,y,T)}return o})}function M0(n,o){return function(f,y){if(f==null)return f;if(!Vr(f))return n(f,y);for(var x=f.length,T=o?x:-1,G=jt(f);(o?T--:++T<x)&&y(G[T],T,G)!==!1;);return f}}function P0(n){return function(o,f,y){for(var x=-1,T=jt(o),G=y(o),Y=G.length;Y--;){var Z=G[n?Y:++x];if(f(T[Z],Z,T)===!1)break}return o}}function wy(n,o,f){var y=o&K,x=wo(n);function T(){var G=this&&this!==wt&&this instanceof T?x:n;return G.apply(y?f:this,arguments)}return T}function O0(n){return function(o){o=Mt(o);var f=ma(o)?Hi(o):t,y=f?f[0]:o.charAt(0),x=f?ls(f,1).join(""):o.slice(1);return y[n]()+x}}function xa(n){return function(o){return Ff(Mp(Dp(o).replace(ao,"")),n,"")}}function wo(n){return function(){var o=arguments;switch(o.length){case 0:return new n;case 1:return new n(o[0]);case 2:return new n(o[0],o[1]);case 3:return new n(o[0],o[1],o[2]);case 4:return new n(o[0],o[1],o[2],o[3]);case 5:return new n(o[0],o[1],o[2],o[3],o[4]);case 6:return new n(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new n(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var f=Sa(n.prototype),y=n.apply(f,o);return Qt(y)?y:f}}function _y(n,o,f){var y=wo(n);function x(){for(var T=arguments.length,G=ie(T),Y=T,Z=Da(x);Y--;)G[Y]=arguments[Y];var ce=T<3&&G[0]!==Z&&G[T-1]!==Z?[]:os(G,Z);if(T-=ce.length,T<f)return F0(n,o,tu,x.placeholder,t,G,ce,t,t,f-T);var ue=this&&this!==wt&&this instanceof x?y:n;return pr(ue,this,G)}return x}function C0(n){return function(o,f,y){var x=jt(o);if(!Vr(o)){var T=je(f,3);o=gr(o),f=function(Y){return T(x[Y],Y,x)}}var G=n(o,f,y);return G>-1?x[T?o[G]:G]:t}}function N0(n){return Un(function(o){var f=o.length,y=f,x=Si.prototype.thru;for(n&&o.reverse();y--;){var T=o[y];if(typeof T!="function")throw new Ai(c);if(x&&!G&&su(T)=="wrapper")var G=new Si([],!0)}for(y=G?y:f;++y<f;){T=o[y];var Y=su(T),Z=Y=="wrapper"?gh(T):t;Z&&yh(Z[0])&&Z[1]==(m|W|U|N)&&!Z[4].length&&Z[9]==1?G=G[su(Z[0])].apply(G,Z[3]):G=T.length==1&&yh(T)?G[Y]():G.thru(T)}return function(){var ce=arguments,ue=ce[0];if(G&&ce.length==1&&it(ue))return G.plant(ue).value();for(var de=0,me=f?o[de].apply(this,ce):ue;++de<f;)me=o[de].call(this,me);return me}})}function tu(n,o,f,y,x,T,G,Y,Z,ce){var ue=o&m,de=o&K,me=o&J,Fe=o&(W|B),ke=o&ne,ft=me?t:wo(n);function He(){for(var dt=arguments.length,_t=ie(dt),ui=dt;ui--;)_t[ui]=arguments[ui];if(Fe)var Lr=Da(He),fi=R2(_t,Lr);if(y&&(_t=x0(_t,y,x,Fe)),T&&(_t=D0(_t,T,G,Fe)),dt-=fi,Fe&&dt<ce){var nr=os(_t,Lr);return F0(n,o,tu,He.placeholder,f,_t,nr,Y,Z,ce-dt)}var Gi=de?f:this,kn=me?Gi[n]:n;return dt=_t.length,Y?_t=$y(_t,Y):ke&&dt>1&&_t.reverse(),ue&&Z<dt&&(_t.length=Z),this&&this!==wt&&this instanceof He&&(kn=ft||wo(kn)),kn.apply(Gi,_t)}return He}function R0(n,o){return function(f,y){return Jm(f,n,o(y),{})}}function ru(n,o){return function(f,y){var x;if(f===t&&y===t)return o;if(f!==t&&(x=f),y!==t){if(x===t)return y;typeof f=="string"||typeof y=="string"?(f=oi(f),y=oi(y)):(f=m0(f),y=m0(y)),x=n(f,y)}return x}}function hh(n){return Un(function(o){return o=Wt(o,ai(je())),ht(function(f){var y=this;return n(o,function(x){return pr(x,y,f)})})})}function iu(n,o){o=o===t?" ":oi(o);var f=o.length;if(f<2)return f?nh(o,n):o;var y=nh(o,kc(n/ya(o)));return ma(o)?ls(Hi(y),0,n).join(""):y.slice(0,n)}function Ey(n,o,f,y){var x=o&K,T=wo(n);function G(){for(var Y=-1,Z=arguments.length,ce=-1,ue=y.length,de=ie(ue+Z),me=this&&this!==wt&&this instanceof G?T:n;++ce<ue;)de[ce]=y[ce];for(;Z--;)de[ce++]=arguments[++Y];return pr(me,x?f:this,de)}return G}function T0(n){return function(o,f,y){return y&&typeof y!="number"&&qr(o,f,y)&&(f=y=t),o=zn(o),f===t?(f=o,o=0):f=zn(f),y=y===t?o<f?1:-1:zn(y),oy(o,f,y,n)}}function nu(n){return function(o,f){return typeof o=="string"&&typeof f=="string"||(o=Mi(o),f=Mi(f)),n(o,f)}}function F0(n,o,f,y,x,T,G,Y,Z,ce){var ue=o&W,de=ue?G:t,me=ue?t:G,Fe=ue?T:t,ke=ue?t:T;o|=ue?U:H,o&=~(ue?H:U),o&j||(o&=~(K|J));var ft=[n,o,x,Fe,de,ke,me,Y,Z,ce],He=f.apply(t,ft);return yh(n)&&G0(He,ft),He.placeholder=y,W0(He,n,o)}function lh(n){var o=ur[n];return function(f,y){if(f=Mi(f),y=y==null?0:Mr(ct(y),292),y&&Wd(f)){var x=(Mt(f)+"e").split("e"),T=o(x[0]+"e"+(+x[1]+y));return x=(Mt(T)+"e").split("e"),+(x[0]+"e"+(+x[1]-y))}return o(f)}}var Ay=Ea&&1/Rc(new Ea([,-0]))[1]==P?function(n){return new Ea(n)}:Th;function B0(n){return function(o){var f=Pr(o);return f==oe?zf(o):f==qe?j2(o):N2(o,n(o))}}function Ln(n,o,f,y,x,T,G,Y){var Z=o&J;if(!Z&&typeof n!="function")throw new Ai(c);var ce=y?y.length:0;if(ce||(o&=~(U|H),y=x=t),G=G===t?G:fr(ct(G),0),Y=Y===t?Y:ct(Y),ce-=x?x.length:0,o&H){var ue=y,de=x;y=x=t}var me=Z?t:gh(n),Fe=[n,o,f,y,x,ue,de,T,G,Y];if(me&&Ly(Fe,me),n=Fe[0],o=Fe[1],f=Fe[2],y=Fe[3],x=Fe[4],Y=Fe[9]=Fe[9]===t?Z?0:n.length:fr(Fe[9]-ce,0),!Y&&o&(W|B)&&(o&=~(W|B)),!o||o==K)var ke=wy(n,o,f);else o==W||o==B?ke=_y(n,o,Y):(o==U||o==(K|U))&&!x.length?ke=Ey(n,o,f,y):ke=tu.apply(t,Fe);var ft=me?b0:G0;return W0(ft(ke,Fe),n,o)}function q0(n,o,f,y){return n===t||Vi(n,_a[f])&&!Rt.call(y,f)?o:n}function L0(n,o,f,y,x,T){return Qt(n)&&Qt(o)&&(T.set(o,n),Qc(n,o,t,L0,T),T.delete(o)),n}function Sy(n){return Ao(n)?t:n}function U0(n,o,f,y,x,T){var G=f&I,Y=n.length,Z=o.length;if(Y!=Z&&!(G&&Z>Y))return!1;var ce=T.get(n),ue=T.get(o);if(ce&&ue)return ce==o&&ue==n;var de=-1,me=!0,Fe=f&z?new Us:t;for(T.set(n,o),T.set(o,n);++de<Y;){var ke=n[de],ft=o[de];if(y)var He=G?y(ft,ke,de,o,n,T):y(ke,ft,de,n,o,T);if(He!==t){if(He)continue;me=!1;break}if(Fe){if(!Bf(o,function(dt,_t){if(!co(Fe,_t)&&(ke===dt||x(ke,dt,f,y,T)))return Fe.push(_t)})){me=!1;break}}else if(!(ke===ft||x(ke,ft,f,y,T))){me=!1;break}}return T.delete(n),T.delete(o),me}function Iy(n,o,f,y,x,T,G){switch(f){case we:if(n.byteLength!=o.byteLength||n.byteOffset!=o.byteOffset)return!1;n=n.buffer,o=o.buffer;case Be:return!(n.byteLength!=o.byteLength||!T(new Uc(n),new Uc(o)));case $:case V:case Me:return Vi(+n,+o);case q:return n.name==o.name&&n.message==o.message;case De:case _e:return n==o+"";case oe:var Y=zf;case qe:var Z=y&I;if(Y||(Y=Rc),n.size!=o.size&&!Z)return!1;var ce=G.get(n);if(ce)return ce==o;y|=z,G.set(n,o);var ue=U0(Y(n),Y(o),y,x,T,G);return G.delete(n),ue;case Ee:if(po)return po.call(n)==po.call(o)}return!1}function xy(n,o,f,y,x,T){var G=f&I,Y=dh(n),Z=Y.length,ce=dh(o),ue=ce.length;if(Z!=ue&&!G)return!1;for(var de=Z;de--;){var me=Y[de];if(!(G?me in o:Rt.call(o,me)))return!1}var Fe=T.get(n),ke=T.get(o);if(Fe&&ke)return Fe==o&&ke==n;var ft=!0;T.set(n,o),T.set(o,n);for(var He=G;++de<Z;){me=Y[de];var dt=n[me],_t=o[me];if(y)var ui=G?y(_t,dt,me,o,n,T):y(dt,_t,me,n,o,T);if(!(ui===t?dt===_t||x(dt,_t,f,y,T):ui)){ft=!1;break}He||(He=me=="constructor")}if(ft&&!He){var Lr=n.constructor,fi=o.constructor;Lr!=fi&&"constructor"in n&&"constructor"in o&&!(typeof Lr=="function"&&Lr instanceof Lr&&typeof fi=="function"&&fi instanceof fi)&&(ft=!1)}return T.delete(n),T.delete(o),ft}function Un(n){return _h(K0(n,t,ep),n+"")}function dh(n){return s0(n,gr,vh)}function ph(n){return s0(n,Gr,j0)}var gh=Kc?function(n){return Kc.get(n)}:Th;function su(n){for(var o=n.name+"",f=Aa[o],y=Rt.call(Aa,o)?f.length:0;y--;){var x=f[y],T=x.func;if(T==null||T==n)return x.name}return o}function Da(n){var o=Rt.call(O,"placeholder")?O:n;return o.placeholder}function je(){var n=O.iteratee||Nh;return n=n===Nh?c0:n,arguments.length?n(arguments[0],arguments[1]):n}function au(n,o){var f=n.__data__;return Ty(o)?f[typeof o=="string"?"string":"hash"]:f.map}function bh(n){for(var o=gr(n),f=o.length;f--;){var y=o[f],x=n[y];o[f]=[y,x,k0(x)]}return o}function zs(n,o){var f=q2(n,o);return o0(f)?f:t}function Dy(n){var o=Rt.call(n,qs),f=n[qs];try{n[qs]=t;var y=!0}catch{}var x=qc.call(n);return y&&(o?n[qs]=f:delete n[qs]),x}var vh=Hf?function(n){return n==null?[]:(n=jt(n),ss(Hf(n),function(o){return Vd.call(n,o)}))}:Fh,j0=Hf?function(n){for(var o=[];n;)as(o,vh(n)),n=jc(n);return o}:Fh,Pr=Br;(Kf&&Pr(new Kf(new ArrayBuffer(1)))!=we||fo&&Pr(new fo)!=oe||Vf&&Pr(Vf.resolve())!=At||Ea&&Pr(new Ea)!=qe||ho&&Pr(new ho)!=ye)&&(Pr=function(n){var o=Br(n),f=o==Ie?n.constructor:t,y=f?ks(f):"";if(y)switch(y){case um:return we;case fm:return oe;case hm:return At;case lm:return qe;case dm:return ye}return o});function My(n,o,f){for(var y=-1,x=f.length;++y<x;){var T=f[y],G=T.size;switch(T.type){case"drop":n+=G;break;case"dropRight":o-=G;break;case"take":o=Mr(o,n+G);break;case"takeRight":n=fr(n,o-G);break}}return{start:n,end:o}}function Py(n){var o=n.match(Ue);return o?o[1].split(Ft):[]}function $0(n,o,f){o=hs(o,n);for(var y=-1,x=o.length,T=!1;++y<x;){var G=pn(o[y]);if(!(T=n!=null&&f(n,G)))break;n=n[G]}return T||++y!=x?T:(x=n==null?0:n.length,!!x&&du(x)&&jn(G,x)&&(it(n)||Hs(n)))}function Oy(n){var o=n.length,f=new n.constructor(o);return o&&typeof n[0]=="string"&&Rt.call(n,"index")&&(f.index=n.index,f.input=n.input),f}function z0(n){return typeof n.constructor=="function"&&!_o(n)?Sa(jc(n)):{}}function Cy(n,o,f){var y=n.constructor;switch(o){case Be:return fh(n);case $:case V:return new y(+n);case we:return py(n,f);case Pe:case Le:case Ce:case Ne:case st:case Te:case Re:case Jt:case ut:return S0(n,f);case oe:return new y;case Me:case _e:return new y(n);case De:return gy(n);case qe:return new y;case Ee:return by(n)}}function Ny(n,o){var f=o.length;if(!f)return n;var y=f-1;return o[y]=(f>1?"& ":"")+o[y],o=o.join(f>2?", ":" "),n.replace(Ye,`{
/* [wrapped with `+o+`] */
`)}function Ry(n){return it(n)||Hs(n)||!!(Gd&&n&&n[Gd])}function jn(n,o){var f=typeof n;return o=o??C,!!o&&(f=="number"||f!="symbol"&&wi.test(n))&&n>-1&&n%1==0&&n<o}function qr(n,o,f){if(!Qt(f))return!1;var y=typeof o;return(y=="number"?Vr(f)&&jn(o,f.length):y=="string"&&o in f)?Vi(f[o],n):!1}function mh(n,o){if(it(n))return!1;var f=typeof n;return f=="number"||f=="symbol"||f=="boolean"||n==null||ci(n)?!0:Qe.test(n)||!St.test(n)||o!=null&&n in jt(o)}function Ty(n){var o=typeof n;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?n!=="__proto__":n===null}function yh(n){var o=su(n),f=O[o];if(typeof f!="function"||!(o in bt.prototype))return!1;if(n===f)return!0;var y=gh(f);return!!y&&n===y[0]}function Fy(n){return!!kd&&kd in n}var By=Fc?$n:Bh;function _o(n){var o=n&&n.constructor,f=typeof o=="function"&&o.prototype||_a;return n===f}function k0(n){return n===n&&!Qt(n)}function H0(n,o){return function(f){return f==null?!1:f[n]===o&&(o!==t||n in jt(f))}}function qy(n){var o=hu(n,function(y){return f.size===h&&f.clear(),y}),f=o.cache;return o}function Ly(n,o){var f=n[1],y=o[1],x=f|y,T=x<(K|J|m),G=y==m&&f==W||y==m&&f==N&&n[7].length<=o[8]||y==(m|N)&&o[7].length<=o[8]&&f==W;if(!(T||G))return n;y&K&&(n[2]=o[2],x|=f&K?0:j);var Y=o[3];if(Y){var Z=n[3];n[3]=Z?x0(Z,Y,o[4]):Y,n[4]=Z?os(n[3],g):o[4]}return Y=o[5],Y&&(Z=n[5],n[5]=Z?D0(Z,Y,o[6]):Y,n[6]=Z?os(n[5],g):o[6]),Y=o[7],Y&&(n[7]=Y),y&m&&(n[8]=n[8]==null?o[8]:Mr(n[8],o[8])),n[9]==null&&(n[9]=o[9]),n[0]=o[0],n[1]=x,n}function Uy(n){var o=[];if(n!=null)for(var f in jt(n))o.push(f);return o}function jy(n){return qc.call(n)}function K0(n,o,f){return o=fr(o===t?n.length-1:o,0),function(){for(var y=arguments,x=-1,T=fr(y.length-o,0),G=ie(T);++x<T;)G[x]=y[o+x];x=-1;for(var Y=ie(o+1);++x<o;)Y[x]=y[x];return Y[o]=f(G),pr(n,this,Y)}}function V0(n,o){return o.length<2?n:$s(n,xi(o,0,-1))}function $y(n,o){for(var f=n.length,y=Mr(o.length,f),x=Kr(n);y--;){var T=o[y];n[y]=jn(T,f)?x[T]:t}return n}function wh(n,o){if(!(o==="constructor"&&typeof n[o]=="function")&&o!="__proto__")return n[o]}var G0=J0(b0),Eo=rm||function(n,o){return wt.setTimeout(n,o)},_h=J0(fy);function W0(n,o,f){var y=o+"";return _h(n,Ny(y,zy(Py(y),f)))}function J0(n){var o=0,f=0;return function(){var y=am(),x=d-(y-f);if(f=y,x>0){if(++o>=ve)return arguments[0]}else o=0;return n.apply(t,arguments)}}function ou(n,o){var f=-1,y=n.length,x=y-1;for(o=o===t?y:o;++f<o;){var T=ih(f,x),G=n[T];n[T]=n[f],n[f]=G}return n.length=o,n}var Y0=qy(function(n){var o=[];return n.charCodeAt(0)===46&&o.push(""),n.replace(Xe,function(f,y,x,T){o.push(x?T.replace(zi,"$1"):y||f)}),o});function pn(n){if(typeof n=="string"||ci(n))return n;var o=n+"";return o=="0"&&1/n==-P?"-0":o}function ks(n){if(n!=null){try{return Bc.call(n)}catch{}try{return n+""}catch{}}return""}function zy(n,o){return Ei(he,function(f){var y="_."+f[0];o&f[1]&&!Cc(n,y)&&n.push(y)}),n.sort()}function Q0(n){if(n instanceof bt)return n.clone();var o=new Si(n.__wrapped__,n.__chain__);return o.__actions__=Kr(n.__actions__),o.__index__=n.__index__,o.__values__=n.__values__,o}function ky(n,o,f){(f?qr(n,o,f):o===t)?o=1:o=fr(ct(o),0);var y=n==null?0:n.length;if(!y||o<1)return[];for(var x=0,T=0,G=ie(kc(y/o));x<y;)G[T++]=xi(n,x,x+=o);return G}function Hy(n){for(var o=-1,f=n==null?0:n.length,y=0,x=[];++o<f;){var T=n[o];T&&(x[y++]=T)}return x}function Ky(){var n=arguments.length;if(!n)return[];for(var o=ie(n-1),f=arguments[0],y=n;y--;)o[y-1]=arguments[y];return as(it(f)?Kr(f):[f],Er(o,1))}var Vy=ht(function(n,o){return ir(n)?bo(n,Er(o,1,ir,!0)):[]}),Gy=ht(function(n,o){var f=Di(o);return ir(f)&&(f=t),ir(n)?bo(n,Er(o,1,ir,!0),je(f,2)):[]}),Wy=ht(function(n,o){var f=Di(o);return ir(f)&&(f=t),ir(n)?bo(n,Er(o,1,ir,!0),t,f):[]});function Jy(n,o,f){var y=n==null?0:n.length;return y?(o=f||o===t?1:ct(o),xi(n,o<0?0:o,y)):[]}function Yy(n,o,f){var y=n==null?0:n.length;return y?(o=f||o===t?1:ct(o),o=y-o,xi(n,0,o<0?0:o)):[]}function Qy(n,o){return n&&n.length?Zc(n,je(o,3),!0,!0):[]}function Xy(n,o){return n&&n.length?Zc(n,je(o,3),!0):[]}function Zy(n,o,f,y){var x=n==null?0:n.length;return x?(f&&typeof f!="number"&&qr(n,o,f)&&(f=0,y=x),Km(n,o,f,y)):[]}function X0(n,o,f){var y=n==null?0:n.length;if(!y)return-1;var x=f==null?0:ct(f);return x<0&&(x=fr(y+x,0)),Nc(n,je(o,3),x)}function Z0(n,o,f){var y=n==null?0:n.length;if(!y)return-1;var x=y-1;return f!==t&&(x=ct(f),x=f<0?fr(y+x,0):Mr(x,y-1)),Nc(n,je(o,3),x,!0)}function ep(n){var o=n==null?0:n.length;return o?Er(n,1):[]}function e3(n){var o=n==null?0:n.length;return o?Er(n,P):[]}function t3(n,o){var f=n==null?0:n.length;return f?(o=o===t?1:ct(o),Er(n,o)):[]}function r3(n){for(var o=-1,f=n==null?0:n.length,y={};++o<f;){var x=n[o];y[x[0]]=x[1]}return y}function tp(n){return n&&n.length?n[0]:t}function i3(n,o,f){var y=n==null?0:n.length;if(!y)return-1;var x=f==null?0:ct(f);return x<0&&(x=fr(y+x,0)),va(n,o,x)}function n3(n){var o=n==null?0:n.length;return o?xi(n,0,-1):[]}var s3=ht(function(n){var o=Wt(n,ch);return o.length&&o[0]===n[0]?Xf(o):[]}),a3=ht(function(n){var o=Di(n),f=Wt(n,ch);return o===Di(f)?o=t:f.pop(),f.length&&f[0]===n[0]?Xf(f,je(o,2)):[]}),o3=ht(function(n){var o=Di(n),f=Wt(n,ch);return o=typeof o=="function"?o:t,o&&f.pop(),f.length&&f[0]===n[0]?Xf(f,t,o):[]});function c3(n,o){return n==null?"":nm.call(n,o)}function Di(n){var o=n==null?0:n.length;return o?n[o-1]:t}function u3(n,o,f){var y=n==null?0:n.length;if(!y)return-1;var x=y;return f!==t&&(x=ct(f),x=x<0?fr(y+x,0):Mr(x,y-1)),o===o?z2(n,o,x):Nc(n,Fd,x,!0)}function f3(n,o){return n&&n.length?l0(n,ct(o)):t}var h3=ht(rp);function rp(n,o){return n&&n.length&&o&&o.length?rh(n,o):n}function l3(n,o,f){return n&&n.length&&o&&o.length?rh(n,o,je(f,2)):n}function d3(n,o,f){return n&&n.length&&o&&o.length?rh(n,o,t,f):n}var p3=Un(function(n,o){var f=n==null?0:n.length,y=Wf(n,o);return g0(n,Wt(o,function(x){return jn(x,f)?+x:x}).sort(I0)),y});function g3(n,o){var f=[];if(!(n&&n.length))return f;var y=-1,x=[],T=n.length;for(o=je(o,3);++y<T;){var G=n[y];o(G,y,n)&&(f.push(G),x.push(y))}return g0(n,x),f}function Eh(n){return n==null?n:cm.call(n)}function b3(n,o,f){var y=n==null?0:n.length;return y?(f&&typeof f!="number"&&qr(n,o,f)?(o=0,f=y):(o=o==null?0:ct(o),f=f===t?y:ct(f)),xi(n,o,f)):[]}function v3(n,o){return Xc(n,o)}function m3(n,o,f){return sh(n,o,je(f,2))}function y3(n,o){var f=n==null?0:n.length;if(f){var y=Xc(n,o);if(y<f&&Vi(n[y],o))return y}return-1}function w3(n,o){return Xc(n,o,!0)}function _3(n,o,f){return sh(n,o,je(f,2),!0)}function E3(n,o){var f=n==null?0:n.length;if(f){var y=Xc(n,o,!0)-1;if(Vi(n[y],o))return y}return-1}function A3(n){return n&&n.length?v0(n):[]}function S3(n,o){return n&&n.length?v0(n,je(o,2)):[]}function I3(n){var o=n==null?0:n.length;return o?xi(n,1,o):[]}function x3(n,o,f){return n&&n.length?(o=f||o===t?1:ct(o),xi(n,0,o<0?0:o)):[]}function D3(n,o,f){var y=n==null?0:n.length;return y?(o=f||o===t?1:ct(o),o=y-o,xi(n,o<0?0:o,y)):[]}function M3(n,o){return n&&n.length?Zc(n,je(o,3),!1,!0):[]}function P3(n,o){return n&&n.length?Zc(n,je(o,3)):[]}var O3=ht(function(n){return fs(Er(n,1,ir,!0))}),C3=ht(function(n){var o=Di(n);return ir(o)&&(o=t),fs(Er(n,1,ir,!0),je(o,2))}),N3=ht(function(n){var o=Di(n);return o=typeof o=="function"?o:t,fs(Er(n,1,ir,!0),t,o)});function R3(n){return n&&n.length?fs(n):[]}function T3(n,o){return n&&n.length?fs(n,je(o,2)):[]}function F3(n,o){return o=typeof o=="function"?o:t,n&&n.length?fs(n,t,o):[]}function Ah(n){if(!(n&&n.length))return[];var o=0;return n=ss(n,function(f){if(ir(f))return o=fr(f.length,o),!0}),jf(o,function(f){return Wt(n,qf(f))})}function ip(n,o){if(!(n&&n.length))return[];var f=Ah(n);return o==null?f:Wt(f,function(y){return pr(o,t,y)})}var B3=ht(function(n,o){return ir(n)?bo(n,o):[]}),q3=ht(function(n){return oh(ss(n,ir))}),L3=ht(function(n){var o=Di(n);return ir(o)&&(o=t),oh(ss(n,ir),je(o,2))}),U3=ht(function(n){var o=Di(n);return o=typeof o=="function"?o:t,oh(ss(n,ir),t,o)}),j3=ht(Ah);function $3(n,o){return _0(n||[],o||[],go)}function z3(n,o){return _0(n||[],o||[],yo)}var k3=ht(function(n){var o=n.length,f=o>1?n[o-1]:t;return f=typeof f=="function"?(n.pop(),f):t,ip(n,f)});function np(n){var o=O(n);return o.__chain__=!0,o}function H3(n,o){return o(n),n}function cu(n,o){return o(n)}var K3=Un(function(n){var o=n.length,f=o?n[0]:0,y=this.__wrapped__,x=function(T){return Wf(T,n)};return o>1||this.__actions__.length||!(y instanceof bt)||!jn(f)?this.thru(x):(y=y.slice(f,+f+(o?1:0)),y.__actions__.push({func:cu,args:[x],thisArg:t}),new Si(y,this.__chain__).thru(function(T){return o&&!T.length&&T.push(t),T}))});function V3(){return np(this)}function G3(){return new Si(this.value(),this.__chain__)}function W3(){this.__values__===t&&(this.__values__=mp(this.value()));var n=this.__index__>=this.__values__.length,o=n?t:this.__values__[this.__index__++];return{done:n,value:o}}function J3(){return this}function Y3(n){for(var o,f=this;f instanceof Gc;){var y=Q0(f);y.__index__=0,y.__values__=t,o?x.__wrapped__=y:o=y;var x=y;f=f.__wrapped__}return x.__wrapped__=n,o}function Q3(){var n=this.__wrapped__;if(n instanceof bt){var o=n;return this.__actions__.length&&(o=new bt(this)),o=o.reverse(),o.__actions__.push({func:cu,args:[Eh],thisArg:t}),new Si(o,this.__chain__)}return this.thru(Eh)}function X3(){return w0(this.__wrapped__,this.__actions__)}var Z3=eu(function(n,o,f){Rt.call(n,f)?++n[f]:qn(n,f,1)});function e6(n,o,f){var y=it(n)?Rd:Hm;return f&&qr(n,o,f)&&(o=t),y(n,je(o,3))}function t6(n,o){var f=it(n)?ss:i0;return f(n,je(o,3))}var r6=C0(X0),i6=C0(Z0);function n6(n,o){return Er(uu(n,o),1)}function s6(n,o){return Er(uu(n,o),P)}function a6(n,o,f){return f=f===t?1:ct(f),Er(uu(n,o),f)}function sp(n,o){var f=it(n)?Ei:us;return f(n,je(o,3))}function ap(n,o){var f=it(n)?I2:r0;return f(n,je(o,3))}var o6=eu(function(n,o,f){Rt.call(n,f)?n[f].push(o):qn(n,f,[o])});function c6(n,o,f,y){n=Vr(n)?n:Pa(n),f=f&&!y?ct(f):0;var x=n.length;return f<0&&(f=fr(x+f,0)),pu(n)?f<=x&&n.indexOf(o,f)>-1:!!x&&va(n,o,f)>-1}var u6=ht(function(n,o,f){var y=-1,x=typeof o=="function",T=Vr(n)?ie(n.length):[];return us(n,function(G){T[++y]=x?pr(o,G,f):vo(G,o,f)}),T}),f6=eu(function(n,o,f){qn(n,f,o)});function uu(n,o){var f=it(n)?Wt:u0;return f(n,je(o,3))}function h6(n,o,f,y){return n==null?[]:(it(o)||(o=o==null?[]:[o]),f=y?t:f,it(f)||(f=f==null?[]:[f]),d0(n,o,f))}var l6=eu(function(n,o,f){n[f?0:1].push(o)},function(){return[[],[]]});function d6(n,o,f){var y=it(n)?Ff:qd,x=arguments.length<3;return y(n,je(o,4),f,x,us)}function p6(n,o,f){var y=it(n)?x2:qd,x=arguments.length<3;return y(n,je(o,4),f,x,r0)}function g6(n,o){var f=it(n)?ss:i0;return f(n,lu(je(o,3)))}function b6(n){var o=it(n)?Xd:cy;return o(n)}function v6(n,o,f){(f?qr(n,o,f):o===t)?o=1:o=ct(o);var y=it(n)?Um:uy;return y(n,o)}function m6(n){var o=it(n)?jm:hy;return o(n)}function y6(n){if(n==null)return 0;if(Vr(n))return pu(n)?ya(n):n.length;var o=Pr(n);return o==oe||o==qe?n.size:eh(n).length}function w6(n,o,f){var y=it(n)?Bf:ly;return f&&qr(n,o,f)&&(o=t),y(n,je(o,3))}var _6=ht(function(n,o){if(n==null)return[];var f=o.length;return f>1&&qr(n,o[0],o[1])?o=[]:f>2&&qr(o[0],o[1],o[2])&&(o=[o[0]]),d0(n,Er(o,1),[])}),fu=tm||function(){return wt.Date.now()};function E6(n,o){if(typeof o!="function")throw new Ai(c);return n=ct(n),function(){if(--n<1)return o.apply(this,arguments)}}function op(n,o,f){return o=f?t:o,o=n&&o==null?n.length:o,Ln(n,m,t,t,t,t,o)}function cp(n,o){var f;if(typeof o!="function")throw new Ai(c);return n=ct(n),function(){return--n>0&&(f=o.apply(this,arguments)),n<=1&&(o=t),f}}var Sh=ht(function(n,o,f){var y=K;if(f.length){var x=os(f,Da(Sh));y|=U}return Ln(n,y,o,f,x)}),up=ht(function(n,o,f){var y=K|J;if(f.length){var x=os(f,Da(up));y|=U}return Ln(o,y,n,f,x)});function fp(n,o,f){o=f?t:o;var y=Ln(n,W,t,t,t,t,t,o);return y.placeholder=fp.placeholder,y}function hp(n,o,f){o=f?t:o;var y=Ln(n,B,t,t,t,t,t,o);return y.placeholder=hp.placeholder,y}function lp(n,o,f){var y,x,T,G,Y,Z,ce=0,ue=!1,de=!1,me=!0;if(typeof n!="function")throw new Ai(c);o=Mi(o)||0,Qt(f)&&(ue=!!f.leading,de="maxWait"in f,T=de?fr(Mi(f.maxWait)||0,o):T,me="trailing"in f?!!f.trailing:me);function Fe(nr){var Gi=y,kn=x;return y=x=t,ce=nr,G=n.apply(kn,Gi),G}function ke(nr){return ce=nr,Y=Eo(dt,o),ue?Fe(nr):G}function ft(nr){var Gi=nr-Z,kn=nr-ce,Cp=o-Gi;return de?Mr(Cp,T-kn):Cp}function He(nr){var Gi=nr-Z,kn=nr-ce;return Z===t||Gi>=o||Gi<0||de&&kn>=T}function dt(){var nr=fu();if(He(nr))return _t(nr);Y=Eo(dt,ft(nr))}function _t(nr){return Y=t,me&&y?Fe(nr):(y=x=t,G)}function ui(){Y!==t&&E0(Y),ce=0,y=Z=x=Y=t}function Lr(){return Y===t?G:_t(fu())}function fi(){var nr=fu(),Gi=He(nr);if(y=arguments,x=this,Z=nr,Gi){if(Y===t)return ke(Z);if(de)return E0(Y),Y=Eo(dt,o),Fe(Z)}return Y===t&&(Y=Eo(dt,o)),G}return fi.cancel=ui,fi.flush=Lr,fi}var A6=ht(function(n,o){return t0(n,1,o)}),S6=ht(function(n,o,f){return t0(n,Mi(o)||0,f)});function I6(n){return Ln(n,ne)}function hu(n,o){if(typeof n!="function"||o!=null&&typeof o!="function")throw new Ai(c);var f=function(){var y=arguments,x=o?o.apply(this,y):y[0],T=f.cache;if(T.has(x))return T.get(x);var G=n.apply(this,y);return f.cache=T.set(x,G)||T,G};return f.cache=new(hu.Cache||Bn),f}hu.Cache=Bn;function lu(n){if(typeof n!="function")throw new Ai(c);return function(){var o=arguments;switch(o.length){case 0:return!n.call(this);case 1:return!n.call(this,o[0]);case 2:return!n.call(this,o[0],o[1]);case 3:return!n.call(this,o[0],o[1],o[2])}return!n.apply(this,o)}}function x6(n){return cp(2,n)}var D6=dy(function(n,o){o=o.length==1&&it(o[0])?Wt(o[0],ai(je())):Wt(Er(o,1),ai(je()));var f=o.length;return ht(function(y){for(var x=-1,T=Mr(y.length,f);++x<T;)y[x]=o[x].call(this,y[x]);return pr(n,this,y)})}),Ih=ht(function(n,o){var f=os(o,Da(Ih));return Ln(n,U,t,o,f)}),dp=ht(function(n,o){var f=os(o,Da(dp));return Ln(n,H,t,o,f)}),M6=Un(function(n,o){return Ln(n,N,t,t,t,o)});function P6(n,o){if(typeof n!="function")throw new Ai(c);return o=o===t?o:ct(o),ht(n,o)}function O6(n,o){if(typeof n!="function")throw new Ai(c);return o=o==null?0:fr(ct(o),0),ht(function(f){var y=f[o],x=ls(f,0,o);return y&&as(x,y),pr(n,this,x)})}function C6(n,o,f){var y=!0,x=!0;if(typeof n!="function")throw new Ai(c);return Qt(f)&&(y="leading"in f?!!f.leading:y,x="trailing"in f?!!f.trailing:x),lp(n,o,{leading:y,maxWait:o,trailing:x})}function N6(n){return op(n,1)}function R6(n,o){return Ih(uh(o),n)}function T6(){if(!arguments.length)return[];var n=arguments[0];return it(n)?n:[n]}function F6(n){return Ii(n,E)}function B6(n,o){return o=typeof o=="function"?o:t,Ii(n,E,o)}function q6(n){return Ii(n,w|E)}function L6(n,o){return o=typeof o=="function"?o:t,Ii(n,w|E,o)}function U6(n,o){return o==null||e0(n,o,gr(o))}function Vi(n,o){return n===o||n!==n&&o!==o}var j6=nu(Qf),$6=nu(function(n,o){return n>=o}),Hs=a0(function(){return arguments}())?a0:function(n){return Xt(n)&&Rt.call(n,"callee")&&!Vd.call(n,"callee")},it=ie.isArray,z6=Fr?ai(Fr):Ym;function Vr(n){return n!=null&&du(n.length)&&!$n(n)}function ir(n){return Xt(n)&&Vr(n)}function k6(n){return n===!0||n===!1||Xt(n)&&Br(n)==$}var ds=im||Bh,H6=ki?ai(ki):Qm;function K6(n){return Xt(n)&&n.nodeType===1&&!Ao(n)}function V6(n){if(n==null)return!0;if(Vr(n)&&(it(n)||typeof n=="string"||typeof n.splice=="function"||ds(n)||Ma(n)||Hs(n)))return!n.length;var o=Pr(n);if(o==oe||o==qe)return!n.size;if(_o(n))return!eh(n).length;for(var f in n)if(Rt.call(n,f))return!1;return!0}function G6(n,o){return mo(n,o)}function W6(n,o,f){f=typeof f=="function"?f:t;var y=f?f(n,o):t;return y===t?mo(n,o,t,f):!!y}function xh(n){if(!Xt(n))return!1;var o=Br(n);return o==q||o==b||typeof n.message=="string"&&typeof n.name=="string"&&!Ao(n)}function J6(n){return typeof n=="number"&&Wd(n)}function $n(n){if(!Qt(n))return!1;var o=Br(n);return o==te||o==ae||o==L||o==$e}function pp(n){return typeof n=="number"&&n==ct(n)}function du(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=C}function Qt(n){var o=typeof n;return n!=null&&(o=="object"||o=="function")}function Xt(n){return n!=null&&typeof n=="object"}var gp=_i?ai(_i):Zm;function Y6(n,o){return n===o||Zf(n,o,bh(o))}function Q6(n,o,f){return f=typeof f=="function"?f:t,Zf(n,o,bh(o),f)}function X6(n){return bp(n)&&n!=+n}function Z6(n){if(By(n))throw new tt(a);return o0(n)}function ew(n){return n===null}function tw(n){return n==null}function bp(n){return typeof n=="number"||Xt(n)&&Br(n)==Me}function Ao(n){if(!Xt(n)||Br(n)!=Ie)return!1;var o=jc(n);if(o===null)return!0;var f=Rt.call(o,"constructor")&&o.constructor;return typeof f=="function"&&f instanceof f&&Bc.call(f)==Q2}var Dh=hn?ai(hn):ey;function rw(n){return pp(n)&&n>=-C&&n<=C}var vp=oo?ai(oo):ty;function pu(n){return typeof n=="string"||!it(n)&&Xt(n)&&Br(n)==_e}function ci(n){return typeof n=="symbol"||Xt(n)&&Br(n)==Ee}var Ma=Bs?ai(Bs):ry;function iw(n){return n===t}function nw(n){return Xt(n)&&Pr(n)==ye}function sw(n){return Xt(n)&&Br(n)==Ae}var aw=nu(th),ow=nu(function(n,o){return n<=o});function mp(n){if(!n)return[];if(Vr(n))return pu(n)?Hi(n):Kr(n);if(uo&&n[uo])return U2(n[uo]());var o=Pr(n),f=o==oe?zf:o==qe?Rc:Pa;return f(n)}function zn(n){if(!n)return n===0?n:0;if(n=Mi(n),n===P||n===-P){var o=n<0?-1:1;return o*F}return n===n?n:0}function ct(n){var o=zn(n),f=o%1;return o===o?f?o-f:o:0}function yp(n){return n?js(ct(n),0,v):0}function Mi(n){if(typeof n=="number")return n;if(ci(n))return M;if(Qt(n)){var o=typeof n.valueOf=="function"?n.valueOf():n;n=Qt(o)?o+"":o}if(typeof n!="string")return n===0?n:+n;n=Ld(n);var f=vi.test(n);return f||yi.test(n)?rt(n.slice(2),f?2:8):bi.test(n)?M:+n}function wp(n){return dn(n,Gr(n))}function cw(n){return n?js(ct(n),-C,C):n===0?n:0}function Mt(n){return n==null?"":oi(n)}var uw=Ia(function(n,o){if(_o(o)||Vr(o)){dn(o,gr(o),n);return}for(var f in o)Rt.call(o,f)&&go(n,f,o[f])}),_p=Ia(function(n,o){dn(o,Gr(o),n)}),gu=Ia(function(n,o,f,y){dn(o,Gr(o),n,y)}),fw=Ia(function(n,o,f,y){dn(o,gr(o),n,y)}),hw=Un(Wf);function lw(n,o){var f=Sa(n);return o==null?f:Zd(f,o)}var dw=ht(function(n,o){n=jt(n);var f=-1,y=o.length,x=y>2?o[2]:t;for(x&&qr(o[0],o[1],x)&&(y=1);++f<y;)for(var T=o[f],G=Gr(T),Y=-1,Z=G.length;++Y<Z;){var ce=G[Y],ue=n[ce];(ue===t||Vi(ue,_a[ce])&&!Rt.call(n,ce))&&(n[ce]=T[ce])}return n}),pw=ht(function(n){return n.push(t,L0),pr(Ep,t,n)});function gw(n,o){return Td(n,je(o,3),ln)}function bw(n,o){return Td(n,je(o,3),Yf)}function vw(n,o){return n==null?n:Jf(n,je(o,3),Gr)}function mw(n,o){return n==null?n:n0(n,je(o,3),Gr)}function yw(n,o){return n&&ln(n,je(o,3))}function ww(n,o){return n&&Yf(n,je(o,3))}function _w(n){return n==null?[]:Yc(n,gr(n))}function Ew(n){return n==null?[]:Yc(n,Gr(n))}function Mh(n,o,f){var y=n==null?t:$s(n,o);return y===t?f:y}function Aw(n,o){return n!=null&&$0(n,o,Vm)}function Ph(n,o){return n!=null&&$0(n,o,Gm)}var Sw=R0(function(n,o,f){o!=null&&typeof o.toString!="function"&&(o=qc.call(o)),n[o]=f},Ch(Wr)),Iw=R0(function(n,o,f){o!=null&&typeof o.toString!="function"&&(o=qc.call(o)),Rt.call(n,o)?n[o].push(f):n[o]=[f]},je),xw=ht(vo);function gr(n){return Vr(n)?Qd(n):eh(n)}function Gr(n){return Vr(n)?Qd(n,!0):iy(n)}function Dw(n,o){var f={};return o=je(o,3),ln(n,function(y,x,T){qn(f,o(y,x,T),y)}),f}function Mw(n,o){var f={};return o=je(o,3),ln(n,function(y,x,T){qn(f,x,o(y,x,T))}),f}var Pw=Ia(function(n,o,f){Qc(n,o,f)}),Ep=Ia(function(n,o,f,y){Qc(n,o,f,y)}),Ow=Un(function(n,o){var f={};if(n==null)return f;var y=!1;o=Wt(o,function(T){return T=hs(T,n),y||(y=T.length>1),T}),dn(n,ph(n),f),y&&(f=Ii(f,w|S|E,Sy));for(var x=o.length;x--;)ah(f,o[x]);return f});function Cw(n,o){return Ap(n,lu(je(o)))}var Nw=Un(function(n,o){return n==null?{}:sy(n,o)});function Ap(n,o){if(n==null)return{};var f=Wt(ph(n),function(y){return[y]});return o=je(o),p0(n,f,function(y,x){return o(y,x[0])})}function Rw(n,o,f){o=hs(o,n);var y=-1,x=o.length;for(x||(x=1,n=t);++y<x;){var T=n==null?t:n[pn(o[y])];T===t&&(y=x,T=f),n=$n(T)?T.call(n):T}return n}function Tw(n,o,f){return n==null?n:yo(n,o,f)}function Fw(n,o,f,y){return y=typeof y=="function"?y:t,n==null?n:yo(n,o,f,y)}var Sp=B0(gr),Ip=B0(Gr);function Bw(n,o,f){var y=it(n),x=y||ds(n)||Ma(n);if(o=je(o,4),f==null){var T=n&&n.constructor;x?f=y?new T:[]:Qt(n)?f=$n(T)?Sa(jc(n)):{}:f={}}return(x?Ei:ln)(n,function(G,Y,Z){return o(f,G,Y,Z)}),f}function qw(n,o){return n==null?!0:ah(n,o)}function Lw(n,o,f){return n==null?n:y0(n,o,uh(f))}function Uw(n,o,f,y){return y=typeof y=="function"?y:t,n==null?n:y0(n,o,uh(f),y)}function Pa(n){return n==null?[]:$f(n,gr(n))}function jw(n){return n==null?[]:$f(n,Gr(n))}function $w(n,o,f){return f===t&&(f=o,o=t),f!==t&&(f=Mi(f),f=f===f?f:0),o!==t&&(o=Mi(o),o=o===o?o:0),js(Mi(n),o,f)}function zw(n,o,f){return o=zn(o),f===t?(f=o,o=0):f=zn(f),n=Mi(n),Wm(n,o,f)}function kw(n,o,f){if(f&&typeof f!="boolean"&&qr(n,o,f)&&(o=f=t),f===t&&(typeof o=="boolean"?(f=o,o=t):typeof n=="boolean"&&(f=n,n=t)),n===t&&o===t?(n=0,o=1):(n=zn(n),o===t?(o=n,n=0):o=zn(o)),n>o){var y=n;n=o,o=y}if(f||n%1||o%1){var x=Jd();return Mr(n+x*(o-n+Lt("1e-"+((x+"").length-1))),o)}return ih(n,o)}var Hw=xa(function(n,o,f){return o=o.toLowerCase(),n+(f?xp(o):o)});function xp(n){return Oh(Mt(n).toLowerCase())}function Dp(n){return n=Mt(n),n&&n.replace(dr,T2).replace(Nf,"")}function Kw(n,o,f){n=Mt(n),o=oi(o);var y=n.length;f=f===t?y:js(ct(f),0,y);var x=f;return f-=o.length,f>=0&&n.slice(f,x)==o}function Vw(n){return n=Mt(n),n&&ze.test(n)?n.replace(Rr,F2):n}function Gw(n){return n=Mt(n),n&&Ze.test(n)?n.replace(Dt,"\\$&"):n}var Ww=xa(function(n,o,f){return n+(f?"-":"")+o.toLowerCase()}),Jw=xa(function(n,o,f){return n+(f?" ":"")+o.toLowerCase()}),Yw=O0("toLowerCase");function Qw(n,o,f){n=Mt(n),o=ct(o);var y=o?ya(n):0;if(!o||y>=o)return n;var x=(o-y)/2;return iu(Hc(x),f)+n+iu(kc(x),f)}function Xw(n,o,f){n=Mt(n),o=ct(o);var y=o?ya(n):0;return o&&y<o?n+iu(o-y,f):n}function Zw(n,o,f){n=Mt(n),o=ct(o);var y=o?ya(n):0;return o&&y<o?iu(o-y,f)+n:n}function e5(n,o,f){return f||o==null?o=0:o&&(o=+o),om(Mt(n).replace(Je,""),o||0)}function t5(n,o,f){return(f?qr(n,o,f):o===t)?o=1:o=ct(o),nh(Mt(n),o)}function r5(){var n=arguments,o=Mt(n[0]);return n.length<3?o:o.replace(n[1],n[2])}var i5=xa(function(n,o,f){return n+(f?"_":"")+o.toLowerCase()});function n5(n,o,f){return f&&typeof f!="number"&&qr(n,o,f)&&(o=f=t),f=f===t?v:f>>>0,f?(n=Mt(n),n&&(typeof o=="string"||o!=null&&!Dh(o))&&(o=oi(o),!o&&ma(n))?ls(Hi(n),0,f):n.split(o,f)):[]}var s5=xa(function(n,o,f){return n+(f?" ":"")+Oh(o)});function a5(n,o,f){return n=Mt(n),f=f==null?0:js(ct(f),0,n.length),o=oi(o),n.slice(f,f+o.length)==o}function o5(n,o,f){var y=O.templateSettings;f&&qr(n,o,f)&&(o=t),n=Mt(n),o=gu({},o,y,q0);var x=gu({},o.imports,y.imports,q0),T=gr(x),G=$f(x,T),Y,Z,ce=0,ue=o.interpolate||on,de="__p += '",me=kf((o.escape||on).source+"|"+ue.source+"|"+(ue===Ke?Nt:on).source+"|"+(o.evaluate||on).source+"|$","g"),Fe="//# sourceURL="+(Rt.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Rf+"]")+`
`;n.replace(me,function(He,dt,_t,ui,Lr,fi){return _t||(_t=ui),de+=n.slice(ce,fi).replace(Is,B2),dt&&(Y=!0,de+=`' +
__e(`+dt+`) +
'`),Lr&&(Z=!0,de+=`';
`+Lr+`;
__p += '`),_t&&(de+=`' +
((__t = (`+_t+`)) == null ? '' : __t) +
'`),ce=fi+He.length,He}),de+=`';
`;var ke=Rt.call(o,"variable")&&o.variable;if(!ke)de=`with (obj) {
`+de+`
}
`;else if(Ct.test(ke))throw new tt(u);de=(Z?de.replace(gt,""):de).replace(Yt,"$1").replace(yt,"$1;"),de="function("+(ke||"obj")+`) {
`+(ke?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Y?", __e = _.escape":"")+(Z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+de+`return __p
}`;var ft=Pp(function(){return It(T,Fe+"return "+de).apply(t,G)});if(ft.source=de,xh(ft))throw ft;return ft}function c5(n){return Mt(n).toLowerCase()}function u5(n){return Mt(n).toUpperCase()}function f5(n,o,f){if(n=Mt(n),n&&(f||o===t))return Ld(n);if(!n||!(o=oi(o)))return n;var y=Hi(n),x=Hi(o),T=Ud(y,x),G=jd(y,x)+1;return ls(y,T,G).join("")}function h5(n,o,f){if(n=Mt(n),n&&(f||o===t))return n.slice(0,zd(n)+1);if(!n||!(o=oi(o)))return n;var y=Hi(n),x=jd(y,Hi(o))+1;return ls(y,0,x).join("")}function l5(n,o,f){if(n=Mt(n),n&&(f||o===t))return n.replace(Je,"");if(!n||!(o=oi(o)))return n;var y=Hi(n),x=Ud(y,Hi(o));return ls(y,x).join("")}function d5(n,o){var f=le,y=pe;if(Qt(o)){var x="separator"in o?o.separator:x;f="length"in o?ct(o.length):f,y="omission"in o?oi(o.omission):y}n=Mt(n);var T=n.length;if(ma(n)){var G=Hi(n);T=G.length}if(f>=T)return n;var Y=f-ya(y);if(Y<1)return y;var Z=G?ls(G,0,Y).join(""):n.slice(0,Y);if(x===t)return Z+y;if(G&&(Y+=Z.length-Y),Dh(x)){if(n.slice(Y).search(x)){var ce,ue=Z;for(x.global||(x=kf(x.source,Mt(lt.exec(x))+"g")),x.lastIndex=0;ce=x.exec(ue);)var de=ce.index;Z=Z.slice(0,de===t?Y:de)}}else if(n.indexOf(oi(x),Y)!=Y){var me=Z.lastIndexOf(x);me>-1&&(Z=Z.slice(0,me))}return Z+y}function p5(n){return n=Mt(n),n&&Ge.test(n)?n.replace(Et,k2):n}var g5=xa(function(n,o,f){return n+(f?" ":"")+o.toUpperCase()}),Oh=O0("toUpperCase");function Mp(n,o,f){return n=Mt(n),o=f?t:o,o===t?L2(n)?V2(n):P2(n):n.match(o)||[]}var Pp=ht(function(n,o){try{return pr(n,t,o)}catch(f){return xh(f)?f:new tt(f)}}),b5=Un(function(n,o){return Ei(o,function(f){f=pn(f),qn(n,f,Sh(n[f],n))}),n});function v5(n){var o=n==null?0:n.length,f=je();return n=o?Wt(n,function(y){if(typeof y[1]!="function")throw new Ai(c);return[f(y[0]),y[1]]}):[],ht(function(y){for(var x=-1;++x<o;){var T=n[x];if(pr(T[0],this,y))return pr(T[1],this,y)}})}function m5(n){return km(Ii(n,w))}function Ch(n){return function(){return n}}function y5(n,o){return n==null||n!==n?o:n}var w5=N0(),_5=N0(!0);function Wr(n){return n}function Nh(n){return c0(typeof n=="function"?n:Ii(n,w))}function E5(n){return f0(Ii(n,w))}function A5(n,o){return h0(n,Ii(o,w))}var S5=ht(function(n,o){return function(f){return vo(f,n,o)}}),I5=ht(function(n,o){return function(f){return vo(n,f,o)}});function Rh(n,o,f){var y=gr(o),x=Yc(o,y);f==null&&!(Qt(o)&&(x.length||!y.length))&&(f=o,o=n,n=this,x=Yc(o,gr(o)));var T=!(Qt(f)&&"chain"in f)||!!f.chain,G=$n(n);return Ei(x,function(Y){var Z=o[Y];n[Y]=Z,G&&(n.prototype[Y]=function(){var ce=this.__chain__;if(T||ce){var ue=n(this.__wrapped__),de=ue.__actions__=Kr(this.__actions__);return de.push({func:Z,args:arguments,thisArg:n}),ue.__chain__=ce,ue}return Z.apply(n,as([this.value()],arguments))})}),n}function x5(){return wt._===this&&(wt._=X2),this}function Th(){}function D5(n){return n=ct(n),ht(function(o){return l0(o,n)})}var M5=hh(Wt),P5=hh(Rd),O5=hh(Bf);function Op(n){return mh(n)?qf(pn(n)):ay(n)}function C5(n){return function(o){return n==null?t:$s(n,o)}}var N5=T0(),R5=T0(!0);function Fh(){return[]}function Bh(){return!1}function T5(){return{}}function F5(){return""}function B5(){return!0}function q5(n,o){if(n=ct(n),n<1||n>C)return[];var f=v,y=Mr(n,v);o=je(o),n-=v;for(var x=jf(y,o);++f<n;)o(f);return x}function L5(n){return it(n)?Wt(n,pn):ci(n)?[n]:Kr(Y0(Mt(n)))}function U5(n){var o=++Y2;return Mt(n)+o}var j5=ru(function(n,o){return n+o},0),$5=lh("ceil"),z5=ru(function(n,o){return n/o},1),k5=lh("floor");function H5(n){return n&&n.length?Jc(n,Wr,Qf):t}function K5(n,o){return n&&n.length?Jc(n,je(o,2),Qf):t}function V5(n){return Bd(n,Wr)}function G5(n,o){return Bd(n,je(o,2))}function W5(n){return n&&n.length?Jc(n,Wr,th):t}function J5(n,o){return n&&n.length?Jc(n,je(o,2),th):t}var Y5=ru(function(n,o){return n*o},1),Q5=lh("round"),X5=ru(function(n,o){return n-o},0);function Z5(n){return n&&n.length?Uf(n,Wr):0}function e8(n,o){return n&&n.length?Uf(n,je(o,2)):0}return O.after=E6,O.ary=op,O.assign=uw,O.assignIn=_p,O.assignInWith=gu,O.assignWith=fw,O.at=hw,O.before=cp,O.bind=Sh,O.bindAll=b5,O.bindKey=up,O.castArray=T6,O.chain=np,O.chunk=ky,O.compact=Hy,O.concat=Ky,O.cond=v5,O.conforms=m5,O.constant=Ch,O.countBy=Z3,O.create=lw,O.curry=fp,O.curryRight=hp,O.debounce=lp,O.defaults=dw,O.defaultsDeep=pw,O.defer=A6,O.delay=S6,O.difference=Vy,O.differenceBy=Gy,O.differenceWith=Wy,O.drop=Jy,O.dropRight=Yy,O.dropRightWhile=Qy,O.dropWhile=Xy,O.fill=Zy,O.filter=t6,O.flatMap=n6,O.flatMapDeep=s6,O.flatMapDepth=a6,O.flatten=ep,O.flattenDeep=e3,O.flattenDepth=t3,O.flip=I6,O.flow=w5,O.flowRight=_5,O.fromPairs=r3,O.functions=_w,O.functionsIn=Ew,O.groupBy=o6,O.initial=n3,O.intersection=s3,O.intersectionBy=a3,O.intersectionWith=o3,O.invert=Sw,O.invertBy=Iw,O.invokeMap=u6,O.iteratee=Nh,O.keyBy=f6,O.keys=gr,O.keysIn=Gr,O.map=uu,O.mapKeys=Dw,O.mapValues=Mw,O.matches=E5,O.matchesProperty=A5,O.memoize=hu,O.merge=Pw,O.mergeWith=Ep,O.method=S5,O.methodOf=I5,O.mixin=Rh,O.negate=lu,O.nthArg=D5,O.omit=Ow,O.omitBy=Cw,O.once=x6,O.orderBy=h6,O.over=M5,O.overArgs=D6,O.overEvery=P5,O.overSome=O5,O.partial=Ih,O.partialRight=dp,O.partition=l6,O.pick=Nw,O.pickBy=Ap,O.property=Op,O.propertyOf=C5,O.pull=h3,O.pullAll=rp,O.pullAllBy=l3,O.pullAllWith=d3,O.pullAt=p3,O.range=N5,O.rangeRight=R5,O.rearg=M6,O.reject=g6,O.remove=g3,O.rest=P6,O.reverse=Eh,O.sampleSize=v6,O.set=Tw,O.setWith=Fw,O.shuffle=m6,O.slice=b3,O.sortBy=_6,O.sortedUniq=A3,O.sortedUniqBy=S3,O.split=n5,O.spread=O6,O.tail=I3,O.take=x3,O.takeRight=D3,O.takeRightWhile=M3,O.takeWhile=P3,O.tap=H3,O.throttle=C6,O.thru=cu,O.toArray=mp,O.toPairs=Sp,O.toPairsIn=Ip,O.toPath=L5,O.toPlainObject=wp,O.transform=Bw,O.unary=N6,O.union=O3,O.unionBy=C3,O.unionWith=N3,O.uniq=R3,O.uniqBy=T3,O.uniqWith=F3,O.unset=qw,O.unzip=Ah,O.unzipWith=ip,O.update=Lw,O.updateWith=Uw,O.values=Pa,O.valuesIn=jw,O.without=B3,O.words=Mp,O.wrap=R6,O.xor=q3,O.xorBy=L3,O.xorWith=U3,O.zip=j3,O.zipObject=$3,O.zipObjectDeep=z3,O.zipWith=k3,O.entries=Sp,O.entriesIn=Ip,O.extend=_p,O.extendWith=gu,Rh(O,O),O.add=j5,O.attempt=Pp,O.camelCase=Hw,O.capitalize=xp,O.ceil=$5,O.clamp=$w,O.clone=F6,O.cloneDeep=q6,O.cloneDeepWith=L6,O.cloneWith=B6,O.conformsTo=U6,O.deburr=Dp,O.defaultTo=y5,O.divide=z5,O.endsWith=Kw,O.eq=Vi,O.escape=Vw,O.escapeRegExp=Gw,O.every=e6,O.find=r6,O.findIndex=X0,O.findKey=gw,O.findLast=i6,O.findLastIndex=Z0,O.findLastKey=bw,O.floor=k5,O.forEach=sp,O.forEachRight=ap,O.forIn=vw,O.forInRight=mw,O.forOwn=yw,O.forOwnRight=ww,O.get=Mh,O.gt=j6,O.gte=$6,O.has=Aw,O.hasIn=Ph,O.head=tp,O.identity=Wr,O.includes=c6,O.indexOf=i3,O.inRange=zw,O.invoke=xw,O.isArguments=Hs,O.isArray=it,O.isArrayBuffer=z6,O.isArrayLike=Vr,O.isArrayLikeObject=ir,O.isBoolean=k6,O.isBuffer=ds,O.isDate=H6,O.isElement=K6,O.isEmpty=V6,O.isEqual=G6,O.isEqualWith=W6,O.isError=xh,O.isFinite=J6,O.isFunction=$n,O.isInteger=pp,O.isLength=du,O.isMap=gp,O.isMatch=Y6,O.isMatchWith=Q6,O.isNaN=X6,O.isNative=Z6,O.isNil=tw,O.isNull=ew,O.isNumber=bp,O.isObject=Qt,O.isObjectLike=Xt,O.isPlainObject=Ao,O.isRegExp=Dh,O.isSafeInteger=rw,O.isSet=vp,O.isString=pu,O.isSymbol=ci,O.isTypedArray=Ma,O.isUndefined=iw,O.isWeakMap=nw,O.isWeakSet=sw,O.join=c3,O.kebabCase=Ww,O.last=Di,O.lastIndexOf=u3,O.lowerCase=Jw,O.lowerFirst=Yw,O.lt=aw,O.lte=ow,O.max=H5,O.maxBy=K5,O.mean=V5,O.meanBy=G5,O.min=W5,O.minBy=J5,O.stubArray=Fh,O.stubFalse=Bh,O.stubObject=T5,O.stubString=F5,O.stubTrue=B5,O.multiply=Y5,O.nth=f3,O.noConflict=x5,O.noop=Th,O.now=fu,O.pad=Qw,O.padEnd=Xw,O.padStart=Zw,O.parseInt=e5,O.random=kw,O.reduce=d6,O.reduceRight=p6,O.repeat=t5,O.replace=r5,O.result=Rw,O.round=Q5,O.runInContext=X,O.sample=b6,O.size=y6,O.snakeCase=i5,O.some=w6,O.sortedIndex=v3,O.sortedIndexBy=m3,O.sortedIndexOf=y3,O.sortedLastIndex=w3,O.sortedLastIndexBy=_3,O.sortedLastIndexOf=E3,O.startCase=s5,O.startsWith=a5,O.subtract=X5,O.sum=Z5,O.sumBy=e8,O.template=o5,O.times=q5,O.toFinite=zn,O.toInteger=ct,O.toLength=yp,O.toLower=c5,O.toNumber=Mi,O.toSafeInteger=cw,O.toString=Mt,O.toUpper=u5,O.trim=f5,O.trimEnd=h5,O.trimStart=l5,O.truncate=d5,O.unescape=p5,O.uniqueId=U5,O.upperCase=g5,O.upperFirst=Oh,O.each=sp,O.eachRight=ap,O.first=tp,Rh(O,function(){var n={};return ln(O,function(o,f){Rt.call(O.prototype,f)||(n[f]=o)}),n}(),{chain:!1}),O.VERSION=i,Ei(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){O[n].placeholder=O}),Ei(["drop","take"],function(n,o){bt.prototype[n]=function(f){f=f===t?1:fr(ct(f),0);var y=this.__filtered__&&!o?new bt(this):this.clone();return y.__filtered__?y.__takeCount__=Mr(f,y.__takeCount__):y.__views__.push({size:Mr(f,v),type:n+(y.__dir__<0?"Right":"")}),y},bt.prototype[n+"Right"]=function(f){return this.reverse()[n](f).reverse()}}),Ei(["filter","map","takeWhile"],function(n,o){var f=o+1,y=f==p||f==D;bt.prototype[n]=function(x){var T=this.clone();return T.__iteratees__.push({iteratee:je(x,3),type:f}),T.__filtered__=T.__filtered__||y,T}}),Ei(["head","last"],function(n,o){var f="take"+(o?"Right":"");bt.prototype[n]=function(){return this[f](1).value()[0]}}),Ei(["initial","tail"],function(n,o){var f="drop"+(o?"":"Right");bt.prototype[n]=function(){return this.__filtered__?new bt(this):this[f](1)}}),bt.prototype.compact=function(){return this.filter(Wr)},bt.prototype.find=function(n){return this.filter(n).head()},bt.prototype.findLast=function(n){return this.reverse().find(n)},bt.prototype.invokeMap=ht(function(n,o){return typeof n=="function"?new bt(this):this.map(function(f){return vo(f,n,o)})}),bt.prototype.reject=function(n){return this.filter(lu(je(n)))},bt.prototype.slice=function(n,o){n=ct(n);var f=this;return f.__filtered__&&(n>0||o<0)?new bt(f):(n<0?f=f.takeRight(-n):n&&(f=f.drop(n)),o!==t&&(o=ct(o),f=o<0?f.dropRight(-o):f.take(o-n)),f)},bt.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},bt.prototype.toArray=function(){return this.take(v)},ln(bt.prototype,function(n,o){var f=/^(?:filter|find|map|reject)|While$/.test(o),y=/^(?:head|last)$/.test(o),x=O[y?"take"+(o=="last"?"Right":""):o],T=y||/^find/.test(o);x&&(O.prototype[o]=function(){var G=this.__wrapped__,Y=y?[1]:arguments,Z=G instanceof bt,ce=Y[0],ue=Z||it(G),de=function(dt){var _t=x.apply(O,as([dt],Y));return y&&me?_t[0]:_t};ue&&f&&typeof ce=="function"&&ce.length!=1&&(Z=ue=!1);var me=this.__chain__,Fe=!!this.__actions__.length,ke=T&&!me,ft=Z&&!Fe;if(!T&&ue){G=ft?G:new bt(this);var He=n.apply(G,Y);return He.__actions__.push({func:cu,args:[de],thisArg:t}),new Si(He,me)}return ke&&ft?n.apply(this,Y):(He=this.thru(de),ke?y?He.value()[0]:He.value():He)})}),Ei(["pop","push","shift","sort","splice","unshift"],function(n){var o=Tc[n],f=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",y=/^(?:pop|shift)$/.test(n);O.prototype[n]=function(){var x=arguments;if(y&&!this.__chain__){var T=this.value();return o.apply(it(T)?T:[],x)}return this[f](function(G){return o.apply(it(G)?G:[],x)})}}),ln(bt.prototype,function(n,o){var f=O[o];if(f){var y=f.name+"";Rt.call(Aa,y)||(Aa[y]=[]),Aa[y].push({name:o,func:f})}}),Aa[tu(t,J).name]=[{name:"wrapper",func:t}],bt.prototype.clone=pm,bt.prototype.reverse=gm,bt.prototype.value=bm,O.prototype.at=K3,O.prototype.chain=V3,O.prototype.commit=G3,O.prototype.next=W3,O.prototype.plant=Y3,O.prototype.reverse=Q3,O.prototype.toJSON=O.prototype.valueOf=O.prototype.value=X3,O.prototype.first=O.prototype.head,uo&&(O.prototype[uo]=J3),O},wa=G2();rr?((rr.exports=wa)._=wa,Ut._=wa):wt._=wa}).call(Fo)})(Ql,Ql.exports);var tC=Object.defineProperty,rC=Object.defineProperties,iC=Object.getOwnPropertyDescriptors,Wg=Object.getOwnPropertySymbols,nC=Object.prototype.hasOwnProperty,sC=Object.prototype.propertyIsEnumerable,Jg=(r,e,t)=>e in r?tC(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Iu=(r,e)=>{for(var t in e||(e={}))nC.call(e,t)&&Jg(r,t,e[t]);if(Wg)for(var t of Wg(e))sC.call(e,t)&&Jg(r,t,e[t]);return r},aC=(r,e)=>rC(r,iC(e));function nn(r,e,t){var i;const s=Uo(r);return((i=e.rpcMap)==null?void 0:i[s.reference])||`${_2}?chainId=${s.namespace}:${s.reference}&projectId=${t}`}function la(r){return r.includes(":")?r.split(":")[1]:r}function E2(r){return r.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function oC(r,e){const t=Object.keys(e.namespaces).filter(s=>s.includes(r));if(!t.length)return[];const i=[];return t.forEach(s=>{const a=e.namespaces[s].accounts;i.push(...a)}),i}function ml(r={},e={}){const t=Yg(r),i=Yg(e);return Ql.exports.merge(t,i)}function Yg(r){var e,t,i,s;const a={};if(!Yo(r))return a;for(const[c,u]of Object.entries(r)){const l=Ed(c)?[c]:u.chains,h=u.methods||[],g=u.events||[],w=u.rpcMap||{},S=Lo(c);a[S]=aC(Iu(Iu({},a[S]),u),{chains:Mu(l,(e=a[S])==null?void 0:e.chains),methods:Mu(h,(t=a[S])==null?void 0:t.methods),events:Mu(g,(i=a[S])==null?void 0:i.events),rpcMap:Iu(Iu({},w),(s=a[S])==null?void 0:s.rpcMap)})}return a}function cC(r){return r.includes(":")?r.split(":")[2]:r}function Qg(r){const e={};for(const[t,i]of Object.entries(r)){const s=i.methods||[],a=i.events||[],c=i.accounts||[],u=Ed(t)?[t]:i.chains?i.chains:E2(i.accounts);e[t]={chains:u,methods:s,events:a,accounts:c}}return e}function yl(r){return typeof r=="number"?r:r.includes("0x")?parseInt(r,16):(r=r.includes(":")?r.split(":")[1]:r,isNaN(Number(r))?r:Number(r))}const A2={},Pt=r=>A2[r],wl=(r,e)=>{A2[r]=e};class uC{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=la(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||nn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new sn(new Rn(i,Pt("disableProviderPing")))}}var fC=Object.defineProperty,hC=Object.defineProperties,lC=Object.getOwnPropertyDescriptors,Xg=Object.getOwnPropertySymbols,dC=Object.prototype.hasOwnProperty,pC=Object.prototype.propertyIsEnumerable,Zg=(r,e,t)=>e in r?fC(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,eb=(r,e)=>{for(var t in e||(e={}))dC.call(e,t)&&Zg(r,t,e[t]);if(Xg)for(var t of Xg(e))pC.call(e,t)&&Zg(r,t,e[t]);return r},tb=(r,e)=>hC(r,lC(e));class gC{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const i=t||nn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new sn(new Rn(i,Pt("disableProviderPing")))}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=parseInt(la(t));e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,i;let s=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const a=parseInt(s,16);if(this.isChainApproved(a))this.setDefaultChain(`${a}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${a}`);else throw new Error(`Failed to switch to chain 'eip155:${a}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,i,s;const a=(i=(t=e.request)==null?void 0:t.params)==null?void 0:i[0];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const c=this.client.session.get(e.topic),u=((s=c?.sessionProperties)==null?void 0:s.capabilities)||{};if(u!=null&&u[a])return u?.[a];const l=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:tb(eb({},c.sessionProperties||{}),{capabilities:tb(eb({},u||{}),{[a]:l})})})}catch(h){console.warn("Failed to update session with capabilities",h)}return l}async getCallStatus(e){var t,i;const s=this.client.session.get(e.topic),a=(t=s.sessionProperties)==null?void 0:t.bundler_name;if(a){const u=this.getBundlerUrl(e.chainId,a);try{return await this.getUserOperationReceipt(u,e)}catch(l){console.warn("Failed to fetch call status from bundler",l,u)}}const c=(i=s.sessionProperties)==null?void 0:i.bundler_url;if(c)try{return await this.getUserOperationReceipt(c,e)}catch(u){console.warn("Failed to fetch call status from custom bundler",u,c)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var i;const s=new URL(e),a=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_s("eth_getUserOperationReceipt",[(i=t.request.params)==null?void 0:i[0]]))});if(!a.ok)throw new Error(`Failed to fetch user operation receipt - ${a.status}`);return await a.json()}getBundlerUrl(e,t){return`${eC}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}class bC{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=la(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||nn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new sn(new Rn(i,Pt("disableProviderPing")))}}class vC{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=la(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||nn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new sn(new Rn(i,Pt("disableProviderPing")))}}class mC{constructor(e){this.name="algorand",this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||nn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||nn(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new sn(new Rn(i,Pt("disableProviderPing")))}}class yC{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const i=this.getCardanoRPCUrl(t),s=la(t);e[s]=this.createHttpProvider(s,i)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||this.getCardanoRPCUrl(e);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new sn(new Rn(i,Pt("disableProviderPing")))}}class wC{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=la(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||nn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new sn(new Rn(i,Pt("disableProviderPing")))}}class _C{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=la(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||nn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new sn(new Rn(i,Pt("disableProviderPing")))}}class EC{constructor(e){this.name="near",this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||nn(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||nn(e,this.namespace);return typeof i>"u"?void 0:new sn(new Rn(i,Pt("disableProviderPing")))}}class AC{constructor(e){this.name=Ba,this.namespace=e.namespace,this.events=Pt("events"),this.client=Pt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(an.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){var e,t;const i={};return(t=(e=this.namespace)==null?void 0:e.accounts)==null||t.forEach(s=>{const a=Uo(s);i[`${a.namespace}:${a.reference}`]=this.createHttpProvider(s)}),i}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||nn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new sn(new Rn(i,Pt("disableProviderPing")))}}var SC=Object.defineProperty,IC=Object.defineProperties,xC=Object.getOwnPropertyDescriptors,rb=Object.getOwnPropertySymbols,DC=Object.prototype.hasOwnProperty,MC=Object.prototype.propertyIsEnumerable,ib=(r,e,t)=>e in r?SC(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,xu=(r,e)=>{for(var t in e||(e={}))DC.call(e,t)&&ib(r,t,e[t]);if(rb)for(var t of rb(e))MC.call(e,t)&&ib(r,t,e[t]);return r},_l=(r,e)=>IC(r,xC(e));class Cd{constructor(e){this.events=new rd,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:hc(Ef({level:e?.logger||Vg})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new Cd(e);return await t.initialize(),t}async request(e,t,i){const[s,a]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:xu({},e),chainId:`${s}:${a}`,topic:this.session.topic,expiry:i})}sendAsync(e,t,i,s){const a=new Date().getTime();this.request(e,i,s).then(c=>t(null,Af(a,c))).catch(c=>t(c,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Tt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:i,response:s}=await this.client.authenticate(e,t);i&&(this.uri=i,this.events.emit("display_uri",i));const a=await s();if(this.session=a.session,this.session){const c=Qg(this.session.namespaces);this.namespaces=ml(this.namespaces,c),this.persist("namespaces",this.namespaces),this.onConnect()}return a}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:i,approval:s}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),await s().then(a=>{this.session=a;const c=Qg(a.namespaces);this.namespaces=ml(this.namespaces,c),this.persist("namespaces",this.namespaces)}).catch(a=>{if(a.message!==w2)throw a;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[i,s]=this.validateChain(e),a=this.getProvider(i);a.name===Ba?a.setDefaultChain(`${i}:${s}`,t):a.setDefaultChain(s,t)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Pn(t)){for(const i of t)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Od.init({core:this.providerOpts.core,logger:this.providerOpts.logger||Vg,relayUrl:this.providerOpts.relayUrl||QO,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Lo(t)))];wl("client",this.client),wl("events",this.events),wl("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const i=oC(t,this.session),s=E2(i),a=ml(this.namespaces,this.optionalNamespaces),c=_l(xu({},a[t]),{accounts:i,chains:s});switch(t){case"eip155":this.rpcProviders[t]=new gC({namespace:c});break;case"algorand":this.rpcProviders[t]=new mC({namespace:c});break;case"solana":this.rpcProviders[t]=new bC({namespace:c});break;case"cosmos":this.rpcProviders[t]=new vC({namespace:c});break;case"polkadot":this.rpcProviders[t]=new uC({namespace:c});break;case"cip34":this.rpcProviders[t]=new yC({namespace:c});break;case"elrond":this.rpcProviders[t]=new wC({namespace:c});break;case"multiversx":this.rpcProviders[t]=new _C({namespace:c});break;case"near":this.rpcProviders[t]=new EC({namespace:c});break;default:this.rpcProviders[Ba]?this.rpcProviders[Ba].updateNamespace(c):this.rpcProviders[Ba]=new AC({namespace:c})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:i}=t;if(i.name==="accountsChanged"){const s=i.data;s&&Pn(s)&&this.events.emit("accountsChanged",s.map(cC))}else if(i.name==="chainChanged"){const s=t.chainId,a=t.event.data,c=Lo(s),u=yl(s)!==yl(a)?`${c}:${yl(a)}`:s;this.onChainChanged(u)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var i;const{namespaces:s}=t,a=(i=this.client)==null?void 0:i.session.get(e);this.session=_l(xu({},a),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",_l(xu({},Tt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(an.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Ba]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:i,sessionProperties:s}=e;t&&Object.keys(t).length&&(this.namespaces=t),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=s,this.persist("namespaces",t),this.persist("optionalNamespaces",i)}validateChain(e){const[t,i]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,i];if(t&&!Object.keys(this.namespaces||{}).map(c=>Lo(c)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&i)return[t,i];const s=Lo(Object.keys(this.namespaces)[0]),a=this.rpcProviders[s].getDefaultChain();return[s,a]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){if(!this.namespaces)return;const[i,s]=this.validateChain(e);s&&(t||this.getProvider(i).setDefaultChain(s),this.namespaces[i]?this.namespaces[i].defaultChain=s:this.namespaces[`${i}:${s}`]?this.namespaces[`${i}:${s}`].defaultChain=s:this.namespaces[`${i}:${s}`]={defaultChain:s},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",s))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${Gg}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${Gg}/${e}`)}}const PC=Cd,OC="wc",CC="ethereum_provider",NC=`${OC}@2:${CC}:`,RC="https://rpc.walletconnect.org/v1/",Xl=["eth_sendTransaction","personal_sign"],TC=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],Zl=["chainChanged","accountsChanged"],FC=["chainChanged","accountsChanged","message","disconnect","connect"];var BC=Object.defineProperty,qC=Object.defineProperties,LC=Object.getOwnPropertyDescriptors,nb=Object.getOwnPropertySymbols,UC=Object.prototype.hasOwnProperty,jC=Object.prototype.propertyIsEnumerable,sb=(r,e,t)=>e in r?BC(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,qa=(r,e)=>{for(var t in e||(e={}))UC.call(e,t)&&sb(r,t,e[t]);if(nb)for(var t of nb(e))jC.call(e,t)&&sb(r,t,e[t]);return r},El=(r,e)=>qC(r,LC(e));function tf(r){return Number(r[0].split(":")[1])}function Du(r){return`0x${r.toString(16)}`}function $C(r){const{chains:e,optionalChains:t,methods:i,optionalMethods:s,events:a,optionalEvents:c,rpcMap:u}=r;if(!Pn(e))throw new Error("Invalid chains");const l={chains:e,methods:i||Xl,events:a||Zl,rpcMap:qa({},e.length?{[tf(e)]:u[tf(e)]}:{})},h=a?.filter(E=>!Zl.includes(E)),g=i?.filter(E=>!Xl.includes(E));if(!t&&!c&&!s&&!(h!=null&&h.length)&&!(g!=null&&g.length))return{required:e.length?l:void 0};const w=h?.length&&g?.length||!t,S={chains:[...new Set(w?l.chains.concat(t||[]):t)],methods:[...new Set(l.methods.concat(s!=null&&s.length?s:TC))],events:[...new Set(l.events.concat(c!=null&&c.length?c:FC))],rpcMap:u};return{required:e.length?l:void 0,optional:t.length?S:void 0}}class Nd{constructor(){this.events=new Ui.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=NC,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new Nd;return await t.initialize(e),t}async request(e,t){return await this.signer.request(e,this.formatChainId(this.chainId),t)}sendAsync(e,t,i){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),i)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:i}=$C(this.rpc);try{const s=await new Promise(async(c,u)=>{var l;this.rpc.showQrModal&&((l=this.modal)==null||l.subscribeModal(h=>{!h.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),u(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(El(qa({namespaces:qa({},t&&{[this.namespace]:t})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e?.pairingTopic})).then(h=>{c(h)}).catch(h=>{u(new Error(h.message))})});if(!s)return;const a=a1(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:a),this.setAccounts(a),this.events.emit("connect",{chainId:Du(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{this.modal&&this.modal.closeModal()}}async authenticate(e,t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e?.chains});try{const i=await new Promise(async(a,c)=>{var u;this.rpc.showQrModal&&((u=this.modal)==null||u.subscribeModal(l=>{!l.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),c(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(El(qa({},e),{chains:this.rpc.chains}),t).then(l=>{a(l)}).catch(l=>{c(new Error(l.message))})}),s=i.session;if(s){const a=a1(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:a),this.setAccounts(a),this.events.emit("connect",{chainId:Du(this.chainId)})}return i}catch(i){throw this.signer.logger.error(i),i}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:i}=t;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",Du(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",El(qa({},Tt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,i;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(i=this.modal)==null||i.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",Du(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,i,s]=e.split(":");return{chainId:`${t}:${i}`,address:s}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,i;const s=(t=e?.chains)!=null?t:[],a=(i=e?.optionalChains)!=null?i:[],c=s.concat(a);if(!c.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const u=s.length?e?.methods||Xl:[],l=s.length?e?.events||Zl:[],h=e?.optionalMethods||[],g=e?.optionalEvents||[],w=e?.rpcMap||this.buildRpcMap(c,e.projectId),S=e?.qrModalOptions||void 0;return{chains:s?.map(E=>this.formatChainId(E)),optionalChains:a.map(E=>this.formatChainId(E)),methods:u,events:l,optionalMethods:h,optionalEvents:g,rpcMap:w,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:S,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const i={};return e.forEach(s=>{i[s]=this.getRpcUrl(s,t)}),i}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?tf(this.rpc.chains):tf(this.rpc.optionalChains),this.signer=await PC.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:i}=await s8(()=>import("./index-CnEbXXuL.js").then(s=>s.i),__vite__mapDeps([0,1,2]));t=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(qa({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:i,rpcMap:s}=e;t&&Pn(t)&&(this.rpc.chains=t.map(a=>this.formatChainId(a)),t.forEach(a=>{this.rpc.rpcMap[a]=s?.[a]||this.getRpcUrl(a)})),i&&Pn(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i?.map(a=>this.formatChainId(a)),i.forEach(a=>{this.rpc.rpcMap[a]=s?.[a]||this.getRpcUrl(a)}))}getRpcUrl(e,t){var i;return((i=this.rpc.rpcMap)==null?void 0:i[e])||`${RC}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t?.accounts),this.setAccounts(t?.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(t=>this.signer.logger.warn(t))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const hN=Nd;export{hN as EthereumProvider,FC as OPTIONAL_EVENTS,TC as OPTIONAL_METHODS,Zl as REQUIRED_EVENTS,Xl as REQUIRED_METHODS,Nd as default};

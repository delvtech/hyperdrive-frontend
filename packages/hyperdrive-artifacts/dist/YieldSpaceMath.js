export const YieldSpaceMath = { "abi": [], "bytecode": { "object": "0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122012f84b500b3d5ce19eada04132ce16a6f2ca99ff6701a6c65db74780a7c5256e64736f6c63430008140033", "sourceMap": "1466:19803:132:-:0;;;;;;;;;;;;;;;-1:-1:-1;;;1466:19803:132;;;;;;;;;;;;;;;;;", "linkReferences": {} }, "deployedBytecode": { "object": "0x73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122012f84b500b3d5ce19eada04132ce16a6f2ca99ff6701a6c65db74780a7c5256e64736f6c63430008140033", "sourceMap": "1466:19803:132:-:0;;;;;;;;", "linkReferences": {} }, "methodIdentifiers": {}, "rawMetadata": "{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[],\"devdoc\":{\"author\":\"DELV\",\"custom:disclaimer\":\"The language used in this code is for coding convenience                    only, and is not intended to, and does not, have any                    particular legal or regulatory significance.\",\"details\":\"It is advised for developers to attain the pre-requisite knowledge      of how this implementation works on the mathematical level. This      excerpt attempts to document this pre-requisite knowledge explaining      the underpinning mathematical concepts in an understandable manner and      relating it directly to the code implementation.      This implementation is based on a paper called \\\"YieldSpace with Yield      Bearing Vaults\\\" or more casually \\\"Modified YieldSpace\\\". It can be      found at the following link.      https://hackmd.io/lRZ4mgdrRgOpxZQXqKYlFw?view      That paper builds on the original YieldSpace paper, \\\"YieldSpace:      An Automated Liquidity Provider for Fixed Yield Tokens\\\". It can be      found at the following link:      https://yieldprotocol.com/YieldSpace.pdf\",\"kind\":\"dev\",\"methods\":{},\"title\":\"YieldSpaceMath\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"notice\":\"Math for the YieldSpace pricing model.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/src/libraries/YieldSpaceMath.sol\":\"YieldSpaceMath\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":aave-v3-core/=lib/aave-v3-core/\",\":ds-test/=lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin/=lib/openzeppelin-contracts/contracts/\",\":solmate/=lib/solmate/src/\"]},\"sources\":{\"contracts/src/interfaces/IERC20.sol\":{\"keccak256\":\"0x5f446a4987d57c64380d44c234ee079172e98bed9595ec067eb519898c3117d9\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://a3245994c58110716f5099c07e5cb270137356d288044f03c713d29c36e207ac\",\"dweb:/ipfs/QmYdn52sGRQKXfSyL8ieSz8HysG6R5kLJWsNwEnyX1e22p\"]},\"contracts/src/interfaces/IHyperdrive.sol\":{\"keccak256\":\"0xb8ee04f3090b498966970e210f7de0f982f6445628556f2f176385423d8c5952\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://db789f03faa935c6e3b0882b6e873e8f683c9c8841a4b128366dcbe7321911bf\",\"dweb:/ipfs/QmSQh1cX79nApuSAfJbVN99dmEaE4CK9QwWfEGcwhJMBLK\"]},\"contracts/src/interfaces/IHyperdriveCore.sol\":{\"keccak256\":\"0x68adcd293ff25711add1698b6024faa45beec01eb044bd0103d3020aa96d856e\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://0e0f5e35a7d2c656e249394d25896e5adfb9af3e210c01b9ef5fa81d25a45e24\",\"dweb:/ipfs/QmbLASezHPWHcbodqSfw3Qh9NzqekqVPM8FhCXKGTCXL1h\"]},\"contracts/src/interfaces/IHyperdriveEvents.sol\":{\"keccak256\":\"0x812ccb32dff907e8614c89a65196eec239eceb3e63f9f14dde2b2269c75a67c0\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://da5f2ce974bfcd8185342c121c879ba5aef23e1e4e7b36cf9fcba68296b8892c\",\"dweb:/ipfs/QmSho3PWs9bzejTYYjySuXcH9tVP4xFnkbUmSzQA54g8eG\"]},\"contracts/src/interfaces/IHyperdriveRead.sol\":{\"keccak256\":\"0x5922cbd86a7267c8fd19e3dc7a6f2636bad2b3330c28bca8e66adc7cd8ce2b55\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://ced8bce3f3c15a9f0bcdd11ba16e69651179edd6b16e267936788f4ab4d6eabf\",\"dweb:/ipfs/QmcoZPj4h2ym6r13KDU7JG2GoVdDWa1GwfKL2jjFRsp8H6\"]},\"contracts/src/interfaces/IMultiToken.sol\":{\"keccak256\":\"0xf5f82b8223e0c1bfcf4f73566a909ba07a9266960dfe2335c1494e06debbbe3f\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://920cf3fd66132a1e98a6a5708ad9a3bb047f4df8848119ab382b51094c1290a7\",\"dweb:/ipfs/QmWL3SyG8L91Coe9DsHz3Ke9tGMvYBf2NgRRDr3Fg5xFzp\"]},\"contracts/src/interfaces/IMultiTokenCore.sol\":{\"keccak256\":\"0x5c27315743bb6ef8a121ecf72cb24d5c144786dedb6526ef010f580eb872e501\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://3e102c51bac9c82766c9826d97dc780a05a2bf64703b070757a7531a0851a1ae\",\"dweb:/ipfs/QmXYwbzPbiznj5AeDiX7NNfRE9xyhSx1huTMfMFndrUZWs\"]},\"contracts/src/interfaces/IMultiTokenEvents.sol\":{\"keccak256\":\"0x165f79e628b1975343f979549f3fdb5073a29aeecb03861f41d165961ee39fdb\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://3c0751cf322944d080a7a6692897807d0cef798268689afc1f6c8f91182a4222\",\"dweb:/ipfs/QmQVWtCgphU9sjqD2q6F6ww62uXDSWZx5KJVj6jFJpXeDK\"]},\"contracts/src/interfaces/IMultiTokenMetadata.sol\":{\"keccak256\":\"0xcc21ad6d3d4e3de354fbc25a472d940e5e2af0b48766404f9efecdac600d72ca\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://b48fa111a773c820fe578efdd737d164e3957930ed46f3f304c6a8602a7e26a3\",\"dweb:/ipfs/QmcA7bjBC6ZBvYyojZZx3eKpugHmSrAAA14p14bQugiVKG\"]},\"contracts/src/interfaces/IMultiTokenRead.sol\":{\"keccak256\":\"0xac84dd306f29ae9d6becf764d93545c33f7c37737bb1aeb714c85930d0c074a0\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://d9082a16d5a736ab7ce5670be4f2475ea5c5fdae8ad7096ed9663f84eed96b11\",\"dweb:/ipfs/QmUTH8dZaQJt56UsT7N2aCUCKmjQYj7Ah53rRXk6DuVNUR\"]},\"contracts/src/libraries/Errors.sol\":{\"keccak256\":\"0x45f48f5b8caec5b751850b7266abd84c7400debfbad0f112847582bb052058b0\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://46c85e0c750cdb752bec5d67a8a0bc8df071d934c568c880d08a5120a1a11d88\",\"dweb:/ipfs/Qmc2L1ePB1gqBwUiaAUeoG6hvoPtS2hdY6rhEXzX1SfB41\"]},\"contracts/src/libraries/FixedPointMath.sol\":{\"keccak256\":\"0x631f6529908f62f71775f8c6120afdca3a836fb24fa9fa4701cad54f4a9da076\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://2baf6ad8917a3fbb6d040334451f6b4f6936b00518c4cd308b9c6fa11569b2bd\",\"dweb:/ipfs/QmXD16vk6MRxmPRqy8ZXSpRA5XxhSf1pnsQH32ARDJTk8L\"]},\"contracts/src/libraries/HyperdriveMath.sol\":{\"keccak256\":\"0xcf305dde8aa320d1e1b767734ce8edce456af537525d40e30d5345f09f6e34ab\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://056c9a563f1a9e0133e17463497ad19be517d35b770170122edea50ca9fbe002\",\"dweb:/ipfs/QmS6dkVRHzdbv7etumcCtNtm9GuXDCjqZxxhtYfP6keAAY\"]},\"contracts/src/libraries/SafeCast.sol\":{\"keccak256\":\"0xc5282be69c8c85c1a1bbbf1554a501c17599f4b84119339b660018ae90eb7148\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://fd29b570d1e3205d25939b1c0e78e98ae34747a8118703fc5b2c9690791b26c8\",\"dweb:/ipfs/QmSdecxKRE66cgEipikK5uS4mUJxz2FgfncCk9iXvkdjG8\"]},\"contracts/src/libraries/YieldSpaceMath.sol\":{\"keccak256\":\"0x4a9c91313bed7cda6ef503af23c9f777008b5258e9cb2176eab6acc52be79891\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://88da1f5502a12fe1024be90f6a6ea08556cc1f2660ab8cbeb5e07640abb7711c\",\"dweb:/ipfs/QmVQoG9TyrAsVYcgvgZfgA5pQk8V8wvS4BewGNP4B3Txyy\"]}},\"version\":1}", "metadata": { "compiler": { "version": "0.8.20+commit.a1b79de6" }, "language": "Solidity", "output": { "abi": [], "devdoc": { "kind": "dev", "methods": {}, "version": 1 }, "userdoc": { "kind": "user", "methods": {}, "version": 1 } }, "settings": { "remappings": ["@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/", "aave-v3-core/=lib/aave-v3-core/", "ds-test/=lib/forge-std/lib/ds-test/src/", "erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/", "forge-std/=lib/forge-std/src/", "openzeppelin-contracts/=lib/openzeppelin-contracts/", "openzeppelin/=lib/openzeppelin-contracts/contracts/", "solmate/=lib/solmate/src/"], "optimizer": { "enabled": true, "runs": 200 }, "metadata": { "bytecodeHash": "ipfs" }, "compilationTarget": { "contracts/src/libraries/YieldSpaceMath.sol": "YieldSpaceMath" }, "libraries": {} }, "sources": { "contracts/src/interfaces/IERC20.sol": { "keccak256": "0x5f446a4987d57c64380d44c234ee079172e98bed9595ec067eb519898c3117d9", "urls": ["bzz-raw://a3245994c58110716f5099c07e5cb270137356d288044f03c713d29c36e207ac", "dweb:/ipfs/QmYdn52sGRQKXfSyL8ieSz8HysG6R5kLJWsNwEnyX1e22p"], "license": "Apache-2.0" }, "contracts/src/interfaces/IHyperdrive.sol": { "keccak256": "0xb8ee04f3090b498966970e210f7de0f982f6445628556f2f176385423d8c5952", "urls": ["bzz-raw://db789f03faa935c6e3b0882b6e873e8f683c9c8841a4b128366dcbe7321911bf", "dweb:/ipfs/QmSQh1cX79nApuSAfJbVN99dmEaE4CK9QwWfEGcwhJMBLK"], "license": "Apache-2.0" }, "contracts/src/interfaces/IHyperdriveCore.sol": { "keccak256": "0x68adcd293ff25711add1698b6024faa45beec01eb044bd0103d3020aa96d856e", "urls": ["bzz-raw://0e0f5e35a7d2c656e249394d25896e5adfb9af3e210c01b9ef5fa81d25a45e24", "dweb:/ipfs/QmbLASezHPWHcbodqSfw3Qh9NzqekqVPM8FhCXKGTCXL1h"], "license": "Apache-2.0" }, "contracts/src/interfaces/IHyperdriveEvents.sol": { "keccak256": "0x812ccb32dff907e8614c89a65196eec239eceb3e63f9f14dde2b2269c75a67c0", "urls": ["bzz-raw://da5f2ce974bfcd8185342c121c879ba5aef23e1e4e7b36cf9fcba68296b8892c", "dweb:/ipfs/QmSho3PWs9bzejTYYjySuXcH9tVP4xFnkbUmSzQA54g8eG"], "license": "Apache-2.0" }, "contracts/src/interfaces/IHyperdriveRead.sol": { "keccak256": "0x5922cbd86a7267c8fd19e3dc7a6f2636bad2b3330c28bca8e66adc7cd8ce2b55", "urls": ["bzz-raw://ced8bce3f3c15a9f0bcdd11ba16e69651179edd6b16e267936788f4ab4d6eabf", "dweb:/ipfs/QmcoZPj4h2ym6r13KDU7JG2GoVdDWa1GwfKL2jjFRsp8H6"], "license": "Apache-2.0" }, "contracts/src/interfaces/IMultiToken.sol": { "keccak256": "0xf5f82b8223e0c1bfcf4f73566a909ba07a9266960dfe2335c1494e06debbbe3f", "urls": ["bzz-raw://920cf3fd66132a1e98a6a5708ad9a3bb047f4df8848119ab382b51094c1290a7", "dweb:/ipfs/QmWL3SyG8L91Coe9DsHz3Ke9tGMvYBf2NgRRDr3Fg5xFzp"], "license": "Apache-2.0" }, "contracts/src/interfaces/IMultiTokenCore.sol": { "keccak256": "0x5c27315743bb6ef8a121ecf72cb24d5c144786dedb6526ef010f580eb872e501", "urls": ["bzz-raw://3e102c51bac9c82766c9826d97dc780a05a2bf64703b070757a7531a0851a1ae", "dweb:/ipfs/QmXYwbzPbiznj5AeDiX7NNfRE9xyhSx1huTMfMFndrUZWs"], "license": "Apache-2.0" }, "contracts/src/interfaces/IMultiTokenEvents.sol": { "keccak256": "0x165f79e628b1975343f979549f3fdb5073a29aeecb03861f41d165961ee39fdb", "urls": ["bzz-raw://3c0751cf322944d080a7a6692897807d0cef798268689afc1f6c8f91182a4222", "dweb:/ipfs/QmQVWtCgphU9sjqD2q6F6ww62uXDSWZx5KJVj6jFJpXeDK"], "license": "Apache-2.0" }, "contracts/src/interfaces/IMultiTokenMetadata.sol": { "keccak256": "0xcc21ad6d3d4e3de354fbc25a472d940e5e2af0b48766404f9efecdac600d72ca", "urls": ["bzz-raw://b48fa111a773c820fe578efdd737d164e3957930ed46f3f304c6a8602a7e26a3", "dweb:/ipfs/QmcA7bjBC6ZBvYyojZZx3eKpugHmSrAAA14p14bQugiVKG"], "license": "Apache-2.0" }, "contracts/src/interfaces/IMultiTokenRead.sol": { "keccak256": "0xac84dd306f29ae9d6becf764d93545c33f7c37737bb1aeb714c85930d0c074a0", "urls": ["bzz-raw://d9082a16d5a736ab7ce5670be4f2475ea5c5fdae8ad7096ed9663f84eed96b11", "dweb:/ipfs/QmUTH8dZaQJt56UsT7N2aCUCKmjQYj7Ah53rRXk6DuVNUR"], "license": "Apache-2.0" }, "contracts/src/libraries/Errors.sol": { "keccak256": "0x45f48f5b8caec5b751850b7266abd84c7400debfbad0f112847582bb052058b0", "urls": ["bzz-raw://46c85e0c750cdb752bec5d67a8a0bc8df071d934c568c880d08a5120a1a11d88", "dweb:/ipfs/Qmc2L1ePB1gqBwUiaAUeoG6hvoPtS2hdY6rhEXzX1SfB41"], "license": "Apache-2.0" }, "contracts/src/libraries/FixedPointMath.sol": { "keccak256": "0x631f6529908f62f71775f8c6120afdca3a836fb24fa9fa4701cad54f4a9da076", "urls": ["bzz-raw://2baf6ad8917a3fbb6d040334451f6b4f6936b00518c4cd308b9c6fa11569b2bd", "dweb:/ipfs/QmXD16vk6MRxmPRqy8ZXSpRA5XxhSf1pnsQH32ARDJTk8L"], "license": "Apache-2.0" }, "contracts/src/libraries/HyperdriveMath.sol": { "keccak256": "0xcf305dde8aa320d1e1b767734ce8edce456af537525d40e30d5345f09f6e34ab", "urls": ["bzz-raw://056c9a563f1a9e0133e17463497ad19be517d35b770170122edea50ca9fbe002", "dweb:/ipfs/QmS6dkVRHzdbv7etumcCtNtm9GuXDCjqZxxhtYfP6keAAY"], "license": "Apache-2.0" }, "contracts/src/libraries/SafeCast.sol": { "keccak256": "0xc5282be69c8c85c1a1bbbf1554a501c17599f4b84119339b660018ae90eb7148", "urls": ["bzz-raw://fd29b570d1e3205d25939b1c0e78e98ae34747a8118703fc5b2c9690791b26c8", "dweb:/ipfs/QmSdecxKRE66cgEipikK5uS4mUJxz2FgfncCk9iXvkdjG8"], "license": "Apache-2.0" }, "contracts/src/libraries/YieldSpaceMath.sol": { "keccak256": "0x4a9c91313bed7cda6ef503af23c9f777008b5258e9cb2176eab6acc52be79891", "urls": ["bzz-raw://88da1f5502a12fe1024be90f6a6ea08556cc1f2660ab8cbeb5e07640abb7711c", "dweb:/ipfs/QmVQoG9TyrAsVYcgvgZfgA5pQk8V8wvS4BewGNP4B3Txyy"], "license": "Apache-2.0" } }, "version": 1 }, "ast": { "absolutePath": "contracts/src/libraries/YieldSpaceMath.sol", "id": 23423, "exportedSymbols": { "Errors": [18797], "FixedPointMath": [19572], "HyperdriveMath": [20320], "IHyperdrive": [11143], "ONE": [18806], "YieldSpaceMath": [23422] }, "nodeType": "SourceUnit", "src": "40:21230:132", "nodes": [{ "id": 22445, "nodeType": "PragmaDirective", "src": "40:23:132", "nodes": [], "literals": ["solidity", "0.8", ".20"] }, { "id": 22447, "nodeType": "ImportDirective", "src": "65:60:132", "nodes": [], "absolutePath": "contracts/src/interfaces/IHyperdrive.sol", "file": "../interfaces/IHyperdrive.sol", "nameLocation": "-1:-1:-1", "scope": 23423, "sourceUnit": 11144, "symbolAliases": [{ "foreign": { "id": 22446, "name": "IHyperdrive", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11143, "src": "74:11:132", "typeDescriptions": {} }, "nameLocation": "-1:-1:-1" }], "unitAlias": "" }, { "id": 22449, "nodeType": "ImportDirective", "src": "126:38:132", "nodes": [], "absolutePath": "contracts/src/libraries/Errors.sol", "file": "./Errors.sol", "nameLocation": "-1:-1:-1", "scope": 23423, "sourceUnit": 18798, "symbolAliases": [{ "foreign": { "id": 22448, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18797, "src": "135:6:132", "typeDescriptions": {} }, "nameLocation": "-1:-1:-1" }], "unitAlias": "" }, { "id": 22452, "nodeType": "ImportDirective", "src": "165:59:132", "nodes": [], "absolutePath": "contracts/src/libraries/FixedPointMath.sol", "file": "./FixedPointMath.sol", "nameLocation": "-1:-1:-1", "scope": 23423, "sourceUnit": 19573, "symbolAliases": [{ "foreign": { "id": 22450, "name": "FixedPointMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 19572, "src": "174:14:132", "typeDescriptions": {} }, "nameLocation": "-1:-1:-1" }, { "foreign": { "id": 22451, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "190:3:132", "typeDescriptions": {} }, "nameLocation": "-1:-1:-1" }], "unitAlias": "" }, { "id": 22454, "nodeType": "ImportDirective", "src": "225:54:132", "nodes": [], "absolutePath": "contracts/src/libraries/HyperdriveMath.sol", "file": "./HyperdriveMath.sol", "nameLocation": "-1:-1:-1", "scope": 23423, "sourceUnit": 20321, "symbolAliases": [{ "foreign": { "id": 22453, "name": "HyperdriveMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20320, "src": "234:14:132", "typeDescriptions": {} }, "nameLocation": "-1:-1:-1" }], "unitAlias": "" }, { "id": 23422, "nodeType": "ContractDefinition", "src": "1466:19803:132", "nodes": [{ "id": 22458, "nodeType": "UsingForDirective", "src": "1495:33:132", "nodes": [], "global": false, "libraryName": { "id": 22456, "name": "FixedPointMath", "nameLocations": ["1501:14:132"], "nodeType": "IdentifierPath", "referencedDeclaration": 19572, "src": "1501:14:132" }, "typeName": { "id": 22457, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1520:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } } }, { "id": 22574, "nodeType": "FunctionDefinition", "src": "2068:1726:132", "nodes": [], "body": { "id": 22573, "nodeType": "Block", "src": "2267:1527:132", "nodes": [], "statements": [{ "assignments": [22477], "declarations": [{ "constant": false, "id": 22477, "mutability": "mutable", "name": "k", "nameLocation": "2423:1:132", "nodeType": "VariableDeclaration", "scope": 22573, "src": "2415:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22476, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2415:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 22485, "initialValue": { "arguments": [{ "id": 22479, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22461, "src": "2431:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22480, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22463, "src": "2435:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22481, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22467, "src": "2438:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22482, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22469, "src": "2441:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22483, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22471, "src": "2444:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "id": 22478, "name": "kUp", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23387, "src": "2427:3:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,uint256) pure returns (uint256)" } }, "id": 22484, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "2427:20:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "2415:32:132" }, { "expression": { "id": 22496, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22486, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22461, "src": "2580:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22494, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22467, "src": "2609:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "arguments": [{ "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22491, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22489, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22461, "src": "2596:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": { "id": 22490, "name": "dz", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22465, "src": "2601:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "2596:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22487, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22471, "src": "2585:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22488, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "2588:7:132", "memberName": "mulDown", "nodeType": "MemberAccess", "referencedDeclaration": 18852, "src": "2585:10:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22492, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "2585:19:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22493, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "2605:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "2585:23:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22495, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "2585:26:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "2580:31:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22497, "nodeType": "ExpressionStatement", "src": "2580:31:132" }, { "expression": { "id": 22504, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22498, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22461, "src": "2669:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22501, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22461, "src": "2687:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22502, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22471, "src": "2691:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22499, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22469, "src": "2674:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22500, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "2676:10:132", "memberName": "mulDivDown", "nodeType": "MemberAccess", "referencedDeclaration": 18834, "src": "2674:12:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256,uint256) pure returns (uint256)" } }, "id": 22503, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "2674:20:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "2669:25:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22505, "nodeType": "ExpressionStatement", "src": "2669:25:132" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22508, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22506, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22477, "src": "2764:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22507, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22461, "src": "2768:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "2764:6:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22518, "nodeType": "IfStatement", "src": "2760:166:132", "trueBody": { "id": 22517, "nodeType": "Block", "src": "2772:154:132", "statements": [{ "expression": { "arguments": [{ "expression": { "expression": { "id": 22512, "name": "IHyperdrive", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11143, "src": "2842:11:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_IHyperdrive_$11143_$", "typeString": "type(contract IHyperdrive)" } }, "id": 22513, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "2854:27:132", "memberName": "InsufficientLiquidityReason", "nodeType": "MemberAccess", "referencedDeclaration": 10996, "src": "2842:39:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_enum$_InsufficientLiquidityReason_$10996_$", "typeString": "type(enum IHyperdrive.InsufficientLiquidityReason)" } }, "id": 22514, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberLocation": "2882:19:132", "memberName": "ArithmeticUnderflow", "nodeType": "MemberAccess", "referencedDeclaration": 10992, "src": "2842:59:132", "typeDescriptions": { "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10996", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10996", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" }], "expression": { "id": 22509, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18797, "src": "2786:6:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_Errors_$18797_$", "typeString": "type(library Errors)" } }, "id": 22511, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "2793:31:132", "memberName": "throwInsufficientLiquidityError", "nodeType": "MemberAccess", "referencedDeclaration": 18796, "src": "2786:38:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_enum$_InsufficientLiquidityReason_$10996_$returns$__$", "typeString": "function (enum IHyperdrive.InsufficientLiquidityReason) pure" } }, "id": 22515, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "2786:129:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_tuple$__$", "typeString": "tuple()" } }, "id": 22516, "nodeType": "ExpressionStatement", "src": "2786:129:132" }] } }, { "assignments": [22520], "declarations": [{ "constant": false, "id": 22520, "mutability": "mutable", "name": "_y", "nameLocation": "3094:2:132", "nodeType": "VariableDeclaration", "scope": 22573, "src": "3086:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22519, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "3086:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 22521, "nodeType": "VariableDeclarationStatement", "src": "3086:10:132" }, { "id": 22528, "nodeType": "UncheckedBlock", "src": "3106:46:132", "statements": [{ "expression": { "id": 22526, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22522, "name": "_y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22520, "src": "3130:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22525, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22523, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22477, "src": "3135:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 22524, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22461, "src": "3139:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "3135:6:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "3130:11:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22527, "nodeType": "ExpressionStatement", "src": "3130:11:132" }] }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22531, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22529, "name": "_y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22520, "src": "3165:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": ">=", "rightExpression": { "id": 22530, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "3171:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "3165:9:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "falseBody": { "id": 22553, "nodeType": "Block", "src": "3300:122:132", "statements": [{ "expression": { "id": 22551, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22543, "name": "_y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22520, "src": "3384:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 22548, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22467, "src": "3408:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22546, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "3396:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22547, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "3400:7:132", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18870, "src": "3396:11:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22549, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "3396:14:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22544, "name": "_y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22520, "src": "3389:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22545, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "3392:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "3389:6:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22550, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "3389:22:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "3384:27:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22552, "nodeType": "ExpressionStatement", "src": "3384:27:132" }] }, "id": 22554, "nodeType": "IfStatement", "src": "3161:261:132", "trueBody": { "id": 22542, "nodeType": "Block", "src": "3176:118:132", "statements": [{ "expression": { "id": 22540, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22532, "name": "_y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22520, "src": "3258:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 22537, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22467, "src": "3280:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22535, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "3270:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22536, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "3274:5:132", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18920, "src": "3270:9:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22538, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "3270:12:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22533, "name": "_y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22520, "src": "3263:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22534, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "3266:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "3263:6:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22539, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "3263:20:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "3258:25:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22541, "nodeType": "ExpressionStatement", "src": "3258:25:132" }] } }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22557, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22555, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22463, "src": "3491:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22556, "name": "_y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22520, "src": "3495:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "3491:6:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22567, "nodeType": "IfStatement", "src": "3487:166:132", "trueBody": { "id": 22566, "nodeType": "Block", "src": "3499:154:132", "statements": [{ "expression": { "arguments": [{ "expression": { "expression": { "id": 22561, "name": "IHyperdrive", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11143, "src": "3569:11:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_IHyperdrive_$11143_$", "typeString": "type(contract IHyperdrive)" } }, "id": 22562, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "3581:27:132", "memberName": "InsufficientLiquidityReason", "nodeType": "MemberAccess", "referencedDeclaration": 10996, "src": "3569:39:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_enum$_InsufficientLiquidityReason_$10996_$", "typeString": "type(enum IHyperdrive.InsufficientLiquidityReason)" } }, "id": 22563, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberLocation": "3609:19:132", "memberName": "ArithmeticUnderflow", "nodeType": "MemberAccess", "referencedDeclaration": 10992, "src": "3569:59:132", "typeDescriptions": { "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10996", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10996", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" }], "expression": { "id": 22558, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18797, "src": "3513:6:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_Errors_$18797_$", "typeString": "type(library Errors)" } }, "id": 22560, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "3520:31:132", "memberName": "throwInsufficientLiquidityError", "nodeType": "MemberAccess", "referencedDeclaration": 18796, "src": "3513:38:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_enum$_InsufficientLiquidityReason_$10996_$returns$__$", "typeString": "function (enum IHyperdrive.InsufficientLiquidityReason) pure" } }, "id": 22564, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "3513:129:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_tuple$__$", "typeString": "tuple()" } }, "id": 22565, "nodeType": "ExpressionStatement", "src": "3513:129:132" }] } }, { "id": 22572, "nodeType": "UncheckedBlock", "src": "3740:48:132", "statements": [{ "expression": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22570, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22568, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22463, "src": "3771:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 22569, "name": "_y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22520, "src": "3775:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "3771:6:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "functionReturnParameters": 22475, "id": 22571, "nodeType": "Return", "src": "3764:13:132" }] }] }, "documentation": { "id": 22459, "nodeType": "StructuredDocumentation", "src": "1534:529:132", "text": "@dev Calculates the amount of bonds a user will receive from the pool by\n      providing a specified amount of shares. We underestimate the amount\n      of bonds out.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param dz The amount of shares paid to the pool.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return The amount of bonds the trader receives." }, "implemented": true, "kind": "function", "modifiers": [], "name": "calculateBondsOutGivenSharesInDown", "nameLocation": "2077:34:132", "parameters": { "id": 22472, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22461, "mutability": "mutable", "name": "ze", "nameLocation": "2129:2:132", "nodeType": "VariableDeclaration", "scope": 22574, "src": "2121:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22460, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2121:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22463, "mutability": "mutable", "name": "y", "nameLocation": "2149:1:132", "nodeType": "VariableDeclaration", "scope": 22574, "src": "2141:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22462, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2141:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22465, "mutability": "mutable", "name": "dz", "nameLocation": "2168:2:132", "nodeType": "VariableDeclaration", "scope": 22574, "src": "2160:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22464, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2160:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22467, "mutability": "mutable", "name": "t", "nameLocation": "2188:1:132", "nodeType": "VariableDeclaration", "scope": 22574, "src": "2180:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22466, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2180:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22469, "mutability": "mutable", "name": "c", "nameLocation": "2207:1:132", "nodeType": "VariableDeclaration", "scope": 22574, "src": "2199:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22468, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2199:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22471, "mutability": "mutable", "name": "mu", "nameLocation": "2226:2:132", "nodeType": "VariableDeclaration", "scope": 22574, "src": "2218:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22470, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2218:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "2111:123:132" }, "returnParameters": { "id": 22475, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22474, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 22574, "src": "2258:7:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22473, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2258:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "2257:9:132" }, "scope": 23422, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 22621, "nodeType": "FunctionDefinition", "src": "4331:579:132", "nodes": [], "body": { "id": 22620, "nodeType": "Block", "src": "4535:375:132", "nodes": [], "statements": [{ "assignments": [22593], "declarations": [{ "constant": false, "id": 22593, "mutability": "mutable", "name": "success", "nameLocation": "4550:7:132", "nodeType": "VariableDeclaration", "scope": 22620, "src": "4545:12:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "typeName": { "id": 22592, "name": "bool", "nodeType": "ElementaryTypeName", "src": "4545:4:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "visibility": "internal" }], "id": 22594, "nodeType": "VariableDeclarationStatement", "src": "4545:12:132" }, { "expression": { "id": 22606, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "components": [{ "id": 22595, "name": "result", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22590, "src": "4568:6:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22596, "name": "success", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22593, "src": "4576:7:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }], "id": 22597, "isConstant": false, "isInlineArray": false, "isLValue": true, "isPure": false, "lValueRequested": true, "nodeType": "TupleExpression", "src": "4567:17:132", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_uint256_$_t_bool_$", "typeString": "tuple(uint256,bool)" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22599, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22577, "src": "4637:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22600, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22579, "src": "4653:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22601, "name": "dy", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22581, "src": "4668:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22602, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22583, "src": "4684:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22603, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22585, "src": "4699:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22604, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22587, "src": "4714:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "id": 22598, "name": "calculateSharesInGivenBondsOutUpSafe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22749, "src": "4587:36:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$_t_bool_$", "typeString": "function (uint256,uint256,uint256,uint256,uint256,uint256) pure returns (uint256,bool)" } }, "id": 22605, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "4587:139:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_tuple$_t_uint256_$_t_bool_$", "typeString": "tuple(uint256,bool)" } }, "src": "4567:159:132", "typeDescriptions": { "typeIdentifier": "t_tuple$__$", "typeString": "tuple()" } }, "id": 22607, "nodeType": "ExpressionStatement", "src": "4567:159:132" }, { "condition": { "id": 22609, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "UnaryOperation", "operator": "!", "prefix": true, "src": "4740:8:132", "subExpression": { "id": 22608, "name": "success", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22593, "src": "4741:7:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22619, "nodeType": "IfStatement", "src": "4736:168:132", "trueBody": { "id": 22618, "nodeType": "Block", "src": "4750:154:132", "statements": [{ "expression": { "arguments": [{ "expression": { "expression": { "id": 22613, "name": "IHyperdrive", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11143, "src": "4820:11:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_IHyperdrive_$11143_$", "typeString": "type(contract IHyperdrive)" } }, "id": 22614, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "4832:27:132", "memberName": "InsufficientLiquidityReason", "nodeType": "MemberAccess", "referencedDeclaration": 10996, "src": "4820:39:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_enum$_InsufficientLiquidityReason_$10996_$", "typeString": "type(enum IHyperdrive.InsufficientLiquidityReason)" } }, "id": 22615, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberLocation": "4860:19:132", "memberName": "ArithmeticUnderflow", "nodeType": "MemberAccess", "referencedDeclaration": 10992, "src": "4820:59:132", "typeDescriptions": { "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10996", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10996", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" }], "expression": { "id": 22610, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18797, "src": "4764:6:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_Errors_$18797_$", "typeString": "type(library Errors)" } }, "id": 22612, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "4771:31:132", "memberName": "throwInsufficientLiquidityError", "nodeType": "MemberAccess", "referencedDeclaration": 18796, "src": "4764:38:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_enum$_InsufficientLiquidityReason_$10996_$returns$__$", "typeString": "function (enum IHyperdrive.InsufficientLiquidityReason) pure" } }, "id": 22616, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "4764:129:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_tuple$__$", "typeString": "tuple()" } }, "id": 22617, "nodeType": "ExpressionStatement", "src": "4764:129:132" }] } }] }, "documentation": { "id": 22575, "nodeType": "StructuredDocumentation", "src": "3800:526:132", "text": "@dev Calculates the amount of shares a user must provide the pool to\n      receive a specified amount of bonds. We overestimate the amount of\n      shares in.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param dy The amount of bonds paid to the trader.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return result The amount of shares the trader pays." }, "implemented": true, "kind": "function", "modifiers": [], "name": "calculateSharesInGivenBondsOutUp", "nameLocation": "4340:32:132", "parameters": { "id": 22588, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22577, "mutability": "mutable", "name": "ze", "nameLocation": "4390:2:132", "nodeType": "VariableDeclaration", "scope": 22621, "src": "4382:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22576, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4382:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22579, "mutability": "mutable", "name": "y", "nameLocation": "4410:1:132", "nodeType": "VariableDeclaration", "scope": 22621, "src": "4402:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22578, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4402:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22581, "mutability": "mutable", "name": "dy", "nameLocation": "4429:2:132", "nodeType": "VariableDeclaration", "scope": 22621, "src": "4421:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22580, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4421:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22583, "mutability": "mutable", "name": "t", "nameLocation": "4449:1:132", "nodeType": "VariableDeclaration", "scope": 22621, "src": "4441:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22582, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4441:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22585, "mutability": "mutable", "name": "c", "nameLocation": "4468:1:132", "nodeType": "VariableDeclaration", "scope": 22621, "src": "4460:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22584, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4460:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22587, "mutability": "mutable", "name": "mu", "nameLocation": "4487:2:132", "nodeType": "VariableDeclaration", "scope": 22621, "src": "4479:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22586, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4479:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "4372:123:132" }, "returnParameters": { "id": 22591, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22590, "mutability": "mutable", "name": "result", "nameLocation": "4527:6:132", "nodeType": "VariableDeclaration", "scope": 22621, "src": "4519:14:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22589, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4519:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "4518:16:132" }, "scope": 23422, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 22749, "nodeType": "FunctionDefinition", "src": "5576:1765:132", "nodes": [], "body": { "id": 22748, "nodeType": "Block", "src": "5783:1558:132", "nodes": [], "statements": [{ "assignments": [22642], "declarations": [{ "constant": false, "id": 22642, "mutability": "mutable", "name": "k", "nameLocation": "5939:1:132", "nodeType": "VariableDeclaration", "scope": 22748, "src": "5931:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22641, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5931:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 22650, "initialValue": { "arguments": [{ "id": 22644, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22624, "src": "5947:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22645, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22626, "src": "5951:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22646, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22630, "src": "5954:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22647, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22632, "src": "5957:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22648, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22634, "src": "5960:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "id": 22643, "name": "kUp", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23387, "src": "5943:3:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,uint256) pure returns (uint256)" } }, "id": 22649, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "5943:20:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "5931:32:132" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22653, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22651, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22626, "src": "6082:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22652, "name": "dy", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22628, "src": "6086:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6082:6:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22659, "nodeType": "IfStatement", "src": "6078:54:132", "trueBody": { "id": 22658, "nodeType": "Block", "src": "6090:42:132", "statements": [{ "expression": { "components": [{ "hexValue": "30", "id": 22654, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "6112:1:132", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, { "hexValue": "66616c7365", "id": 22655, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "6115:5:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "false" }], "id": 22656, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "TupleExpression", "src": "6111:10:132", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_rational_0_by_1_$_t_bool_$", "typeString": "tuple(int_const 0,bool)" } }, "functionReturnParameters": 22640, "id": 22657, "nodeType": "Return", "src": "6104:17:132" }] } }, { "id": 22664, "nodeType": "UncheckedBlock", "src": "6170:42:132", "statements": [{ "expression": { "id": 22662, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22660, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22626, "src": "6194:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "-=", "rightHandSide": { "id": 22661, "name": "dy", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22628, "src": "6199:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6194:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22663, "nodeType": "ExpressionStatement", "src": "6194:7:132" }] }, { "expression": { "id": 22670, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22665, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22626, "src": "6221:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22668, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22630, "src": "6231:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22666, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22626, "src": "6225:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22667, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "6227:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "6225:5:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22669, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "6225:8:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6221:12:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22671, "nodeType": "ExpressionStatement", "src": "6221:12:132" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22674, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22672, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22642, "src": "6351:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22673, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22626, "src": "6355:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6351:5:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22680, "nodeType": "IfStatement", "src": "6347:53:132", "trueBody": { "id": 22679, "nodeType": "Block", "src": "6358:42:132", "statements": [{ "expression": { "components": [{ "hexValue": "30", "id": 22675, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "6380:1:132", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, { "hexValue": "66616c7365", "id": 22676, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "6383:5:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "false" }], "id": 22677, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "TupleExpression", "src": "6379:10:132", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_rational_0_by_1_$_t_bool_$", "typeString": "tuple(int_const 0,bool)" } }, "functionReturnParameters": 22640, "id": 22678, "nodeType": "Return", "src": "6372:17:132" }] } }, { "assignments": [22682], "declarations": [{ "constant": false, "id": 22682, "mutability": "mutable", "name": "_z", "nameLocation": "6563:2:132", "nodeType": "VariableDeclaration", "scope": 22748, "src": "6555:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22681, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "6555:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 22683, "nodeType": "VariableDeclarationStatement", "src": "6555:10:132" }, { "id": 22690, "nodeType": "UncheckedBlock", "src": "6575:45:132", "statements": [{ "expression": { "id": 22688, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22684, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22682, "src": "6599:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22687, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22685, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22642, "src": "6604:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 22686, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22626, "src": "6608:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6604:5:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6599:10:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22689, "nodeType": "ExpressionStatement", "src": "6599:10:132" }] }, { "expression": { "id": 22697, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22691, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22682, "src": "6629:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22694, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22634, "src": "6646:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22695, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22632, "src": "6650:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22692, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22682, "src": "6634:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22693, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "6637:8:132", "memberName": "mulDivUp", "nodeType": "MemberAccess", "referencedDeclaration": 18884, "src": "6634:11:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256,uint256) pure returns (uint256)" } }, "id": 22696, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "6634:18:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6629:23:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22698, "nodeType": "ExpressionStatement", "src": "6629:23:132" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22701, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22699, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22682, "src": "6666:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": ">=", "rightExpression": { "id": 22700, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "6672:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6666:9:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "falseBody": { "id": 22723, "nodeType": "Block", "src": "6801:122:132", "statements": [{ "expression": { "id": 22721, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22713, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22682, "src": "6885:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 22718, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22630, "src": "6909:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22716, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "6897:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22717, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "6901:7:132", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18870, "src": "6897:11:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22719, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "6897:14:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22714, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22682, "src": "6890:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22715, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "6893:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "6890:6:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22720, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "6890:22:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6885:27:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22722, "nodeType": "ExpressionStatement", "src": "6885:27:132" }] }, "id": 22724, "nodeType": "IfStatement", "src": "6662:261:132", "trueBody": { "id": 22712, "nodeType": "Block", "src": "6677:118:132", "statements": [{ "expression": { "id": 22710, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22702, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22682, "src": "6759:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 22707, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22630, "src": "6781:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22705, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "6771:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22706, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "6775:5:132", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18920, "src": "6771:9:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22708, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "6771:12:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22703, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22682, "src": "6764:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22704, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "6767:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "6764:6:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22709, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "6764:20:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6759:25:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22711, "nodeType": "ExpressionStatement", "src": "6759:25:132" }] } }, { "expression": { "id": 22730, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22725, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22682, "src": "7000:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22728, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22634, "src": "7014:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22726, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22682, "src": "7005:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22727, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "7008:5:132", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18920, "src": "7005:8:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22729, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "7005:12:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "7000:17:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22731, "nodeType": "ExpressionStatement", "src": "7000:17:132" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22734, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22732, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22682, "src": "7137:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22733, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22624, "src": "7142:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "7137:7:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22740, "nodeType": "IfStatement", "src": "7133:55:132", "trueBody": { "id": 22739, "nodeType": "Block", "src": "7146:42:132", "statements": [{ "expression": { "components": [{ "hexValue": "30", "id": 22735, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "7168:1:132", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, { "hexValue": "66616c7365", "id": 22736, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "7171:5:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "false" }], "id": 22737, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "TupleExpression", "src": "7167:10:132", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_rational_0_by_1_$_t_bool_$", "typeString": "tuple(int_const 0,bool)" } }, "functionReturnParameters": 22640, "id": 22738, "nodeType": "Return", "src": "7160:17:132" }] } }, { "id": 22747, "nodeType": "UncheckedBlock", "src": "7278:57:132", "statements": [{ "expression": { "components": [{ "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22743, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22741, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22682, "src": "7310:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 22742, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22624, "src": "7315:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "7310:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "hexValue": "74727565", "id": 22744, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "7319:4:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "true" }], "id": 22745, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "7309:15:132", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_uint256_$_t_bool_$", "typeString": "tuple(uint256,bool)" } }, "functionReturnParameters": 22640, "id": 22746, "nodeType": "Return", "src": "7302:22:132" }] }] }, "documentation": { "id": 22622, "nodeType": "StructuredDocumentation", "src": "4916:655:132", "text": "@dev Calculates the amount of shares a user must provide the pool to\n      receive a specified amount of bonds. This function returns a\n      success flag instead of reverting. We overestimate the amount of\n      shares in.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param dy The amount of bonds paid to the trader.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return The amount of shares the trader pays.\n @return A flag indicating if the calculation succeeded." }, "implemented": true, "kind": "function", "modifiers": [], "name": "calculateSharesInGivenBondsOutUpSafe", "nameLocation": "5585:36:132", "parameters": { "id": 22635, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22624, "mutability": "mutable", "name": "ze", "nameLocation": "5639:2:132", "nodeType": "VariableDeclaration", "scope": 22749, "src": "5631:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22623, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5631:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22626, "mutability": "mutable", "name": "y", "nameLocation": "5659:1:132", "nodeType": "VariableDeclaration", "scope": 22749, "src": "5651:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22625, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5651:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22628, "mutability": "mutable", "name": "dy", "nameLocation": "5678:2:132", "nodeType": "VariableDeclaration", "scope": 22749, "src": "5670:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22627, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5670:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22630, "mutability": "mutable", "name": "t", "nameLocation": "5698:1:132", "nodeType": "VariableDeclaration", "scope": 22749, "src": "5690:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22629, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5690:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22632, "mutability": "mutable", "name": "c", "nameLocation": "5717:1:132", "nodeType": "VariableDeclaration", "scope": 22749, "src": "5709:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22631, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5709:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22634, "mutability": "mutable", "name": "mu", "nameLocation": "5736:2:132", "nodeType": "VariableDeclaration", "scope": 22749, "src": "5728:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22633, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5728:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "5621:123:132" }, "returnParameters": { "id": 22640, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22637, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 22749, "src": "5768:7:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22636, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5768:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22639, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 22749, "src": "5777:4:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "typeName": { "id": 22638, "name": "bool", "nodeType": "ElementaryTypeName", "src": "5777:4:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "visibility": "internal" }], "src": "5767:15:132" }, "scope": 23422, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 22885, "nodeType": "FunctionDefinition", "src": "7870:1957:132", "nodes": [], "body": { "id": 22884, "nodeType": "Block", "src": "8069:1758:132", "nodes": [], "statements": [{ "assignments": [22768], "declarations": [{ "constant": false, "id": 22768, "mutability": "mutable", "name": "k", "nameLocation": "8228:1:132", "nodeType": "VariableDeclaration", "scope": 22884, "src": "8220:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22767, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8220:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 22776, "initialValue": { "arguments": [{ "id": 22770, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22752, "src": "8238:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22771, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22754, "src": "8242:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22772, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22758, "src": "8245:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22773, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22760, "src": "8248:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22774, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22762, "src": "8251:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "id": 22769, "name": "kDown", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23421, "src": "8232:5:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,uint256) pure returns (uint256)" } }, "id": 22775, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "8232:22:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "8220:34:132" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22779, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22777, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22754, "src": "8324:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22778, "name": "dy", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22756, "src": "8328:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "8324:6:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22789, "nodeType": "IfStatement", "src": "8320:166:132", "trueBody": { "id": 22788, "nodeType": "Block", "src": "8332:154:132", "statements": [{ "expression": { "arguments": [{ "expression": { "expression": { "id": 22783, "name": "IHyperdrive", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11143, "src": "8402:11:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_IHyperdrive_$11143_$", "typeString": "type(contract IHyperdrive)" } }, "id": 22784, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "8414:27:132", "memberName": "InsufficientLiquidityReason", "nodeType": "MemberAccess", "referencedDeclaration": 10996, "src": "8402:39:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_enum$_InsufficientLiquidityReason_$10996_$", "typeString": "type(enum IHyperdrive.InsufficientLiquidityReason)" } }, "id": 22785, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberLocation": "8442:19:132", "memberName": "ArithmeticUnderflow", "nodeType": "MemberAccess", "referencedDeclaration": 10992, "src": "8402:59:132", "typeDescriptions": { "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10996", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10996", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" }], "expression": { "id": 22780, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18797, "src": "8346:6:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_Errors_$18797_$", "typeString": "type(library Errors)" } }, "id": 22782, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "8353:31:132", "memberName": "throwInsufficientLiquidityError", "nodeType": "MemberAccess", "referencedDeclaration": 18796, "src": "8346:38:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_enum$_InsufficientLiquidityReason_$10996_$returns$__$", "typeString": "function (enum IHyperdrive.InsufficientLiquidityReason) pure" } }, "id": 22786, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "8346:129:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_tuple$__$", "typeString": "tuple()" } }, "id": 22787, "nodeType": "ExpressionStatement", "src": "8346:129:132" }] } }, { "id": 22794, "nodeType": "UncheckedBlock", "src": "8524:42:132", "statements": [{ "expression": { "id": 22792, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22790, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22754, "src": "8548:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "-=", "rightHandSide": { "id": 22791, "name": "dy", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22756, "src": "8553:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "8548:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22793, "nodeType": "ExpressionStatement", "src": "8548:7:132" }] }, { "expression": { "id": 22800, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22795, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22754, "src": "8575:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22798, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22758, "src": "8585:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22796, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22754, "src": "8579:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22797, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "8581:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "8579:5:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22799, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "8579:8:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "8575:12:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22801, "nodeType": "ExpressionStatement", "src": "8575:12:132" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22804, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22802, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22768, "src": "8656:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22803, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22754, "src": "8660:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "8656:5:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22814, "nodeType": "IfStatement", "src": "8652:165:132", "trueBody": { "id": 22813, "nodeType": "Block", "src": "8663:154:132", "statements": [{ "expression": { "arguments": [{ "expression": { "expression": { "id": 22808, "name": "IHyperdrive", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11143, "src": "8733:11:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_IHyperdrive_$11143_$", "typeString": "type(contract IHyperdrive)" } }, "id": 22809, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "8745:27:132", "memberName": "InsufficientLiquidityReason", "nodeType": "MemberAccess", "referencedDeclaration": 10996, "src": "8733:39:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_enum$_InsufficientLiquidityReason_$10996_$", "typeString": "type(enum IHyperdrive.InsufficientLiquidityReason)" } }, "id": 22810, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberLocation": "8773:19:132", "memberName": "ArithmeticUnderflow", "nodeType": "MemberAccess", "referencedDeclaration": 10992, "src": "8733:59:132", "typeDescriptions": { "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10996", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10996", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" }], "expression": { "id": 22805, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18797, "src": "8677:6:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_Errors_$18797_$", "typeString": "type(library Errors)" } }, "id": 22807, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "8684:31:132", "memberName": "throwInsufficientLiquidityError", "nodeType": "MemberAccess", "referencedDeclaration": 18796, "src": "8677:38:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_enum$_InsufficientLiquidityReason_$10996_$returns$__$", "typeString": "function (enum IHyperdrive.InsufficientLiquidityReason) pure" } }, "id": 22811, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "8677:129:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_tuple$__$", "typeString": "tuple()" } }, "id": 22812, "nodeType": "ExpressionStatement", "src": "8677:129:132" }] } }, { "assignments": [22816], "declarations": [{ "constant": false, "id": 22816, "mutability": "mutable", "name": "_z", "nameLocation": "8988:2:132", "nodeType": "VariableDeclaration", "scope": 22884, "src": "8980:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22815, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8980:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 22817, "nodeType": "VariableDeclarationStatement", "src": "8980:10:132" }, { "id": 22824, "nodeType": "UncheckedBlock", "src": "9000:45:132", "statements": [{ "expression": { "id": 22822, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22818, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22816, "src": "9024:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22821, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22819, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22768, "src": "9029:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 22820, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22754, "src": "9033:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "9029:5:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "9024:10:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22823, "nodeType": "ExpressionStatement", "src": "9024:10:132" }] }, { "expression": { "id": 22831, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22825, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22816, "src": "9054:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22828, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22762, "src": "9073:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22829, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22760, "src": "9077:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22826, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22816, "src": "9059:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22827, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "9062:10:132", "memberName": "mulDivDown", "nodeType": "MemberAccess", "referencedDeclaration": 18834, "src": "9059:13:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256,uint256) pure returns (uint256)" } }, "id": 22830, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "9059:20:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "9054:25:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22832, "nodeType": "ExpressionStatement", "src": "9054:25:132" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22835, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22833, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22816, "src": "9093:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": ">=", "rightExpression": { "id": 22834, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "9099:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "9093:9:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "falseBody": { "id": 22857, "nodeType": "Block", "src": "9233:119:132", "statements": [{ "expression": { "id": 22855, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22847, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22816, "src": "9316:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 22852, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22758, "src": "9338:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22850, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "9328:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22851, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "9332:5:132", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18920, "src": "9328:9:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22853, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "9328:12:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22848, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22816, "src": "9321:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22849, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "9324:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "9321:6:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22854, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "9321:20:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "9316:25:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22856, "nodeType": "ExpressionStatement", "src": "9316:25:132" }] }, "id": 22858, "nodeType": "IfStatement", "src": "9089:263:132", "trueBody": { "id": 22846, "nodeType": "Block", "src": "9104:123:132", "statements": [{ "expression": { "id": 22844, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22836, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22816, "src": "9189:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 22841, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22758, "src": "9213:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22839, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "9201:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22840, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "9205:7:132", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18870, "src": "9201:11:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22842, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "9201:14:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22837, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22816, "src": "9194:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22838, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "9197:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "9194:6:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22843, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "9194:22:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "9189:27:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22845, "nodeType": "ExpressionStatement", "src": "9189:27:132" }] } }, { "expression": { "id": 22864, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22859, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22816, "src": "9429:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22862, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22762, "src": "9445:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22860, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22816, "src": "9434:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22861, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "9437:7:132", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18870, "src": "9434:10:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22863, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "9434:14:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "9429:19:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22865, "nodeType": "ExpressionStatement", "src": "9429:19:132" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22868, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22866, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22816, "src": "9519:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22867, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22752, "src": "9524:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "9519:7:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22878, "nodeType": "IfStatement", "src": "9515:167:132", "trueBody": { "id": 22877, "nodeType": "Block", "src": "9528:154:132", "statements": [{ "expression": { "arguments": [{ "expression": { "expression": { "id": 22872, "name": "IHyperdrive", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11143, "src": "9598:11:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_IHyperdrive_$11143_$", "typeString": "type(contract IHyperdrive)" } }, "id": 22873, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "9610:27:132", "memberName": "InsufficientLiquidityReason", "nodeType": "MemberAccess", "referencedDeclaration": 10996, "src": "9598:39:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_enum$_InsufficientLiquidityReason_$10996_$", "typeString": "type(enum IHyperdrive.InsufficientLiquidityReason)" } }, "id": 22874, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberLocation": "9638:19:132", "memberName": "ArithmeticUnderflow", "nodeType": "MemberAccess", "referencedDeclaration": 10992, "src": "9598:59:132", "typeDescriptions": { "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10996", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10996", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" }], "expression": { "id": 22869, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18797, "src": "9542:6:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_Errors_$18797_$", "typeString": "type(library Errors)" } }, "id": 22871, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "9549:31:132", "memberName": "throwInsufficientLiquidityError", "nodeType": "MemberAccess", "referencedDeclaration": 18796, "src": "9542:38:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_enum$_InsufficientLiquidityReason_$10996_$returns$__$", "typeString": "function (enum IHyperdrive.InsufficientLiquidityReason) pure" } }, "id": 22875, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "9542:129:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_tuple$__$", "typeString": "tuple()" } }, "id": 22876, "nodeType": "ExpressionStatement", "src": "9542:129:132" }] } }, { "id": 22883, "nodeType": "UncheckedBlock", "src": "9772:49:132", "statements": [{ "expression": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22881, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22879, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22816, "src": "9803:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 22880, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22752, "src": "9808:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "9803:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "functionReturnParameters": 22766, "id": 22882, "nodeType": "Return", "src": "9796:14:132" }] }] }, "documentation": { "id": 22750, "nodeType": "StructuredDocumentation", "src": "7347:518:132", "text": "@dev Calculates the amount of shares a user must provide the pool to\n      receive a specified amount of bonds. We underestimate the amount of\n      shares in.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param dy The amount of bonds paid to the trader.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return The amount of shares the user pays." }, "implemented": true, "kind": "function", "modifiers": [], "name": "calculateSharesInGivenBondsOutDown", "nameLocation": "7879:34:132", "parameters": { "id": 22763, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22752, "mutability": "mutable", "name": "ze", "nameLocation": "7931:2:132", "nodeType": "VariableDeclaration", "scope": 22885, "src": "7923:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22751, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7923:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22754, "mutability": "mutable", "name": "y", "nameLocation": "7951:1:132", "nodeType": "VariableDeclaration", "scope": 22885, "src": "7943:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22753, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7943:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22756, "mutability": "mutable", "name": "dy", "nameLocation": "7970:2:132", "nodeType": "VariableDeclaration", "scope": 22885, "src": "7962:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22755, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7962:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22758, "mutability": "mutable", "name": "t", "nameLocation": "7990:1:132", "nodeType": "VariableDeclaration", "scope": 22885, "src": "7982:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22757, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7982:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22760, "mutability": "mutable", "name": "c", "nameLocation": "8009:1:132", "nodeType": "VariableDeclaration", "scope": 22885, "src": "8001:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22759, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8001:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22762, "mutability": "mutable", "name": "mu", "nameLocation": "8028:2:132", "nodeType": "VariableDeclaration", "scope": 22885, "src": "8020:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22761, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8020:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "7913:123:132" }, "returnParameters": { "id": 22766, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22765, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 22885, "src": "8060:7:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22764, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8060:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "8059:9:132" }, "scope": 23422, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 22932, "nodeType": "FunctionDefinition", "src": "10452:583:132", "nodes": [], "body": { "id": 22931, "nodeType": "Block", "src": "10658:377:132", "nodes": [], "statements": [{ "assignments": [22904], "declarations": [{ "constant": false, "id": 22904, "mutability": "mutable", "name": "success", "nameLocation": "10673:7:132", "nodeType": "VariableDeclaration", "scope": 22931, "src": "10668:12:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "typeName": { "id": 22903, "name": "bool", "nodeType": "ElementaryTypeName", "src": "10668:4:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "visibility": "internal" }], "id": 22905, "nodeType": "VariableDeclarationStatement", "src": "10668:12:132" }, { "expression": { "id": 22917, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "components": [{ "id": 22906, "name": "result", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22901, "src": "10691:6:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22907, "name": "success", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22904, "src": "10699:7:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }], "id": 22908, "isConstant": false, "isInlineArray": false, "isLValue": true, "isPure": false, "lValueRequested": true, "nodeType": "TupleExpression", "src": "10690:17:132", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_uint256_$_t_bool_$", "typeString": "tuple(uint256,bool)" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22910, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22888, "src": "10762:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22911, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22890, "src": "10778:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22912, "name": "dy", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22892, "src": "10793:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22913, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22894, "src": "10809:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22914, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22896, "src": "10824:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22915, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22898, "src": "10839:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "id": 22909, "name": "calculateSharesOutGivenBondsInDownSafe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23049, "src": "10710:38:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$_t_bool_$", "typeString": "function (uint256,uint256,uint256,uint256,uint256,uint256) pure returns (uint256,bool)" } }, "id": 22916, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "10710:141:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_tuple$_t_uint256_$_t_bool_$", "typeString": "tuple(uint256,bool)" } }, "src": "10690:161:132", "typeDescriptions": { "typeIdentifier": "t_tuple$__$", "typeString": "tuple()" } }, "id": 22918, "nodeType": "ExpressionStatement", "src": "10690:161:132" }, { "condition": { "id": 22920, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "UnaryOperation", "operator": "!", "prefix": true, "src": "10865:8:132", "subExpression": { "id": 22919, "name": "success", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22904, "src": "10866:7:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22930, "nodeType": "IfStatement", "src": "10861:168:132", "trueBody": { "id": 22929, "nodeType": "Block", "src": "10875:154:132", "statements": [{ "expression": { "arguments": [{ "expression": { "expression": { "id": 22924, "name": "IHyperdrive", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11143, "src": "10945:11:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_IHyperdrive_$11143_$", "typeString": "type(contract IHyperdrive)" } }, "id": 22925, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "10957:27:132", "memberName": "InsufficientLiquidityReason", "nodeType": "MemberAccess", "referencedDeclaration": 10996, "src": "10945:39:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_enum$_InsufficientLiquidityReason_$10996_$", "typeString": "type(enum IHyperdrive.InsufficientLiquidityReason)" } }, "id": 22926, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberLocation": "10985:19:132", "memberName": "ArithmeticUnderflow", "nodeType": "MemberAccess", "referencedDeclaration": 10992, "src": "10945:59:132", "typeDescriptions": { "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10996", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10996", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" }], "expression": { "id": 22921, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18797, "src": "10889:6:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_Errors_$18797_$", "typeString": "type(library Errors)" } }, "id": 22923, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "10896:31:132", "memberName": "throwInsufficientLiquidityError", "nodeType": "MemberAccess", "referencedDeclaration": 18796, "src": "10889:38:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_enum$_InsufficientLiquidityReason_$10996_$returns$__$", "typeString": "function (enum IHyperdrive.InsufficientLiquidityReason) pure" } }, "id": 22927, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "10889:129:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_tuple$__$", "typeString": "tuple()" } }, "id": 22928, "nodeType": "ExpressionStatement", "src": "10889:129:132" }] } }] }, "documentation": { "id": 22886, "nodeType": "StructuredDocumentation", "src": "9833:614:132", "text": "@dev Calculates the amount of shares a user will receive from the pool\n      by providing a specified amount of bonds. This function reverts if\n      an integer overflow or underflow occurs. We underestimate the\n      amount of shares out.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param dy The amount of bonds paid to the pool.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return result The amount of shares the user receives." }, "implemented": true, "kind": "function", "modifiers": [], "name": "calculateSharesOutGivenBondsInDown", "nameLocation": "10461:34:132", "parameters": { "id": 22899, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22888, "mutability": "mutable", "name": "ze", "nameLocation": "10513:2:132", "nodeType": "VariableDeclaration", "scope": 22932, "src": "10505:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22887, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10505:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22890, "mutability": "mutable", "name": "y", "nameLocation": "10533:1:132", "nodeType": "VariableDeclaration", "scope": 22932, "src": "10525:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22889, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10525:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22892, "mutability": "mutable", "name": "dy", "nameLocation": "10552:2:132", "nodeType": "VariableDeclaration", "scope": 22932, "src": "10544:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22891, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10544:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22894, "mutability": "mutable", "name": "t", "nameLocation": "10572:1:132", "nodeType": "VariableDeclaration", "scope": 22932, "src": "10564:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22893, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10564:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22896, "mutability": "mutable", "name": "c", "nameLocation": "10591:1:132", "nodeType": "VariableDeclaration", "scope": 22932, "src": "10583:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22895, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10583:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22898, "mutability": "mutable", "name": "mu", "nameLocation": "10610:2:132", "nodeType": "VariableDeclaration", "scope": 22932, "src": "10602:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22897, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10602:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "10495:123:132" }, "returnParameters": { "id": 22902, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22901, "mutability": "mutable", "name": "result", "nameLocation": "10650:6:132", "nodeType": "VariableDeclaration", "scope": 22932, "src": "10642:14:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22900, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10642:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "10641:16:132" }, "scope": 23422, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 23049, "nodeType": "FunctionDefinition", "src": "11709:1515:132", "nodes": [], "body": { "id": 23048, "nodeType": "Block", "src": "11918:1306:132", "nodes": [], "statements": [{ "assignments": [22953], "declarations": [{ "constant": false, "id": 22953, "mutability": "mutable", "name": "k", "nameLocation": "12074:1:132", "nodeType": "VariableDeclaration", "scope": 23048, "src": "12066:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22952, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "12066:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 22961, "initialValue": { "arguments": [{ "id": 22955, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22935, "src": "12082:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22956, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22937, "src": "12086:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22957, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22941, "src": "12089:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22958, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22943, "src": "12092:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22959, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22945, "src": "12095:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "id": 22954, "name": "kUp", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23387, "src": "12078:3:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,uint256) pure returns (uint256)" } }, "id": 22960, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "12078:20:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "12066:32:132" }, { "expression": { "id": 22970, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22962, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22937, "src": "12137:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22968, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22941, "src": "12154:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "components": [{ "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22965, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22963, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22937, "src": "12142:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": { "id": 22964, "name": "dy", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22939, "src": "12146:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12142:6:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "id": 22966, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "12141:8:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22967, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "12150:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "12141:12:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22969, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "12141:15:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12137:19:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22971, "nodeType": "ExpressionStatement", "src": "12137:19:132" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22974, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22972, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22953, "src": "12234:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22973, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22937, "src": "12238:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12234:5:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22980, "nodeType": "IfStatement", "src": "12230:53:132", "trueBody": { "id": 22979, "nodeType": "Block", "src": "12241:42:132", "statements": [{ "expression": { "components": [{ "hexValue": "30", "id": 22975, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "12263:1:132", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, { "hexValue": "66616c7365", "id": 22976, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "12266:5:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "false" }], "id": 22977, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "TupleExpression", "src": "12262:10:132", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_rational_0_by_1_$_t_bool_$", "typeString": "tuple(int_const 0,bool)" } }, "functionReturnParameters": 22951, "id": 22978, "nodeType": "Return", "src": "12255:17:132" }] } }, { "assignments": [22982], "declarations": [{ "constant": false, "id": 22982, "mutability": "mutable", "name": "_z", "nameLocation": "12446:2:132", "nodeType": "VariableDeclaration", "scope": 23048, "src": "12438:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22981, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "12438:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 22983, "nodeType": "VariableDeclarationStatement", "src": "12438:10:132" }, { "id": 22990, "nodeType": "UncheckedBlock", "src": "12458:45:132", "statements": [{ "expression": { "id": 22988, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22984, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22982, "src": "12482:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22987, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22985, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22953, "src": "12487:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 22986, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22937, "src": "12491:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12487:5:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12482:10:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22989, "nodeType": "ExpressionStatement", "src": "12482:10:132" }] }, { "expression": { "id": 22997, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22991, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22982, "src": "12512:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22994, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22945, "src": "12529:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22995, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22943, "src": "12533:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22992, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22982, "src": "12517:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22993, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "12520:8:132", "memberName": "mulDivUp", "nodeType": "MemberAccess", "referencedDeclaration": 18884, "src": "12517:11:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256,uint256) pure returns (uint256)" } }, "id": 22996, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "12517:18:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12512:23:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22998, "nodeType": "ExpressionStatement", "src": "12512:23:132" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23001, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22999, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22982, "src": "12549:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": ">=", "rightExpression": { "id": 23000, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "12555:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12549:9:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "falseBody": { "id": 23023, "nodeType": "Block", "src": "12685:123:132", "statements": [{ "expression": { "id": 23021, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 23013, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22982, "src": "12770:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 23018, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22941, "src": "12794:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23016, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "12782:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23017, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "12786:7:132", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18870, "src": "12782:11:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23019, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "12782:14:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23014, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22982, "src": "12775:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23015, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "12778:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "12775:6:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23020, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "12775:22:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12770:27:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23022, "nodeType": "ExpressionStatement", "src": "12770:27:132" }] }, "id": 23024, "nodeType": "IfStatement", "src": "12545:263:132", "trueBody": { "id": 23012, "nodeType": "Block", "src": "12560:119:132", "statements": [{ "expression": { "id": 23010, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 23002, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22982, "src": "12643:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 23007, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22941, "src": "12665:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23005, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "12655:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23006, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "12659:5:132", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18920, "src": "12655:9:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23008, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "12655:12:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23003, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22982, "src": "12648:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23004, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "12651:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "12648:6:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23009, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "12648:20:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12643:25:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23011, "nodeType": "ExpressionStatement", "src": "12643:25:132" }] } }, { "expression": { "id": 23030, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 23025, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22982, "src": "12885:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 23028, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22945, "src": "12899:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23026, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22982, "src": "12890:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23027, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "12893:5:132", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18920, "src": "12890:8:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23029, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "12890:12:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12885:17:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23031, "nodeType": "ExpressionStatement", "src": "12885:17:132" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23034, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23032, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22935, "src": "13022:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 23033, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22982, "src": "13027:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "13022:7:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 23040, "nodeType": "IfStatement", "src": "13018:55:132", "trueBody": { "id": 23039, "nodeType": "Block", "src": "13031:42:132", "statements": [{ "expression": { "components": [{ "hexValue": "30", "id": 23035, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "13053:1:132", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, { "hexValue": "66616c7365", "id": 23036, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "13056:5:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "false" }], "id": 23037, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "TupleExpression", "src": "13052:10:132", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_rational_0_by_1_$_t_bool_$", "typeString": "tuple(int_const 0,bool)" } }, "functionReturnParameters": 22951, "id": 23038, "nodeType": "Return", "src": "13045:17:132" }] } }, { "id": 23047, "nodeType": "UncheckedBlock", "src": "13161:57:132", "statements": [{ "expression": { "components": [{ "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23043, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23041, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22935, "src": "13193:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 23042, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22982, "src": "13198:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "13193:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "hexValue": "74727565", "id": 23044, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "13202:4:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "true" }], "id": 23045, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "13192:15:132", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_uint256_$_t_bool_$", "typeString": "tuple(uint256,bool)" } }, "functionReturnParameters": 22951, "id": 23046, "nodeType": "Return", "src": "13185:22:132" }] }] }, "documentation": { "id": 22933, "nodeType": "StructuredDocumentation", "src": "11041:663:132", "text": "@dev Calculates the amount of shares a user will receive from the pool\n      by providing a specified amount of bonds. This function returns a\n      success flag instead of reverting. We underestimate the amount of\n      shares out.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param dy The amount of bonds paid to the pool.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return The amount of shares the user receives\n @return A flag indicating if the calculation succeeded." }, "implemented": true, "kind": "function", "modifiers": [], "name": "calculateSharesOutGivenBondsInDownSafe", "nameLocation": "11718:38:132", "parameters": { "id": 22946, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22935, "mutability": "mutable", "name": "ze", "nameLocation": "11774:2:132", "nodeType": "VariableDeclaration", "scope": 23049, "src": "11766:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22934, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "11766:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22937, "mutability": "mutable", "name": "y", "nameLocation": "11794:1:132", "nodeType": "VariableDeclaration", "scope": 23049, "src": "11786:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22936, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "11786:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22939, "mutability": "mutable", "name": "dy", "nameLocation": "11813:2:132", "nodeType": "VariableDeclaration", "scope": 23049, "src": "11805:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22938, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "11805:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22941, "mutability": "mutable", "name": "t", "nameLocation": "11833:1:132", "nodeType": "VariableDeclaration", "scope": 23049, "src": "11825:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22940, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "11825:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22943, "mutability": "mutable", "name": "c", "nameLocation": "11852:1:132", "nodeType": "VariableDeclaration", "scope": 23049, "src": "11844:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22942, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "11844:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22945, "mutability": "mutable", "name": "mu", "nameLocation": "11871:2:132", "nodeType": "VariableDeclaration", "scope": 23049, "src": "11863:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22944, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "11863:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "11756:123:132" }, "returnParameters": { "id": 22951, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22948, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 23049, "src": "11903:7:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22947, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "11903:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22950, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 23049, "src": "11912:4:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "typeName": { "id": 22949, "name": "bool", "nodeType": "ElementaryTypeName", "src": "11912:4:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "visibility": "internal" }], "src": "11902:15:132" }, "scope": 23422, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 23139, "nodeType": "FunctionDefinition", "src": "13859:1409:132", "nodes": [], "body": { "id": 23138, "nodeType": "Block", "src": "14037:1231:132", "nodes": [], "statements": [{ "assignments": [23068], "declarations": [{ "constant": false, "id": 23068, "mutability": "mutable", "name": "k", "nameLocation": "14551:1:132", "nodeType": "VariableDeclaration", "scope": 23138, "src": "14543:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23067, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "14543:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 23076, "initialValue": { "arguments": [{ "id": 23070, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23052, "src": "14561:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23071, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23054, "src": "14565:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23072, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23056, "src": "14568:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23073, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23058, "src": "14571:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23074, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23060, "src": "14574:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "id": 23069, "name": "kDown", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23421, "src": "14555:5:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,uint256) pure returns (uint256)" } }, "id": 23075, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "14555:22:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "14543:34:132" }, { "assignments": [23078], "declarations": [{ "constant": false, "id": 23078, "mutability": "mutable", "name": "optimalZe", "nameLocation": "14595:9:132", "nodeType": "VariableDeclaration", "scope": 23138, "src": "14587:17:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23077, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "14587:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 23088, "initialValue": { "arguments": [{ "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23086, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "arguments": [{ "id": 23083, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23060, "src": "14625:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23081, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23058, "src": "14617:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23082, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "14619:5:132", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18920, "src": "14617:7:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23084, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "14617:11:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": { "id": 23085, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "14631:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "14617:17:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23079, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23068, "src": "14607:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23080, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "14609:7:132", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18870, "src": "14607:9:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23087, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "14607:28:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "14587:48:132" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23091, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23089, "name": "optimalZe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23078, "src": "14649:9:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": ">=", "rightExpression": { "id": 23090, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "14662:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "14649:16:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "falseBody": { "id": 23113, "nodeType": "Block", "src": "14811:134:132", "statements": [{ "expression": { "id": 23111, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 23103, "name": "optimalZe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23078, "src": "14895:9:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 23108, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23056, "src": "14931:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23106, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "14921:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23107, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "14925:5:132", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18920, "src": "14921:9:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23109, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "14921:12:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23104, "name": "optimalZe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23078, "src": "14907:9:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23105, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "14917:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "14907:13:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23110, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "14907:27:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "14895:39:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23112, "nodeType": "ExpressionStatement", "src": "14895:39:132" }] }, "id": 23114, "nodeType": "IfStatement", "src": "14645:300:132", "trueBody": { "id": 23102, "nodeType": "Block", "src": "14667:138:132", "statements": [{ "expression": { "id": 23100, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 23092, "name": "optimalZe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23078, "src": "14753:9:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 23097, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23056, "src": "14791:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23095, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "14779:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23096, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "14783:7:132", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18870, "src": "14779:11:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23098, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "14779:14:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23093, "name": "optimalZe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23078, "src": "14765:9:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23094, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "14775:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "14765:13:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23099, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "14765:29:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "14753:41:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23101, "nodeType": "ExpressionStatement", "src": "14753:41:132" }] } }, { "expression": { "id": 23120, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 23115, "name": "optimalZe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23078, "src": "14954:9:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 23118, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23060, "src": "14984:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23116, "name": "optimalZe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23078, "src": "14966:9:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23117, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "14976:7:132", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18870, "src": "14966:17:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23119, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "14966:21:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "14954:33:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23121, "nodeType": "ExpressionStatement", "src": "14954:33:132" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23124, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23122, "name": "optimalZe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23078, "src": "15131:9:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 23123, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23052, "src": "15143:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "15131:14:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 23130, "nodeType": "IfStatement", "src": "15127:62:132", "trueBody": { "id": 23129, "nodeType": "Block", "src": "15147:42:132", "statements": [{ "expression": { "components": [{ "hexValue": "30", "id": 23125, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "15169:1:132", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, { "hexValue": "66616c7365", "id": 23126, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "15172:5:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "false" }], "id": 23127, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "TupleExpression", "src": "15168:10:132", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_rational_0_by_1_$_t_bool_$", "typeString": "tuple(int_const 0,bool)" } }, "functionReturnParameters": 23066, "id": 23128, "nodeType": "Return", "src": "15161:17:132" }] } }, { "id": 23137, "nodeType": "UncheckedBlock", "src": "15198:64:132", "statements": [{ "expression": { "components": [{ "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23133, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23131, "name": "optimalZe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23078, "src": "15230:9:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 23132, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23052, "src": "15242:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "15230:14:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "hexValue": "74727565", "id": 23134, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "15246:4:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "true" }], "id": 23135, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "15229:22:132", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_uint256_$_t_bool_$", "typeString": "tuple(uint256,bool)" } }, "functionReturnParameters": 23066, "id": 23136, "nodeType": "Return", "src": "15222:29:132" }] }] }, "documentation": { "id": 23050, "nodeType": "StructuredDocumentation", "src": "13230:624:132", "text": "@dev Calculates the share payment required to purchase the maximum\n      amount of bonds from the pool. This function returns a success flag\n      instead of reverting. We round so that the max buy amount is\n      underestimated.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return The share payment to purchase the maximum amount of bonds.\n @return A flag indicating if the calculation succeeded." }, "implemented": true, "kind": "function", "modifiers": [], "name": "calculateMaxBuySharesInSafe", "nameLocation": "13868:27:132", "parameters": { "id": 23061, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 23052, "mutability": "mutable", "name": "ze", "nameLocation": "13913:2:132", "nodeType": "VariableDeclaration", "scope": 23139, "src": "13905:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23051, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "13905:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23054, "mutability": "mutable", "name": "y", "nameLocation": "13933:1:132", "nodeType": "VariableDeclaration", "scope": 23139, "src": "13925:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23053, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "13925:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23056, "mutability": "mutable", "name": "t", "nameLocation": "13952:1:132", "nodeType": "VariableDeclaration", "scope": 23139, "src": "13944:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23055, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "13944:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23058, "mutability": "mutable", "name": "c", "nameLocation": "13971:1:132", "nodeType": "VariableDeclaration", "scope": 23139, "src": "13963:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23057, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "13963:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23060, "mutability": "mutable", "name": "mu", "nameLocation": "13990:2:132", "nodeType": "VariableDeclaration", "scope": 23139, "src": "13982:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23059, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "13982:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "13895:103:132" }, "returnParameters": { "id": 23066, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 23063, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 23139, "src": "14022:7:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23062, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "14022:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23065, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 23139, "src": "14031:4:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "typeName": { "id": 23064, "name": "bool", "nodeType": "ElementaryTypeName", "src": "14031:4:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "visibility": "internal" }], "src": "14021:15:132" }, "scope": 23422, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 23222, "nodeType": "FunctionDefinition", "src": "15892:1050:132", "nodes": [], "body": { "id": 23221, "nodeType": "Block", "src": "16070:872:132", "nodes": [], "statements": [{ "assignments": [23158], "declarations": [{ "constant": false, "id": 23158, "mutability": "mutable", "name": "k", "nameLocation": "16284:1:132", "nodeType": "VariableDeclaration", "scope": 23221, "src": "16276:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23157, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "16276:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 23166, "initialValue": { "arguments": [{ "id": 23160, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23142, "src": "16292:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23161, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23144, "src": "16296:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23162, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23146, "src": "16299:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23163, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23148, "src": "16302:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23164, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23150, "src": "16305:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "id": 23159, "name": "kUp", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23387, "src": "16288:3:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,uint256) pure returns (uint256)" } }, "id": 23165, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "16288:20:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "16276:32:132" }, { "assignments": [23168], "declarations": [{ "constant": false, "id": 23168, "mutability": "mutable", "name": "optimalY", "nameLocation": "16326:8:132", "nodeType": "VariableDeclaration", "scope": 23221, "src": "16318:16:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23167, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "16318:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 23178, "initialValue": { "arguments": [{ "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23176, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "arguments": [{ "id": 23173, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23150, "src": "16355:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23171, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23148, "src": "16345:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23172, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "16347:7:132", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18870, "src": "16345:9:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23174, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "16345:13:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": { "id": 23175, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "16361:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "16345:19:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23169, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23158, "src": "16337:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23170, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "16339:5:132", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18920, "src": "16337:7:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23177, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "16337:28:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "16318:47:132" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23181, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23179, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23168, "src": "16379:8:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": ">=", "rightExpression": { "id": 23180, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "16391:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "16379:15:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "falseBody": { "id": 23203, "nodeType": "Block", "src": "16533:135:132", "statements": [{ "expression": { "id": 23201, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 23193, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23168, "src": "16618:8:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 23198, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23146, "src": "16654:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23196, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "16642:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23197, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "16646:7:132", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18870, "src": "16642:11:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23199, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "16642:14:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23194, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23168, "src": "16629:8:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23195, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "16638:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "16629:12:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23200, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "16629:28:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "16618:39:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23202, "nodeType": "ExpressionStatement", "src": "16618:39:132" }] }, "id": 23204, "nodeType": "IfStatement", "src": "16375:293:132", "trueBody": { "id": 23192, "nodeType": "Block", "src": "16396:131:132", "statements": [{ "expression": { "id": 23190, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 23182, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23168, "src": "16479:8:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 23187, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23146, "src": "16513:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23185, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "16503:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23186, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "16507:5:132", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18920, "src": "16503:9:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23188, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "16503:12:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23183, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23168, "src": "16490:8:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23184, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "16499:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "16490:12:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23189, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "16490:26:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "16479:37:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23191, "nodeType": "ExpressionStatement", "src": "16479:37:132" }] } }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23207, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23205, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23144, "src": "16809:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 23206, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23168, "src": "16813:8:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "16809:12:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 23213, "nodeType": "IfStatement", "src": "16805:60:132", "trueBody": { "id": 23212, "nodeType": "Block", "src": "16823:42:132", "statements": [{ "expression": { "components": [{ "hexValue": "30", "id": 23208, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "16845:1:132", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, { "hexValue": "66616c7365", "id": 23209, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "16848:5:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "false" }], "id": 23210, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "TupleExpression", "src": "16844:10:132", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_rational_0_by_1_$_t_bool_$", "typeString": "tuple(int_const 0,bool)" } }, "functionReturnParameters": 23156, "id": 23211, "nodeType": "Return", "src": "16837:17:132" }] } }, { "id": 23220, "nodeType": "UncheckedBlock", "src": "16874:62:132", "statements": [{ "expression": { "components": [{ "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23216, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23214, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23144, "src": "16906:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 23215, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23168, "src": "16910:8:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "16906:12:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "hexValue": "74727565", "id": 23217, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "16920:4:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "true" }], "id": 23218, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "16905:20:132", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_uint256_$_t_bool_$", "typeString": "tuple(uint256,bool)" } }, "functionReturnParameters": 23156, "id": 23219, "nodeType": "Return", "src": "16898:27:132" }] }] }, "documentation": { "id": 23140, "nodeType": "StructuredDocumentation", "src": "15274:613:132", "text": "@dev Calculates the maximum amount of bonds that can be purchased with\n      the specified reserves. This function returns a success flag\n      instead of reverting. We round so that the max buy amount is\n      underestimated.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return The maximum amount of bonds that can be purchased.\n @return A flag indicating if the calculation succeeded." }, "implemented": true, "kind": "function", "modifiers": [], "name": "calculateMaxBuyBondsOutSafe", "nameLocation": "15901:27:132", "parameters": { "id": 23151, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 23142, "mutability": "mutable", "name": "ze", "nameLocation": "15946:2:132", "nodeType": "VariableDeclaration", "scope": 23222, "src": "15938:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23141, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "15938:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23144, "mutability": "mutable", "name": "y", "nameLocation": "15966:1:132", "nodeType": "VariableDeclaration", "scope": 23222, "src": "15958:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23143, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "15958:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23146, "mutability": "mutable", "name": "t", "nameLocation": "15985:1:132", "nodeType": "VariableDeclaration", "scope": 23222, "src": "15977:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23145, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "15977:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23148, "mutability": "mutable", "name": "c", "nameLocation": "16004:1:132", "nodeType": "VariableDeclaration", "scope": 23222, "src": "15996:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23147, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "15996:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23150, "mutability": "mutable", "name": "mu", "nameLocation": "16023:2:132", "nodeType": "VariableDeclaration", "scope": 23222, "src": "16015:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23149, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "16015:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "15928:103:132" }, "returnParameters": { "id": 23156, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 23153, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 23222, "src": "16055:7:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23152, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "16055:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23155, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 23222, "src": "16064:4:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "typeName": { "id": 23154, "name": "bool", "nodeType": "ElementaryTypeName", "src": "16064:4:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "visibility": "internal" }], "src": "16054:15:132" }, "scope": 23422, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 23353, "nodeType": "FunctionDefinition", "src": "17581:1971:132", "nodes": [], "body": { "id": 23352, "nodeType": "Block", "src": "17801:1751:132", "nodes": [], "statements": [{ "condition": { "commonType": { "typeIdentifier": "t_int256", "typeString": "int256" }, "id": 23246, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23244, "name": "zeta", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23227, "src": "18085:4:132", "typeDescriptions": { "typeIdentifier": "t_int256", "typeString": "int256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "hexValue": "30", "id": 23245, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "18092:1:132", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, "src": "18085:8:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 23258, "nodeType": "IfStatement", "src": "18081:67:132", "trueBody": { "id": 23257, "nodeType": "Block", "src": "18095:53:132", "statements": [{ "expression": { "id": 23255, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 23247, "name": "zMin", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23231, "src": "18109:4:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23254, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23248, "name": "zMin", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23231, "src": "18116:4:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": { "arguments": [{ "id": 23252, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "UnaryOperation", "operator": "-", "prefix": true, "src": "18131:5:132", "subExpression": { "id": 23251, "name": "zeta", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23227, "src": "18132:4:132", "typeDescriptions": { "typeIdentifier": "t_int256", "typeString": "int256" } }, "typeDescriptions": { "typeIdentifier": "t_int256", "typeString": "int256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_int256", "typeString": "int256" }], "id": 23250, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "ElementaryTypeNameExpression", "src": "18123:7:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_uint256_$", "typeString": "type(uint256)" }, "typeName": { "id": 23249, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "18123:7:132", "typeDescriptions": {} } }, "id": 23253, "isConstant": false, "isLValue": false, "isPure": false, "kind": "typeConversion", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "18123:14:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "18116:21:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "18109:28:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23256, "nodeType": "ExpressionStatement", "src": "18109:28:132" }] } }, { "assignments": [23260], "declarations": [{ "constant": false, "id": 23260, "mutability": "mutable", "name": "ze", "nameLocation": "18651:2:132", "nodeType": "VariableDeclaration", "scope": 23352, "src": "18643:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23259, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "18643:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 23266, "initialValue": { "arguments": [{ "id": 23263, "name": "z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23225, "src": "18703:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23264, "name": "zeta", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23227, "src": "18706:4:132", "typeDescriptions": { "typeIdentifier": "t_int256", "typeString": "int256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_int256", "typeString": "int256" }], "expression": { "id": 23261, "name": "HyperdriveMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20320, "src": "18656:14:132", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_HyperdriveMath_$20320_$", "typeString": "type(library HyperdriveMath)" } }, "id": 23262, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "18671:31:132", "memberName": "calculateEffectiveShareReserves", "nodeType": "MemberAccess", "referencedDeclaration": 19763, "src": "18656:46:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_int256_$returns$_t_uint256_$", "typeString": "function (uint256,int256) pure returns (uint256)" } }, "id": 23265, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "18656:55:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "18643:68:132" }, { "assignments": [23268], "declarations": [{ "constant": false, "id": 23268, "mutability": "mutable", "name": "k", "nameLocation": "18729:1:132", "nodeType": "VariableDeclaration", "scope": 23352, "src": "18721:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23267, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "18721:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 23276, "initialValue": { "arguments": [{ "id": 23270, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23260, "src": "18739:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23271, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23229, "src": "18743:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23272, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23233, "src": "18746:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23273, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23235, "src": "18749:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23274, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23237, "src": "18752:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "id": 23269, "name": "kDown", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23421, "src": "18733:5:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,uint256) pure returns (uint256)" } }, "id": 23275, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "18733:22:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "18721:34:132" }, { "assignments": [23278], "declarations": [{ "constant": false, "id": 23278, "mutability": "mutable", "name": "rhs", "nameLocation": "18773:3:132", "nodeType": "VariableDeclaration", "scope": 23352, "src": "18765:11:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23277, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "18765:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 23290, "initialValue": { "arguments": [{ "arguments": [{ "id": 23286, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23233, "src": "18809:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "arguments": [{ "id": 23283, "name": "zMin", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23231, "src": "18799:4:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23281, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23237, "src": "18790:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23282, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "18793:5:132", "memberName": "mulUp", "nodeType": "MemberAccess", "referencedDeclaration": 18902, "src": "18790:8:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23284, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "18790:14:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23285, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "18805:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "18790:18:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23287, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "18790:21:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23288, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23237, "src": "18813:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23279, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23235, "src": "18779:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23280, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "18781:8:132", "memberName": "mulDivUp", "nodeType": "MemberAccess", "referencedDeclaration": 18884, "src": "18779:10:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256,uint256) pure returns (uint256)" } }, "id": 23289, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "18779:37:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "18765:51:132" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23293, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23291, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23268, "src": "18830:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 23292, "name": "rhs", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23278, "src": "18834:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "18830:7:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 23299, "nodeType": "IfStatement", "src": "18826:55:132", "trueBody": { "id": 23298, "nodeType": "Block", "src": "18839:42:132", "statements": [{ "expression": { "components": [{ "hexValue": "30", "id": 23294, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "18861:1:132", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, { "hexValue": "66616c7365", "id": 23295, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "18864:5:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "false" }], "id": 23296, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "TupleExpression", "src": "18860:10:132", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_rational_0_by_1_$_t_bool_$", "typeString": "tuple(int_const 0,bool)" } }, "functionReturnParameters": 23243, "id": 23297, "nodeType": "Return", "src": "18853:17:132" }] } }, { "assignments": [23301], "declarations": [{ "constant": false, "id": 23301, "mutability": "mutable", "name": "optimalY", "nameLocation": "18898:8:132", "nodeType": "VariableDeclaration", "scope": 23352, "src": "18890:16:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23300, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "18890:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 23302, "nodeType": "VariableDeclarationStatement", "src": "18890:16:132" }, { "id": 23309, "nodeType": "UncheckedBlock", "src": "18916:53:132", "statements": [{ "expression": { "id": 23307, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 23303, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23301, "src": "18940:8:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23306, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23304, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23268, "src": "18951:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 23305, "name": "rhs", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23278, "src": "18955:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "18951:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "18940:18:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23308, "nodeType": "ExpressionStatement", "src": "18940:18:132" }] }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23312, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23310, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23301, "src": "18982:8:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": ">=", "rightExpression": { "id": 23311, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "18994:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "18982:15:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "falseBody": { "id": 23334, "nodeType": "Block", "src": "19141:132:132", "statements": [{ "expression": { "id": 23332, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 23324, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23301, "src": "19225:8:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 23329, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23233, "src": "19259:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23327, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "19249:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23328, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "19253:5:132", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18920, "src": "19249:9:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23330, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "19249:12:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23325, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23301, "src": "19236:8:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23326, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "19245:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "19236:12:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23331, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "19236:26:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "19225:37:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23333, "nodeType": "ExpressionStatement", "src": "19225:37:132" }] }, "id": 23335, "nodeType": "IfStatement", "src": "18978:295:132", "trueBody": { "id": 23323, "nodeType": "Block", "src": "18999:136:132", "statements": [{ "expression": { "id": 23321, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 23313, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23301, "src": "19085:8:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 23318, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23233, "src": "19121:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23316, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18806, "src": "19109:3:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23317, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "19113:7:132", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18870, "src": "19109:11:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23319, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "19109:14:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23314, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23301, "src": "19096:8:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23315, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "19105:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "19096:12:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23320, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "19096:28:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "19085:39:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23322, "nodeType": "ExpressionStatement", "src": "19085:39:132" }] } }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23338, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23336, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23301, "src": "19419:8:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 23337, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23229, "src": "19430:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "19419:12:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 23344, "nodeType": "IfStatement", "src": "19415:60:132", "trueBody": { "id": 23343, "nodeType": "Block", "src": "19433:42:132", "statements": [{ "expression": { "components": [{ "hexValue": "30", "id": 23339, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "19455:1:132", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, { "hexValue": "66616c7365", "id": 23340, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "19458:5:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "false" }], "id": 23341, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "TupleExpression", "src": "19454:10:132", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_rational_0_by_1_$_t_bool_$", "typeString": "tuple(int_const 0,bool)" } }, "functionReturnParameters": 23243, "id": 23342, "nodeType": "Return", "src": "19447:17:132" }] } }, { "id": 23351, "nodeType": "UncheckedBlock", "src": "19484:62:132", "statements": [{ "expression": { "components": [{ "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23347, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23345, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23301, "src": "19516:8:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 23346, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23229, "src": "19527:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "19516:12:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "hexValue": "74727565", "id": 23348, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "19530:4:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "true" }], "id": 23349, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "19515:20:132", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_uint256_$_t_bool_$", "typeString": "tuple(uint256,bool)" } }, "functionReturnParameters": 23243, "id": 23350, "nodeType": "Return", "src": "19508:27:132" }] }] }, "documentation": { "id": 23223, "nodeType": "StructuredDocumentation", "src": "16948:628:132", "text": "@dev Calculates the maximum amount of bonds that can be sold with the\n      specified reserves. We round so that the max sell amount is\n      underestimated.\n @param z The share reserves.\n @param zeta The share adjustment.\n @param y The bond reserves.\n @param zMin The minimum share reserves.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return The maximum amount of bonds that can be sold.\n @return A flag indicating whether or not the calculation was successful." }, "implemented": true, "kind": "function", "modifiers": [], "name": "calculateMaxSellBondsInSafe", "nameLocation": "17590:27:132", "parameters": { "id": 23238, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 23225, "mutability": "mutable", "name": "z", "nameLocation": "17635:1:132", "nodeType": "VariableDeclaration", "scope": 23353, "src": "17627:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23224, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "17627:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23227, "mutability": "mutable", "name": "zeta", "nameLocation": "17653:4:132", "nodeType": "VariableDeclaration", "scope": 23353, "src": "17646:11:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_int256", "typeString": "int256" }, "typeName": { "id": 23226, "name": "int256", "nodeType": "ElementaryTypeName", "src": "17646:6:132", "typeDescriptions": { "typeIdentifier": "t_int256", "typeString": "int256" } }, "visibility": "internal" }, { "constant": false, "id": 23229, "mutability": "mutable", "name": "y", "nameLocation": "17675:1:132", "nodeType": "VariableDeclaration", "scope": 23353, "src": "17667:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23228, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "17667:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23231, "mutability": "mutable", "name": "zMin", "nameLocation": "17694:4:132", "nodeType": "VariableDeclaration", "scope": 23353, "src": "17686:12:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23230, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "17686:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23233, "mutability": "mutable", "name": "t", "nameLocation": "17716:1:132", "nodeType": "VariableDeclaration", "scope": 23353, "src": "17708:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23232, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "17708:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23235, "mutability": "mutable", "name": "c", "nameLocation": "17735:1:132", "nodeType": "VariableDeclaration", "scope": 23353, "src": "17727:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23234, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "17727:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23237, "mutability": "mutable", "name": "mu", "nameLocation": "17754:2:132", "nodeType": "VariableDeclaration", "scope": 23353, "src": "17746:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23236, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "17746:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "17617:145:132" }, "returnParameters": { "id": 23243, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 23240, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 23353, "src": "17786:7:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23239, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "17786:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23242, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 23353, "src": "17795:4:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "typeName": { "id": 23241, "name": "bool", "nodeType": "ElementaryTypeName", "src": "17795:4:132", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "visibility": "internal" }], "src": "17785:15:132" }, "scope": 23422, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 23387, "nodeType": "FunctionDefinition", "src": "20059:343:132", "nodes": [], "body": { "id": 23386, "nodeType": "Block", "src": "20207:195:132", "nodes": [], "statements": [{ "documentation": "k = (c / µ) * (µ * ze)^(1 - t) + y^(1 - t)", "expression": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23384, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "arguments": [{ "arguments": [{ "id": 23376, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23360, "src": "20377:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "arguments": [{ "id": 23373, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23356, "src": "20369:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23371, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23364, "src": "20360:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23372, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "20363:5:132", "memberName": "mulUp", "nodeType": "MemberAccess", "referencedDeclaration": 18902, "src": "20360:8:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23374, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "20360:12:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23375, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "20373:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "20360:16:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23377, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "20360:19:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23378, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23364, "src": "20381:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23369, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23362, "src": "20349:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23370, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "20351:8:132", "memberName": "mulDivUp", "nodeType": "MemberAccess", "referencedDeclaration": 18884, "src": "20349:10:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256,uint256) pure returns (uint256)" } }, "id": 23379, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "20349:35:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": { "arguments": [{ "id": 23382, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23360, "src": "20393:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23380, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23358, "src": "20387:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23381, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "20389:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "20387:5:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23383, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "20387:8:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "20349:46:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "functionReturnParameters": 23368, "id": 23385, "nodeType": "Return", "src": "20342:53:132" }] }, "documentation": { "id": 23354, "nodeType": "StructuredDocumentation", "src": "19558:496:132", "text": "@dev Calculates the YieldSpace invariant k. This invariant is given by:\n      k = (c / µ) * (µ * ze)^(1 - t) + y^(1 - t)\n      This variant of the calculation overestimates the result.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return The YieldSpace invariant, k." }, "implemented": true, "kind": "function", "modifiers": [], "name": "kUp", "nameLocation": "20068:3:132", "parameters": { "id": 23365, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 23356, "mutability": "mutable", "name": "ze", "nameLocation": "20089:2:132", "nodeType": "VariableDeclaration", "scope": 23387, "src": "20081:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23355, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20081:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23358, "mutability": "mutable", "name": "y", "nameLocation": "20109:1:132", "nodeType": "VariableDeclaration", "scope": 23387, "src": "20101:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23357, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20101:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23360, "mutability": "mutable", "name": "t", "nameLocation": "20128:1:132", "nodeType": "VariableDeclaration", "scope": 23387, "src": "20120:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23359, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20120:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23362, "mutability": "mutable", "name": "c", "nameLocation": "20147:1:132", "nodeType": "VariableDeclaration", "scope": 23387, "src": "20139:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23361, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20139:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23364, "mutability": "mutable", "name": "mu", "nameLocation": "20166:2:132", "nodeType": "VariableDeclaration", "scope": 23387, "src": "20158:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23363, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20158:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "20071:103:132" }, "returnParameters": { "id": 23368, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 23367, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 23387, "src": "20198:7:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23366, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20198:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "20197:9:132" }, "scope": 23422, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 23421, "nodeType": "FunctionDefinition", "src": "20915:352:132", "nodes": [], "body": { "id": 23420, "nodeType": "Block", "src": "21065:202:132", "nodes": [], "statements": [{ "documentation": "k = (c / µ) * (µ * ze)^(1 - t) + y^(1 - t)", "expression": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23418, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "arguments": [{ "arguments": [{ "id": 23410, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23394, "src": "21242:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "arguments": [{ "id": 23407, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23390, "src": "21234:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23405, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23398, "src": "21223:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23406, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "21226:7:132", "memberName": "mulDown", "nodeType": "MemberAccess", "referencedDeclaration": 18852, "src": "21223:10:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23408, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "21223:14:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23409, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "21238:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "21223:18:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23411, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "21223:21:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23412, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23398, "src": "21246:2:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23403, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23396, "src": "21210:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23404, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "21212:10:132", "memberName": "mulDivDown", "nodeType": "MemberAccess", "referencedDeclaration": 18834, "src": "21210:12:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256,uint256) pure returns (uint256)" } }, "id": 23413, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "21210:39:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": { "arguments": [{ "id": 23416, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23394, "src": "21258:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23414, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23392, "src": "21252:1:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23415, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "21254:3:132", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18977, "src": "21252:5:132", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23417, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "21252:8:132", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "21210:50:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "functionReturnParameters": 23402, "id": 23419, "nodeType": "Return", "src": "21203:57:132" }] }, "documentation": { "id": 23388, "nodeType": "StructuredDocumentation", "src": "20408:502:132", "text": "@dev Calculates the YieldSpace invariant k. This invariant is given by:\n      k = (c / µ) * (µ * ze)^(1 - t) + y^(1 - t)\n      This variant of the calculation underestimates the result.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return The modified YieldSpace Constant." }, "implemented": true, "kind": "function", "modifiers": [], "name": "kDown", "nameLocation": "20924:5:132", "parameters": { "id": 23399, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 23390, "mutability": "mutable", "name": "ze", "nameLocation": "20947:2:132", "nodeType": "VariableDeclaration", "scope": 23421, "src": "20939:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23389, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20939:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23392, "mutability": "mutable", "name": "y", "nameLocation": "20967:1:132", "nodeType": "VariableDeclaration", "scope": 23421, "src": "20959:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23391, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20959:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23394, "mutability": "mutable", "name": "t", "nameLocation": "20986:1:132", "nodeType": "VariableDeclaration", "scope": 23421, "src": "20978:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23393, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20978:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23396, "mutability": "mutable", "name": "c", "nameLocation": "21005:1:132", "nodeType": "VariableDeclaration", "scope": 23421, "src": "20997:9:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23395, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20997:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23398, "mutability": "mutable", "name": "mu", "nameLocation": "21024:2:132", "nodeType": "VariableDeclaration", "scope": 23421, "src": "21016:10:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23397, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "21016:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "20929:103:132" }, "returnParameters": { "id": 23402, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 23401, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 23421, "src": "21056:7:132", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23400, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "21056:7:132", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "21055:9:132" }, "scope": 23422, "stateMutability": "pure", "virtual": false, "visibility": "internal" }], "abstract": false, "baseContracts": [], "canonicalName": "YieldSpaceMath", "contractDependencies": [], "contractKind": "library", "documentation": { "id": 22455, "nodeType": "StructuredDocumentation", "src": "281:1185:132", "text": "@author DELV\n @title YieldSpaceMath\n @notice Math for the YieldSpace pricing model.\n @custom:disclaimer The language used in this code is for coding convenience\n                    only, and is not intended to, and does not, have any\n                    particular legal or regulatory significance.\n @dev It is advised for developers to attain the pre-requisite knowledge\n      of how this implementation works on the mathematical level. This\n      excerpt attempts to document this pre-requisite knowledge explaining\n      the underpinning mathematical concepts in an understandable manner and\n      relating it directly to the code implementation.\n      This implementation is based on a paper called \"YieldSpace with Yield\n      Bearing Vaults\" or more casually \"Modified YieldSpace\". It can be\n      found at the following link.\n      https://hackmd.io/lRZ4mgdrRgOpxZQXqKYlFw?view\n      That paper builds on the original YieldSpace paper, \"YieldSpace:\n      An Automated Liquidity Provider for Fixed Yield Tokens\". It can be\n      found at the following link:\n      https://yieldprotocol.com/YieldSpace.pdf" }, "fullyImplemented": true, "linearizedBaseContracts": [23422], "name": "YieldSpaceMath", "nameLocation": "1474:14:132", "scope": 23423, "usedErrors": [], "usedEvents": [] }], "license": "Apache-2.0" }, "id": 132 };

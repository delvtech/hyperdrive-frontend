export const YieldSpaceMath = { "abi": [], "bytecode": { "object": "0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122012f84b500b3d5ce19eada04132ce16a6f2ca99ff6701a6c65db74780a7c5256e64736f6c63430008140033", "sourceMap": "1466:19803:128:-:0;;;;;;;;;;;;;;;-1:-1:-1;;;1466:19803:128;;;;;;;;;;;;;;;;;", "linkReferences": {} }, "deployedBytecode": { "object": "0x73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122012f84b500b3d5ce19eada04132ce16a6f2ca99ff6701a6c65db74780a7c5256e64736f6c63430008140033", "sourceMap": "1466:19803:128:-:0;;;;;;;;", "linkReferences": {} }, "methodIdentifiers": {}, "rawMetadata": "{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[],\"devdoc\":{\"author\":\"DELV\",\"custom:disclaimer\":\"The language used in this code is for coding convenience                    only, and is not intended to, and does not, have any                    particular legal or regulatory significance.\",\"details\":\"It is advised for developers to attain the pre-requisite knowledge      of how this implementation works on the mathematical level. This      excerpt attempts to document this pre-requisite knowledge explaining      the underpinning mathematical concepts in an understandable manner and      relating it directly to the code implementation.      This implementation is based on a paper called \\\"YieldSpace with Yield      Bearing Vaults\\\" or more casually \\\"Modified YieldSpace\\\". It can be      found at the following link.      https://hackmd.io/lRZ4mgdrRgOpxZQXqKYlFw?view      That paper builds on the original YieldSpace paper, \\\"YieldSpace:      An Automated Liquidity Provider for Fixed Yield Tokens\\\". It can be      found at the following link:      https://yieldprotocol.com/YieldSpace.pdf\",\"kind\":\"dev\",\"methods\":{},\"title\":\"YieldSpaceMath\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"notice\":\"Math for the YieldSpace pricing model.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/src/libraries/YieldSpaceMath.sol\":\"YieldSpaceMath\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":aave-v3-core/=lib/aave-v3-core/\",\":ds-test/=lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin/=lib/openzeppelin-contracts/contracts/\",\":solmate/=lib/solmate/src/\"]},\"sources\":{\"contracts/src/interfaces/IERC20.sol\":{\"keccak256\":\"0x5f446a4987d57c64380d44c234ee079172e98bed9595ec067eb519898c3117d9\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://a3245994c58110716f5099c07e5cb270137356d288044f03c713d29c36e207ac\",\"dweb:/ipfs/QmYdn52sGRQKXfSyL8ieSz8HysG6R5kLJWsNwEnyX1e22p\"]},\"contracts/src/interfaces/IHyperdrive.sol\":{\"keccak256\":\"0xb8ee04f3090b498966970e210f7de0f982f6445628556f2f176385423d8c5952\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://db789f03faa935c6e3b0882b6e873e8f683c9c8841a4b128366dcbe7321911bf\",\"dweb:/ipfs/QmSQh1cX79nApuSAfJbVN99dmEaE4CK9QwWfEGcwhJMBLK\"]},\"contracts/src/interfaces/IHyperdriveCore.sol\":{\"keccak256\":\"0x68adcd293ff25711add1698b6024faa45beec01eb044bd0103d3020aa96d856e\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://0e0f5e35a7d2c656e249394d25896e5adfb9af3e210c01b9ef5fa81d25a45e24\",\"dweb:/ipfs/QmbLASezHPWHcbodqSfw3Qh9NzqekqVPM8FhCXKGTCXL1h\"]},\"contracts/src/interfaces/IHyperdriveEvents.sol\":{\"keccak256\":\"0x812ccb32dff907e8614c89a65196eec239eceb3e63f9f14dde2b2269c75a67c0\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://da5f2ce974bfcd8185342c121c879ba5aef23e1e4e7b36cf9fcba68296b8892c\",\"dweb:/ipfs/QmSho3PWs9bzejTYYjySuXcH9tVP4xFnkbUmSzQA54g8eG\"]},\"contracts/src/interfaces/IHyperdriveRead.sol\":{\"keccak256\":\"0x5922cbd86a7267c8fd19e3dc7a6f2636bad2b3330c28bca8e66adc7cd8ce2b55\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://ced8bce3f3c15a9f0bcdd11ba16e69651179edd6b16e267936788f4ab4d6eabf\",\"dweb:/ipfs/QmcoZPj4h2ym6r13KDU7JG2GoVdDWa1GwfKL2jjFRsp8H6\"]},\"contracts/src/interfaces/IMultiToken.sol\":{\"keccak256\":\"0xf5f82b8223e0c1bfcf4f73566a909ba07a9266960dfe2335c1494e06debbbe3f\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://920cf3fd66132a1e98a6a5708ad9a3bb047f4df8848119ab382b51094c1290a7\",\"dweb:/ipfs/QmWL3SyG8L91Coe9DsHz3Ke9tGMvYBf2NgRRDr3Fg5xFzp\"]},\"contracts/src/interfaces/IMultiTokenCore.sol\":{\"keccak256\":\"0x5c27315743bb6ef8a121ecf72cb24d5c144786dedb6526ef010f580eb872e501\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://3e102c51bac9c82766c9826d97dc780a05a2bf64703b070757a7531a0851a1ae\",\"dweb:/ipfs/QmXYwbzPbiznj5AeDiX7NNfRE9xyhSx1huTMfMFndrUZWs\"]},\"contracts/src/interfaces/IMultiTokenEvents.sol\":{\"keccak256\":\"0x165f79e628b1975343f979549f3fdb5073a29aeecb03861f41d165961ee39fdb\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://3c0751cf322944d080a7a6692897807d0cef798268689afc1f6c8f91182a4222\",\"dweb:/ipfs/QmQVWtCgphU9sjqD2q6F6ww62uXDSWZx5KJVj6jFJpXeDK\"]},\"contracts/src/interfaces/IMultiTokenMetadata.sol\":{\"keccak256\":\"0xcc21ad6d3d4e3de354fbc25a472d940e5e2af0b48766404f9efecdac600d72ca\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://b48fa111a773c820fe578efdd737d164e3957930ed46f3f304c6a8602a7e26a3\",\"dweb:/ipfs/QmcA7bjBC6ZBvYyojZZx3eKpugHmSrAAA14p14bQugiVKG\"]},\"contracts/src/interfaces/IMultiTokenRead.sol\":{\"keccak256\":\"0xac84dd306f29ae9d6becf764d93545c33f7c37737bb1aeb714c85930d0c074a0\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://d9082a16d5a736ab7ce5670be4f2475ea5c5fdae8ad7096ed9663f84eed96b11\",\"dweb:/ipfs/QmUTH8dZaQJt56UsT7N2aCUCKmjQYj7Ah53rRXk6DuVNUR\"]},\"contracts/src/libraries/Errors.sol\":{\"keccak256\":\"0x45f48f5b8caec5b751850b7266abd84c7400debfbad0f112847582bb052058b0\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://46c85e0c750cdb752bec5d67a8a0bc8df071d934c568c880d08a5120a1a11d88\",\"dweb:/ipfs/Qmc2L1ePB1gqBwUiaAUeoG6hvoPtS2hdY6rhEXzX1SfB41\"]},\"contracts/src/libraries/FixedPointMath.sol\":{\"keccak256\":\"0x631f6529908f62f71775f8c6120afdca3a836fb24fa9fa4701cad54f4a9da076\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://2baf6ad8917a3fbb6d040334451f6b4f6936b00518c4cd308b9c6fa11569b2bd\",\"dweb:/ipfs/QmXD16vk6MRxmPRqy8ZXSpRA5XxhSf1pnsQH32ARDJTk8L\"]},\"contracts/src/libraries/HyperdriveMath.sol\":{\"keccak256\":\"0xcf305dde8aa320d1e1b767734ce8edce456af537525d40e30d5345f09f6e34ab\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://056c9a563f1a9e0133e17463497ad19be517d35b770170122edea50ca9fbe002\",\"dweb:/ipfs/QmS6dkVRHzdbv7etumcCtNtm9GuXDCjqZxxhtYfP6keAAY\"]},\"contracts/src/libraries/SafeCast.sol\":{\"keccak256\":\"0xc5282be69c8c85c1a1bbbf1554a501c17599f4b84119339b660018ae90eb7148\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://fd29b570d1e3205d25939b1c0e78e98ae34747a8118703fc5b2c9690791b26c8\",\"dweb:/ipfs/QmSdecxKRE66cgEipikK5uS4mUJxz2FgfncCk9iXvkdjG8\"]},\"contracts/src/libraries/YieldSpaceMath.sol\":{\"keccak256\":\"0x4a9c91313bed7cda6ef503af23c9f777008b5258e9cb2176eab6acc52be79891\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://88da1f5502a12fe1024be90f6a6ea08556cc1f2660ab8cbeb5e07640abb7711c\",\"dweb:/ipfs/QmVQoG9TyrAsVYcgvgZfgA5pQk8V8wvS4BewGNP4B3Txyy\"]}},\"version\":1}", "metadata": { "compiler": { "version": "0.8.20+commit.a1b79de6" }, "language": "Solidity", "output": { "abi": [], "devdoc": { "kind": "dev", "methods": {}, "version": 1 }, "userdoc": { "kind": "user", "methods": {}, "version": 1 } }, "settings": { "remappings": ["@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/", "aave-v3-core/=lib/aave-v3-core/", "ds-test/=lib/forge-std/lib/ds-test/src/", "erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/", "forge-std/=lib/forge-std/src/", "openzeppelin-contracts/=lib/openzeppelin-contracts/", "openzeppelin/=lib/openzeppelin-contracts/contracts/", "solmate/=lib/solmate/src/"], "optimizer": { "enabled": true, "runs": 200 }, "metadata": { "bytecodeHash": "ipfs" }, "compilationTarget": { "contracts/src/libraries/YieldSpaceMath.sol": "YieldSpaceMath" }, "libraries": {} }, "sources": { "contracts/src/interfaces/IERC20.sol": { "keccak256": "0x5f446a4987d57c64380d44c234ee079172e98bed9595ec067eb519898c3117d9", "urls": ["bzz-raw://a3245994c58110716f5099c07e5cb270137356d288044f03c713d29c36e207ac", "dweb:/ipfs/QmYdn52sGRQKXfSyL8ieSz8HysG6R5kLJWsNwEnyX1e22p"], "license": "Apache-2.0" }, "contracts/src/interfaces/IHyperdrive.sol": { "keccak256": "0xb8ee04f3090b498966970e210f7de0f982f6445628556f2f176385423d8c5952", "urls": ["bzz-raw://db789f03faa935c6e3b0882b6e873e8f683c9c8841a4b128366dcbe7321911bf", "dweb:/ipfs/QmSQh1cX79nApuSAfJbVN99dmEaE4CK9QwWfEGcwhJMBLK"], "license": "Apache-2.0" }, "contracts/src/interfaces/IHyperdriveCore.sol": { "keccak256": "0x68adcd293ff25711add1698b6024faa45beec01eb044bd0103d3020aa96d856e", "urls": ["bzz-raw://0e0f5e35a7d2c656e249394d25896e5adfb9af3e210c01b9ef5fa81d25a45e24", "dweb:/ipfs/QmbLASezHPWHcbodqSfw3Qh9NzqekqVPM8FhCXKGTCXL1h"], "license": "Apache-2.0" }, "contracts/src/interfaces/IHyperdriveEvents.sol": { "keccak256": "0x812ccb32dff907e8614c89a65196eec239eceb3e63f9f14dde2b2269c75a67c0", "urls": ["bzz-raw://da5f2ce974bfcd8185342c121c879ba5aef23e1e4e7b36cf9fcba68296b8892c", "dweb:/ipfs/QmSho3PWs9bzejTYYjySuXcH9tVP4xFnkbUmSzQA54g8eG"], "license": "Apache-2.0" }, "contracts/src/interfaces/IHyperdriveRead.sol": { "keccak256": "0x5922cbd86a7267c8fd19e3dc7a6f2636bad2b3330c28bca8e66adc7cd8ce2b55", "urls": ["bzz-raw://ced8bce3f3c15a9f0bcdd11ba16e69651179edd6b16e267936788f4ab4d6eabf", "dweb:/ipfs/QmcoZPj4h2ym6r13KDU7JG2GoVdDWa1GwfKL2jjFRsp8H6"], "license": "Apache-2.0" }, "contracts/src/interfaces/IMultiToken.sol": { "keccak256": "0xf5f82b8223e0c1bfcf4f73566a909ba07a9266960dfe2335c1494e06debbbe3f", "urls": ["bzz-raw://920cf3fd66132a1e98a6a5708ad9a3bb047f4df8848119ab382b51094c1290a7", "dweb:/ipfs/QmWL3SyG8L91Coe9DsHz3Ke9tGMvYBf2NgRRDr3Fg5xFzp"], "license": "Apache-2.0" }, "contracts/src/interfaces/IMultiTokenCore.sol": { "keccak256": "0x5c27315743bb6ef8a121ecf72cb24d5c144786dedb6526ef010f580eb872e501", "urls": ["bzz-raw://3e102c51bac9c82766c9826d97dc780a05a2bf64703b070757a7531a0851a1ae", "dweb:/ipfs/QmXYwbzPbiznj5AeDiX7NNfRE9xyhSx1huTMfMFndrUZWs"], "license": "Apache-2.0" }, "contracts/src/interfaces/IMultiTokenEvents.sol": { "keccak256": "0x165f79e628b1975343f979549f3fdb5073a29aeecb03861f41d165961ee39fdb", "urls": ["bzz-raw://3c0751cf322944d080a7a6692897807d0cef798268689afc1f6c8f91182a4222", "dweb:/ipfs/QmQVWtCgphU9sjqD2q6F6ww62uXDSWZx5KJVj6jFJpXeDK"], "license": "Apache-2.0" }, "contracts/src/interfaces/IMultiTokenMetadata.sol": { "keccak256": "0xcc21ad6d3d4e3de354fbc25a472d940e5e2af0b48766404f9efecdac600d72ca", "urls": ["bzz-raw://b48fa111a773c820fe578efdd737d164e3957930ed46f3f304c6a8602a7e26a3", "dweb:/ipfs/QmcA7bjBC6ZBvYyojZZx3eKpugHmSrAAA14p14bQugiVKG"], "license": "Apache-2.0" }, "contracts/src/interfaces/IMultiTokenRead.sol": { "keccak256": "0xac84dd306f29ae9d6becf764d93545c33f7c37737bb1aeb714c85930d0c074a0", "urls": ["bzz-raw://d9082a16d5a736ab7ce5670be4f2475ea5c5fdae8ad7096ed9663f84eed96b11", "dweb:/ipfs/QmUTH8dZaQJt56UsT7N2aCUCKmjQYj7Ah53rRXk6DuVNUR"], "license": "Apache-2.0" }, "contracts/src/libraries/Errors.sol": { "keccak256": "0x45f48f5b8caec5b751850b7266abd84c7400debfbad0f112847582bb052058b0", "urls": ["bzz-raw://46c85e0c750cdb752bec5d67a8a0bc8df071d934c568c880d08a5120a1a11d88", "dweb:/ipfs/Qmc2L1ePB1gqBwUiaAUeoG6hvoPtS2hdY6rhEXzX1SfB41"], "license": "Apache-2.0" }, "contracts/src/libraries/FixedPointMath.sol": { "keccak256": "0x631f6529908f62f71775f8c6120afdca3a836fb24fa9fa4701cad54f4a9da076", "urls": ["bzz-raw://2baf6ad8917a3fbb6d040334451f6b4f6936b00518c4cd308b9c6fa11569b2bd", "dweb:/ipfs/QmXD16vk6MRxmPRqy8ZXSpRA5XxhSf1pnsQH32ARDJTk8L"], "license": "Apache-2.0" }, "contracts/src/libraries/HyperdriveMath.sol": { "keccak256": "0xcf305dde8aa320d1e1b767734ce8edce456af537525d40e30d5345f09f6e34ab", "urls": ["bzz-raw://056c9a563f1a9e0133e17463497ad19be517d35b770170122edea50ca9fbe002", "dweb:/ipfs/QmS6dkVRHzdbv7etumcCtNtm9GuXDCjqZxxhtYfP6keAAY"], "license": "Apache-2.0" }, "contracts/src/libraries/SafeCast.sol": { "keccak256": "0xc5282be69c8c85c1a1bbbf1554a501c17599f4b84119339b660018ae90eb7148", "urls": ["bzz-raw://fd29b570d1e3205d25939b1c0e78e98ae34747a8118703fc5b2c9690791b26c8", "dweb:/ipfs/QmSdecxKRE66cgEipikK5uS4mUJxz2FgfncCk9iXvkdjG8"], "license": "Apache-2.0" }, "contracts/src/libraries/YieldSpaceMath.sol": { "keccak256": "0x4a9c91313bed7cda6ef503af23c9f777008b5258e9cb2176eab6acc52be79891", "urls": ["bzz-raw://88da1f5502a12fe1024be90f6a6ea08556cc1f2660ab8cbeb5e07640abb7711c", "dweb:/ipfs/QmVQoG9TyrAsVYcgvgZfgA5pQk8V8wvS4BewGNP4B3Txyy"], "license": "Apache-2.0" } }, "version": 1 }, "ast": { "absolutePath": "contracts/src/libraries/YieldSpaceMath.sol", "id": 23293, "exportedSymbols": { "Errors": [18667], "FixedPointMath": [19442], "HyperdriveMath": [20190], "IHyperdrive": [11076], "ONE": [18676], "YieldSpaceMath": [23292] }, "nodeType": "SourceUnit", "src": "40:21230:128", "nodes": [{ "id": 22315, "nodeType": "PragmaDirective", "src": "40:23:128", "nodes": [], "literals": ["solidity", "0.8", ".20"] }, { "id": 22317, "nodeType": "ImportDirective", "src": "65:60:128", "nodes": [], "absolutePath": "contracts/src/interfaces/IHyperdrive.sol", "file": "../interfaces/IHyperdrive.sol", "nameLocation": "-1:-1:-1", "scope": 23293, "sourceUnit": 11077, "symbolAliases": [{ "foreign": { "id": 22316, "name": "IHyperdrive", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11076, "src": "74:11:128", "typeDescriptions": {} }, "nameLocation": "-1:-1:-1" }], "unitAlias": "" }, { "id": 22319, "nodeType": "ImportDirective", "src": "126:38:128", "nodes": [], "absolutePath": "contracts/src/libraries/Errors.sol", "file": "./Errors.sol", "nameLocation": "-1:-1:-1", "scope": 23293, "sourceUnit": 18668, "symbolAliases": [{ "foreign": { "id": 22318, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18667, "src": "135:6:128", "typeDescriptions": {} }, "nameLocation": "-1:-1:-1" }], "unitAlias": "" }, { "id": 22322, "nodeType": "ImportDirective", "src": "165:59:128", "nodes": [], "absolutePath": "contracts/src/libraries/FixedPointMath.sol", "file": "./FixedPointMath.sol", "nameLocation": "-1:-1:-1", "scope": 23293, "sourceUnit": 19443, "symbolAliases": [{ "foreign": { "id": 22320, "name": "FixedPointMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 19442, "src": "174:14:128", "typeDescriptions": {} }, "nameLocation": "-1:-1:-1" }, { "foreign": { "id": 22321, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "190:3:128", "typeDescriptions": {} }, "nameLocation": "-1:-1:-1" }], "unitAlias": "" }, { "id": 22324, "nodeType": "ImportDirective", "src": "225:54:128", "nodes": [], "absolutePath": "contracts/src/libraries/HyperdriveMath.sol", "file": "./HyperdriveMath.sol", "nameLocation": "-1:-1:-1", "scope": 23293, "sourceUnit": 20191, "symbolAliases": [{ "foreign": { "id": 22323, "name": "HyperdriveMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20190, "src": "234:14:128", "typeDescriptions": {} }, "nameLocation": "-1:-1:-1" }], "unitAlias": "" }, { "id": 23292, "nodeType": "ContractDefinition", "src": "1466:19803:128", "nodes": [{ "id": 22328, "nodeType": "UsingForDirective", "src": "1495:33:128", "nodes": [], "global": false, "libraryName": { "id": 22326, "name": "FixedPointMath", "nameLocations": ["1501:14:128"], "nodeType": "IdentifierPath", "referencedDeclaration": 19442, "src": "1501:14:128" }, "typeName": { "id": 22327, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "1520:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } } }, { "id": 22444, "nodeType": "FunctionDefinition", "src": "2068:1726:128", "nodes": [], "body": { "id": 22443, "nodeType": "Block", "src": "2267:1527:128", "nodes": [], "statements": [{ "assignments": [22347], "declarations": [{ "constant": false, "id": 22347, "mutability": "mutable", "name": "k", "nameLocation": "2423:1:128", "nodeType": "VariableDeclaration", "scope": 22443, "src": "2415:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22346, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2415:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 22355, "initialValue": { "arguments": [{ "id": 22349, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22331, "src": "2431:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22350, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22333, "src": "2435:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22351, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22337, "src": "2438:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22352, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22339, "src": "2441:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22353, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22341, "src": "2444:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "id": 22348, "name": "kUp", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23257, "src": "2427:3:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,uint256) pure returns (uint256)" } }, "id": 22354, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "2427:20:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "2415:32:128" }, { "expression": { "id": 22366, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22356, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22331, "src": "2580:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22364, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22337, "src": "2609:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "arguments": [{ "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22361, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22359, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22331, "src": "2596:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": { "id": 22360, "name": "dz", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22335, "src": "2601:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "2596:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22357, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22341, "src": "2585:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22358, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "2588:7:128", "memberName": "mulDown", "nodeType": "MemberAccess", "referencedDeclaration": 18722, "src": "2585:10:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22362, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "2585:19:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22363, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "2605:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "2585:23:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22365, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "2585:26:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "2580:31:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22367, "nodeType": "ExpressionStatement", "src": "2580:31:128" }, { "expression": { "id": 22374, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22368, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22331, "src": "2669:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22371, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22331, "src": "2687:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22372, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22341, "src": "2691:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22369, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22339, "src": "2674:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22370, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "2676:10:128", "memberName": "mulDivDown", "nodeType": "MemberAccess", "referencedDeclaration": 18704, "src": "2674:12:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256,uint256) pure returns (uint256)" } }, "id": 22373, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "2674:20:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "2669:25:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22375, "nodeType": "ExpressionStatement", "src": "2669:25:128" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22378, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22376, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22347, "src": "2764:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22377, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22331, "src": "2768:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "2764:6:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22388, "nodeType": "IfStatement", "src": "2760:166:128", "trueBody": { "id": 22387, "nodeType": "Block", "src": "2772:154:128", "statements": [{ "expression": { "arguments": [{ "expression": { "expression": { "id": 22382, "name": "IHyperdrive", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11076, "src": "2842:11:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_IHyperdrive_$11076_$", "typeString": "type(contract IHyperdrive)" } }, "id": 22383, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "2854:27:128", "memberName": "InsufficientLiquidityReason", "nodeType": "MemberAccess", "referencedDeclaration": 10929, "src": "2842:39:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_enum$_InsufficientLiquidityReason_$10929_$", "typeString": "type(enum IHyperdrive.InsufficientLiquidityReason)" } }, "id": 22384, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberLocation": "2882:19:128", "memberName": "ArithmeticUnderflow", "nodeType": "MemberAccess", "referencedDeclaration": 10925, "src": "2842:59:128", "typeDescriptions": { "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10929", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10929", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" }], "expression": { "id": 22379, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18667, "src": "2786:6:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_Errors_$18667_$", "typeString": "type(library Errors)" } }, "id": 22381, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "2793:31:128", "memberName": "throwInsufficientLiquidityError", "nodeType": "MemberAccess", "referencedDeclaration": 18666, "src": "2786:38:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_enum$_InsufficientLiquidityReason_$10929_$returns$__$", "typeString": "function (enum IHyperdrive.InsufficientLiquidityReason) pure" } }, "id": 22385, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "2786:129:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_tuple$__$", "typeString": "tuple()" } }, "id": 22386, "nodeType": "ExpressionStatement", "src": "2786:129:128" }] } }, { "assignments": [22390], "declarations": [{ "constant": false, "id": 22390, "mutability": "mutable", "name": "_y", "nameLocation": "3094:2:128", "nodeType": "VariableDeclaration", "scope": 22443, "src": "3086:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22389, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "3086:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 22391, "nodeType": "VariableDeclarationStatement", "src": "3086:10:128" }, { "id": 22398, "nodeType": "UncheckedBlock", "src": "3106:46:128", "statements": [{ "expression": { "id": 22396, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22392, "name": "_y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22390, "src": "3130:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22395, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22393, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22347, "src": "3135:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 22394, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22331, "src": "3139:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "3135:6:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "3130:11:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22397, "nodeType": "ExpressionStatement", "src": "3130:11:128" }] }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22401, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22399, "name": "_y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22390, "src": "3165:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": ">=", "rightExpression": { "id": 22400, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "3171:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "3165:9:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "falseBody": { "id": 22423, "nodeType": "Block", "src": "3300:122:128", "statements": [{ "expression": { "id": 22421, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22413, "name": "_y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22390, "src": "3384:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 22418, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22337, "src": "3408:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22416, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "3396:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22417, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "3400:7:128", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18740, "src": "3396:11:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22419, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "3396:14:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22414, "name": "_y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22390, "src": "3389:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22415, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "3392:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "3389:6:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22420, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "3389:22:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "3384:27:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22422, "nodeType": "ExpressionStatement", "src": "3384:27:128" }] }, "id": 22424, "nodeType": "IfStatement", "src": "3161:261:128", "trueBody": { "id": 22412, "nodeType": "Block", "src": "3176:118:128", "statements": [{ "expression": { "id": 22410, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22402, "name": "_y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22390, "src": "3258:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 22407, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22337, "src": "3280:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22405, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "3270:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22406, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "3274:5:128", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18790, "src": "3270:9:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22408, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "3270:12:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22403, "name": "_y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22390, "src": "3263:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22404, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "3266:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "3263:6:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22409, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "3263:20:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "3258:25:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22411, "nodeType": "ExpressionStatement", "src": "3258:25:128" }] } }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22427, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22425, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22333, "src": "3491:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22426, "name": "_y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22390, "src": "3495:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "3491:6:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22437, "nodeType": "IfStatement", "src": "3487:166:128", "trueBody": { "id": 22436, "nodeType": "Block", "src": "3499:154:128", "statements": [{ "expression": { "arguments": [{ "expression": { "expression": { "id": 22431, "name": "IHyperdrive", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11076, "src": "3569:11:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_IHyperdrive_$11076_$", "typeString": "type(contract IHyperdrive)" } }, "id": 22432, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "3581:27:128", "memberName": "InsufficientLiquidityReason", "nodeType": "MemberAccess", "referencedDeclaration": 10929, "src": "3569:39:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_enum$_InsufficientLiquidityReason_$10929_$", "typeString": "type(enum IHyperdrive.InsufficientLiquidityReason)" } }, "id": 22433, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberLocation": "3609:19:128", "memberName": "ArithmeticUnderflow", "nodeType": "MemberAccess", "referencedDeclaration": 10925, "src": "3569:59:128", "typeDescriptions": { "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10929", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10929", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" }], "expression": { "id": 22428, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18667, "src": "3513:6:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_Errors_$18667_$", "typeString": "type(library Errors)" } }, "id": 22430, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "3520:31:128", "memberName": "throwInsufficientLiquidityError", "nodeType": "MemberAccess", "referencedDeclaration": 18666, "src": "3513:38:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_enum$_InsufficientLiquidityReason_$10929_$returns$__$", "typeString": "function (enum IHyperdrive.InsufficientLiquidityReason) pure" } }, "id": 22434, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "3513:129:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_tuple$__$", "typeString": "tuple()" } }, "id": 22435, "nodeType": "ExpressionStatement", "src": "3513:129:128" }] } }, { "id": 22442, "nodeType": "UncheckedBlock", "src": "3740:48:128", "statements": [{ "expression": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22440, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22438, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22333, "src": "3771:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 22439, "name": "_y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22390, "src": "3775:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "3771:6:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "functionReturnParameters": 22345, "id": 22441, "nodeType": "Return", "src": "3764:13:128" }] }] }, "documentation": { "id": 22329, "nodeType": "StructuredDocumentation", "src": "1534:529:128", "text": "@dev Calculates the amount of bonds a user will receive from the pool by\n      providing a specified amount of shares. We underestimate the amount\n      of bonds out.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param dz The amount of shares paid to the pool.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return The amount of bonds the trader receives." }, "implemented": true, "kind": "function", "modifiers": [], "name": "calculateBondsOutGivenSharesInDown", "nameLocation": "2077:34:128", "parameters": { "id": 22342, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22331, "mutability": "mutable", "name": "ze", "nameLocation": "2129:2:128", "nodeType": "VariableDeclaration", "scope": 22444, "src": "2121:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22330, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2121:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22333, "mutability": "mutable", "name": "y", "nameLocation": "2149:1:128", "nodeType": "VariableDeclaration", "scope": 22444, "src": "2141:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22332, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2141:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22335, "mutability": "mutable", "name": "dz", "nameLocation": "2168:2:128", "nodeType": "VariableDeclaration", "scope": 22444, "src": "2160:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22334, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2160:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22337, "mutability": "mutable", "name": "t", "nameLocation": "2188:1:128", "nodeType": "VariableDeclaration", "scope": 22444, "src": "2180:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22336, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2180:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22339, "mutability": "mutable", "name": "c", "nameLocation": "2207:1:128", "nodeType": "VariableDeclaration", "scope": 22444, "src": "2199:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22338, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2199:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22341, "mutability": "mutable", "name": "mu", "nameLocation": "2226:2:128", "nodeType": "VariableDeclaration", "scope": 22444, "src": "2218:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22340, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2218:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "2111:123:128" }, "returnParameters": { "id": 22345, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22344, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 22444, "src": "2258:7:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22343, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "2258:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "2257:9:128" }, "scope": 23292, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 22491, "nodeType": "FunctionDefinition", "src": "4331:579:128", "nodes": [], "body": { "id": 22490, "nodeType": "Block", "src": "4535:375:128", "nodes": [], "statements": [{ "assignments": [22463], "declarations": [{ "constant": false, "id": 22463, "mutability": "mutable", "name": "success", "nameLocation": "4550:7:128", "nodeType": "VariableDeclaration", "scope": 22490, "src": "4545:12:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "typeName": { "id": 22462, "name": "bool", "nodeType": "ElementaryTypeName", "src": "4545:4:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "visibility": "internal" }], "id": 22464, "nodeType": "VariableDeclarationStatement", "src": "4545:12:128" }, { "expression": { "id": 22476, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "components": [{ "id": 22465, "name": "result", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22460, "src": "4568:6:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22466, "name": "success", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22463, "src": "4576:7:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }], "id": 22467, "isConstant": false, "isInlineArray": false, "isLValue": true, "isPure": false, "lValueRequested": true, "nodeType": "TupleExpression", "src": "4567:17:128", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_uint256_$_t_bool_$", "typeString": "tuple(uint256,bool)" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22469, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22447, "src": "4637:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22470, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22449, "src": "4653:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22471, "name": "dy", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22451, "src": "4668:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22472, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22453, "src": "4684:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22473, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22455, "src": "4699:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22474, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22457, "src": "4714:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "id": 22468, "name": "calculateSharesInGivenBondsOutUpSafe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22619, "src": "4587:36:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$_t_bool_$", "typeString": "function (uint256,uint256,uint256,uint256,uint256,uint256) pure returns (uint256,bool)" } }, "id": 22475, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "4587:139:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_tuple$_t_uint256_$_t_bool_$", "typeString": "tuple(uint256,bool)" } }, "src": "4567:159:128", "typeDescriptions": { "typeIdentifier": "t_tuple$__$", "typeString": "tuple()" } }, "id": 22477, "nodeType": "ExpressionStatement", "src": "4567:159:128" }, { "condition": { "id": 22479, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "UnaryOperation", "operator": "!", "prefix": true, "src": "4740:8:128", "subExpression": { "id": 22478, "name": "success", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22463, "src": "4741:7:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22489, "nodeType": "IfStatement", "src": "4736:168:128", "trueBody": { "id": 22488, "nodeType": "Block", "src": "4750:154:128", "statements": [{ "expression": { "arguments": [{ "expression": { "expression": { "id": 22483, "name": "IHyperdrive", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11076, "src": "4820:11:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_IHyperdrive_$11076_$", "typeString": "type(contract IHyperdrive)" } }, "id": 22484, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "4832:27:128", "memberName": "InsufficientLiquidityReason", "nodeType": "MemberAccess", "referencedDeclaration": 10929, "src": "4820:39:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_enum$_InsufficientLiquidityReason_$10929_$", "typeString": "type(enum IHyperdrive.InsufficientLiquidityReason)" } }, "id": 22485, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberLocation": "4860:19:128", "memberName": "ArithmeticUnderflow", "nodeType": "MemberAccess", "referencedDeclaration": 10925, "src": "4820:59:128", "typeDescriptions": { "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10929", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10929", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" }], "expression": { "id": 22480, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18667, "src": "4764:6:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_Errors_$18667_$", "typeString": "type(library Errors)" } }, "id": 22482, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "4771:31:128", "memberName": "throwInsufficientLiquidityError", "nodeType": "MemberAccess", "referencedDeclaration": 18666, "src": "4764:38:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_enum$_InsufficientLiquidityReason_$10929_$returns$__$", "typeString": "function (enum IHyperdrive.InsufficientLiquidityReason) pure" } }, "id": 22486, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "4764:129:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_tuple$__$", "typeString": "tuple()" } }, "id": 22487, "nodeType": "ExpressionStatement", "src": "4764:129:128" }] } }] }, "documentation": { "id": 22445, "nodeType": "StructuredDocumentation", "src": "3800:526:128", "text": "@dev Calculates the amount of shares a user must provide the pool to\n      receive a specified amount of bonds. We overestimate the amount of\n      shares in.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param dy The amount of bonds paid to the trader.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return result The amount of shares the trader pays." }, "implemented": true, "kind": "function", "modifiers": [], "name": "calculateSharesInGivenBondsOutUp", "nameLocation": "4340:32:128", "parameters": { "id": 22458, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22447, "mutability": "mutable", "name": "ze", "nameLocation": "4390:2:128", "nodeType": "VariableDeclaration", "scope": 22491, "src": "4382:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22446, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4382:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22449, "mutability": "mutable", "name": "y", "nameLocation": "4410:1:128", "nodeType": "VariableDeclaration", "scope": 22491, "src": "4402:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22448, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4402:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22451, "mutability": "mutable", "name": "dy", "nameLocation": "4429:2:128", "nodeType": "VariableDeclaration", "scope": 22491, "src": "4421:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22450, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4421:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22453, "mutability": "mutable", "name": "t", "nameLocation": "4449:1:128", "nodeType": "VariableDeclaration", "scope": 22491, "src": "4441:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22452, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4441:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22455, "mutability": "mutable", "name": "c", "nameLocation": "4468:1:128", "nodeType": "VariableDeclaration", "scope": 22491, "src": "4460:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22454, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4460:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22457, "mutability": "mutable", "name": "mu", "nameLocation": "4487:2:128", "nodeType": "VariableDeclaration", "scope": 22491, "src": "4479:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22456, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4479:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "4372:123:128" }, "returnParameters": { "id": 22461, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22460, "mutability": "mutable", "name": "result", "nameLocation": "4527:6:128", "nodeType": "VariableDeclaration", "scope": 22491, "src": "4519:14:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22459, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "4519:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "4518:16:128" }, "scope": 23292, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 22619, "nodeType": "FunctionDefinition", "src": "5576:1765:128", "nodes": [], "body": { "id": 22618, "nodeType": "Block", "src": "5783:1558:128", "nodes": [], "statements": [{ "assignments": [22512], "declarations": [{ "constant": false, "id": 22512, "mutability": "mutable", "name": "k", "nameLocation": "5939:1:128", "nodeType": "VariableDeclaration", "scope": 22618, "src": "5931:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22511, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5931:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 22520, "initialValue": { "arguments": [{ "id": 22514, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22494, "src": "5947:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22515, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22496, "src": "5951:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22516, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22500, "src": "5954:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22517, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22502, "src": "5957:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22518, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22504, "src": "5960:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "id": 22513, "name": "kUp", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23257, "src": "5943:3:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,uint256) pure returns (uint256)" } }, "id": 22519, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "5943:20:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "5931:32:128" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22523, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22521, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22496, "src": "6082:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22522, "name": "dy", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22498, "src": "6086:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6082:6:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22529, "nodeType": "IfStatement", "src": "6078:54:128", "trueBody": { "id": 22528, "nodeType": "Block", "src": "6090:42:128", "statements": [{ "expression": { "components": [{ "hexValue": "30", "id": 22524, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "6112:1:128", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, { "hexValue": "66616c7365", "id": 22525, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "6115:5:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "false" }], "id": 22526, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "TupleExpression", "src": "6111:10:128", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_rational_0_by_1_$_t_bool_$", "typeString": "tuple(int_const 0,bool)" } }, "functionReturnParameters": 22510, "id": 22527, "nodeType": "Return", "src": "6104:17:128" }] } }, { "id": 22534, "nodeType": "UncheckedBlock", "src": "6170:42:128", "statements": [{ "expression": { "id": 22532, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22530, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22496, "src": "6194:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "-=", "rightHandSide": { "id": 22531, "name": "dy", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22498, "src": "6199:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6194:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22533, "nodeType": "ExpressionStatement", "src": "6194:7:128" }] }, { "expression": { "id": 22540, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22535, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22496, "src": "6221:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22538, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22500, "src": "6231:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22536, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22496, "src": "6225:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22537, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "6227:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "6225:5:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22539, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "6225:8:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6221:12:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22541, "nodeType": "ExpressionStatement", "src": "6221:12:128" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22544, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22542, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22512, "src": "6351:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22543, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22496, "src": "6355:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6351:5:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22550, "nodeType": "IfStatement", "src": "6347:53:128", "trueBody": { "id": 22549, "nodeType": "Block", "src": "6358:42:128", "statements": [{ "expression": { "components": [{ "hexValue": "30", "id": 22545, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "6380:1:128", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, { "hexValue": "66616c7365", "id": 22546, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "6383:5:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "false" }], "id": 22547, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "TupleExpression", "src": "6379:10:128", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_rational_0_by_1_$_t_bool_$", "typeString": "tuple(int_const 0,bool)" } }, "functionReturnParameters": 22510, "id": 22548, "nodeType": "Return", "src": "6372:17:128" }] } }, { "assignments": [22552], "declarations": [{ "constant": false, "id": 22552, "mutability": "mutable", "name": "_z", "nameLocation": "6563:2:128", "nodeType": "VariableDeclaration", "scope": 22618, "src": "6555:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22551, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "6555:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 22553, "nodeType": "VariableDeclarationStatement", "src": "6555:10:128" }, { "id": 22560, "nodeType": "UncheckedBlock", "src": "6575:45:128", "statements": [{ "expression": { "id": 22558, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22554, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22552, "src": "6599:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22557, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22555, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22512, "src": "6604:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 22556, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22496, "src": "6608:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6604:5:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6599:10:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22559, "nodeType": "ExpressionStatement", "src": "6599:10:128" }] }, { "expression": { "id": 22567, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22561, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22552, "src": "6629:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22564, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22504, "src": "6646:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22565, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22502, "src": "6650:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22562, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22552, "src": "6634:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22563, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "6637:8:128", "memberName": "mulDivUp", "nodeType": "MemberAccess", "referencedDeclaration": 18754, "src": "6634:11:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256,uint256) pure returns (uint256)" } }, "id": 22566, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "6634:18:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6629:23:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22568, "nodeType": "ExpressionStatement", "src": "6629:23:128" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22571, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22569, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22552, "src": "6666:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": ">=", "rightExpression": { "id": 22570, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "6672:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6666:9:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "falseBody": { "id": 22593, "nodeType": "Block", "src": "6801:122:128", "statements": [{ "expression": { "id": 22591, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22583, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22552, "src": "6885:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 22588, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22500, "src": "6909:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22586, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "6897:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22587, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "6901:7:128", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18740, "src": "6897:11:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22589, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "6897:14:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22584, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22552, "src": "6890:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22585, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "6893:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "6890:6:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22590, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "6890:22:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6885:27:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22592, "nodeType": "ExpressionStatement", "src": "6885:27:128" }] }, "id": 22594, "nodeType": "IfStatement", "src": "6662:261:128", "trueBody": { "id": 22582, "nodeType": "Block", "src": "6677:118:128", "statements": [{ "expression": { "id": 22580, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22572, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22552, "src": "6759:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 22577, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22500, "src": "6781:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22575, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "6771:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22576, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "6775:5:128", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18790, "src": "6771:9:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22578, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "6771:12:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22573, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22552, "src": "6764:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22574, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "6767:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "6764:6:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22579, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "6764:20:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "6759:25:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22581, "nodeType": "ExpressionStatement", "src": "6759:25:128" }] } }, { "expression": { "id": 22600, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22595, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22552, "src": "7000:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22598, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22504, "src": "7014:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22596, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22552, "src": "7005:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22597, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "7008:5:128", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18790, "src": "7005:8:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22599, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "7005:12:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "7000:17:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22601, "nodeType": "ExpressionStatement", "src": "7000:17:128" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22604, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22602, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22552, "src": "7137:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22603, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22494, "src": "7142:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "7137:7:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22610, "nodeType": "IfStatement", "src": "7133:55:128", "trueBody": { "id": 22609, "nodeType": "Block", "src": "7146:42:128", "statements": [{ "expression": { "components": [{ "hexValue": "30", "id": 22605, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "7168:1:128", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, { "hexValue": "66616c7365", "id": 22606, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "7171:5:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "false" }], "id": 22607, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "TupleExpression", "src": "7167:10:128", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_rational_0_by_1_$_t_bool_$", "typeString": "tuple(int_const 0,bool)" } }, "functionReturnParameters": 22510, "id": 22608, "nodeType": "Return", "src": "7160:17:128" }] } }, { "id": 22617, "nodeType": "UncheckedBlock", "src": "7278:57:128", "statements": [{ "expression": { "components": [{ "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22613, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22611, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22552, "src": "7310:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 22612, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22494, "src": "7315:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "7310:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "hexValue": "74727565", "id": 22614, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "7319:4:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "true" }], "id": 22615, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "7309:15:128", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_uint256_$_t_bool_$", "typeString": "tuple(uint256,bool)" } }, "functionReturnParameters": 22510, "id": 22616, "nodeType": "Return", "src": "7302:22:128" }] }] }, "documentation": { "id": 22492, "nodeType": "StructuredDocumentation", "src": "4916:655:128", "text": "@dev Calculates the amount of shares a user must provide the pool to\n      receive a specified amount of bonds. This function returns a\n      success flag instead of reverting. We overestimate the amount of\n      shares in.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param dy The amount of bonds paid to the trader.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return The amount of shares the trader pays.\n @return A flag indicating if the calculation succeeded." }, "implemented": true, "kind": "function", "modifiers": [], "name": "calculateSharesInGivenBondsOutUpSafe", "nameLocation": "5585:36:128", "parameters": { "id": 22505, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22494, "mutability": "mutable", "name": "ze", "nameLocation": "5639:2:128", "nodeType": "VariableDeclaration", "scope": 22619, "src": "5631:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22493, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5631:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22496, "mutability": "mutable", "name": "y", "nameLocation": "5659:1:128", "nodeType": "VariableDeclaration", "scope": 22619, "src": "5651:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22495, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5651:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22498, "mutability": "mutable", "name": "dy", "nameLocation": "5678:2:128", "nodeType": "VariableDeclaration", "scope": 22619, "src": "5670:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22497, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5670:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22500, "mutability": "mutable", "name": "t", "nameLocation": "5698:1:128", "nodeType": "VariableDeclaration", "scope": 22619, "src": "5690:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22499, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5690:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22502, "mutability": "mutable", "name": "c", "nameLocation": "5717:1:128", "nodeType": "VariableDeclaration", "scope": 22619, "src": "5709:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22501, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5709:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22504, "mutability": "mutable", "name": "mu", "nameLocation": "5736:2:128", "nodeType": "VariableDeclaration", "scope": 22619, "src": "5728:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22503, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5728:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "5621:123:128" }, "returnParameters": { "id": 22510, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22507, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 22619, "src": "5768:7:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22506, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "5768:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22509, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 22619, "src": "5777:4:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "typeName": { "id": 22508, "name": "bool", "nodeType": "ElementaryTypeName", "src": "5777:4:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "visibility": "internal" }], "src": "5767:15:128" }, "scope": 23292, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 22755, "nodeType": "FunctionDefinition", "src": "7870:1957:128", "nodes": [], "body": { "id": 22754, "nodeType": "Block", "src": "8069:1758:128", "nodes": [], "statements": [{ "assignments": [22638], "declarations": [{ "constant": false, "id": 22638, "mutability": "mutable", "name": "k", "nameLocation": "8228:1:128", "nodeType": "VariableDeclaration", "scope": 22754, "src": "8220:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22637, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8220:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 22646, "initialValue": { "arguments": [{ "id": 22640, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22622, "src": "8238:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22641, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22624, "src": "8242:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22642, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22628, "src": "8245:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22643, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22630, "src": "8248:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22644, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22632, "src": "8251:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "id": 22639, "name": "kDown", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23291, "src": "8232:5:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,uint256) pure returns (uint256)" } }, "id": 22645, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "8232:22:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "8220:34:128" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22649, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22647, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22624, "src": "8324:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22648, "name": "dy", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22626, "src": "8328:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "8324:6:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22659, "nodeType": "IfStatement", "src": "8320:166:128", "trueBody": { "id": 22658, "nodeType": "Block", "src": "8332:154:128", "statements": [{ "expression": { "arguments": [{ "expression": { "expression": { "id": 22653, "name": "IHyperdrive", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11076, "src": "8402:11:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_IHyperdrive_$11076_$", "typeString": "type(contract IHyperdrive)" } }, "id": 22654, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "8414:27:128", "memberName": "InsufficientLiquidityReason", "nodeType": "MemberAccess", "referencedDeclaration": 10929, "src": "8402:39:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_enum$_InsufficientLiquidityReason_$10929_$", "typeString": "type(enum IHyperdrive.InsufficientLiquidityReason)" } }, "id": 22655, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberLocation": "8442:19:128", "memberName": "ArithmeticUnderflow", "nodeType": "MemberAccess", "referencedDeclaration": 10925, "src": "8402:59:128", "typeDescriptions": { "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10929", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10929", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" }], "expression": { "id": 22650, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18667, "src": "8346:6:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_Errors_$18667_$", "typeString": "type(library Errors)" } }, "id": 22652, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "8353:31:128", "memberName": "throwInsufficientLiquidityError", "nodeType": "MemberAccess", "referencedDeclaration": 18666, "src": "8346:38:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_enum$_InsufficientLiquidityReason_$10929_$returns$__$", "typeString": "function (enum IHyperdrive.InsufficientLiquidityReason) pure" } }, "id": 22656, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "8346:129:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_tuple$__$", "typeString": "tuple()" } }, "id": 22657, "nodeType": "ExpressionStatement", "src": "8346:129:128" }] } }, { "id": 22664, "nodeType": "UncheckedBlock", "src": "8524:42:128", "statements": [{ "expression": { "id": 22662, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22660, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22624, "src": "8548:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "-=", "rightHandSide": { "id": 22661, "name": "dy", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22626, "src": "8553:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "8548:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22663, "nodeType": "ExpressionStatement", "src": "8548:7:128" }] }, { "expression": { "id": 22670, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22665, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22624, "src": "8575:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22668, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22628, "src": "8585:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22666, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22624, "src": "8579:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22667, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "8581:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "8579:5:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22669, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "8579:8:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "8575:12:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22671, "nodeType": "ExpressionStatement", "src": "8575:12:128" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22674, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22672, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22638, "src": "8656:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22673, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22624, "src": "8660:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "8656:5:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22684, "nodeType": "IfStatement", "src": "8652:165:128", "trueBody": { "id": 22683, "nodeType": "Block", "src": "8663:154:128", "statements": [{ "expression": { "arguments": [{ "expression": { "expression": { "id": 22678, "name": "IHyperdrive", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11076, "src": "8733:11:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_IHyperdrive_$11076_$", "typeString": "type(contract IHyperdrive)" } }, "id": 22679, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "8745:27:128", "memberName": "InsufficientLiquidityReason", "nodeType": "MemberAccess", "referencedDeclaration": 10929, "src": "8733:39:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_enum$_InsufficientLiquidityReason_$10929_$", "typeString": "type(enum IHyperdrive.InsufficientLiquidityReason)" } }, "id": 22680, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberLocation": "8773:19:128", "memberName": "ArithmeticUnderflow", "nodeType": "MemberAccess", "referencedDeclaration": 10925, "src": "8733:59:128", "typeDescriptions": { "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10929", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10929", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" }], "expression": { "id": 22675, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18667, "src": "8677:6:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_Errors_$18667_$", "typeString": "type(library Errors)" } }, "id": 22677, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "8684:31:128", "memberName": "throwInsufficientLiquidityError", "nodeType": "MemberAccess", "referencedDeclaration": 18666, "src": "8677:38:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_enum$_InsufficientLiquidityReason_$10929_$returns$__$", "typeString": "function (enum IHyperdrive.InsufficientLiquidityReason) pure" } }, "id": 22681, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "8677:129:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_tuple$__$", "typeString": "tuple()" } }, "id": 22682, "nodeType": "ExpressionStatement", "src": "8677:129:128" }] } }, { "assignments": [22686], "declarations": [{ "constant": false, "id": 22686, "mutability": "mutable", "name": "_z", "nameLocation": "8988:2:128", "nodeType": "VariableDeclaration", "scope": 22754, "src": "8980:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22685, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8980:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 22687, "nodeType": "VariableDeclarationStatement", "src": "8980:10:128" }, { "id": 22694, "nodeType": "UncheckedBlock", "src": "9000:45:128", "statements": [{ "expression": { "id": 22692, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22688, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22686, "src": "9024:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22691, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22689, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22638, "src": "9029:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 22690, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22624, "src": "9033:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "9029:5:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "9024:10:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22693, "nodeType": "ExpressionStatement", "src": "9024:10:128" }] }, { "expression": { "id": 22701, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22695, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22686, "src": "9054:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22698, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22632, "src": "9073:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22699, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22630, "src": "9077:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22696, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22686, "src": "9059:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22697, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "9062:10:128", "memberName": "mulDivDown", "nodeType": "MemberAccess", "referencedDeclaration": 18704, "src": "9059:13:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256,uint256) pure returns (uint256)" } }, "id": 22700, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "9059:20:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "9054:25:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22702, "nodeType": "ExpressionStatement", "src": "9054:25:128" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22705, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22703, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22686, "src": "9093:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": ">=", "rightExpression": { "id": 22704, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "9099:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "9093:9:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "falseBody": { "id": 22727, "nodeType": "Block", "src": "9233:119:128", "statements": [{ "expression": { "id": 22725, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22717, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22686, "src": "9316:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 22722, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22628, "src": "9338:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22720, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "9328:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22721, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "9332:5:128", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18790, "src": "9328:9:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22723, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "9328:12:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22718, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22686, "src": "9321:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22719, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "9324:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "9321:6:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22724, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "9321:20:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "9316:25:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22726, "nodeType": "ExpressionStatement", "src": "9316:25:128" }] }, "id": 22728, "nodeType": "IfStatement", "src": "9089:263:128", "trueBody": { "id": 22716, "nodeType": "Block", "src": "9104:123:128", "statements": [{ "expression": { "id": 22714, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22706, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22686, "src": "9189:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 22711, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22628, "src": "9213:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22709, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "9201:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22710, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "9205:7:128", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18740, "src": "9201:11:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22712, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "9201:14:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22707, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22686, "src": "9194:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22708, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "9197:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "9194:6:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22713, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "9194:22:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "9189:27:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22715, "nodeType": "ExpressionStatement", "src": "9189:27:128" }] } }, { "expression": { "id": 22734, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22729, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22686, "src": "9429:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22732, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22632, "src": "9445:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22730, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22686, "src": "9434:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22731, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "9437:7:128", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18740, "src": "9434:10:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22733, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "9434:14:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "9429:19:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22735, "nodeType": "ExpressionStatement", "src": "9429:19:128" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22738, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22736, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22686, "src": "9519:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22737, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22622, "src": "9524:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "9519:7:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22748, "nodeType": "IfStatement", "src": "9515:167:128", "trueBody": { "id": 22747, "nodeType": "Block", "src": "9528:154:128", "statements": [{ "expression": { "arguments": [{ "expression": { "expression": { "id": 22742, "name": "IHyperdrive", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11076, "src": "9598:11:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_IHyperdrive_$11076_$", "typeString": "type(contract IHyperdrive)" } }, "id": 22743, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "9610:27:128", "memberName": "InsufficientLiquidityReason", "nodeType": "MemberAccess", "referencedDeclaration": 10929, "src": "9598:39:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_enum$_InsufficientLiquidityReason_$10929_$", "typeString": "type(enum IHyperdrive.InsufficientLiquidityReason)" } }, "id": 22744, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberLocation": "9638:19:128", "memberName": "ArithmeticUnderflow", "nodeType": "MemberAccess", "referencedDeclaration": 10925, "src": "9598:59:128", "typeDescriptions": { "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10929", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10929", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" }], "expression": { "id": 22739, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18667, "src": "9542:6:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_Errors_$18667_$", "typeString": "type(library Errors)" } }, "id": 22741, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "9549:31:128", "memberName": "throwInsufficientLiquidityError", "nodeType": "MemberAccess", "referencedDeclaration": 18666, "src": "9542:38:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_enum$_InsufficientLiquidityReason_$10929_$returns$__$", "typeString": "function (enum IHyperdrive.InsufficientLiquidityReason) pure" } }, "id": 22745, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "9542:129:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_tuple$__$", "typeString": "tuple()" } }, "id": 22746, "nodeType": "ExpressionStatement", "src": "9542:129:128" }] } }, { "id": 22753, "nodeType": "UncheckedBlock", "src": "9772:49:128", "statements": [{ "expression": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22751, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22749, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22686, "src": "9803:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 22750, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22622, "src": "9808:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "9803:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "functionReturnParameters": 22636, "id": 22752, "nodeType": "Return", "src": "9796:14:128" }] }] }, "documentation": { "id": 22620, "nodeType": "StructuredDocumentation", "src": "7347:518:128", "text": "@dev Calculates the amount of shares a user must provide the pool to\n      receive a specified amount of bonds. We underestimate the amount of\n      shares in.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param dy The amount of bonds paid to the trader.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return The amount of shares the user pays." }, "implemented": true, "kind": "function", "modifiers": [], "name": "calculateSharesInGivenBondsOutDown", "nameLocation": "7879:34:128", "parameters": { "id": 22633, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22622, "mutability": "mutable", "name": "ze", "nameLocation": "7931:2:128", "nodeType": "VariableDeclaration", "scope": 22755, "src": "7923:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22621, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7923:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22624, "mutability": "mutable", "name": "y", "nameLocation": "7951:1:128", "nodeType": "VariableDeclaration", "scope": 22755, "src": "7943:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22623, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7943:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22626, "mutability": "mutable", "name": "dy", "nameLocation": "7970:2:128", "nodeType": "VariableDeclaration", "scope": 22755, "src": "7962:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22625, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7962:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22628, "mutability": "mutable", "name": "t", "nameLocation": "7990:1:128", "nodeType": "VariableDeclaration", "scope": 22755, "src": "7982:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22627, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "7982:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22630, "mutability": "mutable", "name": "c", "nameLocation": "8009:1:128", "nodeType": "VariableDeclaration", "scope": 22755, "src": "8001:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22629, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8001:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22632, "mutability": "mutable", "name": "mu", "nameLocation": "8028:2:128", "nodeType": "VariableDeclaration", "scope": 22755, "src": "8020:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22631, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8020:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "7913:123:128" }, "returnParameters": { "id": 22636, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22635, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 22755, "src": "8060:7:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22634, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "8060:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "8059:9:128" }, "scope": 23292, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 22802, "nodeType": "FunctionDefinition", "src": "10452:583:128", "nodes": [], "body": { "id": 22801, "nodeType": "Block", "src": "10658:377:128", "nodes": [], "statements": [{ "assignments": [22774], "declarations": [{ "constant": false, "id": 22774, "mutability": "mutable", "name": "success", "nameLocation": "10673:7:128", "nodeType": "VariableDeclaration", "scope": 22801, "src": "10668:12:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "typeName": { "id": 22773, "name": "bool", "nodeType": "ElementaryTypeName", "src": "10668:4:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "visibility": "internal" }], "id": 22775, "nodeType": "VariableDeclarationStatement", "src": "10668:12:128" }, { "expression": { "id": 22787, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "components": [{ "id": 22776, "name": "result", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22771, "src": "10691:6:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22777, "name": "success", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22774, "src": "10699:7:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }], "id": 22778, "isConstant": false, "isInlineArray": false, "isLValue": true, "isPure": false, "lValueRequested": true, "nodeType": "TupleExpression", "src": "10690:17:128", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_uint256_$_t_bool_$", "typeString": "tuple(uint256,bool)" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22780, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22758, "src": "10762:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22781, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22760, "src": "10778:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22782, "name": "dy", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22762, "src": "10793:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22783, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22764, "src": "10809:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22784, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22766, "src": "10824:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22785, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22768, "src": "10839:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "id": 22779, "name": "calculateSharesOutGivenBondsInDownSafe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22919, "src": "10710:38:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$_t_bool_$", "typeString": "function (uint256,uint256,uint256,uint256,uint256,uint256) pure returns (uint256,bool)" } }, "id": 22786, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "10710:141:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_tuple$_t_uint256_$_t_bool_$", "typeString": "tuple(uint256,bool)" } }, "src": "10690:161:128", "typeDescriptions": { "typeIdentifier": "t_tuple$__$", "typeString": "tuple()" } }, "id": 22788, "nodeType": "ExpressionStatement", "src": "10690:161:128" }, { "condition": { "id": 22790, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "UnaryOperation", "operator": "!", "prefix": true, "src": "10865:8:128", "subExpression": { "id": 22789, "name": "success", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22774, "src": "10866:7:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22800, "nodeType": "IfStatement", "src": "10861:168:128", "trueBody": { "id": 22799, "nodeType": "Block", "src": "10875:154:128", "statements": [{ "expression": { "arguments": [{ "expression": { "expression": { "id": 22794, "name": "IHyperdrive", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 11076, "src": "10945:11:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_IHyperdrive_$11076_$", "typeString": "type(contract IHyperdrive)" } }, "id": 22795, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "10957:27:128", "memberName": "InsufficientLiquidityReason", "nodeType": "MemberAccess", "referencedDeclaration": 10929, "src": "10945:39:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_enum$_InsufficientLiquidityReason_$10929_$", "typeString": "type(enum IHyperdrive.InsufficientLiquidityReason)" } }, "id": 22796, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "memberLocation": "10985:19:128", "memberName": "ArithmeticUnderflow", "nodeType": "MemberAccess", "referencedDeclaration": 10925, "src": "10945:59:128", "typeDescriptions": { "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10929", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_enum$_InsufficientLiquidityReason_$10929", "typeString": "enum IHyperdrive.InsufficientLiquidityReason" }], "expression": { "id": 22791, "name": "Errors", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18667, "src": "10889:6:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_Errors_$18667_$", "typeString": "type(library Errors)" } }, "id": 22793, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "10896:31:128", "memberName": "throwInsufficientLiquidityError", "nodeType": "MemberAccess", "referencedDeclaration": 18666, "src": "10889:38:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_enum$_InsufficientLiquidityReason_$10929_$returns$__$", "typeString": "function (enum IHyperdrive.InsufficientLiquidityReason) pure" } }, "id": 22797, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "10889:129:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_tuple$__$", "typeString": "tuple()" } }, "id": 22798, "nodeType": "ExpressionStatement", "src": "10889:129:128" }] } }] }, "documentation": { "id": 22756, "nodeType": "StructuredDocumentation", "src": "9833:614:128", "text": "@dev Calculates the amount of shares a user will receive from the pool\n      by providing a specified amount of bonds. This function reverts if\n      an integer overflow or underflow occurs. We underestimate the\n      amount of shares out.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param dy The amount of bonds paid to the pool.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return result The amount of shares the user receives." }, "implemented": true, "kind": "function", "modifiers": [], "name": "calculateSharesOutGivenBondsInDown", "nameLocation": "10461:34:128", "parameters": { "id": 22769, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22758, "mutability": "mutable", "name": "ze", "nameLocation": "10513:2:128", "nodeType": "VariableDeclaration", "scope": 22802, "src": "10505:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22757, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10505:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22760, "mutability": "mutable", "name": "y", "nameLocation": "10533:1:128", "nodeType": "VariableDeclaration", "scope": 22802, "src": "10525:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22759, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10525:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22762, "mutability": "mutable", "name": "dy", "nameLocation": "10552:2:128", "nodeType": "VariableDeclaration", "scope": 22802, "src": "10544:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22761, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10544:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22764, "mutability": "mutable", "name": "t", "nameLocation": "10572:1:128", "nodeType": "VariableDeclaration", "scope": 22802, "src": "10564:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22763, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10564:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22766, "mutability": "mutable", "name": "c", "nameLocation": "10591:1:128", "nodeType": "VariableDeclaration", "scope": 22802, "src": "10583:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22765, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10583:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22768, "mutability": "mutable", "name": "mu", "nameLocation": "10610:2:128", "nodeType": "VariableDeclaration", "scope": 22802, "src": "10602:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22767, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10602:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "10495:123:128" }, "returnParameters": { "id": 22772, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22771, "mutability": "mutable", "name": "result", "nameLocation": "10650:6:128", "nodeType": "VariableDeclaration", "scope": 22802, "src": "10642:14:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22770, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "10642:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "10641:16:128" }, "scope": 23292, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 22919, "nodeType": "FunctionDefinition", "src": "11709:1515:128", "nodes": [], "body": { "id": 22918, "nodeType": "Block", "src": "11918:1306:128", "nodes": [], "statements": [{ "assignments": [22823], "declarations": [{ "constant": false, "id": 22823, "mutability": "mutable", "name": "k", "nameLocation": "12074:1:128", "nodeType": "VariableDeclaration", "scope": 22918, "src": "12066:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22822, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "12066:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 22831, "initialValue": { "arguments": [{ "id": 22825, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22805, "src": "12082:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22826, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22807, "src": "12086:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22827, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22811, "src": "12089:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22828, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22813, "src": "12092:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22829, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22815, "src": "12095:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "id": 22824, "name": "kUp", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23257, "src": "12078:3:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,uint256) pure returns (uint256)" } }, "id": 22830, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "12078:20:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "12066:32:128" }, { "expression": { "id": 22840, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22832, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22807, "src": "12137:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22838, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22811, "src": "12154:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "components": [{ "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22835, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22833, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22807, "src": "12142:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": { "id": 22834, "name": "dy", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22809, "src": "12146:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12142:6:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "id": 22836, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "12141:8:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22837, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "12150:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "12141:12:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22839, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "12141:15:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12137:19:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22841, "nodeType": "ExpressionStatement", "src": "12137:19:128" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22844, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22842, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22823, "src": "12234:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22843, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22807, "src": "12238:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12234:5:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22850, "nodeType": "IfStatement", "src": "12230:53:128", "trueBody": { "id": 22849, "nodeType": "Block", "src": "12241:42:128", "statements": [{ "expression": { "components": [{ "hexValue": "30", "id": 22845, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "12263:1:128", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, { "hexValue": "66616c7365", "id": 22846, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "12266:5:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "false" }], "id": 22847, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "TupleExpression", "src": "12262:10:128", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_rational_0_by_1_$_t_bool_$", "typeString": "tuple(int_const 0,bool)" } }, "functionReturnParameters": 22821, "id": 22848, "nodeType": "Return", "src": "12255:17:128" }] } }, { "assignments": [22852], "declarations": [{ "constant": false, "id": 22852, "mutability": "mutable", "name": "_z", "nameLocation": "12446:2:128", "nodeType": "VariableDeclaration", "scope": 22918, "src": "12438:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22851, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "12438:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 22853, "nodeType": "VariableDeclarationStatement", "src": "12438:10:128" }, { "id": 22860, "nodeType": "UncheckedBlock", "src": "12458:45:128", "statements": [{ "expression": { "id": 22858, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22854, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22852, "src": "12482:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22857, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22855, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22823, "src": "12487:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 22856, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22807, "src": "12491:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12487:5:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12482:10:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22859, "nodeType": "ExpressionStatement", "src": "12482:10:128" }] }, { "expression": { "id": 22867, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22861, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22852, "src": "12512:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22864, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22815, "src": "12529:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22865, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22813, "src": "12533:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22862, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22852, "src": "12517:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22863, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "12520:8:128", "memberName": "mulDivUp", "nodeType": "MemberAccess", "referencedDeclaration": 18754, "src": "12517:11:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256,uint256) pure returns (uint256)" } }, "id": 22866, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "12517:18:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12512:23:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22868, "nodeType": "ExpressionStatement", "src": "12512:23:128" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22871, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22869, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22852, "src": "12549:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": ">=", "rightExpression": { "id": 22870, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "12555:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12549:9:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "falseBody": { "id": 22893, "nodeType": "Block", "src": "12685:123:128", "statements": [{ "expression": { "id": 22891, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22883, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22852, "src": "12770:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 22888, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22811, "src": "12794:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22886, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "12782:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22887, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "12786:7:128", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18740, "src": "12782:11:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22889, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "12782:14:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22884, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22852, "src": "12775:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22885, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "12778:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "12775:6:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22890, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "12775:22:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12770:27:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22892, "nodeType": "ExpressionStatement", "src": "12770:27:128" }] }, "id": 22894, "nodeType": "IfStatement", "src": "12545:263:128", "trueBody": { "id": 22882, "nodeType": "Block", "src": "12560:119:128", "statements": [{ "expression": { "id": 22880, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22872, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22852, "src": "12643:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 22877, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22811, "src": "12665:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22875, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "12655:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22876, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "12659:5:128", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18790, "src": "12655:9:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22878, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "12655:12:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22873, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22852, "src": "12648:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22874, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "12651:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "12648:6:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22879, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "12648:20:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12643:25:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22881, "nodeType": "ExpressionStatement", "src": "12643:25:128" }] } }, { "expression": { "id": 22900, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22895, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22852, "src": "12885:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22898, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22815, "src": "12899:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22896, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22852, "src": "12890:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22897, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "12893:5:128", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18790, "src": "12890:8:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22899, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "12890:12:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "12885:17:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22901, "nodeType": "ExpressionStatement", "src": "12885:17:128" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22904, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22902, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22805, "src": "13022:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22903, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22852, "src": "13027:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "13022:7:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 22910, "nodeType": "IfStatement", "src": "13018:55:128", "trueBody": { "id": 22909, "nodeType": "Block", "src": "13031:42:128", "statements": [{ "expression": { "components": [{ "hexValue": "30", "id": 22905, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "13053:1:128", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, { "hexValue": "66616c7365", "id": 22906, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "13056:5:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "false" }], "id": 22907, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "TupleExpression", "src": "13052:10:128", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_rational_0_by_1_$_t_bool_$", "typeString": "tuple(int_const 0,bool)" } }, "functionReturnParameters": 22821, "id": 22908, "nodeType": "Return", "src": "13045:17:128" }] } }, { "id": 22917, "nodeType": "UncheckedBlock", "src": "13161:57:128", "statements": [{ "expression": { "components": [{ "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22913, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22911, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22805, "src": "13193:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 22912, "name": "_z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22852, "src": "13198:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "13193:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "hexValue": "74727565", "id": 22914, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "13202:4:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "true" }], "id": 22915, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "13192:15:128", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_uint256_$_t_bool_$", "typeString": "tuple(uint256,bool)" } }, "functionReturnParameters": 22821, "id": 22916, "nodeType": "Return", "src": "13185:22:128" }] }] }, "documentation": { "id": 22803, "nodeType": "StructuredDocumentation", "src": "11041:663:128", "text": "@dev Calculates the amount of shares a user will receive from the pool\n      by providing a specified amount of bonds. This function returns a\n      success flag instead of reverting. We underestimate the amount of\n      shares out.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param dy The amount of bonds paid to the pool.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return The amount of shares the user receives\n @return A flag indicating if the calculation succeeded." }, "implemented": true, "kind": "function", "modifiers": [], "name": "calculateSharesOutGivenBondsInDownSafe", "nameLocation": "11718:38:128", "parameters": { "id": 22816, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22805, "mutability": "mutable", "name": "ze", "nameLocation": "11774:2:128", "nodeType": "VariableDeclaration", "scope": 22919, "src": "11766:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22804, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "11766:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22807, "mutability": "mutable", "name": "y", "nameLocation": "11794:1:128", "nodeType": "VariableDeclaration", "scope": 22919, "src": "11786:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22806, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "11786:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22809, "mutability": "mutable", "name": "dy", "nameLocation": "11813:2:128", "nodeType": "VariableDeclaration", "scope": 22919, "src": "11805:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22808, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "11805:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22811, "mutability": "mutable", "name": "t", "nameLocation": "11833:1:128", "nodeType": "VariableDeclaration", "scope": 22919, "src": "11825:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22810, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "11825:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22813, "mutability": "mutable", "name": "c", "nameLocation": "11852:1:128", "nodeType": "VariableDeclaration", "scope": 22919, "src": "11844:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22812, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "11844:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22815, "mutability": "mutable", "name": "mu", "nameLocation": "11871:2:128", "nodeType": "VariableDeclaration", "scope": 22919, "src": "11863:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22814, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "11863:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "11756:123:128" }, "returnParameters": { "id": 22821, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22818, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 22919, "src": "11903:7:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22817, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "11903:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22820, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 22919, "src": "11912:4:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "typeName": { "id": 22819, "name": "bool", "nodeType": "ElementaryTypeName", "src": "11912:4:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "visibility": "internal" }], "src": "11902:15:128" }, "scope": 23292, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 23009, "nodeType": "FunctionDefinition", "src": "13859:1409:128", "nodes": [], "body": { "id": 23008, "nodeType": "Block", "src": "14037:1231:128", "nodes": [], "statements": [{ "assignments": [22938], "declarations": [{ "constant": false, "id": 22938, "mutability": "mutable", "name": "k", "nameLocation": "14551:1:128", "nodeType": "VariableDeclaration", "scope": 23008, "src": "14543:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22937, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "14543:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 22946, "initialValue": { "arguments": [{ "id": 22940, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22922, "src": "14561:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22941, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22924, "src": "14565:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22942, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22926, "src": "14568:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22943, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22928, "src": "14571:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 22944, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22930, "src": "14574:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "id": 22939, "name": "kDown", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23291, "src": "14555:5:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,uint256) pure returns (uint256)" } }, "id": 22945, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "14555:22:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "14543:34:128" }, { "assignments": [22948], "declarations": [{ "constant": false, "id": 22948, "mutability": "mutable", "name": "optimalZe", "nameLocation": "14595:9:128", "nodeType": "VariableDeclaration", "scope": 23008, "src": "14587:17:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22947, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "14587:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 22958, "initialValue": { "arguments": [{ "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22956, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "arguments": [{ "id": 22953, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22930, "src": "14625:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22951, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22928, "src": "14617:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22952, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "14619:5:128", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18790, "src": "14617:7:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22954, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "14617:11:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": { "id": 22955, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "14631:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "14617:17:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22949, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22938, "src": "14607:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22950, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "14609:7:128", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18740, "src": "14607:9:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22957, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "14607:28:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "14587:48:128" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22961, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22959, "name": "optimalZe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22948, "src": "14649:9:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": ">=", "rightExpression": { "id": 22960, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "14662:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "14649:16:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "falseBody": { "id": 22983, "nodeType": "Block", "src": "14811:134:128", "statements": [{ "expression": { "id": 22981, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22973, "name": "optimalZe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22948, "src": "14895:9:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 22978, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22926, "src": "14931:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22976, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "14921:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22977, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "14925:5:128", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18790, "src": "14921:9:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22979, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "14921:12:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22974, "name": "optimalZe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22948, "src": "14907:9:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22975, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "14917:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "14907:13:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22980, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "14907:27:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "14895:39:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22982, "nodeType": "ExpressionStatement", "src": "14895:39:128" }] }, "id": 22984, "nodeType": "IfStatement", "src": "14645:300:128", "trueBody": { "id": 22972, "nodeType": "Block", "src": "14667:138:128", "statements": [{ "expression": { "id": 22970, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22962, "name": "optimalZe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22948, "src": "14753:9:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 22967, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22926, "src": "14791:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22965, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "14779:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22966, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "14783:7:128", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18740, "src": "14779:11:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22968, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "14779:14:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22963, "name": "optimalZe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22948, "src": "14765:9:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22964, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "14775:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "14765:13:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22969, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "14765:29:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "14753:41:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22971, "nodeType": "ExpressionStatement", "src": "14753:41:128" }] } }, { "expression": { "id": 22990, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 22985, "name": "optimalZe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22948, "src": "14954:9:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "id": 22988, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22930, "src": "14984:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 22986, "name": "optimalZe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22948, "src": "14966:9:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22987, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "14976:7:128", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18740, "src": "14966:17:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 22989, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "14966:21:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "14954:33:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 22991, "nodeType": "ExpressionStatement", "src": "14954:33:128" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 22994, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 22992, "name": "optimalZe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22948, "src": "15131:9:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 22993, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22922, "src": "15143:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "15131:14:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 23000, "nodeType": "IfStatement", "src": "15127:62:128", "trueBody": { "id": 22999, "nodeType": "Block", "src": "15147:42:128", "statements": [{ "expression": { "components": [{ "hexValue": "30", "id": 22995, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "15169:1:128", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, { "hexValue": "66616c7365", "id": 22996, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "15172:5:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "false" }], "id": 22997, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "TupleExpression", "src": "15168:10:128", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_rational_0_by_1_$_t_bool_$", "typeString": "tuple(int_const 0,bool)" } }, "functionReturnParameters": 22936, "id": 22998, "nodeType": "Return", "src": "15161:17:128" }] } }, { "id": 23007, "nodeType": "UncheckedBlock", "src": "15198:64:128", "statements": [{ "expression": { "components": [{ "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23003, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23001, "name": "optimalZe", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22948, "src": "15230:9:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 23002, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 22922, "src": "15242:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "15230:14:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "hexValue": "74727565", "id": 23004, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "15246:4:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "true" }], "id": 23005, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "15229:22:128", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_uint256_$_t_bool_$", "typeString": "tuple(uint256,bool)" } }, "functionReturnParameters": 22936, "id": 23006, "nodeType": "Return", "src": "15222:29:128" }] }] }, "documentation": { "id": 22920, "nodeType": "StructuredDocumentation", "src": "13230:624:128", "text": "@dev Calculates the share payment required to purchase the maximum\n      amount of bonds from the pool. This function returns a success flag\n      instead of reverting. We round so that the max buy amount is\n      underestimated.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return The share payment to purchase the maximum amount of bonds.\n @return A flag indicating if the calculation succeeded." }, "implemented": true, "kind": "function", "modifiers": [], "name": "calculateMaxBuySharesInSafe", "nameLocation": "13868:27:128", "parameters": { "id": 22931, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22922, "mutability": "mutable", "name": "ze", "nameLocation": "13913:2:128", "nodeType": "VariableDeclaration", "scope": 23009, "src": "13905:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22921, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "13905:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22924, "mutability": "mutable", "name": "y", "nameLocation": "13933:1:128", "nodeType": "VariableDeclaration", "scope": 23009, "src": "13925:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22923, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "13925:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22926, "mutability": "mutable", "name": "t", "nameLocation": "13952:1:128", "nodeType": "VariableDeclaration", "scope": 23009, "src": "13944:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22925, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "13944:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22928, "mutability": "mutable", "name": "c", "nameLocation": "13971:1:128", "nodeType": "VariableDeclaration", "scope": 23009, "src": "13963:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22927, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "13963:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22930, "mutability": "mutable", "name": "mu", "nameLocation": "13990:2:128", "nodeType": "VariableDeclaration", "scope": 23009, "src": "13982:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22929, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "13982:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "13895:103:128" }, "returnParameters": { "id": 22936, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 22933, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 23009, "src": "14022:7:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 22932, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "14022:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 22935, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 23009, "src": "14031:4:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "typeName": { "id": 22934, "name": "bool", "nodeType": "ElementaryTypeName", "src": "14031:4:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "visibility": "internal" }], "src": "14021:15:128" }, "scope": 23292, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 23092, "nodeType": "FunctionDefinition", "src": "15892:1050:128", "nodes": [], "body": { "id": 23091, "nodeType": "Block", "src": "16070:872:128", "nodes": [], "statements": [{ "assignments": [23028], "declarations": [{ "constant": false, "id": 23028, "mutability": "mutable", "name": "k", "nameLocation": "16284:1:128", "nodeType": "VariableDeclaration", "scope": 23091, "src": "16276:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23027, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "16276:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 23036, "initialValue": { "arguments": [{ "id": 23030, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23012, "src": "16292:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23031, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23014, "src": "16296:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23032, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23016, "src": "16299:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23033, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23018, "src": "16302:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23034, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23020, "src": "16305:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "id": 23029, "name": "kUp", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23257, "src": "16288:3:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,uint256) pure returns (uint256)" } }, "id": 23035, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "16288:20:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "16276:32:128" }, { "assignments": [23038], "declarations": [{ "constant": false, "id": 23038, "mutability": "mutable", "name": "optimalY", "nameLocation": "16326:8:128", "nodeType": "VariableDeclaration", "scope": 23091, "src": "16318:16:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23037, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "16318:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 23048, "initialValue": { "arguments": [{ "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23046, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "arguments": [{ "id": 23043, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23020, "src": "16355:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23041, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23018, "src": "16345:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23042, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "16347:7:128", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18740, "src": "16345:9:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23044, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "16345:13:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": { "id": 23045, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "16361:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "16345:19:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23039, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23028, "src": "16337:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23040, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "16339:5:128", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18790, "src": "16337:7:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23047, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "16337:28:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "16318:47:128" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23051, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23049, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23038, "src": "16379:8:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": ">=", "rightExpression": { "id": 23050, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "16391:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "16379:15:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "falseBody": { "id": 23073, "nodeType": "Block", "src": "16533:135:128", "statements": [{ "expression": { "id": 23071, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 23063, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23038, "src": "16618:8:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 23068, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23016, "src": "16654:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23066, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "16642:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23067, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "16646:7:128", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18740, "src": "16642:11:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23069, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "16642:14:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23064, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23038, "src": "16629:8:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23065, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "16638:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "16629:12:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23070, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "16629:28:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "16618:39:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23072, "nodeType": "ExpressionStatement", "src": "16618:39:128" }] }, "id": 23074, "nodeType": "IfStatement", "src": "16375:293:128", "trueBody": { "id": 23062, "nodeType": "Block", "src": "16396:131:128", "statements": [{ "expression": { "id": 23060, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 23052, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23038, "src": "16479:8:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 23057, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23016, "src": "16513:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23055, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "16503:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23056, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "16507:5:128", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18790, "src": "16503:9:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23058, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "16503:12:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23053, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23038, "src": "16490:8:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23054, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "16499:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "16490:12:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23059, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "16490:26:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "16479:37:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23061, "nodeType": "ExpressionStatement", "src": "16479:37:128" }] } }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23077, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23075, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23014, "src": "16809:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 23076, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23038, "src": "16813:8:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "16809:12:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 23083, "nodeType": "IfStatement", "src": "16805:60:128", "trueBody": { "id": 23082, "nodeType": "Block", "src": "16823:42:128", "statements": [{ "expression": { "components": [{ "hexValue": "30", "id": 23078, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "16845:1:128", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, { "hexValue": "66616c7365", "id": 23079, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "16848:5:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "false" }], "id": 23080, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "TupleExpression", "src": "16844:10:128", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_rational_0_by_1_$_t_bool_$", "typeString": "tuple(int_const 0,bool)" } }, "functionReturnParameters": 23026, "id": 23081, "nodeType": "Return", "src": "16837:17:128" }] } }, { "id": 23090, "nodeType": "UncheckedBlock", "src": "16874:62:128", "statements": [{ "expression": { "components": [{ "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23086, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23084, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23014, "src": "16906:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 23085, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23038, "src": "16910:8:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "16906:12:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "hexValue": "74727565", "id": 23087, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "16920:4:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "true" }], "id": 23088, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "16905:20:128", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_uint256_$_t_bool_$", "typeString": "tuple(uint256,bool)" } }, "functionReturnParameters": 23026, "id": 23089, "nodeType": "Return", "src": "16898:27:128" }] }] }, "documentation": { "id": 23010, "nodeType": "StructuredDocumentation", "src": "15274:613:128", "text": "@dev Calculates the maximum amount of bonds that can be purchased with\n      the specified reserves. This function returns a success flag\n      instead of reverting. We round so that the max buy amount is\n      underestimated.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return The maximum amount of bonds that can be purchased.\n @return A flag indicating if the calculation succeeded." }, "implemented": true, "kind": "function", "modifiers": [], "name": "calculateMaxBuyBondsOutSafe", "nameLocation": "15901:27:128", "parameters": { "id": 23021, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 23012, "mutability": "mutable", "name": "ze", "nameLocation": "15946:2:128", "nodeType": "VariableDeclaration", "scope": 23092, "src": "15938:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23011, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "15938:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23014, "mutability": "mutable", "name": "y", "nameLocation": "15966:1:128", "nodeType": "VariableDeclaration", "scope": 23092, "src": "15958:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23013, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "15958:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23016, "mutability": "mutable", "name": "t", "nameLocation": "15985:1:128", "nodeType": "VariableDeclaration", "scope": 23092, "src": "15977:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23015, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "15977:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23018, "mutability": "mutable", "name": "c", "nameLocation": "16004:1:128", "nodeType": "VariableDeclaration", "scope": 23092, "src": "15996:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23017, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "15996:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23020, "mutability": "mutable", "name": "mu", "nameLocation": "16023:2:128", "nodeType": "VariableDeclaration", "scope": 23092, "src": "16015:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23019, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "16015:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "15928:103:128" }, "returnParameters": { "id": 23026, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 23023, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 23092, "src": "16055:7:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23022, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "16055:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23025, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 23092, "src": "16064:4:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "typeName": { "id": 23024, "name": "bool", "nodeType": "ElementaryTypeName", "src": "16064:4:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "visibility": "internal" }], "src": "16054:15:128" }, "scope": 23292, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 23223, "nodeType": "FunctionDefinition", "src": "17581:1971:128", "nodes": [], "body": { "id": 23222, "nodeType": "Block", "src": "17801:1751:128", "nodes": [], "statements": [{ "condition": { "commonType": { "typeIdentifier": "t_int256", "typeString": "int256" }, "id": 23116, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23114, "name": "zeta", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23097, "src": "18085:4:128", "typeDescriptions": { "typeIdentifier": "t_int256", "typeString": "int256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "hexValue": "30", "id": 23115, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "18092:1:128", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, "src": "18085:8:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 23128, "nodeType": "IfStatement", "src": "18081:67:128", "trueBody": { "id": 23127, "nodeType": "Block", "src": "18095:53:128", "statements": [{ "expression": { "id": 23125, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 23117, "name": "zMin", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23101, "src": "18109:4:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23124, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23118, "name": "zMin", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23101, "src": "18116:4:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": { "arguments": [{ "id": 23122, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "UnaryOperation", "operator": "-", "prefix": true, "src": "18131:5:128", "subExpression": { "id": 23121, "name": "zeta", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23097, "src": "18132:4:128", "typeDescriptions": { "typeIdentifier": "t_int256", "typeString": "int256" } }, "typeDescriptions": { "typeIdentifier": "t_int256", "typeString": "int256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_int256", "typeString": "int256" }], "id": 23120, "isConstant": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "ElementaryTypeNameExpression", "src": "18123:7:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_uint256_$", "typeString": "type(uint256)" }, "typeName": { "id": 23119, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "18123:7:128", "typeDescriptions": {} } }, "id": 23123, "isConstant": false, "isLValue": false, "isPure": false, "kind": "typeConversion", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "18123:14:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "18116:21:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "18109:28:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23126, "nodeType": "ExpressionStatement", "src": "18109:28:128" }] } }, { "assignments": [23130], "declarations": [{ "constant": false, "id": 23130, "mutability": "mutable", "name": "ze", "nameLocation": "18651:2:128", "nodeType": "VariableDeclaration", "scope": 23222, "src": "18643:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23129, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "18643:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 23136, "initialValue": { "arguments": [{ "id": 23133, "name": "z", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23095, "src": "18703:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23134, "name": "zeta", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23097, "src": "18706:4:128", "typeDescriptions": { "typeIdentifier": "t_int256", "typeString": "int256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_int256", "typeString": "int256" }], "expression": { "id": 23131, "name": "HyperdriveMath", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 20190, "src": "18656:14:128", "typeDescriptions": { "typeIdentifier": "t_type$_t_contract$_HyperdriveMath_$20190_$", "typeString": "type(library HyperdriveMath)" } }, "id": 23132, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "18671:31:128", "memberName": "calculateEffectiveShareReserves", "nodeType": "MemberAccess", "referencedDeclaration": 19633, "src": "18656:46:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_int256_$returns$_t_uint256_$", "typeString": "function (uint256,int256) pure returns (uint256)" } }, "id": 23135, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "18656:55:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "18643:68:128" }, { "assignments": [23138], "declarations": [{ "constant": false, "id": 23138, "mutability": "mutable", "name": "k", "nameLocation": "18729:1:128", "nodeType": "VariableDeclaration", "scope": 23222, "src": "18721:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23137, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "18721:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 23146, "initialValue": { "arguments": [{ "id": 23140, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23130, "src": "18739:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23141, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23099, "src": "18743:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23142, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23103, "src": "18746:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23143, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23105, "src": "18749:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23144, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23107, "src": "18752:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "id": 23139, "name": "kDown", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23291, "src": "18733:5:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$", "typeString": "function (uint256,uint256,uint256,uint256,uint256) pure returns (uint256)" } }, "id": 23145, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "18733:22:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "18721:34:128" }, { "assignments": [23148], "declarations": [{ "constant": false, "id": 23148, "mutability": "mutable", "name": "rhs", "nameLocation": "18773:3:128", "nodeType": "VariableDeclaration", "scope": 23222, "src": "18765:11:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23147, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "18765:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 23160, "initialValue": { "arguments": [{ "arguments": [{ "id": 23156, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23103, "src": "18809:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "arguments": [{ "id": 23153, "name": "zMin", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23101, "src": "18799:4:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23151, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23107, "src": "18790:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23152, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "18793:5:128", "memberName": "mulUp", "nodeType": "MemberAccess", "referencedDeclaration": 18772, "src": "18790:8:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23154, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "18790:14:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23155, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "18805:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "18790:18:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23157, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "18790:21:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23158, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23107, "src": "18813:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23149, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23105, "src": "18779:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23150, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "18781:8:128", "memberName": "mulDivUp", "nodeType": "MemberAccess", "referencedDeclaration": 18754, "src": "18779:10:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256,uint256) pure returns (uint256)" } }, "id": 23159, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "18779:37:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "VariableDeclarationStatement", "src": "18765:51:128" }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23163, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23161, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23138, "src": "18830:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 23162, "name": "rhs", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23148, "src": "18834:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "18830:7:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 23169, "nodeType": "IfStatement", "src": "18826:55:128", "trueBody": { "id": 23168, "nodeType": "Block", "src": "18839:42:128", "statements": [{ "expression": { "components": [{ "hexValue": "30", "id": 23164, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "18861:1:128", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, { "hexValue": "66616c7365", "id": 23165, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "18864:5:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "false" }], "id": 23166, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "TupleExpression", "src": "18860:10:128", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_rational_0_by_1_$_t_bool_$", "typeString": "tuple(int_const 0,bool)" } }, "functionReturnParameters": 23113, "id": 23167, "nodeType": "Return", "src": "18853:17:128" }] } }, { "assignments": [23171], "declarations": [{ "constant": false, "id": 23171, "mutability": "mutable", "name": "optimalY", "nameLocation": "18898:8:128", "nodeType": "VariableDeclaration", "scope": 23222, "src": "18890:16:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23170, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "18890:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "id": 23172, "nodeType": "VariableDeclarationStatement", "src": "18890:16:128" }, { "id": 23179, "nodeType": "UncheckedBlock", "src": "18916:53:128", "statements": [{ "expression": { "id": 23177, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 23173, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23171, "src": "18940:8:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23176, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23174, "name": "k", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23138, "src": "18951:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 23175, "name": "rhs", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23148, "src": "18955:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "18951:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "18940:18:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23178, "nodeType": "ExpressionStatement", "src": "18940:18:128" }] }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23182, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23180, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23171, "src": "18982:8:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": ">=", "rightExpression": { "id": 23181, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "18994:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "18982:15:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "falseBody": { "id": 23204, "nodeType": "Block", "src": "19141:132:128", "statements": [{ "expression": { "id": 23202, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 23194, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23171, "src": "19225:8:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 23199, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23103, "src": "19259:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23197, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "19249:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23198, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "19253:5:128", "memberName": "divUp", "nodeType": "MemberAccess", "referencedDeclaration": 18790, "src": "19249:9:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23200, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "19249:12:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23195, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23171, "src": "19236:8:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23196, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "19245:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "19236:12:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23201, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "19236:26:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "19225:37:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23203, "nodeType": "ExpressionStatement", "src": "19225:37:128" }] }, "id": 23205, "nodeType": "IfStatement", "src": "18978:295:128", "trueBody": { "id": 23193, "nodeType": "Block", "src": "18999:136:128", "statements": [{ "expression": { "id": 23191, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftHandSide": { "id": 23183, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23171, "src": "19085:8:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "Assignment", "operator": "=", "rightHandSide": { "arguments": [{ "arguments": [{ "id": 23188, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23103, "src": "19121:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23186, "name": "ONE", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 18676, "src": "19109:3:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23187, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "19113:7:128", "memberName": "divDown", "nodeType": "MemberAccess", "referencedDeclaration": 18740, "src": "19109:11:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23189, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "19109:14:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23184, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23171, "src": "19096:8:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23185, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "19105:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "19096:12:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23190, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "19096:28:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "19085:39:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23192, "nodeType": "ExpressionStatement", "src": "19085:39:128" }] } }, { "condition": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23208, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23206, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23171, "src": "19419:8:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "<", "rightExpression": { "id": 23207, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23099, "src": "19430:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "19419:12:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "id": 23214, "nodeType": "IfStatement", "src": "19415:60:128", "trueBody": { "id": 23213, "nodeType": "Block", "src": "19433:42:128", "statements": [{ "expression": { "components": [{ "hexValue": "30", "id": 23209, "isConstant": false, "isLValue": false, "isPure": true, "kind": "number", "lValueRequested": false, "nodeType": "Literal", "src": "19455:1:128", "typeDescriptions": { "typeIdentifier": "t_rational_0_by_1", "typeString": "int_const 0" }, "value": "0" }, { "hexValue": "66616c7365", "id": 23210, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "19458:5:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "false" }], "id": 23211, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": true, "lValueRequested": false, "nodeType": "TupleExpression", "src": "19454:10:128", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_rational_0_by_1_$_t_bool_$", "typeString": "tuple(int_const 0,bool)" } }, "functionReturnParameters": 23113, "id": 23212, "nodeType": "Return", "src": "19447:17:128" }] } }, { "id": 23221, "nodeType": "UncheckedBlock", "src": "19484:62:128", "statements": [{ "expression": { "components": [{ "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23217, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "id": 23215, "name": "optimalY", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23171, "src": "19516:8:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "-", "rightExpression": { "id": 23216, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23099, "src": "19527:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "19516:12:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "hexValue": "74727565", "id": 23218, "isConstant": false, "isLValue": false, "isPure": true, "kind": "bool", "lValueRequested": false, "nodeType": "Literal", "src": "19530:4:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "value": "true" }], "id": 23219, "isConstant": false, "isInlineArray": false, "isLValue": false, "isPure": false, "lValueRequested": false, "nodeType": "TupleExpression", "src": "19515:20:128", "typeDescriptions": { "typeIdentifier": "t_tuple$_t_uint256_$_t_bool_$", "typeString": "tuple(uint256,bool)" } }, "functionReturnParameters": 23113, "id": 23220, "nodeType": "Return", "src": "19508:27:128" }] }] }, "documentation": { "id": 23093, "nodeType": "StructuredDocumentation", "src": "16948:628:128", "text": "@dev Calculates the maximum amount of bonds that can be sold with the\n      specified reserves. We round so that the max sell amount is\n      underestimated.\n @param z The share reserves.\n @param zeta The share adjustment.\n @param y The bond reserves.\n @param zMin The minimum share reserves.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return The maximum amount of bonds that can be sold.\n @return A flag indicating whether or not the calculation was successful." }, "implemented": true, "kind": "function", "modifiers": [], "name": "calculateMaxSellBondsInSafe", "nameLocation": "17590:27:128", "parameters": { "id": 23108, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 23095, "mutability": "mutable", "name": "z", "nameLocation": "17635:1:128", "nodeType": "VariableDeclaration", "scope": 23223, "src": "17627:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23094, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "17627:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23097, "mutability": "mutable", "name": "zeta", "nameLocation": "17653:4:128", "nodeType": "VariableDeclaration", "scope": 23223, "src": "17646:11:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_int256", "typeString": "int256" }, "typeName": { "id": 23096, "name": "int256", "nodeType": "ElementaryTypeName", "src": "17646:6:128", "typeDescriptions": { "typeIdentifier": "t_int256", "typeString": "int256" } }, "visibility": "internal" }, { "constant": false, "id": 23099, "mutability": "mutable", "name": "y", "nameLocation": "17675:1:128", "nodeType": "VariableDeclaration", "scope": 23223, "src": "17667:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23098, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "17667:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23101, "mutability": "mutable", "name": "zMin", "nameLocation": "17694:4:128", "nodeType": "VariableDeclaration", "scope": 23223, "src": "17686:12:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23100, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "17686:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23103, "mutability": "mutable", "name": "t", "nameLocation": "17716:1:128", "nodeType": "VariableDeclaration", "scope": 23223, "src": "17708:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23102, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "17708:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23105, "mutability": "mutable", "name": "c", "nameLocation": "17735:1:128", "nodeType": "VariableDeclaration", "scope": 23223, "src": "17727:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23104, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "17727:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23107, "mutability": "mutable", "name": "mu", "nameLocation": "17754:2:128", "nodeType": "VariableDeclaration", "scope": 23223, "src": "17746:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23106, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "17746:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "17617:145:128" }, "returnParameters": { "id": 23113, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 23110, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 23223, "src": "17786:7:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23109, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "17786:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23112, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 23223, "src": "17795:4:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" }, "typeName": { "id": 23111, "name": "bool", "nodeType": "ElementaryTypeName", "src": "17795:4:128", "typeDescriptions": { "typeIdentifier": "t_bool", "typeString": "bool" } }, "visibility": "internal" }], "src": "17785:15:128" }, "scope": 23292, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 23257, "nodeType": "FunctionDefinition", "src": "20059:343:128", "nodes": [], "body": { "id": 23256, "nodeType": "Block", "src": "20207:195:128", "nodes": [], "statements": [{ "documentation": "k = (c / µ) * (µ * ze)^(1 - t) + y^(1 - t)", "expression": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23254, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "arguments": [{ "arguments": [{ "id": 23246, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23230, "src": "20377:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "arguments": [{ "id": 23243, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23226, "src": "20369:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23241, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23234, "src": "20360:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23242, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "20363:5:128", "memberName": "mulUp", "nodeType": "MemberAccess", "referencedDeclaration": 18772, "src": "20360:8:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23244, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "20360:12:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23245, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "20373:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "20360:16:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23247, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "20360:19:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23248, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23234, "src": "20381:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23239, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23232, "src": "20349:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23240, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "20351:8:128", "memberName": "mulDivUp", "nodeType": "MemberAccess", "referencedDeclaration": 18754, "src": "20349:10:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256,uint256) pure returns (uint256)" } }, "id": 23249, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "20349:35:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": { "arguments": [{ "id": 23252, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23230, "src": "20393:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23250, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23228, "src": "20387:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23251, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "20389:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "20387:5:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23253, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "20387:8:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "20349:46:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "functionReturnParameters": 23238, "id": 23255, "nodeType": "Return", "src": "20342:53:128" }] }, "documentation": { "id": 23224, "nodeType": "StructuredDocumentation", "src": "19558:496:128", "text": "@dev Calculates the YieldSpace invariant k. This invariant is given by:\n      k = (c / µ) * (µ * ze)^(1 - t) + y^(1 - t)\n      This variant of the calculation overestimates the result.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return The YieldSpace invariant, k." }, "implemented": true, "kind": "function", "modifiers": [], "name": "kUp", "nameLocation": "20068:3:128", "parameters": { "id": 23235, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 23226, "mutability": "mutable", "name": "ze", "nameLocation": "20089:2:128", "nodeType": "VariableDeclaration", "scope": 23257, "src": "20081:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23225, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20081:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23228, "mutability": "mutable", "name": "y", "nameLocation": "20109:1:128", "nodeType": "VariableDeclaration", "scope": 23257, "src": "20101:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23227, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20101:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23230, "mutability": "mutable", "name": "t", "nameLocation": "20128:1:128", "nodeType": "VariableDeclaration", "scope": 23257, "src": "20120:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23229, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20120:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23232, "mutability": "mutable", "name": "c", "nameLocation": "20147:1:128", "nodeType": "VariableDeclaration", "scope": 23257, "src": "20139:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23231, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20139:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23234, "mutability": "mutable", "name": "mu", "nameLocation": "20166:2:128", "nodeType": "VariableDeclaration", "scope": 23257, "src": "20158:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23233, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20158:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "20071:103:128" }, "returnParameters": { "id": 23238, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 23237, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 23257, "src": "20198:7:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23236, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20198:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "20197:9:128" }, "scope": 23292, "stateMutability": "pure", "virtual": false, "visibility": "internal" }, { "id": 23291, "nodeType": "FunctionDefinition", "src": "20915:352:128", "nodes": [], "body": { "id": 23290, "nodeType": "Block", "src": "21065:202:128", "nodes": [], "statements": [{ "documentation": "k = (c / µ) * (µ * ze)^(1 - t) + y^(1 - t)", "expression": { "commonType": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "id": 23288, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "leftExpression": { "arguments": [{ "arguments": [{ "id": 23280, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23264, "src": "21242:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "arguments": [{ "id": 23277, "name": "ze", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23260, "src": "21234:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23275, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23268, "src": "21223:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23276, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "21226:7:128", "memberName": "mulDown", "nodeType": "MemberAccess", "referencedDeclaration": 18722, "src": "21223:10:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23278, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "21223:14:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23279, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "21238:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "21223:18:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23281, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "21223:21:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, { "id": 23282, "name": "mu", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23268, "src": "21246:2:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }, { "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23273, "name": "c", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23266, "src": "21210:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23274, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "21212:10:128", "memberName": "mulDivDown", "nodeType": "MemberAccess", "referencedDeclaration": 18704, "src": "21210:12:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256,uint256) pure returns (uint256)" } }, "id": 23283, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "21210:39:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "nodeType": "BinaryOperation", "operator": "+", "rightExpression": { "arguments": [{ "id": 23286, "name": "t", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23264, "src": "21258:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }], "expression": { "argumentTypes": [{ "typeIdentifier": "t_uint256", "typeString": "uint256" }], "expression": { "id": 23284, "name": "y", "nodeType": "Identifier", "overloadedDeclarations": [], "referencedDeclaration": 23262, "src": "21252:1:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "id": 23285, "isConstant": false, "isLValue": false, "isPure": false, "lValueRequested": false, "memberLocation": "21254:3:128", "memberName": "pow", "nodeType": "MemberAccess", "referencedDeclaration": 18847, "src": "21252:5:128", "typeDescriptions": { "typeIdentifier": "t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$", "typeString": "function (uint256,uint256) pure returns (uint256)" } }, "id": 23287, "isConstant": false, "isLValue": false, "isPure": false, "kind": "functionCall", "lValueRequested": false, "nameLocations": [], "names": [], "nodeType": "FunctionCall", "src": "21252:8:128", "tryCall": false, "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "src": "21210:50:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "functionReturnParameters": 23272, "id": 23289, "nodeType": "Return", "src": "21203:57:128" }] }, "documentation": { "id": 23258, "nodeType": "StructuredDocumentation", "src": "20408:502:128", "text": "@dev Calculates the YieldSpace invariant k. This invariant is given by:\n      k = (c / µ) * (µ * ze)^(1 - t) + y^(1 - t)\n      This variant of the calculation underestimates the result.\n @param ze The effective share reserves.\n @param y The bond reserves.\n @param t The time elapsed since the term's start.\n @param c The vault share price.\n @param mu The initial vault share price.\n @return The modified YieldSpace Constant." }, "implemented": true, "kind": "function", "modifiers": [], "name": "kDown", "nameLocation": "20924:5:128", "parameters": { "id": 23269, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 23260, "mutability": "mutable", "name": "ze", "nameLocation": "20947:2:128", "nodeType": "VariableDeclaration", "scope": 23291, "src": "20939:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23259, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20939:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23262, "mutability": "mutable", "name": "y", "nameLocation": "20967:1:128", "nodeType": "VariableDeclaration", "scope": 23291, "src": "20959:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23261, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20959:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23264, "mutability": "mutable", "name": "t", "nameLocation": "20986:1:128", "nodeType": "VariableDeclaration", "scope": 23291, "src": "20978:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23263, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20978:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23266, "mutability": "mutable", "name": "c", "nameLocation": "21005:1:128", "nodeType": "VariableDeclaration", "scope": 23291, "src": "20997:9:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23265, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "20997:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }, { "constant": false, "id": 23268, "mutability": "mutable", "name": "mu", "nameLocation": "21024:2:128", "nodeType": "VariableDeclaration", "scope": 23291, "src": "21016:10:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23267, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "21016:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "20929:103:128" }, "returnParameters": { "id": 23272, "nodeType": "ParameterList", "parameters": [{ "constant": false, "id": 23271, "mutability": "mutable", "name": "", "nameLocation": "-1:-1:-1", "nodeType": "VariableDeclaration", "scope": 23291, "src": "21056:7:128", "stateVariable": false, "storageLocation": "default", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" }, "typeName": { "id": 23270, "name": "uint256", "nodeType": "ElementaryTypeName", "src": "21056:7:128", "typeDescriptions": { "typeIdentifier": "t_uint256", "typeString": "uint256" } }, "visibility": "internal" }], "src": "21055:9:128" }, "scope": 23292, "stateMutability": "pure", "virtual": false, "visibility": "internal" }], "abstract": false, "baseContracts": [], "canonicalName": "YieldSpaceMath", "contractDependencies": [], "contractKind": "library", "documentation": { "id": 22325, "nodeType": "StructuredDocumentation", "src": "281:1185:128", "text": "@author DELV\n @title YieldSpaceMath\n @notice Math for the YieldSpace pricing model.\n @custom:disclaimer The language used in this code is for coding convenience\n                    only, and is not intended to, and does not, have any\n                    particular legal or regulatory significance.\n @dev It is advised for developers to attain the pre-requisite knowledge\n      of how this implementation works on the mathematical level. This\n      excerpt attempts to document this pre-requisite knowledge explaining\n      the underpinning mathematical concepts in an understandable manner and\n      relating it directly to the code implementation.\n      This implementation is based on a paper called \"YieldSpace with Yield\n      Bearing Vaults\" or more casually \"Modified YieldSpace\". It can be\n      found at the following link.\n      https://hackmd.io/lRZ4mgdrRgOpxZQXqKYlFw?view\n      That paper builds on the original YieldSpace paper, \"YieldSpace:\n      An Automated Liquidity Provider for Fixed Yield Tokens\". It can be\n      found at the following link:\n      https://yieldprotocol.com/YieldSpace.pdf" }, "fullyImplemented": true, "linearizedBaseContracts": [23292], "name": "YieldSpaceMath", "nameLocation": "1474:14:128", "scope": 23293, "usedErrors": [], "usedEvents": [] }], "license": "Apache-2.0" }, "id": 128 };

export const HyperdriveMath = 
{"abi":[],"bytecode":{"object":"0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122054f7b0b603548b704c92edbba15860cfcdf1851b0bb757dd15b0afb04e8f893364736f6c63430008130033","sourceMap":"599:22613:67:-:0;;;;;;;;;;;;;;;-1:-1:-1;;;599:22613:67;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122054f7b0b603548b704c92edbba15860cfcdf1851b0bb757dd15b0afb04e8f893364736f6c63430008130033","sourceMap":"599:22613:67:-:0;;;;;;;;","linkReferences":{}},"methodIdentifiers":{},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.19+commit.7dd6d404\"},\"language\":\"Solidity\",\"output\":{\"abi\":[],\"devdoc\":{\"author\":\"DELV\",\"custom:disclaimer\":\"The language used in this code is for coding convenience                    only, and is not intended to, and does not, have any                    particular legal or regulatory significance.\",\"kind\":\"dev\",\"methods\":{},\"title\":\"Hyperdrive\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"notice\":\"Math for the Hyperdrive pricing model.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/src/libraries/HyperdriveMath.sol\":\"HyperdriveMath\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":aave-v3-core/=lib/aave-v3-core/\",\":create3-factory/=lib/yield-daddy/lib/create3-factory/\",\":ds-test/=lib/forge-std/lib/ds-test/src/\",\":forge-std/=lib/forge-std/src/\",\":solmate/=lib/solmate/src/\",\":yield-daddy/=lib/yield-daddy/\"]},\"sources\":{\"contracts/src/interfaces/IERC20.sol\":{\"keccak256\":\"0xfb57fe2ee4d8d1c6a8e2aa3b007da6f0e53d65388245b0b7d876234077ee95b4\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://e4303c41b9752b51c6eaa9b16aa11e5bffb34fc80c5c8761302539cd5922ae36\",\"dweb:/ipfs/QmZjVYBikfgPDX47hmbGJpG6kvm3Gyt6nKkFbZH6r8U4cL\"]},\"contracts/src/interfaces/IHyperdrive.sol\":{\"keccak256\":\"0x3b4f94e5480e7074e05b0d338d583569aef147f45365eb57daeb99f19fe817c3\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://2cc18b204ec94f80cd6b4876ea3c39dfb143fc4feff52e2a8d00ea72e6811644\",\"dweb:/ipfs/QmZHmZRvmJr8FxExBzKHSHYNZqcEgcgDcs4Z6gF1wPvBvj\"]},\"contracts/src/interfaces/IHyperdriveCore.sol\":{\"keccak256\":\"0x84c73d8c4b67da41635f57fce2f30b8f04fc826ff6fb54c605de23d376f3403d\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://e6d636dff5c24916ae35a76695d741de2f14ee46876ea67c5393618bb7f9cf85\",\"dweb:/ipfs/QmUwxh8JeAqSFA8Z2qabVx3YWRSz7PJ9V2TQgnfctAgqPF\"]},\"contracts/src/interfaces/IHyperdriveRead.sol\":{\"keccak256\":\"0x1c61ba57b783bfa408a4e208e80c1c117850d4d6c9f0e280263d3fcf57a8b2fd\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://5b920d5f0f37014035b6cbba16d898e52654122a0c004a3f75050af93b799496\",\"dweb:/ipfs/QmaneaTDVXbw5HfevR2vFwXWw95EKWcBq8yMgMyWJPHKVW\"]},\"contracts/src/interfaces/IMultiToken.sol\":{\"keccak256\":\"0xcf3a4002275ea64e381f0a4aded3683e12960396ef79ba9dd153e2d1e395baad\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://c9990491f7a5151fd696a45e6e5b0282a1dedf58521861dfb8c64db8cb60f5b6\",\"dweb:/ipfs/QmaywmqqQhz7DeYqZdoeykagr5h4ZhQRv6GasHqvdWqzSy\"]},\"contracts/src/interfaces/IMultiTokenCore.sol\":{\"keccak256\":\"0xdb7f24663cff7307a468ef5e4c6f3e4d01ec0475157b3bbb3405890c3e9ab87d\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://7f631a9a395fba5b07c3d9308fccac18d5aa59d890efe23442ed2a4da9871ae8\",\"dweb:/ipfs/QmV2a4wiAPfWzSST3faYt58i2tqEyoqCLAJV8aNCdJyxVE\"]},\"contracts/src/interfaces/IMultiTokenMetadata.sol\":{\"keccak256\":\"0x476240ea4328bae9ab820b6f0f40afb11c74ee52d26bdbef69e4ece28dc10bdb\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://843f73cb21eaec4e26952fd6cbde5e6815e3a28c438df9e026e249200d25076f\",\"dweb:/ipfs/QmXzE7gsRKMaRGQfTDodA1RXxNxUuBj8RT7grTYjZUdbe6\"]},\"contracts/src/interfaces/IMultiTokenRead.sol\":{\"keccak256\":\"0x9b92d81f2f038fcd4bb5d069ab2b754efc153234c451d4ee4caa6d74aaca16b4\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://8686fddc99564c6b6524ea68a6b7ff081a9988fc795fc13197bb59ddaa2041c6\",\"dweb:/ipfs/QmarJYJAgoH6Z4H1BmdPoRgqLubRu5S6NDXBNV2fDApPuW\"]},\"contracts/src/libraries/FixedPointMath.sol\":{\"keccak256\":\"0x3d2d86890e7287a59bc7171a030f98006a60271812a233027d2e42d8f31ef46c\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://ecf29c3dedf328bd29caef4ce1eba85576d4c4b8d6f77fc255e37c24e8d44e1d\",\"dweb:/ipfs/QmVgmtYXzMkvR1GYsfqnJ1cH2ojmggoKmVuxKQZ9Rw78T1\"]},\"contracts/src/libraries/HyperdriveMath.sol\":{\"keccak256\":\"0xd87293bc10dfe09707a042bf05091baf40ba344bdca141bd99b62256a7611817\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://8f6eadd454c6671c26bd22095c31a3bbaea7083df9aa6548dbaba32a4907e336\",\"dweb:/ipfs/QmY1jMW9DuAk9CSfVS6MsG5onqjZHKzdBrv2TcHvj9yKj4\"]},\"contracts/src/libraries/SafeCast.sol\":{\"keccak256\":\"0x86d3065b06e2fb93733eb6f19ea0bb6343a51bc6b993c36702dc3e6d50a6d01d\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://f0d303e0a2ed0c99ea194759d9fce5317b6e3a4c40464fc34c09f6f770d402db\",\"dweb:/ipfs/QmVSTsk4YXLe8pcUbQEpihWq9XTcn47L46j8khkvfzyiWB\"]},\"contracts/src/libraries/YieldSpaceMath.sol\":{\"keccak256\":\"0x2f9511684820be7510155adfe3c2c2ef7e2583472946bae37f379bac801fc263\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://7e9a84e4168448e3320a6682c8ba248c8b51757df173b86507e9aba4b6167247\",\"dweb:/ipfs/QmSonetYBP22Fnc8HrcaTxAA1Zg2PCR5ptPiEp22sA77Ka\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.19+commit.7dd6d404"},"language":"Solidity","output":{"abi":[],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["aave-v3-core/=lib/aave-v3-core/","create3-factory/=lib/yield-daddy/lib/create3-factory/","ds-test/=lib/forge-std/lib/ds-test/src/","forge-std/=lib/forge-std/src/","solmate/=lib/solmate/src/","yield-daddy/=lib/yield-daddy/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"contracts/src/libraries/HyperdriveMath.sol":"HyperdriveMath"},"libraries":{}},"sources":{"contracts/src/interfaces/IERC20.sol":{"keccak256":"0xfb57fe2ee4d8d1c6a8e2aa3b007da6f0e53d65388245b0b7d876234077ee95b4","urls":["bzz-raw://e4303c41b9752b51c6eaa9b16aa11e5bffb34fc80c5c8761302539cd5922ae36","dweb:/ipfs/QmZjVYBikfgPDX47hmbGJpG6kvm3Gyt6nKkFbZH6r8U4cL"],"license":"Apache-2.0"},"contracts/src/interfaces/IHyperdrive.sol":{"keccak256":"0x3b4f94e5480e7074e05b0d338d583569aef147f45365eb57daeb99f19fe817c3","urls":["bzz-raw://2cc18b204ec94f80cd6b4876ea3c39dfb143fc4feff52e2a8d00ea72e6811644","dweb:/ipfs/QmZHmZRvmJr8FxExBzKHSHYNZqcEgcgDcs4Z6gF1wPvBvj"],"license":"Apache-2.0"},"contracts/src/interfaces/IHyperdriveCore.sol":{"keccak256":"0x84c73d8c4b67da41635f57fce2f30b8f04fc826ff6fb54c605de23d376f3403d","urls":["bzz-raw://e6d636dff5c24916ae35a76695d741de2f14ee46876ea67c5393618bb7f9cf85","dweb:/ipfs/QmUwxh8JeAqSFA8Z2qabVx3YWRSz7PJ9V2TQgnfctAgqPF"],"license":"Apache-2.0"},"contracts/src/interfaces/IHyperdriveRead.sol":{"keccak256":"0x1c61ba57b783bfa408a4e208e80c1c117850d4d6c9f0e280263d3fcf57a8b2fd","urls":["bzz-raw://5b920d5f0f37014035b6cbba16d898e52654122a0c004a3f75050af93b799496","dweb:/ipfs/QmaneaTDVXbw5HfevR2vFwXWw95EKWcBq8yMgMyWJPHKVW"],"license":"Apache-2.0"},"contracts/src/interfaces/IMultiToken.sol":{"keccak256":"0xcf3a4002275ea64e381f0a4aded3683e12960396ef79ba9dd153e2d1e395baad","urls":["bzz-raw://c9990491f7a5151fd696a45e6e5b0282a1dedf58521861dfb8c64db8cb60f5b6","dweb:/ipfs/QmaywmqqQhz7DeYqZdoeykagr5h4ZhQRv6GasHqvdWqzSy"],"license":"Apache-2.0"},"contracts/src/interfaces/IMultiTokenCore.sol":{"keccak256":"0xdb7f24663cff7307a468ef5e4c6f3e4d01ec0475157b3bbb3405890c3e9ab87d","urls":["bzz-raw://7f631a9a395fba5b07c3d9308fccac18d5aa59d890efe23442ed2a4da9871ae8","dweb:/ipfs/QmV2a4wiAPfWzSST3faYt58i2tqEyoqCLAJV8aNCdJyxVE"],"license":"Apache-2.0"},"contracts/src/interfaces/IMultiTokenMetadata.sol":{"keccak256":"0x476240ea4328bae9ab820b6f0f40afb11c74ee52d26bdbef69e4ece28dc10bdb","urls":["bzz-raw://843f73cb21eaec4e26952fd6cbde5e6815e3a28c438df9e026e249200d25076f","dweb:/ipfs/QmXzE7gsRKMaRGQfTDodA1RXxNxUuBj8RT7grTYjZUdbe6"],"license":"Apache-2.0"},"contracts/src/interfaces/IMultiTokenRead.sol":{"keccak256":"0x9b92d81f2f038fcd4bb5d069ab2b754efc153234c451d4ee4caa6d74aaca16b4","urls":["bzz-raw://8686fddc99564c6b6524ea68a6b7ff081a9988fc795fc13197bb59ddaa2041c6","dweb:/ipfs/QmarJYJAgoH6Z4H1BmdPoRgqLubRu5S6NDXBNV2fDApPuW"],"license":"Apache-2.0"},"contracts/src/libraries/FixedPointMath.sol":{"keccak256":"0x3d2d86890e7287a59bc7171a030f98006a60271812a233027d2e42d8f31ef46c","urls":["bzz-raw://ecf29c3dedf328bd29caef4ce1eba85576d4c4b8d6f77fc255e37c24e8d44e1d","dweb:/ipfs/QmVgmtYXzMkvR1GYsfqnJ1cH2ojmggoKmVuxKQZ9Rw78T1"],"license":"Apache-2.0"},"contracts/src/libraries/HyperdriveMath.sol":{"keccak256":"0xd87293bc10dfe09707a042bf05091baf40ba344bdca141bd99b62256a7611817","urls":["bzz-raw://8f6eadd454c6671c26bd22095c31a3bbaea7083df9aa6548dbaba32a4907e336","dweb:/ipfs/QmY1jMW9DuAk9CSfVS6MsG5onqjZHKzdBrv2TcHvj9yKj4"],"license":"Apache-2.0"},"contracts/src/libraries/SafeCast.sol":{"keccak256":"0x86d3065b06e2fb93733eb6f19ea0bb6343a51bc6b993c36702dc3e6d50a6d01d","urls":["bzz-raw://f0d303e0a2ed0c99ea194759d9fce5317b6e3a4c40464fc34c09f6f770d402db","dweb:/ipfs/QmVSTsk4YXLe8pcUbQEpihWq9XTcn47L46j8khkvfzyiWB"],"license":"Apache-2.0"},"contracts/src/libraries/YieldSpaceMath.sol":{"keccak256":"0x2f9511684820be7510155adfe3c2c2ef7e2583472946bae37f379bac801fc263","urls":["bzz-raw://7e9a84e4168448e3320a6682c8ba248c8b51757df173b86507e9aba4b6167247","dweb:/ipfs/QmSonetYBP22Fnc8HrcaTxAA1Zg2PCR5ptPiEp22sA77Ka"],"license":"Apache-2.0"}},"version":1},"ast":{"absolutePath":"contracts/src/libraries/HyperdriveMath.sol","id":12858,"exportedSymbols":{"FixedPointMath":[12293],"HyperdriveMath":[12857],"IHyperdrive":[5658],"ONE":[11516],"SafeCast":[15541],"YieldSpaceMath":[16293]},"nodeType":"SourceUnit","src":"40:23173:67","nodes":[{"id":12295,"nodeType":"PragmaDirective","src":"40:23:67","nodes":[],"literals":["solidity","0.8",".19"]},{"id":12297,"nodeType":"ImportDirective","src":"65:60:67","nodes":[],"absolutePath":"contracts/src/interfaces/IHyperdrive.sol","file":"../interfaces/IHyperdrive.sol","nameLocation":"-1:-1:-1","scope":12858,"sourceUnit":5659,"symbolAliases":[{"foreign":{"id":12296,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"74:11:67","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":12300,"nodeType":"ImportDirective","src":"126:59:67","nodes":[],"absolutePath":"contracts/src/libraries/FixedPointMath.sol","file":"./FixedPointMath.sol","nameLocation":"-1:-1:-1","scope":12858,"sourceUnit":12294,"symbolAliases":[{"foreign":{"id":12298,"name":"FixedPointMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12293,"src":"135:14:67","typeDescriptions":{}},"nameLocation":"-1:-1:-1"},{"foreign":{"id":12299,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"151:3:67","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":12302,"nodeType":"ImportDirective","src":"186:42:67","nodes":[],"absolutePath":"contracts/src/libraries/SafeCast.sol","file":"./SafeCast.sol","nameLocation":"-1:-1:-1","scope":12858,"sourceUnit":15542,"symbolAliases":[{"foreign":{"id":12301,"name":"SafeCast","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":15541,"src":"195:8:67","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":12304,"nodeType":"ImportDirective","src":"229:54:67","nodes":[],"absolutePath":"contracts/src/libraries/YieldSpaceMath.sol","file":"./YieldSpaceMath.sol","nameLocation":"-1:-1:-1","scope":12858,"sourceUnit":16294,"symbolAliases":[{"foreign":{"id":12303,"name":"YieldSpaceMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":16293,"src":"238:14:67","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":12857,"nodeType":"ContractDefinition","src":"599:22613:67","nodes":[{"id":12308,"nodeType":"UsingForDirective","src":"628:33:67","nodes":[],"global":false,"libraryName":{"id":12306,"name":"FixedPointMath","nameLocations":["634:14:67"],"nodeType":"IdentifierPath","referencedDeclaration":12293,"src":"634:14:67"},"typeName":{"id":12307,"name":"uint256","nodeType":"ElementaryTypeName","src":"653:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},{"id":12311,"nodeType":"UsingForDirective","src":"666:32:67","nodes":[],"global":false,"libraryName":{"id":12309,"name":"FixedPointMath","nameLocations":["672:14:67"],"nodeType":"IdentifierPath","referencedDeclaration":12293,"src":"672:14:67"},"typeName":{"id":12310,"name":"int256","nodeType":"ElementaryTypeName","src":"691:6:67","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}},{"id":12314,"nodeType":"UsingForDirective","src":"703:27:67","nodes":[],"global":false,"libraryName":{"id":12312,"name":"SafeCast","nameLocations":["709:8:67"],"nodeType":"IdentifierPath","referencedDeclaration":15541,"src":"709:8:67"},"typeName":{"id":12313,"name":"uint256","nodeType":"ElementaryTypeName","src":"722:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},{"id":12340,"nodeType":"FunctionDefinition","src":"1246:449:67","nodes":[],"body":{"id":12339,"nodeType":"Block","src":"1460:235:67","nodes":[],"statements":[{"expression":{"id":12337,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":12328,"name":"spotPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12326,"src":"1563:9:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":12335,"name":"_timeStretch","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12323,"src":"1675:12:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":12331,"name":"_effectiveShareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12317,"src":"1618:23:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12332,"name":"_bondReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12319,"src":"1643:13:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12329,"name":"_initialSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12321,"src":"1575:18:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12330,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1607:10:67","memberName":"mulDivDown","nodeType":"MemberAccess","referencedDeclaration":11541,"src":"1575:42:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":12333,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1575:82:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12334,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1671:3:67","memberName":"pow","nodeType":"MemberAccess","referencedDeclaration":11686,"src":"1575:99:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":12336,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1575:113:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1563:125:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12338,"nodeType":"ExpressionStatement","src":"1563:125:67"}]},"documentation":{"id":12315,"nodeType":"StructuredDocumentation","src":"736:505:67","text":"@dev Calculates the spot price of bonds in terms of base.\n @param _effectiveShareReserves The pool's effective share reserves. The\n        effective share reserves are a modified version of the share\n        reserves used when pricing trades.\n @param _bondReserves The pool's bond reserves.\n @param _initialSharePrice The initial share price.\n @param _timeStretch The time stretch parameter.\n @return spotPrice The spot price of bonds in terms of base."},"implemented":true,"kind":"function","modifiers":[],"name":"calculateSpotPrice","nameLocation":"1255:18:67","parameters":{"id":12324,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12317,"mutability":"mutable","name":"_effectiveShareReserves","nameLocation":"1291:23:67","nodeType":"VariableDeclaration","scope":12340,"src":"1283:31:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12316,"name":"uint256","nodeType":"ElementaryTypeName","src":"1283:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12319,"mutability":"mutable","name":"_bondReserves","nameLocation":"1332:13:67","nodeType":"VariableDeclaration","scope":12340,"src":"1324:21:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12318,"name":"uint256","nodeType":"ElementaryTypeName","src":"1324:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12321,"mutability":"mutable","name":"_initialSharePrice","nameLocation":"1363:18:67","nodeType":"VariableDeclaration","scope":12340,"src":"1355:26:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12320,"name":"uint256","nodeType":"ElementaryTypeName","src":"1355:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12323,"mutability":"mutable","name":"_timeStretch","nameLocation":"1399:12:67","nodeType":"VariableDeclaration","scope":12340,"src":"1391:20:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12322,"name":"uint256","nodeType":"ElementaryTypeName","src":"1391:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1273:144:67"},"returnParameters":{"id":12327,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12326,"mutability":"mutable","name":"spotPrice","nameLocation":"1449:9:67","nodeType":"VariableDeclaration","scope":12340,"src":"1441:17:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12325,"name":"uint256","nodeType":"ElementaryTypeName","src":"1441:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1440:19:67"},"scope":12857,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":12378,"nodeType":"FunctionDefinition","src":"2254:774:67","nodes":[],"body":{"id":12377,"nodeType":"Block","src":"2495:533:67","nodes":[],"statements":[{"assignments":[12357],"declarations":[{"constant":false,"id":12357,"mutability":"mutable","name":"spotPrice","nameLocation":"2726:9:67","nodeType":"VariableDeclaration","scope":12377,"src":"2718:17:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12356,"name":"uint256","nodeType":"ElementaryTypeName","src":"2718:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":12364,"initialValue":{"arguments":[{"id":12359,"name":"_effectiveShareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12343,"src":"2770:23:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12360,"name":"_bondReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12345,"src":"2807:13:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12361,"name":"_initialSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12347,"src":"2834:18:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12362,"name":"_timeStretch","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12351,"src":"2866:12:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":12358,"name":"calculateSpotPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12340,"src":"2738:18:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256) pure returns (uint256)"}},"id":12363,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2738:150:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2718:170:67"},{"expression":{"arguments":[{"arguments":[{"id":12372,"name":"_positionDuration","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12349,"src":"2979:17:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"hexValue":"333635","id":12373,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2998:8:67","subdenomination":"days","typeDescriptions":{"typeIdentifier":"t_rational_31536000_by_1","typeString":"int_const 31536000"},"value":"365"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_rational_31536000_by_1","typeString":"int_const 31536000"}],"expression":{"id":12370,"name":"spotPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12357,"src":"2960:9:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12371,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2970:8:67","memberName":"mulDivUp","nodeType":"MemberAccess","referencedDeclaration":11591,"src":"2960:18:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":12374,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2960:47:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12367,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12365,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"2918:3:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":12366,"name":"spotPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12357,"src":"2924:9:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2918:15:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":12368,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2917:17:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12369,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2935:7:67","memberName":"divDown","nodeType":"MemberAccess","referencedDeclaration":11577,"src":"2917:25:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":12375,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2917:104:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":12355,"id":12376,"nodeType":"Return","src":"2898:123:67"}]},"documentation":{"id":12341,"nodeType":"StructuredDocumentation","src":"1701:548:67","text":"@dev Calculates the spot APR of the pool.\n @param _effectiveShareReserves The pool's effective share reserves. The\n        effective share reserves are a modified version of the share\n        reserves used when pricing trades.\n @param _bondReserves The pool's bond reserves.\n @param _initialSharePrice The pool's initial share price.\n @param _positionDuration The amount of time until maturity in seconds.\n @param _timeStretch The time stretch parameter.\n @return apr The pool's spot APR."},"implemented":true,"kind":"function","modifiers":[],"name":"calculateSpotAPR","nameLocation":"2263:16:67","parameters":{"id":12352,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12343,"mutability":"mutable","name":"_effectiveShareReserves","nameLocation":"2297:23:67","nodeType":"VariableDeclaration","scope":12378,"src":"2289:31:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12342,"name":"uint256","nodeType":"ElementaryTypeName","src":"2289:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12345,"mutability":"mutable","name":"_bondReserves","nameLocation":"2338:13:67","nodeType":"VariableDeclaration","scope":12378,"src":"2330:21:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12344,"name":"uint256","nodeType":"ElementaryTypeName","src":"2330:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12347,"mutability":"mutable","name":"_initialSharePrice","nameLocation":"2369:18:67","nodeType":"VariableDeclaration","scope":12378,"src":"2361:26:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12346,"name":"uint256","nodeType":"ElementaryTypeName","src":"2361:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12349,"mutability":"mutable","name":"_positionDuration","nameLocation":"2405:17:67","nodeType":"VariableDeclaration","scope":12378,"src":"2397:25:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12348,"name":"uint256","nodeType":"ElementaryTypeName","src":"2397:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12351,"mutability":"mutable","name":"_timeStretch","nameLocation":"2440:12:67","nodeType":"VariableDeclaration","scope":12378,"src":"2432:20:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12350,"name":"uint256","nodeType":"ElementaryTypeName","src":"2432:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"2279:179:67"},"returnParameters":{"id":12355,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12354,"mutability":"mutable","name":"apr","nameLocation":"2490:3:67","nodeType":"VariableDeclaration","scope":12378,"src":"2482:11:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12353,"name":"uint256","nodeType":"ElementaryTypeName","src":"2482:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"2481:13:67"},"scope":12857,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":12409,"nodeType":"FunctionDefinition","src":"3613:340:67","nodes":[],"body":{"id":12408,"nodeType":"Block","src":"3757:196:67","nodes":[],"statements":[{"assignments":[12389],"declarations":[{"constant":false,"id":12389,"mutability":"mutable","name":"effectiveShareReserves","nameLocation":"3774:22:67","nodeType":"VariableDeclaration","scope":12408,"src":"3767:29:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":12388,"name":"int256","nodeType":"ElementaryTypeName","src":"3767:6:67","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"id":12396,"initialValue":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":12395,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":12392,"name":"_shareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12381,"src":"3806:14:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":12391,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3799:6:67","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":12390,"name":"int256","nodeType":"ElementaryTypeName","src":"3799:6:67","typeDescriptions":{}}},"id":12393,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3799:22:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":12394,"name":"_shareAdjustment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12383,"src":"3836:16:67","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"3799:53:67","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"VariableDeclarationStatement","src":"3767:85:67"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":12400,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12398,"name":"effectiveShareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12389,"src":"3870:22:67","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"hexValue":"30","id":12399,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3896:1:67","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"3870:27:67","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"}],"id":12397,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"3862:7:67","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$returns$__$","typeString":"function (bool) pure"}},"id":12401,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3862:36:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":12402,"nodeType":"ExpressionStatement","src":"3862:36:67"},{"expression":{"arguments":[{"id":12405,"name":"effectiveShareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12389,"src":"3923:22:67","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":12404,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3915:7:67","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":12403,"name":"uint256","nodeType":"ElementaryTypeName","src":"3915:7:67","typeDescriptions":{}}},"id":12406,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3915:31:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":12387,"id":12407,"nodeType":"Return","src":"3908:38:67"}]},"documentation":{"id":12379,"nodeType":"StructuredDocumentation","src":"3034:574:67","text":"@dev Calculates the effective share reserves. The effective share\n      reserves are the share reserves minus the share adjustment or\n      z - zeta. We use the effective share reserves as the z-parameter\n      to the YieldSpace pricing model. The share adjustment is used to\n      hold the pricing mechanism invariant under the flat component of\n      flat+curve trades.\n @param _shareReserves The pool's share reserves.\n @param _shareAdjustment The pool's share adjustment.\n @return The effective share reserves."},"implemented":true,"kind":"function","modifiers":[],"name":"calculateEffectiveShareReserves","nameLocation":"3622:31:67","parameters":{"id":12384,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12381,"mutability":"mutable","name":"_shareReserves","nameLocation":"3671:14:67","nodeType":"VariableDeclaration","scope":12409,"src":"3663:22:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12380,"name":"uint256","nodeType":"ElementaryTypeName","src":"3663:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12383,"mutability":"mutable","name":"_shareAdjustment","nameLocation":"3702:16:67","nodeType":"VariableDeclaration","scope":12409,"src":"3695:23:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":12382,"name":"int256","nodeType":"ElementaryTypeName","src":"3695:6:67","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"src":"3653:71:67"},"returnParameters":{"id":12387,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12386,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":12409,"src":"3748:7:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12385,"name":"uint256","nodeType":"ElementaryTypeName","src":"3748:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"3747:9:67"},"scope":12857,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":12453,"nodeType":"FunctionDefinition","src":"4948:611:67","nodes":[],"body":{"id":12452,"nodeType":"Block","src":"5201:358:67","nodes":[],"statements":[{"assignments":[12426],"declarations":[{"constant":false,"id":12426,"mutability":"mutable","name":"t","nameLocation":"5284:1:67","nodeType":"VariableDeclaration","scope":12452,"src":"5276:9:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12425,"name":"uint256","nodeType":"ElementaryTypeName","src":"5276:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":12431,"initialValue":{"arguments":[{"hexValue":"333635","id":12429,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"5314:8:67","subdenomination":"days","typeDescriptions":{"typeIdentifier":"t_rational_31536000_by_1","typeString":"int_const 31536000"},"value":"365"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_31536000_by_1","typeString":"int_const 31536000"}],"expression":{"id":12427,"name":"_positionDuration","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12418,"src":"5288:17:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12428,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5306:7:67","memberName":"divDown","nodeType":"MemberAccess","referencedDeclaration":11577,"src":"5288:25:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":12430,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5288:35:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"5276:47:67"},{"expression":{"arguments":[{"arguments":[{"arguments":[{"id":12447,"name":"_timeStretch","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12420,"src":"5524:12:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12445,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"5514:3:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12446,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5518:5:67","memberName":"divUp","nodeType":"MemberAccess","referencedDeclaration":11627,"src":"5514:9:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":12448,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5514:23:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12442,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12437,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"5487:3:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"arguments":[{"id":12440,"name":"t","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12426,"src":"5506:1:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12438,"name":"_apr","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12416,"src":"5493:4:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12439,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5498:7:67","memberName":"mulDown","nodeType":"MemberAccess","referencedDeclaration":11559,"src":"5493:12:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":12441,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5493:15:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5487:21:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":12443,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"5486:23:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12444,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5510:3:67","memberName":"pow","nodeType":"MemberAccess","referencedDeclaration":11686,"src":"5486:27:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":12449,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5486:52:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":12434,"name":"_effectiveShareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12412,"src":"5436:23:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12432,"name":"_initialSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12414,"src":"5409:18:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12433,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5428:7:67","memberName":"mulDown","nodeType":"MemberAccess","referencedDeclaration":11559,"src":"5409:26:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":12435,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5409:51:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12436,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5461:7:67","memberName":"mulDown","nodeType":"MemberAccess","referencedDeclaration":11559,"src":"5409:59:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":12450,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5409:143:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":12424,"id":12451,"nodeType":"Return","src":"5390:162:67"}]},"documentation":{"id":12410,"nodeType":"StructuredDocumentation","src":"3959:984:67","text":"@dev Calculates the initial bond reserves assuming that the initial LP\n      receives LP shares amounting to c * z + y. Throughout the rest of\n      the codebase, the bond reserves used include the LP share\n      adjustment specified in YieldSpace. The bond reserves returned by\n      this function are unadjusted which makes it easier to calculate the\n      initial LP shares.\n @param _effectiveShareReserves The pool's effective share reserves. The\n        effective share reserves are a modified version of the share\n        reserves used when pricing trades.\n @param _initialSharePrice The pool's initial share price.\n @param _apr The pool's APR.\n @param _positionDuration The amount of time until maturity in seconds.\n @param _timeStretch The time stretch parameter.\n @return bondReserves The bond reserves (without adjustment) that make\n         the pool have a specified APR."},"implemented":true,"kind":"function","modifiers":[],"name":"calculateInitialBondReserves","nameLocation":"4957:28:67","parameters":{"id":12421,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12412,"mutability":"mutable","name":"_effectiveShareReserves","nameLocation":"5003:23:67","nodeType":"VariableDeclaration","scope":12453,"src":"4995:31:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12411,"name":"uint256","nodeType":"ElementaryTypeName","src":"4995:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12414,"mutability":"mutable","name":"_initialSharePrice","nameLocation":"5044:18:67","nodeType":"VariableDeclaration","scope":12453,"src":"5036:26:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12413,"name":"uint256","nodeType":"ElementaryTypeName","src":"5036:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12416,"mutability":"mutable","name":"_apr","nameLocation":"5080:4:67","nodeType":"VariableDeclaration","scope":12453,"src":"5072:12:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12415,"name":"uint256","nodeType":"ElementaryTypeName","src":"5072:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12418,"mutability":"mutable","name":"_positionDuration","nameLocation":"5102:17:67","nodeType":"VariableDeclaration","scope":12453,"src":"5094:25:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12417,"name":"uint256","nodeType":"ElementaryTypeName","src":"5094:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12420,"mutability":"mutable","name":"_timeStretch","nameLocation":"5137:12:67","nodeType":"VariableDeclaration","scope":12453,"src":"5129:20:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12419,"name":"uint256","nodeType":"ElementaryTypeName","src":"5129:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"4985:170:67"},"returnParameters":{"id":12424,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12423,"mutability":"mutable","name":"bondReserves","nameLocation":"5187:12:67","nodeType":"VariableDeclaration","scope":12453,"src":"5179:20:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12422,"name":"uint256","nodeType":"ElementaryTypeName","src":"5179:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"5178:22:67"},"scope":12857,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":12504,"nodeType":"FunctionDefinition","src":"6922:1148:67","nodes":[],"body":{"id":12503,"nodeType":"Block","src":"7187:883:67","nodes":[],"statements":[{"assignments":[12472],"declarations":[{"constant":false,"id":12472,"mutability":"mutable","name":"bondFactor","nameLocation":"7493:10:67","nodeType":"VariableDeclaration","scope":12503,"src":"7485:18:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12471,"name":"uint256","nodeType":"ElementaryTypeName","src":"7485:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":12481,"initialValue":{"arguments":[{"id":12479,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12464,"src":"7598:11:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":12475,"name":"_closeSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12462,"src":"7542:16:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12476,"name":"_openSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12460,"src":"7560:15:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12473,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12456,"src":"7506:11:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12474,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"7531:10:67","memberName":"mulDivDown","nodeType":"MemberAccess","referencedDeclaration":11541,"src":"7506:35:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":12477,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7506:70:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12478,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"7590:7:67","memberName":"divDown","nodeType":"MemberAccess","referencedDeclaration":11577,"src":"7506:91:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":12480,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7506:104:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"7485:125:67"},{"expression":{"id":12488,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":12482,"name":"bondFactor","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12472,"src":"7817:10:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"arguments":[{"id":12485,"name":"_flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12466,"src":"7854:8:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12486,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12464,"src":"7864:11:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12483,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12456,"src":"7831:11:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12484,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"7843:10:67","memberName":"mulDivDown","nodeType":"MemberAccess","referencedDeclaration":11541,"src":"7831:22:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":12487,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7831:45:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7817:59:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12489,"nodeType":"ExpressionStatement","src":"7817:59:67"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12492,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12490,"name":"bondFactor","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12472,"src":"7891:10:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":12491,"name":"_shareAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12458,"src":"7904:12:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7891:25:67","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":12500,"nodeType":"IfStatement","src":"7887:147:67","trueBody":{"id":12499,"nodeType":"Block","src":"7918:116:67","statements":[{"expression":{"id":12497,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":12493,"name":"shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12469,"src":"7982:13:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12496,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12494,"name":"bondFactor","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12472,"src":"7998:10:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":12495,"name":"_shareAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12458,"src":"8011:12:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7998:25:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7982:41:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12498,"nodeType":"ExpressionStatement","src":"7982:41:67"}]}},{"expression":{"id":12501,"name":"shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12469,"src":"8050:13:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":12470,"id":12502,"nodeType":"Return","src":"8043:20:67"}]},"documentation":{"id":12454,"nodeType":"StructuredDocumentation","src":"5565:1352:67","text":"@dev Calculates the proceeds in shares of closing a short position. This\n      takes into account the trading profits, the interest that was\n      earned by the short, the flat fee the short pays, and the amount of\n      margin that was released by closing the short. The math for the\n      short's proceeds in base is given by:\n      proceeds = (1 + flat_fee) * dy - c * dz + (c1 - c0) * (dy / c0)\n               = (1 + flat_fee) * dy - c * dz + (c1 / c0) * dy - dy\n               = (c1 / c0 + flat_fee) * dy - c * dz\n      We convert the proceeds to shares by dividing by the current share\n      price. In the event that the interest is negative and outweighs the\n      trading profits and margin released, the short's proceeds are\n      marked to zero.\n @param _bondAmount The amount of bonds underlying the closed short.\n @param _shareAmount The amount of shares that it costs to close the\n                     short.\n @param _openSharePrice The share price at the short's open.\n @param _closeSharePrice The share price at the short's close.\n @param _sharePrice The current share price.\n @param _flatFee The flat fee currently within the pool\n @return shareProceeds The short proceeds in shares."},"implemented":true,"kind":"function","modifiers":[],"name":"calculateShortProceeds","nameLocation":"6931:22:67","parameters":{"id":12467,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12456,"mutability":"mutable","name":"_bondAmount","nameLocation":"6971:11:67","nodeType":"VariableDeclaration","scope":12504,"src":"6963:19:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12455,"name":"uint256","nodeType":"ElementaryTypeName","src":"6963:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12458,"mutability":"mutable","name":"_shareAmount","nameLocation":"7000:12:67","nodeType":"VariableDeclaration","scope":12504,"src":"6992:20:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12457,"name":"uint256","nodeType":"ElementaryTypeName","src":"6992:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12460,"mutability":"mutable","name":"_openSharePrice","nameLocation":"7030:15:67","nodeType":"VariableDeclaration","scope":12504,"src":"7022:23:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12459,"name":"uint256","nodeType":"ElementaryTypeName","src":"7022:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12462,"mutability":"mutable","name":"_closeSharePrice","nameLocation":"7063:16:67","nodeType":"VariableDeclaration","scope":12504,"src":"7055:24:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12461,"name":"uint256","nodeType":"ElementaryTypeName","src":"7055:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12464,"mutability":"mutable","name":"_sharePrice","nameLocation":"7097:11:67","nodeType":"VariableDeclaration","scope":12504,"src":"7089:19:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12463,"name":"uint256","nodeType":"ElementaryTypeName","src":"7089:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12466,"mutability":"mutable","name":"_flatFee","nameLocation":"7126:8:67","nodeType":"VariableDeclaration","scope":12504,"src":"7118:16:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12465,"name":"uint256","nodeType":"ElementaryTypeName","src":"7118:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"6953:187:67"},"returnParameters":{"id":12470,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12469,"mutability":"mutable","name":"shareProceeds","nameLocation":"7172:13:67","nodeType":"VariableDeclaration","scope":12504,"src":"7164:21:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12468,"name":"uint256","nodeType":"ElementaryTypeName","src":"7164:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"7163:23:67"},"scope":12857,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":12540,"nodeType":"FunctionDefinition","src":"8719:404:67","nodes":[],"body":{"id":12539,"nodeType":"Block","src":"8885:238:67","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12536,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12521,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"8956:3:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12534,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12532,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"9066:3:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":12533,"name":"_flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12511,"src":"9072:8:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9066:14:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12529,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":12526,"name":"_startingSpotPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12507,"src":"9008:18:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12524,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"8998:3:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12525,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"9002:5:67","memberName":"divUp","nodeType":"MemberAccess","referencedDeclaration":11627,"src":"8998:9:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":12527,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8998:29:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":12528,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"9030:3:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"8998:35:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12522,"name":"_curveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12509,"src":"8982:9:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12523,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"8992:5:67","memberName":"mulUp","nodeType":"MemberAccess","referencedDeclaration":11609,"src":"8982:15:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":12530,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8982:52:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12531,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"9035:5:67","memberName":"mulUp","nodeType":"MemberAccess","referencedDeclaration":11609,"src":"8982:58:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":12535,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8982:120:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"8956:146:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12518,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12516,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"8915:3:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":12517,"name":"_flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12511,"src":"8921:8:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"8915:14:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":12519,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"8914:16:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12520,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"8931:7:67","memberName":"divDown","nodeType":"MemberAccess","referencedDeclaration":11577,"src":"8914:24:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":12537,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8914:202:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":12515,"id":12538,"nodeType":"Return","src":"8895:221:67"}]},"documentation":{"id":12505,"nodeType":"StructuredDocumentation","src":"8076:638:67","text":"@dev Since traders pay a curve fee when they open longs on Hyperdrive,\n      it is possible for traders to receive a negative interest rate even\n      if curve's spot price is less than or equal to 1.\n      Given the curve fee `phi_c` and the starting spot price `p_0`, the\n      maximum spot price is given by:\n      p_max = (1 - phi_f) / (1 + phi_c * (1 / p_0 - 1) * (1 - phi_f))\n @param _startingSpotPrice The spot price at the start of the trade.\n @param _curveFee The curve fee.\n @param _flatFee The flat fee.\n @return The maximum spot price."},"implemented":true,"kind":"function","modifiers":[],"name":"calculateOpenLongMaxSpotPrice","nameLocation":"8728:29:67","parameters":{"id":12512,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12507,"mutability":"mutable","name":"_startingSpotPrice","nameLocation":"8775:18:67","nodeType":"VariableDeclaration","scope":12540,"src":"8767:26:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12506,"name":"uint256","nodeType":"ElementaryTypeName","src":"8767:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12509,"mutability":"mutable","name":"_curveFee","nameLocation":"8811:9:67","nodeType":"VariableDeclaration","scope":12540,"src":"8803:17:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12508,"name":"uint256","nodeType":"ElementaryTypeName","src":"8803:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12511,"mutability":"mutable","name":"_flatFee","nameLocation":"8838:8:67","nodeType":"VariableDeclaration","scope":12540,"src":"8830:16:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12510,"name":"uint256","nodeType":"ElementaryTypeName","src":"8830:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"8757:95:67"},"returnParameters":{"id":12515,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12514,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":12540,"src":"8876:7:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12513,"name":"uint256","nodeType":"ElementaryTypeName","src":"8876:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"8875:9:67"},"scope":12857,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":12560,"nodeType":"FunctionDefinition","src":"9702:213:67","nodes":[],"body":{"id":12559,"nodeType":"Block","src":"9844:71:67","nodes":[],"statements":[{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12557,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12550,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"9861:3:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12555,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12553,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"9883:3:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":12554,"name":"_startingSpotPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12543,"src":"9889:18:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9883:24:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12551,"name":"_curveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12545,"src":"9867:9:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12552,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"9877:5:67","memberName":"mulUp","nodeType":"MemberAccess","referencedDeclaration":11609,"src":"9867:15:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":12556,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9867:41:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9861:47:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":12549,"id":12558,"nodeType":"Return","src":"9854:54:67"}]},"documentation":{"id":12541,"nodeType":"StructuredDocumentation","src":"9129:568:67","text":"@dev Since traders pay a curve fee when they close shorts on Hyperdrive,\n      it is possible for traders to receive a negative interest rate even\n      if curve's spot price is less than or equal to 1.\n      Given the curve fee `phi_c` and the starting spot price `p_0`, the\n      maximum spot price is given by:\n      p_max = 1 - phi_c * (1 - p_0)\n @param _startingSpotPrice The spot price at the start of the trade.\n @param _curveFee The curve fee.\n @return The maximum spot price."},"implemented":true,"kind":"function","modifiers":[],"name":"calculateCloseShortMaxSpotPrice","nameLocation":"9711:31:67","parameters":{"id":12546,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12543,"mutability":"mutable","name":"_startingSpotPrice","nameLocation":"9760:18:67","nodeType":"VariableDeclaration","scope":12560,"src":"9752:26:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12542,"name":"uint256","nodeType":"ElementaryTypeName","src":"9752:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12545,"mutability":"mutable","name":"_curveFee","nameLocation":"9796:9:67","nodeType":"VariableDeclaration","scope":12560,"src":"9788:17:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12544,"name":"uint256","nodeType":"ElementaryTypeName","src":"9788:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"9742:69:67"},"returnParameters":{"id":12549,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12548,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":12560,"src":"9835:7:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12547,"name":"uint256","nodeType":"ElementaryTypeName","src":"9835:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"9834:9:67"},"scope":12857,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":12591,"nodeType":"FunctionDefinition","src":"10600:872:67","nodes":[],"body":{"id":12590,"nodeType":"Block","src":"10862:610:67","nodes":[],"statements":[{"expression":{"arguments":[{"id":12580,"name":"_effectiveShareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12563,"src":"11057:23:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12581,"name":"_bondReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12565,"src":"11098:13:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12582,"name":"_shareAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12567,"src":"11129:12:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12585,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12583,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"11368:3:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":12584,"name":"_timeStretch","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12569,"src":"11374:12:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"11368:18:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12586,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12571,"src":"11404:11:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12587,"name":"_initialSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12573,"src":"11433:18:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12578,"name":"YieldSpaceMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":16293,"src":"10990:14:67","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_YieldSpaceMath_$16293_$","typeString":"type(library YieldSpaceMath)"}},"id":12579,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"11005:34:67","memberName":"calculateBondsOutGivenSharesInDown","nodeType":"MemberAccess","referencedDeclaration":15639,"src":"10990:49:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,uint256,uint256) pure returns (uint256)"}},"id":12588,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10990:475:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":12577,"id":12589,"nodeType":"Return","src":"10971:494:67"}]},"documentation":{"id":12561,"nodeType":"StructuredDocumentation","src":"9921:674:67","text":"@dev Calculates the number of bonds a user will receive when opening a\n      long position.\n @param _effectiveShareReserves The pool's effective share reserves. The\n        effective share reserves are a modified version of the share\n        reserves used when pricing trades.\n @param _bondReserves The pool's bond reserves.\n @param _shareAmount The amount of shares the user is depositing.\n @param _timeStretch The time stretch parameter.\n @param _sharePrice The share price.\n @param _initialSharePrice The initial share price.\n @return bondReservesDelta The bonds paid by the reserves in the trade."},"implemented":true,"kind":"function","modifiers":[],"name":"calculateOpenLong","nameLocation":"10609:17:67","parameters":{"id":12574,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12563,"mutability":"mutable","name":"_effectiveShareReserves","nameLocation":"10644:23:67","nodeType":"VariableDeclaration","scope":12591,"src":"10636:31:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12562,"name":"uint256","nodeType":"ElementaryTypeName","src":"10636:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12565,"mutability":"mutable","name":"_bondReserves","nameLocation":"10685:13:67","nodeType":"VariableDeclaration","scope":12591,"src":"10677:21:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12564,"name":"uint256","nodeType":"ElementaryTypeName","src":"10677:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12567,"mutability":"mutable","name":"_shareAmount","nameLocation":"10716:12:67","nodeType":"VariableDeclaration","scope":12591,"src":"10708:20:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12566,"name":"uint256","nodeType":"ElementaryTypeName","src":"10708:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12569,"mutability":"mutable","name":"_timeStretch","nameLocation":"10746:12:67","nodeType":"VariableDeclaration","scope":12591,"src":"10738:20:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12568,"name":"uint256","nodeType":"ElementaryTypeName","src":"10738:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12571,"mutability":"mutable","name":"_sharePrice","nameLocation":"10776:11:67","nodeType":"VariableDeclaration","scope":12591,"src":"10768:19:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12570,"name":"uint256","nodeType":"ElementaryTypeName","src":"10768:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12573,"mutability":"mutable","name":"_initialSharePrice","nameLocation":"10805:18:67","nodeType":"VariableDeclaration","scope":12591,"src":"10797:26:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12572,"name":"uint256","nodeType":"ElementaryTypeName","src":"10797:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"10626:203:67"},"returnParameters":{"id":12577,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12576,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":12591,"src":"10853:7:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12575,"name":"uint256","nodeType":"ElementaryTypeName","src":"10853:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"10852:9:67"},"scope":12857,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":12656,"nodeType":"FunctionDefinition","src":"12416:1866:67","nodes":[],"body":{"id":12655,"nodeType":"Block","src":"12855:1427:67","nodes":[],"statements":[{"expression":{"id":12623,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":12615,"name":"shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12613,"src":"13313:13:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12620,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12618,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"13363:3:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":12619,"name":"_normalizedTimeRemaining","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12600,"src":"13369:24:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"13363:30:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12621,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12604,"src":"13407:11:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12616,"name":"_amountIn","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12598,"src":"13329:9:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12617,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"13339:10:67","memberName":"mulDivDown","nodeType":"MemberAccess","referencedDeclaration":11541,"src":"13329:20:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":12622,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13329:99:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"13313:115:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12624,"nodeType":"ExpressionStatement","src":"13313:115:67"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12627,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12625,"name":"_normalizedTimeRemaining","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12600,"src":"13442:24:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"30","id":12626,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"13469:1:67","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"13442:28:67","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":12654,"nodeType":"IfStatement","src":"13438:838:67","trueBody":{"id":12653,"nodeType":"Block","src":"13472:804:67","statements":[{"expression":{"id":12633,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":12628,"name":"bondCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12611,"src":"13541:14:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":12631,"name":"_normalizedTimeRemaining","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12600,"src":"13576:24:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12629,"name":"_amountIn","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12598,"src":"13558:9:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12630,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"13568:7:67","memberName":"mulDown","nodeType":"MemberAccess","referencedDeclaration":11559,"src":"13558:17:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":12632,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13558:43:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"13541:60:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12634,"nodeType":"ExpressionStatement","src":"13541:60:67"},{"expression":{"id":12647,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":12635,"name":"shareCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12609,"src":"13724:15:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":12638,"name":"_effectiveShareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12594,"src":"13809:23:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12639,"name":"_bondReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12596,"src":"13850:13:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12640,"name":"bondCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12611,"src":"13881:14:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12643,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12641,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"14122:3:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":12642,"name":"_timeStretch","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12602,"src":"14128:12:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"14122:18:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12644,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12604,"src":"14158:11:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12645,"name":"_initialSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12606,"src":"14187:18:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12636,"name":"YieldSpaceMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":16293,"src":"13742:14:67","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_YieldSpaceMath_$16293_$","typeString":"type(library YieldSpaceMath)"}},"id":12637,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"13757:34:67","memberName":"calculateSharesOutGivenBondsInDown","nodeType":"MemberAccess","referencedDeclaration":15857,"src":"13742:49:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,uint256,uint256) pure returns (uint256)"}},"id":12646,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13742:477:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"13724:495:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12648,"nodeType":"ExpressionStatement","src":"13724:495:67"},{"expression":{"id":12651,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":12649,"name":"shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12613,"src":"14233:13:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"id":12650,"name":"shareCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12609,"src":"14250:15:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"14233:32:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12652,"nodeType":"ExpressionStatement","src":"14233:32:67"}]}}]},"documentation":{"id":12592,"nodeType":"StructuredDocumentation","src":"11478:933:67","text":"@dev Calculates the amount of shares a user will receive when closing a\n      long position.\n @param _effectiveShareReserves The pool's effective share reserves. The\n        effective share reserves are a modified version of the share\n        reserves used when pricing trades.\n @param _bondReserves The pool's bond reserves.\n @param _amountIn The amount of bonds the user is closing.\n @param _normalizedTimeRemaining The normalized time remaining of the\n        position.\n @param _timeStretch The time stretch parameter.\n @param _sharePrice The share price.\n @param _initialSharePrice The share price when the pool was deployed.\n @return shareCurveDelta The shares paid by the reserves in the trade.\n @return bondCurveDelta The bonds paid to the reserves in the trade.\n @return shareProceeds The shares that the user will receive."},"implemented":true,"kind":"function","modifiers":[],"name":"calculateCloseLong","nameLocation":"12425:18:67","parameters":{"id":12607,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12594,"mutability":"mutable","name":"_effectiveShareReserves","nameLocation":"12461:23:67","nodeType":"VariableDeclaration","scope":12656,"src":"12453:31:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12593,"name":"uint256","nodeType":"ElementaryTypeName","src":"12453:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12596,"mutability":"mutable","name":"_bondReserves","nameLocation":"12502:13:67","nodeType":"VariableDeclaration","scope":12656,"src":"12494:21:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12595,"name":"uint256","nodeType":"ElementaryTypeName","src":"12494:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12598,"mutability":"mutable","name":"_amountIn","nameLocation":"12533:9:67","nodeType":"VariableDeclaration","scope":12656,"src":"12525:17:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12597,"name":"uint256","nodeType":"ElementaryTypeName","src":"12525:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12600,"mutability":"mutable","name":"_normalizedTimeRemaining","nameLocation":"12560:24:67","nodeType":"VariableDeclaration","scope":12656,"src":"12552:32:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12599,"name":"uint256","nodeType":"ElementaryTypeName","src":"12552:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12602,"mutability":"mutable","name":"_timeStretch","nameLocation":"12602:12:67","nodeType":"VariableDeclaration","scope":12656,"src":"12594:20:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12601,"name":"uint256","nodeType":"ElementaryTypeName","src":"12594:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12604,"mutability":"mutable","name":"_sharePrice","nameLocation":"12632:11:67","nodeType":"VariableDeclaration","scope":12656,"src":"12624:19:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12603,"name":"uint256","nodeType":"ElementaryTypeName","src":"12624:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12606,"mutability":"mutable","name":"_initialSharePrice","nameLocation":"12661:18:67","nodeType":"VariableDeclaration","scope":12656,"src":"12653:26:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12605,"name":"uint256","nodeType":"ElementaryTypeName","src":"12653:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"12443:242:67"},"returnParameters":{"id":12614,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12609,"mutability":"mutable","name":"shareCurveDelta","nameLocation":"12754:15:67","nodeType":"VariableDeclaration","scope":12656,"src":"12746:23:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12608,"name":"uint256","nodeType":"ElementaryTypeName","src":"12746:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12611,"mutability":"mutable","name":"bondCurveDelta","nameLocation":"12791:14:67","nodeType":"VariableDeclaration","scope":12656,"src":"12783:22:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12610,"name":"uint256","nodeType":"ElementaryTypeName","src":"12783:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12613,"mutability":"mutable","name":"shareProceeds","nameLocation":"12827:13:67","nodeType":"VariableDeclaration","scope":12656,"src":"12819:21:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12612,"name":"uint256","nodeType":"ElementaryTypeName","src":"12819:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"12732:118:67"},"scope":12857,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":12687,"nodeType":"FunctionDefinition","src":"14954:846:67","nodes":[],"body":{"id":12686,"nodeType":"Block","src":"15214:586:67","nodes":[],"statements":[{"expression":{"arguments":[{"id":12676,"name":"_effectiveShareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12659,"src":"15388:23:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12677,"name":"_bondReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12661,"src":"15429:13:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12678,"name":"_amountIn","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12663,"src":"15460:9:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12681,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12679,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"15696:3:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":12680,"name":"_timeStretch","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12665,"src":"15702:12:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"15696:18:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12682,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12667,"src":"15732:11:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12683,"name":"_initialSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12669,"src":"15761:18:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12674,"name":"YieldSpaceMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":16293,"src":"15321:14:67","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_YieldSpaceMath_$16293_$","typeString":"type(library YieldSpaceMath)"}},"id":12675,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"15336:34:67","memberName":"calculateSharesOutGivenBondsInDown","nodeType":"MemberAccess","referencedDeclaration":15857,"src":"15321:49:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,uint256,uint256) pure returns (uint256)"}},"id":12684,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"15321:472:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":12673,"id":12685,"nodeType":"Return","src":"15302:491:67"}]},"documentation":{"id":12657,"nodeType":"StructuredDocumentation","src":"14288:661:67","text":"@dev Calculates the amount of shares that will be received given a\n      specified amount of bonds.\n @param _effectiveShareReserves The pool's effective share reserves. The\n        effective share reserves are a modified version of the share\n        reserves used when pricing trades.\n @param _bondReserves The pool's bonds reserves.\n @param _amountIn The amount of bonds the user is providing.\n @param _timeStretch The time stretch parameter.\n @param _sharePrice The share price.\n @param _initialSharePrice The initial share price.\n @return The shares paid by the reserves in the trade."},"implemented":true,"kind":"function","modifiers":[],"name":"calculateOpenShort","nameLocation":"14963:18:67","parameters":{"id":12670,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12659,"mutability":"mutable","name":"_effectiveShareReserves","nameLocation":"14999:23:67","nodeType":"VariableDeclaration","scope":12687,"src":"14991:31:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12658,"name":"uint256","nodeType":"ElementaryTypeName","src":"14991:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12661,"mutability":"mutable","name":"_bondReserves","nameLocation":"15040:13:67","nodeType":"VariableDeclaration","scope":12687,"src":"15032:21:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12660,"name":"uint256","nodeType":"ElementaryTypeName","src":"15032:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12663,"mutability":"mutable","name":"_amountIn","nameLocation":"15071:9:67","nodeType":"VariableDeclaration","scope":12687,"src":"15063:17:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12662,"name":"uint256","nodeType":"ElementaryTypeName","src":"15063:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12665,"mutability":"mutable","name":"_timeStretch","nameLocation":"15098:12:67","nodeType":"VariableDeclaration","scope":12687,"src":"15090:20:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12664,"name":"uint256","nodeType":"ElementaryTypeName","src":"15090:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12667,"mutability":"mutable","name":"_sharePrice","nameLocation":"15128:11:67","nodeType":"VariableDeclaration","scope":12687,"src":"15120:19:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12666,"name":"uint256","nodeType":"ElementaryTypeName","src":"15120:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12669,"mutability":"mutable","name":"_initialSharePrice","nameLocation":"15157:18:67","nodeType":"VariableDeclaration","scope":12687,"src":"15149:26:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12668,"name":"uint256","nodeType":"ElementaryTypeName","src":"15149:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"14981:200:67"},"returnParameters":{"id":12673,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12672,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":12687,"src":"15205:7:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12671,"name":"uint256","nodeType":"ElementaryTypeName","src":"15205:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"15204:9:67"},"scope":12857,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":12752,"nodeType":"FunctionDefinition","src":"16736:1908:67","nodes":[],"body":{"id":12751,"nodeType":"Block","src":"17176:1468:67","nodes":[],"statements":[{"expression":{"id":12719,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":12711,"name":"sharePayment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12709,"src":"17740:12:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12716,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12714,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"17790:3:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":12715,"name":"_normalizedTimeRemaining","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12696,"src":"17796:24:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"17790:30:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12717,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12700,"src":"17834:11:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12712,"name":"_amountOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12694,"src":"17755:10:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12713,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"17766:10:67","memberName":"mulDivDown","nodeType":"MemberAccess","referencedDeclaration":11541,"src":"17755:21:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":12718,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"17755:100:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"17740:115:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12720,"nodeType":"ExpressionStatement","src":"17740:115:67"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12723,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12721,"name":"_normalizedTimeRemaining","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12696,"src":"17869:24:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"30","id":12722,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"17896:1:67","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"17869:28:67","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":12750,"nodeType":"IfStatement","src":"17865:773:67","trueBody":{"id":12749,"nodeType":"Block","src":"17899:739:67","statements":[{"expression":{"id":12729,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":12724,"name":"bondCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12707,"src":"17913:14:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":12727,"name":"_normalizedTimeRemaining","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12696,"src":"17949:24:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12725,"name":"_amountOut","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12694,"src":"17930:10:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12726,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"17941:7:67","memberName":"mulDown","nodeType":"MemberAccess","referencedDeclaration":11559,"src":"17930:18:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":12728,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"17930:44:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"17913:61:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12730,"nodeType":"ExpressionStatement","src":"17913:61:67"},{"expression":{"id":12743,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":12731,"name":"shareCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12705,"src":"18089:15:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":12734,"name":"_effectiveShareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12690,"src":"18172:23:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12735,"name":"_bondReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12692,"src":"18213:13:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12736,"name":"bondCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12707,"src":"18244:14:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12739,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12737,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"18485:3:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":12738,"name":"_timeStretch","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12698,"src":"18491:12:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"18485:18:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12740,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12700,"src":"18521:11:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12741,"name":"_initialSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12702,"src":"18550:18:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12732,"name":"YieldSpaceMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":16293,"src":"18107:14:67","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_YieldSpaceMath_$16293_$","typeString":"type(library YieldSpaceMath)"}},"id":12733,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"18122:32:67","memberName":"calculateSharesInGivenBondsOutUp","nodeType":"MemberAccess","referencedDeclaration":15726,"src":"18107:47:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,uint256,uint256) pure returns (uint256)"}},"id":12742,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"18107:475:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"18089:493:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12744,"nodeType":"ExpressionStatement","src":"18089:493:67"},{"expression":{"id":12747,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":12745,"name":"sharePayment","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12709,"src":"18596:12:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"id":12746,"name":"shareCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12705,"src":"18612:15:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"18596:31:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12748,"nodeType":"ExpressionStatement","src":"18596:31:67"}]}}]},"documentation":{"id":12688,"nodeType":"StructuredDocumentation","src":"15806:925:67","text":"@dev Calculates the amount of base that a user will receive when closing\n      a short position.\n @param _effectiveShareReserves The pool's effective share reserves. The\n        effective share reserves are a modified version of the share\n        reserves used when pricing trades.\n @param _bondReserves The pool's bonds reserves.\n @param _amountOut The amount of the asset that is received.\n @param _normalizedTimeRemaining The amount of time remaining until\n        maturity in seconds.\n @param _timeStretch The time stretch parameter.\n @param _sharePrice The share price.\n @param _initialSharePrice The initial share price.\n @return shareCurveDelta The shares paid to the reserves in the trade.\n @return bondCurveDelta The bonds paid by the reserves in the trade.\n @return sharePayment The shares that the user must pay."},"implemented":true,"kind":"function","modifiers":[],"name":"calculateCloseShort","nameLocation":"16745:19:67","parameters":{"id":12703,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12690,"mutability":"mutable","name":"_effectiveShareReserves","nameLocation":"16782:23:67","nodeType":"VariableDeclaration","scope":12752,"src":"16774:31:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12689,"name":"uint256","nodeType":"ElementaryTypeName","src":"16774:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12692,"mutability":"mutable","name":"_bondReserves","nameLocation":"16823:13:67","nodeType":"VariableDeclaration","scope":12752,"src":"16815:21:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12691,"name":"uint256","nodeType":"ElementaryTypeName","src":"16815:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12694,"mutability":"mutable","name":"_amountOut","nameLocation":"16854:10:67","nodeType":"VariableDeclaration","scope":12752,"src":"16846:18:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12693,"name":"uint256","nodeType":"ElementaryTypeName","src":"16846:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12696,"mutability":"mutable","name":"_normalizedTimeRemaining","nameLocation":"16882:24:67","nodeType":"VariableDeclaration","scope":12752,"src":"16874:32:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12695,"name":"uint256","nodeType":"ElementaryTypeName","src":"16874:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12698,"mutability":"mutable","name":"_timeStretch","nameLocation":"16924:12:67","nodeType":"VariableDeclaration","scope":12752,"src":"16916:20:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12697,"name":"uint256","nodeType":"ElementaryTypeName","src":"16916:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12700,"mutability":"mutable","name":"_sharePrice","nameLocation":"16954:11:67","nodeType":"VariableDeclaration","scope":12752,"src":"16946:19:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12699,"name":"uint256","nodeType":"ElementaryTypeName","src":"16946:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12702,"mutability":"mutable","name":"_initialSharePrice","nameLocation":"16983:18:67","nodeType":"VariableDeclaration","scope":12752,"src":"16975:26:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12701,"name":"uint256","nodeType":"ElementaryTypeName","src":"16975:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"16764:243:67"},"returnParameters":{"id":12710,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12705,"mutability":"mutable","name":"shareCurveDelta","nameLocation":"17076:15:67","nodeType":"VariableDeclaration","scope":12752,"src":"17068:23:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12704,"name":"uint256","nodeType":"ElementaryTypeName","src":"17068:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12707,"mutability":"mutable","name":"bondCurveDelta","nameLocation":"17113:14:67","nodeType":"VariableDeclaration","scope":12752,"src":"17105:22:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12706,"name":"uint256","nodeType":"ElementaryTypeName","src":"17105:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12709,"mutability":"mutable","name":"sharePayment","nameLocation":"17149:12:67","nodeType":"VariableDeclaration","scope":12752,"src":"17141:20:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12708,"name":"uint256","nodeType":"ElementaryTypeName","src":"17141:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"17054:117:67"},"scope":12857,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":12856,"nodeType":"FunctionDefinition","src":"20493:2717:67","nodes":[],"body":{"id":12855,"nodeType":"Block","src":"20837:2373:67","nodes":[],"statements":[{"assignments":[12781],"declarations":[{"constant":false,"id":12781,"mutability":"mutable","name":"shareAdjustmentDelta","nameLocation":"21769:20:67","nodeType":"VariableDeclaration","scope":12855,"src":"21762:27:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":12780,"name":"int256","nodeType":"ElementaryTypeName","src":"21762:6:67","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"id":12782,"nodeType":"VariableDeclarationStatement","src":"21762:27:67"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":12785,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":12783,"name":"_closeSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12765,"src":"21803:16:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":12784,"name":"_openSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12763,"src":"21822:15:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"21803:34:67","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":12846,"nodeType":"Block","src":"22884:134:67","statements":[{"expression":{"id":12844,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":12834,"name":"shareAdjustmentDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12781,"src":"22898:20:67","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":12843,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":12837,"name":"_shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12757,"src":"22944:19:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":12836,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"22937:6:67","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":12835,"name":"int256","nodeType":"ElementaryTypeName","src":"22937:6:67","typeDescriptions":{}}},"id":12838,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"22937:27:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"arguments":[{"id":12841,"name":"_shareCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12759,"src":"22990:16:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":12840,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"22983:6:67","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":12839,"name":"int256","nodeType":"ElementaryTypeName","src":"22983:6:67","typeDescriptions":{}}},"id":12842,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"22983:24:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"22937:70:67","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"22898:109:67","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":12845,"nodeType":"ExpressionStatement","src":"22898:109:67"}]},"id":12847,"nodeType":"IfStatement","src":"21799:1219:67","trueBody":{"id":12833,"nodeType":"Block","src":"21839:1039:67","statements":[{"condition":{"id":12786,"name":"_isLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12767,"src":"22038:7:67","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":12796,"nodeType":"IfStatement","src":"22034:181:67","trueBody":{"id":12795,"nodeType":"Block","src":"22047:168:67","statements":[{"expression":{"id":12793,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":12787,"name":"_shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12755,"src":"22065:14:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":12790,"name":"_closeSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12765,"src":"22129:16:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12791,"name":"_openSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12763,"src":"22167:15:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12788,"name":"_shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12755,"src":"22082:14:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12789,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"22097:10:67","memberName":"mulDivDown","nodeType":"MemberAccess","referencedDeclaration":11541,"src":"22082:25:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":12792,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"22082:118:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"22065:135:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12794,"nodeType":"ExpressionStatement","src":"22065:135:67"}]}},{"expression":{"id":12803,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":12797,"name":"_shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12757,"src":"22268:19:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":12800,"name":"_closeSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12765,"src":"22338:16:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12801,"name":"_openSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12763,"src":"22372:15:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12798,"name":"_shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12757,"src":"22290:19:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12799,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"22310:10:67","memberName":"mulDivDown","nodeType":"MemberAccess","referencedDeclaration":11541,"src":"22290:30:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":12802,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"22290:111:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"22268:133:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12804,"nodeType":"ExpressionStatement","src":"22268:133:67"},{"expression":{"id":12815,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":12805,"name":"shareAdjustmentDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12781,"src":"22470:20:67","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":12814,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":12808,"name":"_shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12757,"src":"22516:19:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":12807,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"22509:6:67","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":12806,"name":"int256","nodeType":"ElementaryTypeName","src":"22509:6:67","typeDescriptions":{}}},"id":12809,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"22509:27:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"arguments":[{"id":12812,"name":"_shareCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12759,"src":"22562:16:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":12811,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"22555:6:67","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":12810,"name":"int256","nodeType":"ElementaryTypeName","src":"22555:6:67","typeDescriptions":{}}},"id":12813,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"22555:24:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"22509:70:67","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"22470:109:67","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":12816,"nodeType":"ExpressionStatement","src":"22470:109:67"},{"expression":{"id":12823,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":12817,"name":"_shareCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12759,"src":"22593:16:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":12820,"name":"_closeSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12765,"src":"22657:16:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12821,"name":"_openSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12763,"src":"22691:15:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12818,"name":"_shareCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12759,"src":"22612:16:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12819,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"22629:10:67","memberName":"mulDivDown","nodeType":"MemberAccess","referencedDeclaration":11541,"src":"22612:27:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":12822,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"22612:108:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"22593:127:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12824,"nodeType":"ExpressionStatement","src":"22593:127:67"},{"expression":{"id":12831,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":12825,"name":"_totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12761,"src":"22734:19:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":12828,"name":"_closeSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12765,"src":"22804:16:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12829,"name":"_openSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12763,"src":"22838:15:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":12826,"name":"_totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12761,"src":"22756:19:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12827,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"22776:10:67","memberName":"mulDivDown","nodeType":"MemberAccess","referencedDeclaration":11541,"src":"22756:30:67","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":12830,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"22756:111:67","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"22734:133:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":12832,"nodeType":"ExpressionStatement","src":"22734:133:67"}]}},{"expression":{"components":[{"id":12848,"name":"_shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12755,"src":"23049:14:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12849,"name":"_shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12757,"src":"23077:19:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12850,"name":"_shareCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12759,"src":"23110:16:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":12851,"name":"shareAdjustmentDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12781,"src":"23140:20:67","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":12852,"name":"_totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12761,"src":"23174:19:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":12853,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"23035:168:67","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$_t_int256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256,int256,uint256)"}},"functionReturnParameters":12779,"id":12854,"nodeType":"Return","src":"23028:175:67"}]},"documentation":{"id":12753,"nodeType":"StructuredDocumentation","src":"18650:1838:67","text":"@dev If negative interest accrued over the term, we scale the share\n      proceeds by the negative interest amount. Shorts should be\n      responsible for negative interest, but negative interest can exceed\n      the margin that shorts provide. This leaves us with no choice but\n      to attribute the negative interest to longs. Along with scaling the\n      share proceeds, we also scale the fee amounts.\n      In order for our AMM invariant to be maintained, the effective\n      share reserves need to be adjusted by the same amount as the share\n      reserves delta calculated with YieldSpace including fees. We reduce\n      the share reserves by `min(c_1 / c_0, 1) * shareReservesDelta` and\n      the share adjustment by the `shareAdjustmentDelta`. We can solve\n      these equations simultaneously to find the share adjustment delta\n      as:\n      shareAdjustmentDelta = min(c_1 / c_0, 1) * sharePayment -\n                             shareReservesDelta\n @param _shareProceeds The proceeds in shares from the trade.\n @param _shareReservesDelta The change in share reserves from the trade.\n @param _shareCurveDelta The curve portion of the change in share reserves.\n @param _totalGovernanceFee The total governance fee.\n @param _openSharePrice The share price at the beginning of the term.\n @param _closeSharePrice The share price at the end of the term.\n @param _isLong A flag indicating whether or not the trade is a long.\n @return The adjusted share proceeds.\n @return The adjusted share reserves delta.\n @return The adjusted share close proceeds.\n @return The share adjustment delta.\n @return The adjusted total governance fee."},"implemented":true,"kind":"function","modifiers":[],"name":"calculateNegativeInterestOnClose","nameLocation":"20502:32:67","parameters":{"id":12768,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12755,"mutability":"mutable","name":"_shareProceeds","nameLocation":"20552:14:67","nodeType":"VariableDeclaration","scope":12856,"src":"20544:22:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12754,"name":"uint256","nodeType":"ElementaryTypeName","src":"20544:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12757,"mutability":"mutable","name":"_shareReservesDelta","nameLocation":"20584:19:67","nodeType":"VariableDeclaration","scope":12856,"src":"20576:27:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12756,"name":"uint256","nodeType":"ElementaryTypeName","src":"20576:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12759,"mutability":"mutable","name":"_shareCurveDelta","nameLocation":"20621:16:67","nodeType":"VariableDeclaration","scope":12856,"src":"20613:24:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12758,"name":"uint256","nodeType":"ElementaryTypeName","src":"20613:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12761,"mutability":"mutable","name":"_totalGovernanceFee","nameLocation":"20655:19:67","nodeType":"VariableDeclaration","scope":12856,"src":"20647:27:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12760,"name":"uint256","nodeType":"ElementaryTypeName","src":"20647:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12763,"mutability":"mutable","name":"_openSharePrice","nameLocation":"20692:15:67","nodeType":"VariableDeclaration","scope":12856,"src":"20684:23:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12762,"name":"uint256","nodeType":"ElementaryTypeName","src":"20684:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12765,"mutability":"mutable","name":"_closeSharePrice","nameLocation":"20725:16:67","nodeType":"VariableDeclaration","scope":12856,"src":"20717:24:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12764,"name":"uint256","nodeType":"ElementaryTypeName","src":"20717:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12767,"mutability":"mutable","name":"_isLong","nameLocation":"20756:7:67","nodeType":"VariableDeclaration","scope":12856,"src":"20751:12:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":12766,"name":"bool","nodeType":"ElementaryTypeName","src":"20751:4:67","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"20534:235:67"},"returnParameters":{"id":12779,"nodeType":"ParameterList","parameters":[{"constant":false,"id":12770,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":12856,"src":"20793:7:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12769,"name":"uint256","nodeType":"ElementaryTypeName","src":"20793:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12772,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":12856,"src":"20802:7:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12771,"name":"uint256","nodeType":"ElementaryTypeName","src":"20802:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12774,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":12856,"src":"20811:7:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12773,"name":"uint256","nodeType":"ElementaryTypeName","src":"20811:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":12776,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":12856,"src":"20820:6:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":12775,"name":"int256","nodeType":"ElementaryTypeName","src":"20820:6:67","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":12778,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":12856,"src":"20828:7:67","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":12777,"name":"uint256","nodeType":"ElementaryTypeName","src":"20828:7:67","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"20792:44:67"},"scope":12857,"stateMutability":"pure","virtual":false,"visibility":"internal"}],"abstract":false,"baseContracts":[],"canonicalName":"HyperdriveMath","contractDependencies":[],"contractKind":"library","documentation":{"id":12305,"nodeType":"StructuredDocumentation","src":"285:314:67","text":"@author DELV\n @title Hyperdrive\n @notice Math for the Hyperdrive pricing model.\n @custom:disclaimer The language used in this code is for coding convenience\n                    only, and is not intended to, and does not, have any\n                    particular legal or regulatory significance."},"fullyImplemented":true,"linearizedBaseContracts":[12857],"name":"HyperdriveMath","nameLocation":"607:14:67","scope":12858,"usedErrors":[]}],"license":"Apache-2.0"},"id":67} as const;

export const HyperdriveShort = 
{"abi":[{"type":"event","name":"AddLiquidity","inputs":[{"name":"provider","type":"address","indexed":true,"internalType":"address"},{"name":"lpAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"baseAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"sharePrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"lpSharePrice","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"Approval","inputs":[{"name":"owner","type":"address","indexed":true,"internalType":"address"},{"name":"spender","type":"address","indexed":true,"internalType":"address"},{"name":"value","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"ApprovalForAll","inputs":[{"name":"account","type":"address","indexed":true,"internalType":"address"},{"name":"operator","type":"address","indexed":true,"internalType":"address"},{"name":"approved","type":"bool","indexed":false,"internalType":"bool"}],"anonymous":false},{"type":"event","name":"CloseLong","inputs":[{"name":"trader","type":"address","indexed":true,"internalType":"address"},{"name":"assetId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"maturityTime","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"baseAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"sharePrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"bondAmount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"CloseShort","inputs":[{"name":"trader","type":"address","indexed":true,"internalType":"address"},{"name":"assetId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"maturityTime","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"baseAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"sharePrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"bondAmount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"CreateCheckpoint","inputs":[{"name":"checkpointTime","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"sharePrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"maturedShorts","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"maturedLongs","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"lpSharePrice","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"Initialize","inputs":[{"name":"provider","type":"address","indexed":true,"internalType":"address"},{"name":"lpAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"baseAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"sharePrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"apr","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"OpenLong","inputs":[{"name":"trader","type":"address","indexed":true,"internalType":"address"},{"name":"assetId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"maturityTime","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"baseAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"sharePrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"bondAmount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"OpenShort","inputs":[{"name":"trader","type":"address","indexed":true,"internalType":"address"},{"name":"assetId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"maturityTime","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"baseAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"sharePrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"bondAmount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"RedeemWithdrawalShares","inputs":[{"name":"provider","type":"address","indexed":true,"internalType":"address"},{"name":"withdrawalShareAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"baseAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"sharePrice","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"RemoveLiquidity","inputs":[{"name":"provider","type":"address","indexed":true,"internalType":"address"},{"name":"lpAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"baseAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"sharePrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"withdrawalShareAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"lpSharePrice","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"TransferSingle","inputs":[{"name":"operator","type":"address","indexed":true,"internalType":"address"},{"name":"from","type":"address","indexed":true,"internalType":"address"},{"name":"to","type":"address","indexed":true,"internalType":"address"},{"name":"id","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"value","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"error","name":"InvalidCheckpointDuration","inputs":[]},{"type":"error","name":"InvalidFeeAmounts","inputs":[]},{"type":"error","name":"InvalidMinimumShareReserves","inputs":[]},{"type":"error","name":"InvalidPositionDuration","inputs":[]}],"bytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"deployedBytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"methodIdentifiers":{},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.19+commit.7dd6d404\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"InvalidCheckpointDuration\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidFeeAmounts\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidMinimumShareReserves\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidPositionDuration\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"provider\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"lpAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"baseAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sharePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"lpSharePrice\",\"type\":\"uint256\"}],\"name\":\"AddLiquidity\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"Approval\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"operator\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"approved\",\"type\":\"bool\"}],\"name\":\"ApprovalForAll\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"assetId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"maturityTime\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"baseAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sharePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"bondAmount\",\"type\":\"uint256\"}],\"name\":\"CloseLong\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"assetId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"maturityTime\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"baseAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sharePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"bondAmount\",\"type\":\"uint256\"}],\"name\":\"CloseShort\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"checkpointTime\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sharePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"maturedShorts\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"maturedLongs\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"lpSharePrice\",\"type\":\"uint256\"}],\"name\":\"CreateCheckpoint\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"provider\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"lpAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"baseAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sharePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"apr\",\"type\":\"uint256\"}],\"name\":\"Initialize\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"assetId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"maturityTime\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"baseAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sharePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"bondAmount\",\"type\":\"uint256\"}],\"name\":\"OpenLong\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"assetId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"maturityTime\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"baseAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sharePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"bondAmount\",\"type\":\"uint256\"}],\"name\":\"OpenShort\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"provider\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"withdrawalShareAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"baseAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sharePrice\",\"type\":\"uint256\"}],\"name\":\"RedeemWithdrawalShares\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"provider\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"lpAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"baseAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sharePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"withdrawalShareAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"lpSharePrice\",\"type\":\"uint256\"}],\"name\":\"RemoveLiquidity\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"operator\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"to\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"TransferSingle\",\"type\":\"event\"}],\"devdoc\":{\"author\":\"DELV\",\"custom:disclaimer\":\"The language used in this code is for coding convenience                    only, and is not intended to, and does not, have any                    particular legal or regulatory significance.\",\"kind\":\"dev\",\"methods\":{},\"title\":\"HyperdriveShort\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"notice\":\"Implements the short accounting for Hyperdrive.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/src/internal/HyperdriveShort.sol\":\"HyperdriveShort\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":aave-v3-core/=lib/aave-v3-core/\",\":create3-factory/=lib/yield-daddy/lib/create3-factory/\",\":ds-test/=lib/forge-std/lib/ds-test/src/\",\":forge-std/=lib/forge-std/src/\",\":solmate/=lib/solmate/src/\",\":yield-daddy/=lib/yield-daddy/\"]},\"sources\":{\"contracts/src/interfaces/IERC20.sol\":{\"keccak256\":\"0xfb57fe2ee4d8d1c6a8e2aa3b007da6f0e53d65388245b0b7d876234077ee95b4\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://e4303c41b9752b51c6eaa9b16aa11e5bffb34fc80c5c8761302539cd5922ae36\",\"dweb:/ipfs/QmZjVYBikfgPDX47hmbGJpG6kvm3Gyt6nKkFbZH6r8U4cL\"]},\"contracts/src/interfaces/IHyperdrive.sol\":{\"keccak256\":\"0x3b4f94e5480e7074e05b0d338d583569aef147f45365eb57daeb99f19fe817c3\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://2cc18b204ec94f80cd6b4876ea3c39dfb143fc4feff52e2a8d00ea72e6811644\",\"dweb:/ipfs/QmZHmZRvmJr8FxExBzKHSHYNZqcEgcgDcs4Z6gF1wPvBvj\"]},\"contracts/src/interfaces/IHyperdriveCore.sol\":{\"keccak256\":\"0x84c73d8c4b67da41635f57fce2f30b8f04fc826ff6fb54c605de23d376f3403d\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://e6d636dff5c24916ae35a76695d741de2f14ee46876ea67c5393618bb7f9cf85\",\"dweb:/ipfs/QmUwxh8JeAqSFA8Z2qabVx3YWRSz7PJ9V2TQgnfctAgqPF\"]},\"contracts/src/interfaces/IHyperdriveRead.sol\":{\"keccak256\":\"0x1c61ba57b783bfa408a4e208e80c1c117850d4d6c9f0e280263d3fcf57a8b2fd\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://5b920d5f0f37014035b6cbba16d898e52654122a0c004a3f75050af93b799496\",\"dweb:/ipfs/QmaneaTDVXbw5HfevR2vFwXWw95EKWcBq8yMgMyWJPHKVW\"]},\"contracts/src/interfaces/IMultiToken.sol\":{\"keccak256\":\"0xcf3a4002275ea64e381f0a4aded3683e12960396ef79ba9dd153e2d1e395baad\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://c9990491f7a5151fd696a45e6e5b0282a1dedf58521861dfb8c64db8cb60f5b6\",\"dweb:/ipfs/QmaywmqqQhz7DeYqZdoeykagr5h4ZhQRv6GasHqvdWqzSy\"]},\"contracts/src/interfaces/IMultiTokenCore.sol\":{\"keccak256\":\"0xdb7f24663cff7307a468ef5e4c6f3e4d01ec0475157b3bbb3405890c3e9ab87d\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://7f631a9a395fba5b07c3d9308fccac18d5aa59d890efe23442ed2a4da9871ae8\",\"dweb:/ipfs/QmV2a4wiAPfWzSST3faYt58i2tqEyoqCLAJV8aNCdJyxVE\"]},\"contracts/src/interfaces/IMultiTokenMetadata.sol\":{\"keccak256\":\"0x476240ea4328bae9ab820b6f0f40afb11c74ee52d26bdbef69e4ece28dc10bdb\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://843f73cb21eaec4e26952fd6cbde5e6815e3a28c438df9e026e249200d25076f\",\"dweb:/ipfs/QmXzE7gsRKMaRGQfTDodA1RXxNxUuBj8RT7grTYjZUdbe6\"]},\"contracts/src/interfaces/IMultiTokenRead.sol\":{\"keccak256\":\"0x9b92d81f2f038fcd4bb5d069ab2b754efc153234c451d4ee4caa6d74aaca16b4\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://8686fddc99564c6b6524ea68a6b7ff081a9988fc795fc13197bb59ddaa2041c6\",\"dweb:/ipfs/QmarJYJAgoH6Z4H1BmdPoRgqLubRu5S6NDXBNV2fDApPuW\"]},\"contracts/src/internal/HyperdriveBase.sol\":{\"keccak256\":\"0x0fbf9c2be16bbfeb3d560e433b21d040292579ba1d21375979008e5eac35d5f6\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://8672d924b7a357df66bb17e37fb485b53e445cab1b7a7171b5c38a93999e4a72\",\"dweb:/ipfs/QmQj3xB5fj7V2mY5rn3JSRxmb4LywPEVSyw95J95HVtVUL\"]},\"contracts/src/internal/HyperdriveLP.sol\":{\"keccak256\":\"0xf7dfba22a0063e2db44e0ccbd3cf5a6aa76f1459893e395656518f34f34bdcf5\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://9b0f953d3fd2613d271c0734693ee809730c6d870f05eed2a083543ff1cec6ad\",\"dweb:/ipfs/QmaRU2waAMaDDKLWXogUVYjivmfPaYXnB6qNoHHZBvwoqH\"]},\"contracts/src/internal/HyperdriveMultiToken.sol\":{\"keccak256\":\"0x61b9f8eb5795fda17a5c35264f53879a7ef022e02b865b015bdb9f5811db6ba5\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://9498f4bfd969d78634da2b0a89b10f88ac467f52d565d9b62561dcc569ad00cd\",\"dweb:/ipfs/QmZdGwc5ezJf2qv8yheoTVF3UTfWJnh6FtAAq7wufhPZ5R\"]},\"contracts/src/internal/HyperdriveShort.sol\":{\"keccak256\":\"0x79c7fa4a4ec7c5b6acb9f51021b5b0b09027c852d67377d43cf87449f5f8c3ec\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://67d19c10eec1c0a5b8b0478e0388c99642a4c035cc48a179c4f95903e34b1d41\",\"dweb:/ipfs/QmbF9Yq4d9CQF5dWkNTYxqo8ZpWGfbofBLedKP6QX38sGN\"]},\"contracts/src/internal/HyperdriveStorage.sol\":{\"keccak256\":\"0xe150223822098026c7ce734cd68848e45b47b92b024d34bc25886e9c6af6ec67\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://6590e590f4af53d55e81e06ba8d53346cfce71ce1fa8d1833141f273d74c8a8f\",\"dweb:/ipfs/QmTM582joUpK7KBDWvwWEBi4XT3Qt9x8VLkhwPYj8Qu93o\"]},\"contracts/src/libraries/AssetId.sol\":{\"keccak256\":\"0xcf8493b00dd39c50754a63f66dc612f3cd466cbac8c7ea5ed0c5ea68aa99267a\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://1a1986d6bc80e465dde116a70d3a30027b3e75969117a9b3517c6866c2e5e73a\",\"dweb:/ipfs/QmSASHifHWyKBycGAm1pUs9dw26Uf6A61V9nkEQnFj9mya\"]},\"contracts/src/libraries/FixedPointMath.sol\":{\"keccak256\":\"0x3d2d86890e7287a59bc7171a030f98006a60271812a233027d2e42d8f31ef46c\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://ecf29c3dedf328bd29caef4ce1eba85576d4c4b8d6f77fc255e37c24e8d44e1d\",\"dweb:/ipfs/QmVgmtYXzMkvR1GYsfqnJ1cH2ojmggoKmVuxKQZ9Rw78T1\"]},\"contracts/src/libraries/HyperdriveMath.sol\":{\"keccak256\":\"0xd87293bc10dfe09707a042bf05091baf40ba344bdca141bd99b62256a7611817\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://8f6eadd454c6671c26bd22095c31a3bbaea7083df9aa6548dbaba32a4907e336\",\"dweb:/ipfs/QmY1jMW9DuAk9CSfVS6MsG5onqjZHKzdBrv2TcHvj9yKj4\"]},\"contracts/src/libraries/LPMath.sol\":{\"keccak256\":\"0x077931150bcba5b99dedcd9038f3fbeef9c9230046dc4649c457d75d4be32a5c\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://2a48e4046f7ae8acb965d0f8d79767f4f4c70c1a6a8d3cf635482587412d33fd\",\"dweb:/ipfs/QmcY8FbffppqTMBiMwniXG9R8i8eQoVJuLqqTXgpuiXyUr\"]},\"contracts/src/libraries/SafeCast.sol\":{\"keccak256\":\"0x86d3065b06e2fb93733eb6f19ea0bb6343a51bc6b993c36702dc3e6d50a6d01d\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://f0d303e0a2ed0c99ea194759d9fce5317b6e3a4c40464fc34c09f6f770d402db\",\"dweb:/ipfs/QmVSTsk4YXLe8pcUbQEpihWq9XTcn47L46j8khkvfzyiWB\"]},\"contracts/src/libraries/YieldSpaceMath.sol\":{\"keccak256\":\"0x2f9511684820be7510155adfe3c2c2ef7e2583472946bae37f379bac801fc263\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://7e9a84e4168448e3320a6682c8ba248c8b51757df173b86507e9aba4b6167247\",\"dweb:/ipfs/QmSonetYBP22Fnc8HrcaTxAA1Zg2PCR5ptPiEp22sA77Ka\"]},\"lib/solmate/src/utils/ReentrancyGuard.sol\":{\"keccak256\":\"0xb282dd78aa7375d6b200b9a5d8dd214b2e5df1004f8217a4b4c2b07f0c5bfd01\",\"license\":\"AGPL-3.0-only\",\"urls\":[\"bzz-raw://5fca62eb8d3dbd2b3b7e4bb051f6da16f4d0ff9cee61c39cebb80f031f6a8800\",\"dweb:/ipfs/QmbrsXPK91iBFwHKwJs2HLRud2KzMoBDRiWYMUtyV5H57j\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.19+commit.7dd6d404"},"language":"Solidity","output":{"abi":[{"inputs":[],"type":"error","name":"InvalidCheckpointDuration"},{"inputs":[],"type":"error","name":"InvalidFeeAmounts"},{"inputs":[],"type":"error","name":"InvalidMinimumShareReserves"},{"inputs":[],"type":"error","name":"InvalidPositionDuration"},{"inputs":[{"internalType":"address","name":"provider","type":"address","indexed":true},{"internalType":"uint256","name":"lpAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"baseAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"sharePrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"lpSharePrice","type":"uint256","indexed":false}],"type":"event","name":"AddLiquidity","anonymous":false},{"inputs":[{"internalType":"address","name":"owner","type":"address","indexed":true},{"internalType":"address","name":"spender","type":"address","indexed":true},{"internalType":"uint256","name":"value","type":"uint256","indexed":false}],"type":"event","name":"Approval","anonymous":false},{"inputs":[{"internalType":"address","name":"account","type":"address","indexed":true},{"internalType":"address","name":"operator","type":"address","indexed":true},{"internalType":"bool","name":"approved","type":"bool","indexed":false}],"type":"event","name":"ApprovalForAll","anonymous":false},{"inputs":[{"internalType":"address","name":"trader","type":"address","indexed":true},{"internalType":"uint256","name":"assetId","type":"uint256","indexed":true},{"internalType":"uint256","name":"maturityTime","type":"uint256","indexed":false},{"internalType":"uint256","name":"baseAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"sharePrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"bondAmount","type":"uint256","indexed":false}],"type":"event","name":"CloseLong","anonymous":false},{"inputs":[{"internalType":"address","name":"trader","type":"address","indexed":true},{"internalType":"uint256","name":"assetId","type":"uint256","indexed":true},{"internalType":"uint256","name":"maturityTime","type":"uint256","indexed":false},{"internalType":"uint256","name":"baseAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"sharePrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"bondAmount","type":"uint256","indexed":false}],"type":"event","name":"CloseShort","anonymous":false},{"inputs":[{"internalType":"uint256","name":"checkpointTime","type":"uint256","indexed":true},{"internalType":"uint256","name":"sharePrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"maturedShorts","type":"uint256","indexed":false},{"internalType":"uint256","name":"maturedLongs","type":"uint256","indexed":false},{"internalType":"uint256","name":"lpSharePrice","type":"uint256","indexed":false}],"type":"event","name":"CreateCheckpoint","anonymous":false},{"inputs":[{"internalType":"address","name":"provider","type":"address","indexed":true},{"internalType":"uint256","name":"lpAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"baseAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"sharePrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"apr","type":"uint256","indexed":false}],"type":"event","name":"Initialize","anonymous":false},{"inputs":[{"internalType":"address","name":"trader","type":"address","indexed":true},{"internalType":"uint256","name":"assetId","type":"uint256","indexed":true},{"internalType":"uint256","name":"maturityTime","type":"uint256","indexed":false},{"internalType":"uint256","name":"baseAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"sharePrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"bondAmount","type":"uint256","indexed":false}],"type":"event","name":"OpenLong","anonymous":false},{"inputs":[{"internalType":"address","name":"trader","type":"address","indexed":true},{"internalType":"uint256","name":"assetId","type":"uint256","indexed":true},{"internalType":"uint256","name":"maturityTime","type":"uint256","indexed":false},{"internalType":"uint256","name":"baseAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"sharePrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"bondAmount","type":"uint256","indexed":false}],"type":"event","name":"OpenShort","anonymous":false},{"inputs":[{"internalType":"address","name":"provider","type":"address","indexed":true},{"internalType":"uint256","name":"withdrawalShareAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"baseAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"sharePrice","type":"uint256","indexed":false}],"type":"event","name":"RedeemWithdrawalShares","anonymous":false},{"inputs":[{"internalType":"address","name":"provider","type":"address","indexed":true},{"internalType":"uint256","name":"lpAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"baseAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"sharePrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"withdrawalShareAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"lpSharePrice","type":"uint256","indexed":false}],"type":"event","name":"RemoveLiquidity","anonymous":false},{"inputs":[{"internalType":"address","name":"operator","type":"address","indexed":true},{"internalType":"address","name":"from","type":"address","indexed":true},{"internalType":"address","name":"to","type":"address","indexed":true},{"internalType":"uint256","name":"id","type":"uint256","indexed":false},{"internalType":"uint256","name":"value","type":"uint256","indexed":false}],"type":"event","name":"TransferSingle","anonymous":false}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["aave-v3-core/=lib/aave-v3-core/","create3-factory/=lib/yield-daddy/lib/create3-factory/","ds-test/=lib/forge-std/lib/ds-test/src/","forge-std/=lib/forge-std/src/","solmate/=lib/solmate/src/","yield-daddy/=lib/yield-daddy/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"contracts/src/internal/HyperdriveShort.sol":"HyperdriveShort"},"libraries":{}},"sources":{"contracts/src/interfaces/IERC20.sol":{"keccak256":"0xfb57fe2ee4d8d1c6a8e2aa3b007da6f0e53d65388245b0b7d876234077ee95b4","urls":["bzz-raw://e4303c41b9752b51c6eaa9b16aa11e5bffb34fc80c5c8761302539cd5922ae36","dweb:/ipfs/QmZjVYBikfgPDX47hmbGJpG6kvm3Gyt6nKkFbZH6r8U4cL"],"license":"Apache-2.0"},"contracts/src/interfaces/IHyperdrive.sol":{"keccak256":"0x3b4f94e5480e7074e05b0d338d583569aef147f45365eb57daeb99f19fe817c3","urls":["bzz-raw://2cc18b204ec94f80cd6b4876ea3c39dfb143fc4feff52e2a8d00ea72e6811644","dweb:/ipfs/QmZHmZRvmJr8FxExBzKHSHYNZqcEgcgDcs4Z6gF1wPvBvj"],"license":"Apache-2.0"},"contracts/src/interfaces/IHyperdriveCore.sol":{"keccak256":"0x84c73d8c4b67da41635f57fce2f30b8f04fc826ff6fb54c605de23d376f3403d","urls":["bzz-raw://e6d636dff5c24916ae35a76695d741de2f14ee46876ea67c5393618bb7f9cf85","dweb:/ipfs/QmUwxh8JeAqSFA8Z2qabVx3YWRSz7PJ9V2TQgnfctAgqPF"],"license":"Apache-2.0"},"contracts/src/interfaces/IHyperdriveRead.sol":{"keccak256":"0x1c61ba57b783bfa408a4e208e80c1c117850d4d6c9f0e280263d3fcf57a8b2fd","urls":["bzz-raw://5b920d5f0f37014035b6cbba16d898e52654122a0c004a3f75050af93b799496","dweb:/ipfs/QmaneaTDVXbw5HfevR2vFwXWw95EKWcBq8yMgMyWJPHKVW"],"license":"Apache-2.0"},"contracts/src/interfaces/IMultiToken.sol":{"keccak256":"0xcf3a4002275ea64e381f0a4aded3683e12960396ef79ba9dd153e2d1e395baad","urls":["bzz-raw://c9990491f7a5151fd696a45e6e5b0282a1dedf58521861dfb8c64db8cb60f5b6","dweb:/ipfs/QmaywmqqQhz7DeYqZdoeykagr5h4ZhQRv6GasHqvdWqzSy"],"license":"Apache-2.0"},"contracts/src/interfaces/IMultiTokenCore.sol":{"keccak256":"0xdb7f24663cff7307a468ef5e4c6f3e4d01ec0475157b3bbb3405890c3e9ab87d","urls":["bzz-raw://7f631a9a395fba5b07c3d9308fccac18d5aa59d890efe23442ed2a4da9871ae8","dweb:/ipfs/QmV2a4wiAPfWzSST3faYt58i2tqEyoqCLAJV8aNCdJyxVE"],"license":"Apache-2.0"},"contracts/src/interfaces/IMultiTokenMetadata.sol":{"keccak256":"0x476240ea4328bae9ab820b6f0f40afb11c74ee52d26bdbef69e4ece28dc10bdb","urls":["bzz-raw://843f73cb21eaec4e26952fd6cbde5e6815e3a28c438df9e026e249200d25076f","dweb:/ipfs/QmXzE7gsRKMaRGQfTDodA1RXxNxUuBj8RT7grTYjZUdbe6"],"license":"Apache-2.0"},"contracts/src/interfaces/IMultiTokenRead.sol":{"keccak256":"0x9b92d81f2f038fcd4bb5d069ab2b754efc153234c451d4ee4caa6d74aaca16b4","urls":["bzz-raw://8686fddc99564c6b6524ea68a6b7ff081a9988fc795fc13197bb59ddaa2041c6","dweb:/ipfs/QmarJYJAgoH6Z4H1BmdPoRgqLubRu5S6NDXBNV2fDApPuW"],"license":"Apache-2.0"},"contracts/src/internal/HyperdriveBase.sol":{"keccak256":"0x0fbf9c2be16bbfeb3d560e433b21d040292579ba1d21375979008e5eac35d5f6","urls":["bzz-raw://8672d924b7a357df66bb17e37fb485b53e445cab1b7a7171b5c38a93999e4a72","dweb:/ipfs/QmQj3xB5fj7V2mY5rn3JSRxmb4LywPEVSyw95J95HVtVUL"],"license":"Apache-2.0"},"contracts/src/internal/HyperdriveLP.sol":{"keccak256":"0xf7dfba22a0063e2db44e0ccbd3cf5a6aa76f1459893e395656518f34f34bdcf5","urls":["bzz-raw://9b0f953d3fd2613d271c0734693ee809730c6d870f05eed2a083543ff1cec6ad","dweb:/ipfs/QmaRU2waAMaDDKLWXogUVYjivmfPaYXnB6qNoHHZBvwoqH"],"license":"Apache-2.0"},"contracts/src/internal/HyperdriveMultiToken.sol":{"keccak256":"0x61b9f8eb5795fda17a5c35264f53879a7ef022e02b865b015bdb9f5811db6ba5","urls":["bzz-raw://9498f4bfd969d78634da2b0a89b10f88ac467f52d565d9b62561dcc569ad00cd","dweb:/ipfs/QmZdGwc5ezJf2qv8yheoTVF3UTfWJnh6FtAAq7wufhPZ5R"],"license":"Apache-2.0"},"contracts/src/internal/HyperdriveShort.sol":{"keccak256":"0x79c7fa4a4ec7c5b6acb9f51021b5b0b09027c852d67377d43cf87449f5f8c3ec","urls":["bzz-raw://67d19c10eec1c0a5b8b0478e0388c99642a4c035cc48a179c4f95903e34b1d41","dweb:/ipfs/QmbF9Yq4d9CQF5dWkNTYxqo8ZpWGfbofBLedKP6QX38sGN"],"license":"Apache-2.0"},"contracts/src/internal/HyperdriveStorage.sol":{"keccak256":"0xe150223822098026c7ce734cd68848e45b47b92b024d34bc25886e9c6af6ec67","urls":["bzz-raw://6590e590f4af53d55e81e06ba8d53346cfce71ce1fa8d1833141f273d74c8a8f","dweb:/ipfs/QmTM582joUpK7KBDWvwWEBi4XT3Qt9x8VLkhwPYj8Qu93o"],"license":"Apache-2.0"},"contracts/src/libraries/AssetId.sol":{"keccak256":"0xcf8493b00dd39c50754a63f66dc612f3cd466cbac8c7ea5ed0c5ea68aa99267a","urls":["bzz-raw://1a1986d6bc80e465dde116a70d3a30027b3e75969117a9b3517c6866c2e5e73a","dweb:/ipfs/QmSASHifHWyKBycGAm1pUs9dw26Uf6A61V9nkEQnFj9mya"],"license":"Apache-2.0"},"contracts/src/libraries/FixedPointMath.sol":{"keccak256":"0x3d2d86890e7287a59bc7171a030f98006a60271812a233027d2e42d8f31ef46c","urls":["bzz-raw://ecf29c3dedf328bd29caef4ce1eba85576d4c4b8d6f77fc255e37c24e8d44e1d","dweb:/ipfs/QmVgmtYXzMkvR1GYsfqnJ1cH2ojmggoKmVuxKQZ9Rw78T1"],"license":"Apache-2.0"},"contracts/src/libraries/HyperdriveMath.sol":{"keccak256":"0xd87293bc10dfe09707a042bf05091baf40ba344bdca141bd99b62256a7611817","urls":["bzz-raw://8f6eadd454c6671c26bd22095c31a3bbaea7083df9aa6548dbaba32a4907e336","dweb:/ipfs/QmY1jMW9DuAk9CSfVS6MsG5onqjZHKzdBrv2TcHvj9yKj4"],"license":"Apache-2.0"},"contracts/src/libraries/LPMath.sol":{"keccak256":"0x077931150bcba5b99dedcd9038f3fbeef9c9230046dc4649c457d75d4be32a5c","urls":["bzz-raw://2a48e4046f7ae8acb965d0f8d79767f4f4c70c1a6a8d3cf635482587412d33fd","dweb:/ipfs/QmcY8FbffppqTMBiMwniXG9R8i8eQoVJuLqqTXgpuiXyUr"],"license":"Apache-2.0"},"contracts/src/libraries/SafeCast.sol":{"keccak256":"0x86d3065b06e2fb93733eb6f19ea0bb6343a51bc6b993c36702dc3e6d50a6d01d","urls":["bzz-raw://f0d303e0a2ed0c99ea194759d9fce5317b6e3a4c40464fc34c09f6f770d402db","dweb:/ipfs/QmVSTsk4YXLe8pcUbQEpihWq9XTcn47L46j8khkvfzyiWB"],"license":"Apache-2.0"},"contracts/src/libraries/YieldSpaceMath.sol":{"keccak256":"0x2f9511684820be7510155adfe3c2c2ef7e2583472946bae37f379bac801fc263","urls":["bzz-raw://7e9a84e4168448e3320a6682c8ba248c8b51757df173b86507e9aba4b6167247","dweb:/ipfs/QmSonetYBP22Fnc8HrcaTxAA1Zg2PCR5ptPiEp22sA77Ka"],"license":"Apache-2.0"},"lib/solmate/src/utils/ReentrancyGuard.sol":{"keccak256":"0xb282dd78aa7375d6b200b9a5d8dd214b2e5df1004f8217a4b4c2b07f0c5bfd01","urls":["bzz-raw://5fca62eb8d3dbd2b3b7e4bb051f6da16f4d0ff9cee61c39cebb80f031f6a8800","dweb:/ipfs/QmbrsXPK91iBFwHKwJs2HLRud2KzMoBDRiWYMUtyV5H57j"],"license":"AGPL-3.0-only"}},"version":1},"ast":{"absolutePath":"contracts/src/internal/HyperdriveShort.sol","id":10920,"exportedSymbols":{"AssetId":[11509],"FixedPointMath":[12293],"HyperdriveLP":[8841],"HyperdriveMath":[12857],"HyperdriveShort":[10919],"IHyperdrive":[5658],"ONE":[11516],"SafeCast":[15541]},"nodeType":"SourceUnit","src":"39:25594:63","nodes":[{"id":10099,"nodeType":"PragmaDirective","src":"39:23:63","nodes":[],"literals":["solidity","0.8",".19"]},{"id":10101,"nodeType":"ImportDirective","src":"64:60:63","nodes":[],"absolutePath":"contracts/src/interfaces/IHyperdrive.sol","file":"../interfaces/IHyperdrive.sol","nameLocation":"-1:-1:-1","scope":10920,"sourceUnit":5659,"symbolAliases":[{"foreign":{"id":10100,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"73:11:63","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":10103,"nodeType":"ImportDirective","src":"125:51:63","nodes":[],"absolutePath":"contracts/src/libraries/AssetId.sol","file":"../libraries/AssetId.sol","nameLocation":"-1:-1:-1","scope":10920,"sourceUnit":11510,"symbolAliases":[{"foreign":{"id":10102,"name":"AssetId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11509,"src":"134:7:63","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":10106,"nodeType":"ImportDirective","src":"177:70:63","nodes":[],"absolutePath":"contracts/src/libraries/FixedPointMath.sol","file":"../libraries/FixedPointMath.sol","nameLocation":"-1:-1:-1","scope":10920,"sourceUnit":12294,"symbolAliases":[{"foreign":{"id":10104,"name":"FixedPointMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12293,"src":"186:14:63","typeDescriptions":{}},"nameLocation":"-1:-1:-1"},{"foreign":{"id":10105,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"202:3:63","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":10108,"nodeType":"ImportDirective","src":"248:65:63","nodes":[],"absolutePath":"contracts/src/libraries/HyperdriveMath.sol","file":"../libraries/HyperdriveMath.sol","nameLocation":"-1:-1:-1","scope":10920,"sourceUnit":12858,"symbolAliases":[{"foreign":{"id":10107,"name":"HyperdriveMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12857,"src":"257:14:63","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":10110,"nodeType":"ImportDirective","src":"314:53:63","nodes":[],"absolutePath":"contracts/src/libraries/SafeCast.sol","file":"../libraries/SafeCast.sol","nameLocation":"-1:-1:-1","scope":10920,"sourceUnit":15542,"symbolAliases":[{"foreign":{"id":10109,"name":"SafeCast","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":15541,"src":"323:8:63","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":10112,"nodeType":"ImportDirective","src":"368:50:63","nodes":[],"absolutePath":"contracts/src/internal/HyperdriveLP.sol","file":"./HyperdriveLP.sol","nameLocation":"-1:-1:-1","scope":10920,"sourceUnit":8842,"symbolAliases":[{"foreign":{"id":10111,"name":"HyperdriveLP","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8841,"src":"377:12:63","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":10919,"nodeType":"ContractDefinition","src":"748:24884:63","nodes":[{"id":10118,"nodeType":"UsingForDirective","src":"804:33:63","nodes":[],"global":false,"libraryName":{"id":10116,"name":"FixedPointMath","nameLocations":["810:14:63"],"nodeType":"IdentifierPath","referencedDeclaration":12293,"src":"810:14:63"},"typeName":{"id":10117,"name":"uint256","nodeType":"ElementaryTypeName","src":"829:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},{"id":10121,"nodeType":"UsingForDirective","src":"842:32:63","nodes":[],"global":false,"libraryName":{"id":10119,"name":"FixedPointMath","nameLocations":["848:14:63"],"nodeType":"IdentifierPath","referencedDeclaration":12293,"src":"848:14:63"},"typeName":{"id":10120,"name":"int256","nodeType":"ElementaryTypeName","src":"867:6:63","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}},{"id":10124,"nodeType":"UsingForDirective","src":"879:27:63","nodes":[],"global":false,"libraryName":{"id":10122,"name":"SafeCast","nameLocations":["885:8:63"],"nodeType":"IdentifierPath","referencedDeclaration":15541,"src":"885:8:63"},"typeName":{"id":10123,"name":"uint256","nodeType":"ElementaryTypeName","src":"898:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},{"id":10127,"nodeType":"UsingForDirective","src":"911:26:63","nodes":[],"global":false,"libraryName":{"id":10125,"name":"SafeCast","nameLocations":["917:8:63"],"nodeType":"IdentifierPath","referencedDeclaration":15541,"src":"917:8:63"},"typeName":{"id":10126,"name":"int256","nodeType":"ElementaryTypeName","src":"930:6:63","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}},{"id":10285,"nodeType":"FunctionDefinition","src":"1529:3711:63","nodes":[],"body":{"id":10284,"nodeType":"Block","src":"1753:3487:63","nodes":[],"statements":[{"expression":{"arguments":[],"expression":{"argumentTypes":[],"id":10148,"name":"_checkMessageValue","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6709,"src":"1830:18:63","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$__$","typeString":"function () view"}},"id":10149,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1830:20:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10150,"nodeType":"ExpressionStatement","src":"1830:20:63"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10153,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10151,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10130,"src":"1864:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":10152,"name":"_minimumTransactionAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10972,"src":"1878:25:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1864:39:63","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":10160,"nodeType":"IfStatement","src":"1860:115:63","trueBody":{"id":10159,"nodeType":"Block","src":"1905:70:63","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":10154,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"1926:11:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IHyperdrive_$5658_$","typeString":"type(contract IHyperdrive)"}},"id":10156,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1938:24:63","memberName":"MinimumTransactionAmount","nodeType":"MemberAccess","referencedDeclaration":5522,"src":"1926:36:63","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":10157,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1926:38:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10158,"nodeType":"RevertStatement","src":"1919:45:63"}]}},{"assignments":[10162],"declarations":[{"constant":false,"id":10162,"mutability":"mutable","name":"sharePrice","nameLocation":"2309:10:63","nodeType":"VariableDeclaration","scope":10284,"src":"2301:18:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10161,"name":"uint256","nodeType":"ElementaryTypeName","src":"2301:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10165,"initialValue":{"arguments":[],"expression":{"argumentTypes":[],"id":10163,"name":"_pricePerShare","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6741,"src":"2322:14:63","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":10164,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2322:16:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2301:37:63"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10168,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10166,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10162,"src":"2352:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":10167,"name":"_minSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10134,"src":"2365:14:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2352:27:63","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":10175,"nodeType":"IfStatement","src":"2348:96:63","trueBody":{"id":10174,"nodeType":"Block","src":"2381:63:63","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":10169,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"2402:11:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IHyperdrive_$5658_$","typeString":"type(contract IHyperdrive)"}},"id":10171,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2414:17:63","memberName":"MinimumSharePrice","nodeType":"MemberAccess","referencedDeclaration":5520,"src":"2402:29:63","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":10172,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2402:31:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10173,"nodeType":"RevertStatement","src":"2395:38:63"}]}},{"assignments":[10177],"declarations":[{"constant":false,"id":10177,"mutability":"mutable","name":"latestCheckpoint","nameLocation":"2461:16:63","nodeType":"VariableDeclaration","scope":10284,"src":"2453:24:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10176,"name":"uint256","nodeType":"ElementaryTypeName","src":"2453:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10180,"initialValue":{"arguments":[],"expression":{"argumentTypes":[],"id":10178,"name":"_latestCheckpoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6852,"src":"2480:17:63","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":10179,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2480:19:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2453:46:63"},{"assignments":[10182],"declarations":[{"constant":false,"id":10182,"mutability":"mutable","name":"openSharePrice","nameLocation":"2517:14:63","nodeType":"VariableDeclaration","scope":10284,"src":"2509:22:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10181,"name":"uint256","nodeType":"ElementaryTypeName","src":"2509:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10187,"initialValue":{"arguments":[{"id":10184,"name":"latestCheckpoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10177,"src":"2551:16:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10185,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10162,"src":"2569:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10183,"name":"_applyCheckpoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6764,"src":"2534:16:63","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) returns (uint256)"}},"id":10186,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2534:46:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2509:71:63"},{"assignments":[10189],"declarations":[{"constant":false,"id":10189,"mutability":"mutable","name":"maturityTime","nameLocation":"2827:12:63","nodeType":"VariableDeclaration","scope":10284,"src":"2819:20:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10188,"name":"uint256","nodeType":"ElementaryTypeName","src":"2819:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10193,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10192,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10190,"name":"latestCheckpoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10177,"src":"2842:16:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":10191,"name":"_positionDuration","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10948,"src":"2861:17:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2842:36:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2819:59:63"},{"assignments":[10195],"declarations":[{"constant":false,"id":10195,"mutability":"mutable","name":"shareReservesDelta","nameLocation":"2896:18:63","nodeType":"VariableDeclaration","scope":10284,"src":"2888:26:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10194,"name":"uint256","nodeType":"ElementaryTypeName","src":"2888:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10196,"nodeType":"VariableDeclarationStatement","src":"2888:26:63"},{"assignments":[10198],"declarations":[{"constant":false,"id":10198,"mutability":"mutable","name":"baseDeposit","nameLocation":"2932:11:63","nodeType":"VariableDeclaration","scope":10284,"src":"2924:19:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10197,"name":"uint256","nodeType":"ElementaryTypeName","src":"2924:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10199,"nodeType":"VariableDeclarationStatement","src":"2924:19:63"},{"id":10218,"nodeType":"Block","src":"2953:348:63","statements":[{"assignments":[10201],"declarations":[{"constant":false,"id":10201,"mutability":"mutable","name":"totalGovernanceFee","nameLocation":"2975:18:63","nodeType":"VariableDeclaration","scope":10218,"src":"2967:26:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10200,"name":"uint256","nodeType":"ElementaryTypeName","src":"2967:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10202,"nodeType":"VariableDeclarationStatement","src":"2967:26:63"},{"expression":{"id":10212,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"components":[{"id":10203,"name":"baseDeposit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10198,"src":"3025:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10204,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10195,"src":"3054:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10205,"name":"totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10201,"src":"3090:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":10206,"isConstant":false,"isInlineArray":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"TupleExpression","src":"3007:115:63","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256)"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":10208,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10130,"src":"3145:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10209,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10162,"src":"3158:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10210,"name":"openSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10182,"src":"3170:14:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10207,"name":"_calculateOpenShort","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10742,"src":"3125:19:63","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"function (uint256,uint256,uint256) view returns (uint256,uint256,uint256)"}},"id":10211,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3125:60:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256)"}},"src":"3007:178:63","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10213,"nodeType":"ExpressionStatement","src":"3007:178:63"},{"expression":{"id":10216,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":10214,"name":"_governanceFeesAccrued","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10995,"src":"3246:22:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"id":10215,"name":"totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10201,"src":"3272:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3246:44:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10217,"nodeType":"ExpressionStatement","src":"3246:44:63"}]},{"assignments":[10220],"declarations":[{"constant":false,"id":10220,"mutability":"mutable","name":"traderDeposit","nameLocation":"3931:13:63","nodeType":"VariableDeclaration","scope":10284,"src":"3923:21:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10219,"name":"uint256","nodeType":"ElementaryTypeName","src":"3923:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10226,"initialValue":{"arguments":[{"id":10222,"name":"baseDeposit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10198,"src":"3985:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10223,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10162,"src":"4010:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10224,"name":"_options","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10137,"src":"4034:8:63","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}],"id":10221,"name":"_convertToOptionFromBase","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7579,"src":"3947:24:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_struct$_Options_$5483_calldata_ptr_$returns$_t_uint256_$","typeString":"function (uint256,uint256,struct IHyperdrive.Options calldata) pure returns (uint256)"}},"id":10225,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3947:105:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"3923:129:63"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10229,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10227,"name":"_maxDeposit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10132,"src":"4066:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":10228,"name":"traderDeposit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10220,"src":"4080:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4066:27:63","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":10236,"nodeType":"IfStatement","src":"4062:90:63","trueBody":{"id":10235,"nodeType":"Block","src":"4095:57:63","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":10230,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"4116:11:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IHyperdrive_$5658_$","typeString":"type(contract IHyperdrive)"}},"id":10232,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4128:11:63","memberName":"OutputLimit","nodeType":"MemberAccess","referencedDeclaration":5532,"src":"4116:23:63","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":10233,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4116:25:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10234,"nodeType":"RevertStatement","src":"4109:32:63"}]}},{"expression":{"arguments":[{"id":10238,"name":"traderDeposit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10220,"src":"4170:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10239,"name":"_options","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10137,"src":"4185:8:63","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}],"id":10237,"name":"_deposit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6722,"src":"4161:8:63","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$_t_struct$_Options_$5483_calldata_ptr_$returns$_t_uint256_$_t_uint256_$","typeString":"function (uint256,struct IHyperdrive.Options calldata) returns (uint256,uint256)"}},"id":10240,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4161:33:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256)"}},"id":10241,"nodeType":"ExpressionStatement","src":"4161:33:63"},{"expression":{"arguments":[{"id":10243,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10130,"src":"4451:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10244,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10195,"src":"4476:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10245,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10162,"src":"4508:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10246,"name":"maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10189,"src":"4532:12:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10242,"name":"_applyOpenShort","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10564,"src":"4422:15:63","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$__$","typeString":"function (uint256,uint256,uint256,uint256)"}},"id":10247,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4422:132:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10248,"nodeType":"ExpressionStatement","src":"4422:132:63"},{"assignments":[10250],"declarations":[{"constant":false,"id":10250,"mutability":"mutable","name":"assetId","nameLocation":"4722:7:63","nodeType":"VariableDeclaration","scope":10284,"src":"4714:15:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10249,"name":"uint256","nodeType":"ElementaryTypeName","src":"4714:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10258,"initialValue":{"arguments":[{"expression":{"expression":{"id":10253,"name":"AssetId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11509,"src":"4767:7:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_AssetId_$11509_$","typeString":"type(library AssetId)"}},"id":10254,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4775:13:63","memberName":"AssetIdPrefix","nodeType":"MemberAccess","referencedDeclaration":11215,"src":"4767:21:63","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_AssetIdPrefix_$11215_$","typeString":"type(enum AssetId.AssetIdPrefix)"}},"id":10255,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"4789:5:63","memberName":"Short","nodeType":"MemberAccess","referencedDeclaration":11213,"src":"4767:27:63","typeDescriptions":{"typeIdentifier":"t_enum$_AssetIdPrefix_$11215","typeString":"enum AssetId.AssetIdPrefix"}},{"id":10256,"name":"maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10189,"src":"4808:12:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_enum$_AssetIdPrefix_$11215","typeString":"enum AssetId.AssetIdPrefix"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10251,"name":"AssetId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11509,"src":"4732:7:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_AssetId_$11509_$","typeString":"type(library AssetId)"}},"id":10252,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4740:13:63","memberName":"encodeAssetId","nodeType":"MemberAccess","referencedDeclaration":11238,"src":"4732:21:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_enum$_AssetIdPrefix_$11215_$_t_uint256_$returns$_t_uint256_$","typeString":"function (enum AssetId.AssetIdPrefix,uint256) pure returns (uint256)"}},"id":10257,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4732:98:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4714:116:63"},{"assignments":[10260],"declarations":[{"constant":false,"id":10260,"mutability":"mutable","name":"bondAmount","nameLocation":"4848:10:63","nodeType":"VariableDeclaration","scope":10284,"src":"4840:18:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10259,"name":"uint256","nodeType":"ElementaryTypeName","src":"4840:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10262,"initialValue":{"id":10261,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10130,"src":"4861:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4840:32:63"},{"expression":{"arguments":[{"id":10264,"name":"assetId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10250,"src":"4919:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":10265,"name":"_options","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10137,"src":"4928:8:63","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}},"id":10266,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4937:11:63","memberName":"destination","nodeType":"MemberAccess","referencedDeclaration":5476,"src":"4928:20:63","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":10267,"name":"bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10260,"src":"4950:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10263,"name":"_mint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9904,"src":"4913:5:63","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$_t_address_$_t_uint256_$returns$__$","typeString":"function (uint256,address,uint256)"}},"id":10268,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4913:48:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10269,"nodeType":"ExpressionStatement","src":"4913:48:63"},{"eventCall":{"arguments":[{"expression":{"id":10271,"name":"_options","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10137,"src":"5036:8:63","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}},"id":10272,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5045:11:63","memberName":"destination","nodeType":"MemberAccess","referencedDeclaration":5476,"src":"5036:20:63","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":10273,"name":"assetId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10250,"src":"5070:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10274,"name":"maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10189,"src":"5091:12:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10275,"name":"baseDeposit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10198,"src":"5117:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10276,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10162,"src":"5142:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10277,"name":"bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10260,"src":"5166:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10270,"name":"OpenShort","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6637,"src":"5013:9:63","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$__$","typeString":"function (address,uint256,uint256,uint256,uint256,uint256)"}},"id":10278,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5013:173:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10279,"nodeType":"EmitStatement","src":"5008:178:63"},{"expression":{"components":[{"id":10280,"name":"maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10189,"src":"5205:12:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10281,"name":"traderDeposit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10220,"src":"5219:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":10282,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"5204:29:63","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256)"}},"functionReturnParameters":10147,"id":10283,"nodeType":"Return","src":"5197:36:63"}]},"documentation":{"id":10128,"nodeType":"StructuredDocumentation","src":"943:581:63","text":"@dev Opens a short position.\n @param _bondAmount The amount of bonds to short.\n @param _maxDeposit The most the user expects to deposit for this trade.\n @param _minSharePrice The minium share price at which to open the long.\n        This allows traders to protect themselves from opening a long in\n        a checkpoint where negative interest has accrued.\n @param _options The options that configure how the trade is settled.\n @return The maturity time of the short.\n @return The amount the user deposited for this trade."},"implemented":true,"kind":"function","modifiers":[{"id":10140,"kind":"modifierInvocation","modifierName":{"id":10139,"name":"nonReentrant","nameLocations":["1701:12:63"],"nodeType":"IdentifierPath","referencedDeclaration":65498,"src":"1701:12:63"},"nodeType":"ModifierInvocation","src":"1701:12:63"},{"id":10142,"kind":"modifierInvocation","modifierName":{"id":10141,"name":"isNotPaused","nameLocations":["1714:11:63"],"nodeType":"IdentifierPath","referencedDeclaration":6754,"src":"1714:11:63"},"nodeType":"ModifierInvocation","src":"1714:11:63"}],"name":"_openShort","nameLocation":"1538:10:63","parameters":{"id":10138,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10130,"mutability":"mutable","name":"_bondAmount","nameLocation":"1566:11:63","nodeType":"VariableDeclaration","scope":10285,"src":"1558:19:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10129,"name":"uint256","nodeType":"ElementaryTypeName","src":"1558:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10132,"mutability":"mutable","name":"_maxDeposit","nameLocation":"1595:11:63","nodeType":"VariableDeclaration","scope":10285,"src":"1587:19:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10131,"name":"uint256","nodeType":"ElementaryTypeName","src":"1587:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10134,"mutability":"mutable","name":"_minSharePrice","nameLocation":"1624:14:63","nodeType":"VariableDeclaration","scope":10285,"src":"1616:22:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10133,"name":"uint256","nodeType":"ElementaryTypeName","src":"1616:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10137,"mutability":"mutable","name":"_options","nameLocation":"1677:8:63","nodeType":"VariableDeclaration","scope":10285,"src":"1648:37:63","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options"},"typeName":{"id":10136,"nodeType":"UserDefinedTypeName","pathNode":{"id":10135,"name":"IHyperdrive.Options","nameLocations":["1648:11:63","1660:7:63"],"nodeType":"IdentifierPath","referencedDeclaration":5483,"src":"1648:19:63"},"referencedDeclaration":5483,"src":"1648:19:63","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_storage_ptr","typeString":"struct IHyperdrive.Options"}},"visibility":"internal"}],"src":"1548:143:63"},"returnParameters":{"id":10147,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10144,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":10285,"src":"1735:7:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10143,"name":"uint256","nodeType":"ElementaryTypeName","src":"1735:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10146,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":10285,"src":"1744:7:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10145,"name":"uint256","nodeType":"ElementaryTypeName","src":"1744:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1734:18:63"},"scope":10919,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":10450,"nodeType":"FunctionDefinition","src":"5648:3861:63","nodes":[],"body":{"id":10449,"nodeType":"Block","src":"5850:3659:63","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10304,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10302,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10290,"src":"5864:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":10303,"name":"_minimumTransactionAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10972,"src":"5878:25:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5864:39:63","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":10311,"nodeType":"IfStatement","src":"5860:115:63","trueBody":{"id":10310,"nodeType":"Block","src":"5905:70:63","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":10305,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"5926:11:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IHyperdrive_$5658_$","typeString":"type(contract IHyperdrive)"}},"id":10307,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5938:24:63","memberName":"MinimumTransactionAmount","nodeType":"MemberAccess","referencedDeclaration":5522,"src":"5926:36:63","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":10308,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5926:38:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10309,"nodeType":"RevertStatement","src":"5919:45:63"}]}},{"assignments":[10313],"declarations":[{"constant":false,"id":10313,"mutability":"mutable","name":"sharePrice","nameLocation":"6026:10:63","nodeType":"VariableDeclaration","scope":10449,"src":"6018:18:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10312,"name":"uint256","nodeType":"ElementaryTypeName","src":"6018:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10316,"initialValue":{"arguments":[],"expression":{"argumentTypes":[],"id":10314,"name":"_pricePerShare","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6741,"src":"6039:14:63","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":10315,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6039:16:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"6018:37:63"},{"expression":{"arguments":[{"id":10318,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10288,"src":"6082:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10319,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10313,"src":"6097:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10317,"name":"_applyCheckpoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6764,"src":"6065:16:63","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) returns (uint256)"}},"id":10320,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6065:43:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10321,"nodeType":"ExpressionStatement","src":"6065:43:63"},{"expression":{"arguments":[{"arguments":[{"expression":{"expression":{"id":10325,"name":"AssetId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11509,"src":"6210:7:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_AssetId_$11509_$","typeString":"type(library AssetId)"}},"id":10326,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6218:13:63","memberName":"AssetIdPrefix","nodeType":"MemberAccess","referencedDeclaration":11215,"src":"6210:21:63","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_AssetIdPrefix_$11215_$","typeString":"type(enum AssetId.AssetIdPrefix)"}},"id":10327,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"6232:5:63","memberName":"Short","nodeType":"MemberAccess","referencedDeclaration":11213,"src":"6210:27:63","typeDescriptions":{"typeIdentifier":"t_enum$_AssetIdPrefix_$11215","typeString":"enum AssetId.AssetIdPrefix"}},{"id":10328,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10288,"src":"6239:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_enum$_AssetIdPrefix_$11215","typeString":"enum AssetId.AssetIdPrefix"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10323,"name":"AssetId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11509,"src":"6188:7:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_AssetId_$11509_$","typeString":"type(library AssetId)"}},"id":10324,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6196:13:63","memberName":"encodeAssetId","nodeType":"MemberAccess","referencedDeclaration":11238,"src":"6188:21:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_enum$_AssetIdPrefix_$11215_$_t_uint256_$returns$_t_uint256_$","typeString":"function (enum AssetId.AssetIdPrefix,uint256) pure returns (uint256)"}},"id":10329,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6188:65:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":10330,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"6267:3:63","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":10331,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6271:6:63","memberName":"sender","nodeType":"MemberAccess","src":"6267:10:63","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":10332,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10290,"src":"6291:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10322,"name":"_burn","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9941,"src":"6169:5:63","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$_t_address_$_t_uint256_$returns$__$","typeString":"function (uint256,address,uint256)"}},"id":10333,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6169:143:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10334,"nodeType":"ExpressionStatement","src":"6169:143:63"},{"assignments":[10336,10338,10340,10342,10344],"declarations":[{"constant":false,"id":10336,"mutability":"mutable","name":"bondReservesDelta","nameLocation":"6608:17:63","nodeType":"VariableDeclaration","scope":10449,"src":"6600:25:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10335,"name":"uint256","nodeType":"ElementaryTypeName","src":"6600:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10338,"mutability":"mutable","name":"shareProceeds","nameLocation":"6647:13:63","nodeType":"VariableDeclaration","scope":10449,"src":"6639:21:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10337,"name":"uint256","nodeType":"ElementaryTypeName","src":"6639:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10340,"mutability":"mutable","name":"shareReservesDelta","nameLocation":"6682:18:63","nodeType":"VariableDeclaration","scope":10449,"src":"6674:26:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10339,"name":"uint256","nodeType":"ElementaryTypeName","src":"6674:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10342,"mutability":"mutable","name":"shareAdjustmentDelta","nameLocation":"6721:20:63","nodeType":"VariableDeclaration","scope":10449,"src":"6714:27:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":10341,"name":"int256","nodeType":"ElementaryTypeName","src":"6714:6:63","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":10344,"mutability":"mutable","name":"totalGovernanceFee","nameLocation":"6763:18:63","nodeType":"VariableDeclaration","scope":10449,"src":"6755:26:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10343,"name":"uint256","nodeType":"ElementaryTypeName","src":"6755:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10350,"initialValue":{"arguments":[{"id":10346,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10290,"src":"6815:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10347,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10313,"src":"6828:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10348,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10288,"src":"6840:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10345,"name":"_calculateCloseShort","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10918,"src":"6794:20:63","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$_t_uint256_$_t_uint256_$_t_int256_$_t_uint256_$","typeString":"function (uint256,uint256,uint256) view returns (uint256,uint256,uint256,int256,uint256)"}},"id":10349,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6794:60:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$_t_int256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256,int256,uint256)"}},"nodeType":"VariableDeclarationStatement","src":"6586:268:63"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10354,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":10351,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"7060:5:63","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":10352,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"7066:9:63","memberName":"timestamp","nodeType":"MemberAccess","src":"7060:15:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":10353,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10288,"src":"7078:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7060:31:63","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":10395,"nodeType":"Block","src":"7975:283:63","statements":[{"expression":{"id":10393,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":10388,"name":"shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10338,"src":"8187:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":10390,"name":"shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10338,"src":"8221:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10391,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10313,"src":"8236:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10389,"name":"_applyZombieClose","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7231,"src":"8203:17:63","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) returns (uint256)"}},"id":10392,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8203:44:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"8187:60:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10394,"nodeType":"ExpressionStatement","src":"8187:60:63"}]},"id":10396,"nodeType":"IfStatement","src":"7056:1202:63","trueBody":{"id":10387,"nodeType":"Block","src":"7093:876:63","statements":[{"expression":{"id":10357,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":10355,"name":"_governanceFeesAccrued","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10995,"src":"7153:22:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"id":10356,"name":"totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10344,"src":"7179:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7153:44:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10358,"nodeType":"ExpressionStatement","src":"7153:44:63"},{"expression":{"arguments":[{"id":10360,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10290,"src":"7324:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10361,"name":"bondReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10336,"src":"7353:17:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10362,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10340,"src":"7388:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10363,"name":"shareAdjustmentDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10342,"src":"7424:20:63","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":10364,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10288,"src":"7462:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_int256","typeString":"int256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10359,"name":"_applyCloseShort","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10638,"src":"7290:16:63","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$_t_uint256_$_t_uint256_$_t_int256_$_t_uint256_$returns$__$","typeString":"function (uint256,uint256,uint256,int256,uint256)"}},"id":10365,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7290:199:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10366,"nodeType":"ExpressionStatement","src":"7290:199:63"},{"assignments":[10368],"declarations":[{"constant":false,"id":10368,"mutability":"mutable","name":"nonNettedLongs","nameLocation":"7664:14:63","nodeType":"VariableDeclaration","scope":10387,"src":"7657:21:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":10367,"name":"int256","nodeType":"ElementaryTypeName","src":"7657:6:63","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"id":10372,"initialValue":{"arguments":[{"id":10370,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10288,"src":"7697:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10369,"name":"_nonNettedLongs","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6902,"src":"7681:15:63","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$returns$_t_int256_$","typeString":"function (uint256) view returns (int256)"}},"id":10371,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7681:30:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"VariableDeclarationStatement","src":"7657:54:63"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":10379,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10374,"name":"nonNettedLongs","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10368,"src":"7762:14:63","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"arguments":[{"id":10377,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10290,"src":"7786:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10376,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"7779:6:63","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":10375,"name":"int256","nodeType":"ElementaryTypeName","src":"7779:6:63","typeDescriptions":{}}},"id":10378,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7779:19:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"7762:36:63","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":10380,"name":"nonNettedLongs","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10368,"src":"7816:14:63","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"},{"typeIdentifier":"t_int256","typeString":"int256"}],"id":10373,"name":"_updateLongExposure","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7141,"src":"7725:19:63","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_int256_$_t_int256_$returns$__$","typeString":"function (int256,int256)"}},"id":10381,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7725:119:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10382,"nodeType":"ExpressionStatement","src":"7725:119:63"},{"expression":{"arguments":[{"id":10384,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10313,"src":"7947:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10383,"name":"_distributeExcessIdle","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8764,"src":"7925:21:63","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$returns$__$","typeString":"function (uint256)"}},"id":10385,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7925:33:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10386,"nodeType":"ExpressionStatement","src":"7925:33:63"}]}},{"assignments":[10398],"declarations":[{"constant":false,"id":10398,"mutability":"mutable","name":"proceeds","nameLocation":"8475:8:63","nodeType":"VariableDeclaration","scope":10449,"src":"8467:16:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10397,"name":"uint256","nodeType":"ElementaryTypeName","src":"8467:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10404,"initialValue":{"arguments":[{"id":10400,"name":"shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10338,"src":"8496:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10401,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10313,"src":"8511:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10402,"name":"_options","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10295,"src":"8523:8:63","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}],"id":10399,"name":"_withdraw","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6735,"src":"8486:9:63","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$_t_uint256_$_t_struct$_Options_$5483_calldata_ptr_$returns$_t_uint256_$","typeString":"function (uint256,uint256,struct IHyperdrive.Options calldata) returns (uint256)"}},"id":10403,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8486:46:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"8467:65:63"},{"assignments":[10406],"declarations":[{"constant":false,"id":10406,"mutability":"mutable","name":"baseProceeds","nameLocation":"8828:12:63","nodeType":"VariableDeclaration","scope":10449,"src":"8820:20:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10405,"name":"uint256","nodeType":"ElementaryTypeName","src":"8820:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10412,"initialValue":{"arguments":[{"id":10408,"name":"proceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10398,"src":"8881:8:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10409,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10313,"src":"8903:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10410,"name":"_options","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10295,"src":"8927:8:63","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}],"id":10407,"name":"_convertToBaseFromOption","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7553,"src":"8843:24:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_struct$_Options_$5483_calldata_ptr_$returns$_t_uint256_$","typeString":"function (uint256,uint256,struct IHyperdrive.Options calldata) pure returns (uint256)"}},"id":10411,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8843:102:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"8820:125:63"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10415,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10413,"name":"baseProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10406,"src":"8959:12:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":10414,"name":"_minOutput","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10292,"src":"8974:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"8959:25:63","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":10422,"nodeType":"IfStatement","src":"8955:88:63","trueBody":{"id":10421,"nodeType":"Block","src":"8986:57:63","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":10416,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"9007:11:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IHyperdrive_$5658_$","typeString":"type(contract IHyperdrive)"}},"id":10418,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"9019:11:63","memberName":"OutputLimit","nodeType":"MemberAccess","referencedDeclaration":5532,"src":"9007:23:63","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":10419,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9007:25:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10420,"nodeType":"RevertStatement","src":"9000:32:63"}]}},{"assignments":[10424],"declarations":[{"constant":false,"id":10424,"mutability":"mutable","name":"bondAmount","nameLocation":"9097:10:63","nodeType":"VariableDeclaration","scope":10449,"src":"9089:18:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10423,"name":"uint256","nodeType":"ElementaryTypeName","src":"9089:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10426,"initialValue":{"id":10425,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10290,"src":"9110:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"9089:32:63"},{"assignments":[10428],"declarations":[{"constant":false,"id":10428,"mutability":"mutable","name":"maturityTime","nameLocation":"9170:12:63","nodeType":"VariableDeclaration","scope":10449,"src":"9162:20:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10427,"name":"uint256","nodeType":"ElementaryTypeName","src":"9162:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10430,"initialValue":{"id":10429,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10288,"src":"9185:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"9162:36:63"},{"eventCall":{"arguments":[{"expression":{"id":10432,"name":"_options","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10295,"src":"9268:8:63","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}},"id":10433,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"9277:11:63","memberName":"destination","nodeType":"MemberAccess","referencedDeclaration":5476,"src":"9268:20:63","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"arguments":[{"expression":{"expression":{"id":10436,"name":"AssetId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11509,"src":"9324:7:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_AssetId_$11509_$","typeString":"type(library AssetId)"}},"id":10437,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"9332:13:63","memberName":"AssetIdPrefix","nodeType":"MemberAccess","referencedDeclaration":11215,"src":"9324:21:63","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_AssetIdPrefix_$11215_$","typeString":"type(enum AssetId.AssetIdPrefix)"}},"id":10438,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"9346:5:63","memberName":"Short","nodeType":"MemberAccess","referencedDeclaration":11213,"src":"9324:27:63","typeDescriptions":{"typeIdentifier":"t_enum$_AssetIdPrefix_$11215","typeString":"enum AssetId.AssetIdPrefix"}},{"id":10439,"name":"maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10428,"src":"9353:12:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_enum$_AssetIdPrefix_$11215","typeString":"enum AssetId.AssetIdPrefix"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10434,"name":"AssetId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11509,"src":"9302:7:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_AssetId_$11509_$","typeString":"type(library AssetId)"}},"id":10435,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"9310:13:63","memberName":"encodeAssetId","nodeType":"MemberAccess","referencedDeclaration":11238,"src":"9302:21:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_enum$_AssetIdPrefix_$11215_$_t_uint256_$returns$_t_uint256_$","typeString":"function (enum AssetId.AssetIdPrefix,uint256) pure returns (uint256)"}},"id":10440,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9302:64:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10441,"name":"maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10428,"src":"9380:12:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10442,"name":"baseProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10406,"src":"9406:12:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10443,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10313,"src":"9432:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10444,"name":"bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10424,"src":"9456:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10431,"name":"CloseShort","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6665,"src":"9244:10:63","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$__$","typeString":"function (address,uint256,uint256,uint256,uint256,uint256)"}},"id":10445,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9244:232:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10446,"nodeType":"EmitStatement","src":"9239:237:63"},{"expression":{"id":10447,"name":"proceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10398,"src":"9494:8:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":10301,"id":10448,"nodeType":"Return","src":"9487:15:63"}]},"documentation":{"id":10286,"nodeType":"StructuredDocumentation","src":"5246:397:63","text":"@notice Closes a short position with a specified maturity time.\n @param _maturityTime The maturity time of the short.\n @param _bondAmount The amount of shorts to close.\n @param _minOutput The minimum output of this trade.\n @param _options The options that configure how the trade is settled.\n @return The amount of base tokens produced by closing this short."},"implemented":true,"kind":"function","modifiers":[{"id":10298,"kind":"modifierInvocation","modifierName":{"id":10297,"name":"nonReentrant","nameLocations":["5819:12:63"],"nodeType":"IdentifierPath","referencedDeclaration":65498,"src":"5819:12:63"},"nodeType":"ModifierInvocation","src":"5819:12:63"}],"name":"_closeShort","nameLocation":"5657:11:63","parameters":{"id":10296,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10288,"mutability":"mutable","name":"_maturityTime","nameLocation":"5686:13:63","nodeType":"VariableDeclaration","scope":10450,"src":"5678:21:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10287,"name":"uint256","nodeType":"ElementaryTypeName","src":"5678:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10290,"mutability":"mutable","name":"_bondAmount","nameLocation":"5717:11:63","nodeType":"VariableDeclaration","scope":10450,"src":"5709:19:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10289,"name":"uint256","nodeType":"ElementaryTypeName","src":"5709:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10292,"mutability":"mutable","name":"_minOutput","nameLocation":"5746:10:63","nodeType":"VariableDeclaration","scope":10450,"src":"5738:18:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10291,"name":"uint256","nodeType":"ElementaryTypeName","src":"5738:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10295,"mutability":"mutable","name":"_options","nameLocation":"5795:8:63","nodeType":"VariableDeclaration","scope":10450,"src":"5766:37:63","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options"},"typeName":{"id":10294,"nodeType":"UserDefinedTypeName","pathNode":{"id":10293,"name":"IHyperdrive.Options","nameLocations":["5766:11:63","5778:7:63"],"nodeType":"IdentifierPath","referencedDeclaration":5483,"src":"5766:19:63"},"referencedDeclaration":5483,"src":"5766:19:63","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_storage_ptr","typeString":"struct IHyperdrive.Options"}},"visibility":"internal"}],"src":"5668:141:63"},"returnParameters":{"id":10301,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10300,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":10450,"src":"5841:7:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10299,"name":"uint256","nodeType":"ElementaryTypeName","src":"5841:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"5840:9:63"},"scope":10919,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":10564,"nodeType":"FunctionDefinition","src":"9888:2819:63","nodes":[],"body":{"id":10563,"nodeType":"Block","src":"10054:2653:63","nodes":[],"statements":[{"expression":{"id":10481,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":10462,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"10127:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10464,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"10140:24:63","memberName":"shortAverageMaturityTime","nodeType":"MemberAccess","referencedDeclaration":5315,"src":"10127:37:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"arguments":[{"expression":{"id":10471,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"10288:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10472,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"10301:17:63","memberName":"shortsOutstanding","nodeType":"MemberAccess","referencedDeclaration":5309,"src":"10288:30:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10475,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10473,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10459,"src":"10336:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"31653138","id":10474,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"10352:4:63","typeDescriptions":{"typeIdentifier":"t_rational_1000000000000000000_by_1","typeString":"int_const 1000000000000000000"},"value":"1e18"},"src":"10336:20:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10476,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10453,"src":"10407:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"hexValue":"74727565","id":10477,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"10436:4:63","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint128","typeString":"uint128"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_bool","typeString":"bool"}],"expression":{"arguments":[{"expression":{"id":10467,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"10188:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10468,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"10201:24:63","memberName":"shortAverageMaturityTime","nodeType":"MemberAccess","referencedDeclaration":5315,"src":"10188:37:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint128","typeString":"uint128"}],"id":10466,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"10167:7:63","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":10465,"name":"uint256","nodeType":"ElementaryTypeName","src":"10167:7:63","typeDescriptions":{}}},"id":10469,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10167:68:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10470,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"10249:21:63","memberName":"updateWeightedAverage","nodeType":"MemberAccess","referencedDeclaration":12220,"src":"10167:103:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,bool) pure returns (uint256)"}},"id":10478,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10167:287:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10479,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"10468:9:63","memberName":"toUint128","nodeType":"MemberAccess","referencedDeclaration":15500,"src":"10167:310:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint128_$attached_to$_t_uint256_$","typeString":"function (uint256) pure returns (uint128)"}},"id":10480,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10167:312:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"10127:352:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":10482,"nodeType":"ExpressionStatement","src":"10127:352:63"},{"assignments":[10484],"declarations":[{"constant":false,"id":10484,"mutability":"mutable","name":"shareReserves_","nameLocation":"10781:14:63","nodeType":"VariableDeclaration","scope":10563,"src":"10773:22:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"},"typeName":{"id":10483,"name":"uint128","nodeType":"ElementaryTypeName","src":"10773:7:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"visibility":"internal"}],"id":10491,"initialValue":{"commonType":{"typeIdentifier":"t_uint128","typeString":"uint128"},"id":10490,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":10485,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"10798:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10486,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"10811:13:63","memberName":"shareReserves","nodeType":"MemberAccess","referencedDeclaration":5294,"src":"10798:26:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":10487,"name":"_shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10455,"src":"10839:19:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10488,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"10859:9:63","memberName":"toUint128","nodeType":"MemberAccess","referencedDeclaration":15500,"src":"10839:29:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint128_$attached_to$_t_uint256_$","typeString":"function (uint256) pure returns (uint128)"}},"id":10489,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10839:31:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"10798:72:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"VariableDeclarationStatement","src":"10773:97:63"},{"expression":{"id":10496,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":10492,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"10880:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10494,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"10893:13:63","memberName":"shareReserves","nodeType":"MemberAccess","referencedDeclaration":5294,"src":"10880:26:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":10495,"name":"shareReserves_","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10484,"src":"10909:14:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"10880:43:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":10497,"nodeType":"ExpressionStatement","src":"10880:43:63"},{"expression":{"id":10504,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":10498,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"10933:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10500,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"10946:12:63","memberName":"bondReserves","nodeType":"MemberAccess","referencedDeclaration":5297,"src":"10933:25:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":10501,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10453,"src":"10962:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10502,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"10974:9:63","memberName":"toUint128","nodeType":"MemberAccess","referencedDeclaration":15500,"src":"10962:21:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint128_$attached_to$_t_uint256_$","typeString":"function (uint256) pure returns (uint128)"}},"id":10503,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10962:23:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"10933:52:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":10505,"nodeType":"ExpressionStatement","src":"10933:52:63"},{"expression":{"id":10512,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":10506,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"10995:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10508,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"11008:17:63","memberName":"shortsOutstanding","nodeType":"MemberAccess","referencedDeclaration":5309,"src":"10995:30:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":10509,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10453,"src":"11029:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10510,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"11041:9:63","memberName":"toUint128","nodeType":"MemberAccess","referencedDeclaration":15500,"src":"11029:21:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint128_$attached_to$_t_uint256_$","typeString":"function (uint256) pure returns (uint128)"}},"id":10511,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11029:23:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"10995:57:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":10513,"nodeType":"ExpressionStatement","src":"10995:57:63"},{"condition":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":10524,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"arguments":[{"expression":{"id":10518,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"11611:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10519,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"11624:13:63","memberName":"shareReserves","nodeType":"MemberAccess","referencedDeclaration":5294,"src":"11611:26:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint128","typeString":"uint128"}],"id":10517,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"11603:7:63","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":10516,"name":"uint256","nodeType":"ElementaryTypeName","src":"11603:7:63","typeDescriptions":{}}},"id":10520,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11603:35:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10515,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"11596:6:63","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":10514,"name":"int256","nodeType":"ElementaryTypeName","src":"11596:6:63","typeDescriptions":{}}},"id":10521,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11596:43:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"expression":{"id":10522,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"11654:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10523,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"11667:15:63","memberName":"shareAdjustment","nodeType":"MemberAccess","referencedDeclaration":5306,"src":"11654:28:63","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"src":"11596:86:63","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":10531,"nodeType":"IfStatement","src":"11579:180:63","trueBody":{"id":10530,"nodeType":"Block","src":"11693:66:63","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":10525,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"11714:11:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IHyperdrive_$5658_$","typeString":"type(contract IHyperdrive)"}},"id":10527,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"11726:20:63","memberName":"InvalidShareReserves","nodeType":"MemberAccess","referencedDeclaration":5516,"src":"11714:32:63","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":10528,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11714:34:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10529,"nodeType":"RevertStatement","src":"11707:41:63"}]}},{"assignments":[10533],"declarations":[{"constant":false,"id":10533,"mutability":"mutable","name":"nonNettedLongs","nameLocation":"11921:14:63","nodeType":"VariableDeclaration","scope":10563,"src":"11914:21:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":10532,"name":"int256","nodeType":"ElementaryTypeName","src":"11914:6:63","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"id":10537,"initialValue":{"arguments":[{"id":10535,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10459,"src":"11954:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10534,"name":"_nonNettedLongs","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6902,"src":"11938:15:63","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$returns$_t_int256_$","typeString":"function (uint256) view returns (int256)"}},"id":10536,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11938:30:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"VariableDeclarationStatement","src":"11914:54:63"},{"expression":{"arguments":[{"id":10539,"name":"nonNettedLongs","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10533,"src":"12011:14:63","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":10545,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10540,"name":"nonNettedLongs","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10533,"src":"12039:14:63","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"arguments":[{"id":10543,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10453,"src":"12063:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10542,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"12056:6:63","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":10541,"name":"int256","nodeType":"ElementaryTypeName","src":"12056:6:63","typeDescriptions":{}}},"id":10544,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12056:19:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"12039:36:63","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"},{"typeIdentifier":"t_int256","typeString":"int256"}],"id":10538,"name":"_updateLongExposure","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7141,"src":"11978:19:63","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_int256_$_t_int256_$returns$__$","typeString":"function (int256,int256)"}},"id":10546,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11978:107:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10547,"nodeType":"ExpressionStatement","src":"11978:107:63"},{"condition":{"id":10551,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"12501:24:63","subExpression":{"arguments":[{"id":10549,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10457,"src":"12513:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10548,"name":"_isSolvent","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7082,"src":"12502:10:63","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$returns$_t_bool_$","typeString":"function (uint256) view returns (bool)"}},"id":10550,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12502:23:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":10558,"nodeType":"IfStatement","src":"12497:97:63","trueBody":{"id":10557,"nodeType":"Block","src":"12527:67:63","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":10552,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"12548:11:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IHyperdrive_$5658_$","typeString":"type(contract IHyperdrive)"}},"id":10554,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"12560:21:63","memberName":"InsufficientLiquidity","nodeType":"MemberAccess","referencedDeclaration":5518,"src":"12548:33:63","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":10555,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12548:35:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10556,"nodeType":"RevertStatement","src":"12541:42:63"}]}},{"expression":{"arguments":[{"id":10560,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10457,"src":"12688:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10559,"name":"_distributeExcessIdle","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8764,"src":"12666:21:63","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$returns$__$","typeString":"function (uint256)"}},"id":10561,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12666:34:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10562,"nodeType":"ExpressionStatement","src":"12666:34:63"}]},"documentation":{"id":10451,"nodeType":"StructuredDocumentation","src":"9515:368:63","text":"@dev Applies an open short to the state. This includes updating the\n      reserves and maintaining the reserve invariants.\n @param _bondAmount The amount of bonds shorted.\n @param _shareReservesDelta The amount of shares paid to the curve.\n @param _sharePrice The share price.\n @param _maturityTime The maturity time of the long."},"implemented":true,"kind":"function","modifiers":[],"name":"_applyOpenShort","nameLocation":"9897:15:63","parameters":{"id":10460,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10453,"mutability":"mutable","name":"_bondAmount","nameLocation":"9930:11:63","nodeType":"VariableDeclaration","scope":10564,"src":"9922:19:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10452,"name":"uint256","nodeType":"ElementaryTypeName","src":"9922:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10455,"mutability":"mutable","name":"_shareReservesDelta","nameLocation":"9959:19:63","nodeType":"VariableDeclaration","scope":10564,"src":"9951:27:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10454,"name":"uint256","nodeType":"ElementaryTypeName","src":"9951:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10457,"mutability":"mutable","name":"_sharePrice","nameLocation":"9996:11:63","nodeType":"VariableDeclaration","scope":10564,"src":"9988:19:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10456,"name":"uint256","nodeType":"ElementaryTypeName","src":"9988:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10459,"mutability":"mutable","name":"_maturityTime","nameLocation":"10025:13:63","nodeType":"VariableDeclaration","scope":10564,"src":"10017:21:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10458,"name":"uint256","nodeType":"ElementaryTypeName","src":"10017:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"9912:132:63"},"returnParameters":{"id":10461,"nodeType":"ParameterList","parameters":[],"src":"10054:0:63"},"scope":10919,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":10638,"nodeType":"FunctionDefinition","src":"13196:1128:63","nodes":[],"body":{"id":10637,"nodeType":"Block","src":"13408:916:63","nodes":[],"statements":[{"assignments":[10579],"declarations":[{"constant":false,"id":10579,"mutability":"mutable","name":"shortsOutstanding_","nameLocation":"13477:18:63","nodeType":"VariableDeclaration","scope":10637,"src":"13469:26:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"},"typeName":{"id":10578,"name":"uint128","nodeType":"ElementaryTypeName","src":"13469:7:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"visibility":"internal"}],"id":10582,"initialValue":{"expression":{"id":10580,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"13498:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10581,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"13511:17:63","memberName":"shortsOutstanding","nodeType":"MemberAccess","referencedDeclaration":5309,"src":"13498:30:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"VariableDeclarationStatement","src":"13469:59:63"},{"expression":{"id":10601,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":10583,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"13538:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10585,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"13551:24:63","memberName":"shortAverageMaturityTime","nodeType":"MemberAccess","referencedDeclaration":5315,"src":"13538:37:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"arguments":[{"id":10592,"name":"shortsOutstanding_","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10579,"src":"13699:18:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10595,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10593,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10575,"src":"13735:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"31653138","id":10594,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"13751:4:63","typeDescriptions":{"typeIdentifier":"t_rational_1000000000000000000_by_1","typeString":"int_const 1000000000000000000"},"value":"1e18"},"src":"13735:20:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10596,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10567,"src":"13806:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"hexValue":"66616c7365","id":10597,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"13835:5:63","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint128","typeString":"uint128"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_bool","typeString":"bool"}],"expression":{"arguments":[{"expression":{"id":10588,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"13599:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10589,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"13612:24:63","memberName":"shortAverageMaturityTime","nodeType":"MemberAccess","referencedDeclaration":5315,"src":"13599:37:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint128","typeString":"uint128"}],"id":10587,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"13578:7:63","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":10586,"name":"uint256","nodeType":"ElementaryTypeName","src":"13578:7:63","typeDescriptions":{}}},"id":10590,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13578:68:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10591,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"13660:21:63","memberName":"updateWeightedAverage","nodeType":"MemberAccess","referencedDeclaration":12220,"src":"13578:103:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,bool) pure returns (uint256)"}},"id":10598,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13578:276:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10599,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"13868:9:63","memberName":"toUint128","nodeType":"MemberAccess","referencedDeclaration":15500,"src":"13578:299:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint128_$attached_to$_t_uint256_$","typeString":"function (uint256) pure returns (uint128)"}},"id":10600,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13578:301:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"13538:341:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":10602,"nodeType":"ExpressionStatement","src":"13538:341:63"},{"expression":{"id":10611,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":10603,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"13944:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10605,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"13957:17:63","memberName":"shortsOutstanding","nodeType":"MemberAccess","referencedDeclaration":5309,"src":"13944:30:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint128","typeString":"uint128"},"id":10610,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10606,"name":"shortsOutstanding_","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10579,"src":"13989:18:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":10607,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10567,"src":"14022:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10608,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"14034:9:63","memberName":"toUint128","nodeType":"MemberAccess","referencedDeclaration":15500,"src":"14022:21:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint128_$attached_to$_t_uint256_$","typeString":"function (uint256) pure returns (uint128)"}},"id":10609,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"14022:23:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"13989:56:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"13944:101:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":10612,"nodeType":"ExpressionStatement","src":"13944:101:63"},{"expression":{"id":10619,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":10613,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"14113:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10615,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"14126:13:63","memberName":"shareReserves","nodeType":"MemberAccess","referencedDeclaration":5294,"src":"14113:26:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":10616,"name":"_shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10571,"src":"14143:19:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10617,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"14163:9:63","memberName":"toUint128","nodeType":"MemberAccess","referencedDeclaration":15500,"src":"14143:29:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint128_$attached_to$_t_uint256_$","typeString":"function (uint256) pure returns (uint128)"}},"id":10618,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"14143:31:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"14113:61:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":10620,"nodeType":"ExpressionStatement","src":"14113:61:63"},{"expression":{"id":10627,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":10621,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"14184:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10623,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"14197:15:63","memberName":"shareAdjustment","nodeType":"MemberAccess","referencedDeclaration":5306,"src":"14184:28:63","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":10624,"name":"_shareAdjustmentDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10573,"src":"14216:21:63","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":10625,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"14238:8:63","memberName":"toInt128","nodeType":"MemberAccess","referencedDeclaration":15540,"src":"14216:30:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_int256_$returns$_t_int128_$attached_to$_t_int256_$","typeString":"function (int256) pure returns (int128)"}},"id":10626,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"14216:32:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"src":"14184:64:63","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"id":10628,"nodeType":"ExpressionStatement","src":"14184:64:63"},{"expression":{"id":10635,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":10629,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"14258:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10631,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"14271:12:63","memberName":"bondReserves","nodeType":"MemberAccess","referencedDeclaration":5297,"src":"14258:25:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"-=","rightHandSide":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":10632,"name":"_bondReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10569,"src":"14287:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10633,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"14306:9:63","memberName":"toUint128","nodeType":"MemberAccess","referencedDeclaration":15500,"src":"14287:28:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint128_$attached_to$_t_uint256_$","typeString":"function (uint256) pure returns (uint128)"}},"id":10634,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"14287:30:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"14258:59:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":10636,"nodeType":"ExpressionStatement","src":"14258:59:63"}]},"documentation":{"id":10565,"nodeType":"StructuredDocumentation","src":"12713:478:63","text":"@dev Applies the trading deltas from a closed short to the reserves and\n      the withdrawal pool.\n @param _bondAmount The amount of shorts that were closed.\n @param _bondReservesDelta The amount of bonds removed from the reserves.\n @param _shareReservesDelta The amount of shares added to the reserves.\n @param _shareAdjustmentDelta The amount to increase the share adjustment.\n @param _maturityTime The maturity time of the short."},"implemented":true,"kind":"function","modifiers":[],"name":"_applyCloseShort","nameLocation":"13205:16:63","parameters":{"id":10576,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10567,"mutability":"mutable","name":"_bondAmount","nameLocation":"13239:11:63","nodeType":"VariableDeclaration","scope":10638,"src":"13231:19:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10566,"name":"uint256","nodeType":"ElementaryTypeName","src":"13231:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10569,"mutability":"mutable","name":"_bondReservesDelta","nameLocation":"13268:18:63","nodeType":"VariableDeclaration","scope":10638,"src":"13260:26:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10568,"name":"uint256","nodeType":"ElementaryTypeName","src":"13260:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10571,"mutability":"mutable","name":"_shareReservesDelta","nameLocation":"13304:19:63","nodeType":"VariableDeclaration","scope":10638,"src":"13296:27:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10570,"name":"uint256","nodeType":"ElementaryTypeName","src":"13296:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10573,"mutability":"mutable","name":"_shareAdjustmentDelta","nameLocation":"13340:21:63","nodeType":"VariableDeclaration","scope":10638,"src":"13333:28:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":10572,"name":"int256","nodeType":"ElementaryTypeName","src":"13333:6:63","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":10575,"mutability":"mutable","name":"_maturityTime","nameLocation":"13379:13:63","nodeType":"VariableDeclaration","scope":10638,"src":"13371:21:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10574,"name":"uint256","nodeType":"ElementaryTypeName","src":"13371:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"13221:177:63"},"returnParameters":{"id":10577,"nodeType":"ParameterList","parameters":[],"src":"13408:0:63"},"scope":10919,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":10742,"nodeType":"FunctionDefinition","src":"14899:3692:63","nodes":[],"body":{"id":10741,"nodeType":"Block","src":"15199:3392:63","nodes":[],"statements":[{"expression":{"id":10666,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":10654,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10650,"src":"15425:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"arguments":[],"expression":{"argumentTypes":[],"id":10657,"name":"_effectiveShareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6867,"src":"15493:23:63","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":10658,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"15493:25:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":10659,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"15532:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10660,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"15545:12:63","memberName":"bondReserves","nodeType":"MemberAccess","referencedDeclaration":5297,"src":"15532:25:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},{"id":10661,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10641,"src":"15571:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10662,"name":"_timeStretch","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10951,"src":"15596:12:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10663,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10643,"src":"15622:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10664,"name":"_initialSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10966,"src":"15647:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint128","typeString":"uint128"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10655,"name":"HyperdriveMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12857,"src":"15446:14:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_HyperdriveMath_$12857_$","typeString":"type(library HyperdriveMath)"}},"id":10656,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"15461:18:63","memberName":"calculateOpenShort","nodeType":"MemberAccess","referencedDeclaration":12687,"src":"15446:33:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,uint256,uint256) pure returns (uint256)"}},"id":10665,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"15446:229:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"15425:250:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10667,"nodeType":"ExpressionStatement","src":"15425:250:63"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10673,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":10670,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10643,"src":"15921:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10668,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10650,"src":"15894:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10669,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"15913:7:63","memberName":"mulDown","nodeType":"MemberAccess","referencedDeclaration":11559,"src":"15894:26:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10671,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"15894:39:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":10672,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10641,"src":"15936:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"15894:53:63","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":10680,"nodeType":"IfStatement","src":"15890:121:63","trueBody":{"id":10679,"nodeType":"Block","src":"15949:62:63","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":10674,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"15970:11:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IHyperdrive_$5658_$","typeString":"type(contract IHyperdrive)"}},"id":10676,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"15982:16:63","memberName":"NegativeInterest","nodeType":"MemberAccess","referencedDeclaration":5524,"src":"15970:28:63","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":10677,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"15970:30:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10678,"nodeType":"RevertStatement","src":"15963:37:63"}]}},{"assignments":[10682],"declarations":[{"constant":false,"id":10682,"mutability":"mutable","name":"curveFee","nameLocation":"16181:8:63","nodeType":"VariableDeclaration","scope":10741,"src":"16173:16:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10681,"name":"uint256","nodeType":"ElementaryTypeName","src":"16173:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10683,"nodeType":"VariableDeclarationStatement","src":"16173:16:63"},{"assignments":[10685],"declarations":[{"constant":false,"id":10685,"mutability":"mutable","name":"governanceCurveFee","nameLocation":"16207:18:63","nodeType":"VariableDeclaration","scope":10741,"src":"16199:26:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10684,"name":"uint256","nodeType":"ElementaryTypeName","src":"16199:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10686,"nodeType":"VariableDeclarationStatement","src":"16199:26:63"},{"assignments":[10688],"declarations":[{"constant":false,"id":10688,"mutability":"mutable","name":"spotPrice","nameLocation":"16243:9:63","nodeType":"VariableDeclaration","scope":10741,"src":"16235:17:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10687,"name":"uint256","nodeType":"ElementaryTypeName","src":"16235:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10698,"initialValue":{"arguments":[{"arguments":[],"expression":{"argumentTypes":[],"id":10691,"name":"_effectiveShareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6867,"src":"16302:23:63","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":10692,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"16302:25:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":10693,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"16341:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10694,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"16354:12:63","memberName":"bondReserves","nodeType":"MemberAccess","referencedDeclaration":5297,"src":"16341:25:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},{"id":10695,"name":"_initialSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10966,"src":"16380:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10696,"name":"_timeStretch","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10951,"src":"16412:12:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint128","typeString":"uint128"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10689,"name":"HyperdriveMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12857,"src":"16255:14:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_HyperdriveMath_$12857_$","typeString":"type(library HyperdriveMath)"}},"id":10690,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"16270:18:63","memberName":"calculateSpotPrice","nodeType":"MemberAccess","referencedDeclaration":12340,"src":"16255:33:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256) pure returns (uint256)"}},"id":10697,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"16255:179:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"16235:199:63"},{"expression":{"id":10708,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"components":[{"id":10699,"name":"curveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10682,"src":"16598:8:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},null,{"id":10700,"name":"governanceCurveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10685,"src":"16610:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},null],"id":10701,"isConstant":false,"isInlineArray":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"TupleExpression","src":"16597:34:63","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$__$_t_uint256_$__$","typeString":"tuple(uint256,,uint256,)"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":10703,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10641,"src":"16672:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10704,"name":"ONE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11516,"src":"16697:3:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10705,"name":"spotPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10688,"src":"16764:9:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10706,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10643,"src":"16787:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10702,"name":"_calculateFeesGivenBonds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7527,"src":"16634:24:63","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256) view returns (uint256,uint256,uint256,uint256)"}},"id":10707,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"16634:174:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256,uint256)"}},"src":"16597:211:63","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10709,"nodeType":"ExpressionStatement","src":"16597:211:63"},{"expression":{"id":10714,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":10710,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10650,"src":"17459:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"-=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10713,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10711,"name":"curveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10682,"src":"17481:8:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":10712,"name":"governanceCurveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10685,"src":"17492:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"17481:29:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"17459:51:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10715,"nodeType":"ExpressionStatement","src":"17459:51:63"},{"expression":{"id":10734,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":10716,"name":"baseDeposit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10648,"src":"17987:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":10732,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10643,"src":"18501:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":10719,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10641,"src":"18069:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10722,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10720,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10650,"src":"18288:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":10721,"name":"governanceCurveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10685,"src":"18309:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"18288:39:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10723,"name":"_openSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10645,"src":"18345:15:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"arguments":[{"id":10726,"name":"_openSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10645,"src":"18394:15:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10724,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10643,"src":"18378:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10725,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"18390:3:63","memberName":"max","nodeType":"MemberAccess","referencedDeclaration":12256,"src":"18378:15:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10727,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"18378:32:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10728,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10643,"src":"18428:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10729,"name":"_flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10957,"src":"18457:8:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10717,"name":"HyperdriveMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12857,"src":"18001:14:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_HyperdriveMath_$12857_$","typeString":"type(library HyperdriveMath)"}},"id":10718,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"18029:22:63","memberName":"calculateShortProceeds","nodeType":"MemberAccess","referencedDeclaration":12504,"src":"18001:50:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,uint256,uint256) pure returns (uint256)"}},"id":10730,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"18001:478:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10731,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"18493:7:63","memberName":"mulDown","nodeType":"MemberAccess","referencedDeclaration":11559,"src":"18001:499:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10733,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"18001:512:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"17987:526:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10735,"nodeType":"ExpressionStatement","src":"17987:526:63"},{"expression":{"components":[{"id":10736,"name":"baseDeposit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10648,"src":"18532:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10737,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10650,"src":"18545:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10738,"name":"governanceCurveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10685,"src":"18565:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":10739,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"18531:53:63","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256)"}},"functionReturnParameters":10653,"id":10740,"nodeType":"Return","src":"18524:60:63"}]},"documentation":{"id":10639,"nodeType":"StructuredDocumentation","src":"14330:564:63","text":"@dev Calculate the pool reserve and trader deltas that result from\n      opening a short. This calculation includes trading fees.\n @param _bondAmount The amount of bonds being sold to open the short.\n @param _sharePrice The current share price.\n @param _openSharePrice The share price at the beginning of the checkpoint.\n @return baseDeposit The deposit, in base, required to open the short.\n @return shareReservesDelta The change in the share reserves.\n @return totalGovernanceFee The governance fee in shares."},"implemented":true,"kind":"function","modifiers":[],"name":"_calculateOpenShort","nameLocation":"14908:19:63","parameters":{"id":10646,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10641,"mutability":"mutable","name":"_bondAmount","nameLocation":"14945:11:63","nodeType":"VariableDeclaration","scope":10742,"src":"14937:19:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10640,"name":"uint256","nodeType":"ElementaryTypeName","src":"14937:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10643,"mutability":"mutable","name":"_sharePrice","nameLocation":"14974:11:63","nodeType":"VariableDeclaration","scope":10742,"src":"14966:19:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10642,"name":"uint256","nodeType":"ElementaryTypeName","src":"14966:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10645,"mutability":"mutable","name":"_openSharePrice","nameLocation":"15003:15:63","nodeType":"VariableDeclaration","scope":10742,"src":"14995:23:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10644,"name":"uint256","nodeType":"ElementaryTypeName","src":"14995:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"14927:97:63"},"returnParameters":{"id":10653,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10648,"mutability":"mutable","name":"baseDeposit","nameLocation":"15093:11:63","nodeType":"VariableDeclaration","scope":10742,"src":"15085:19:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10647,"name":"uint256","nodeType":"ElementaryTypeName","src":"15085:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10650,"mutability":"mutable","name":"shareReservesDelta","nameLocation":"15126:18:63","nodeType":"VariableDeclaration","scope":10742,"src":"15118:26:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10649,"name":"uint256","nodeType":"ElementaryTypeName","src":"15118:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10652,"mutability":"mutable","name":"totalGovernanceFee","nameLocation":"15166:18:63","nodeType":"VariableDeclaration","scope":10742,"src":"15158:26:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10651,"name":"uint256","nodeType":"ElementaryTypeName","src":"15158:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"15071:123:63"},"scope":10919,"stateMutability":"view","virtual":false,"visibility":"internal"},{"id":10918,"nodeType":"FunctionDefinition","src":"19311:6319:63","nodes":[],"body":{"id":10917,"nodeType":"Block","src":"19692:5938:63","nodes":[],"statements":[{"assignments":[10763],"declarations":[{"constant":false,"id":10763,"mutability":"mutable","name":"shareCurveDelta","nameLocation":"19931:15:63","nodeType":"VariableDeclaration","scope":10917,"src":"19923:23:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10762,"name":"uint256","nodeType":"ElementaryTypeName","src":"19923:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10764,"nodeType":"VariableDeclarationStatement","src":"19923:23:63"},{"id":10859,"nodeType":"Block","src":"19956:3405:63","statements":[{"assignments":[10766],"declarations":[{"constant":false,"id":10766,"mutability":"mutable","name":"timeRemaining","nameLocation":"20412:13:63","nodeType":"VariableDeclaration","scope":10859,"src":"20404:21:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10765,"name":"uint256","nodeType":"ElementaryTypeName","src":"20404:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10770,"initialValue":{"arguments":[{"id":10768,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10749,"src":"20452:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10767,"name":"_calculateTimeRemaining","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6797,"src":"20428:23:63","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256) view returns (uint256)"}},"id":10769,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"20428:38:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"20404:62:63"},{"expression":{"id":10787,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"components":[{"id":10771,"name":"shareCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10763,"src":"20498:15:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10772,"name":"bondReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10752,"src":"20531:17:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10773,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10756,"src":"20566:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":10774,"isConstant":false,"isInlineArray":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"TupleExpression","src":"20480:118:63","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256)"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"arguments":[],"expression":{"argumentTypes":[],"id":10777,"name":"_effectiveShareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6867,"src":"20653:23:63","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":10778,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"20653:25:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":10779,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"20696:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10780,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"20709:12:63","memberName":"bondReserves","nodeType":"MemberAccess","referencedDeclaration":5297,"src":"20696:25:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},{"id":10781,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10745,"src":"20739:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10782,"name":"timeRemaining","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10766,"src":"20768:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10783,"name":"_timeStretch","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10951,"src":"20799:12:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10784,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10747,"src":"20829:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10785,"name":"_initialSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10966,"src":"20858:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint128","typeString":"uint128"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10775,"name":"HyperdriveMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12857,"src":"20601:14:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_HyperdriveMath_$12857_$","typeString":"type(library HyperdriveMath)"}},"id":10776,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"20616:19:63","memberName":"calculateCloseShort","nodeType":"MemberAccess","referencedDeclaration":12752,"src":"20601:34:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,uint256,uint256,uint256) pure returns (uint256,uint256,uint256)"}},"id":10786,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"20601:289:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256)"}},"src":"20480:410:63","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10788,"nodeType":"ExpressionStatement","src":"20480:410:63"},{"assignments":[10790],"declarations":[{"constant":false,"id":10790,"mutability":"mutable","name":"spotPrice","nameLocation":"21043:9:63","nodeType":"VariableDeclaration","scope":10859,"src":"21035:17:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10789,"name":"uint256","nodeType":"ElementaryTypeName","src":"21035:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10800,"initialValue":{"arguments":[{"arguments":[],"expression":{"argumentTypes":[],"id":10793,"name":"_effectiveShareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6867,"src":"21106:23:63","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":10794,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"21106:25:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":10795,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"21149:12:63","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":10796,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"21162:12:63","memberName":"bondReserves","nodeType":"MemberAccess","referencedDeclaration":5297,"src":"21149:25:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},{"id":10797,"name":"_initialSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10966,"src":"21192:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10798,"name":"_timeStretch","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10951,"src":"21228:12:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint128","typeString":"uint128"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10791,"name":"HyperdriveMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12857,"src":"21055:14:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_HyperdriveMath_$12857_$","typeString":"type(library HyperdriveMath)"}},"id":10792,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"21070:18:63","memberName":"calculateSpotPrice","nodeType":"MemberAccess","referencedDeclaration":12340,"src":"21055:33:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256) pure returns (uint256)"}},"id":10799,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"21055:199:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"21035:219:63"},{"condition":{"arguments":[{"id":10802,"name":"shareCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10763,"src":"21330:15:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10803,"name":"bondReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10752,"src":"21367:17:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"arguments":[{"id":10806,"name":"spotPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10790,"src":"21478:9:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10807,"name":"_curveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10954,"src":"21513:9:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10804,"name":"HyperdriveMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12857,"src":"21406:14:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_HyperdriveMath_$12857_$","typeString":"type(library HyperdriveMath)"}},"id":10805,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"21421:31:63","memberName":"calculateCloseShortMaxSpotPrice","nodeType":"MemberAccess","referencedDeclaration":12560,"src":"21406:46:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":10808,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"21406:138:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10801,"name":"_isNegativeInterest","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7046,"src":"21289:19:63","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_bool_$","typeString":"function (uint256,uint256,uint256) view returns (bool)"}},"id":10809,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"21289:273:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":10816,"nodeType":"IfStatement","src":"21268:379:63","trueBody":{"id":10815,"nodeType":"Block","src":"21577:70:63","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":10810,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"21602:11:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IHyperdrive_$5658_$","typeString":"type(contract IHyperdrive)"}},"id":10812,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"21614:16:63","memberName":"NegativeInterest","nodeType":"MemberAccess","referencedDeclaration":5524,"src":"21602:28:63","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":10813,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"21602:30:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10814,"nodeType":"RevertStatement","src":"21595:37:63"}]}},{"assignments":[10818],"declarations":[{"constant":false,"id":10818,"mutability":"mutable","name":"bondAmount","nameLocation":"21856:10:63","nodeType":"VariableDeclaration","scope":10859,"src":"21848:18:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10817,"name":"uint256","nodeType":"ElementaryTypeName","src":"21848:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10820,"initialValue":{"id":10819,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10745,"src":"21869:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"21848:32:63"},{"assignments":[10822],"declarations":[{"constant":false,"id":10822,"mutability":"mutable","name":"sharePrice","nameLocation":"21927:10:63","nodeType":"VariableDeclaration","scope":10859,"src":"21919:18:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10821,"name":"uint256","nodeType":"ElementaryTypeName","src":"21919:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10824,"initialValue":{"id":10823,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10747,"src":"21940:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"21919:32:63"},{"assignments":[10826],"declarations":[{"constant":false,"id":10826,"mutability":"mutable","name":"curveFee","nameLocation":"21998:8:63","nodeType":"VariableDeclaration","scope":10859,"src":"21990:16:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10825,"name":"uint256","nodeType":"ElementaryTypeName","src":"21990:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10827,"nodeType":"VariableDeclarationStatement","src":"21990:16:63"},{"assignments":[10829],"declarations":[{"constant":false,"id":10829,"mutability":"mutable","name":"flatFee","nameLocation":"22028:7:63","nodeType":"VariableDeclaration","scope":10859,"src":"22020:15:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10828,"name":"uint256","nodeType":"ElementaryTypeName","src":"22020:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10830,"nodeType":"VariableDeclarationStatement","src":"22020:15:63"},{"assignments":[10832],"declarations":[{"constant":false,"id":10832,"mutability":"mutable","name":"governanceCurveFee","nameLocation":"22057:18:63","nodeType":"VariableDeclaration","scope":10859,"src":"22049:26:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10831,"name":"uint256","nodeType":"ElementaryTypeName","src":"22049:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10833,"nodeType":"VariableDeclarationStatement","src":"22049:26:63"},{"expression":{"id":10845,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"components":[{"id":10834,"name":"curveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10826,"src":"22107:8:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10835,"name":"flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10829,"src":"22133:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10836,"name":"governanceCurveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10832,"src":"22158:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10837,"name":"totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10760,"src":"22194:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":10838,"isConstant":false,"isInlineArray":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"TupleExpression","src":"22089:137:63","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256,uint256)"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":10840,"name":"bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10818,"src":"22271:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10841,"name":"timeRemaining","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10766,"src":"22299:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10842,"name":"spotPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10790,"src":"22330:9:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10843,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10822,"src":"22357:10:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":10839,"name":"_calculateFeesGivenBonds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7527,"src":"22229:24:63","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256) view returns (uint256,uint256,uint256,uint256)"}},"id":10844,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"22229:152:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256,uint256)"}},"src":"22089:292:63","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10846,"nodeType":"ExpressionStatement","src":"22089:292:63"},{"expression":{"id":10851,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":10847,"name":"shareCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10763,"src":"23010:15:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10850,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10848,"name":"curveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10826,"src":"23029:8:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":10849,"name":"governanceCurveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10832,"src":"23040:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"23029:29:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"23010:48:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10852,"nodeType":"ExpressionStatement","src":"23010:48:63"},{"expression":{"id":10857,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":10853,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10756,"src":"23310:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10856,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10854,"name":"curveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10826,"src":"23332:8:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":10855,"name":"flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10829,"src":"23343:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"23332:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"23310:40:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10858,"nodeType":"ExpressionStatement","src":"23310:40:63"}]},{"id":10916,"nodeType":"Block","src":"23504:2120:63","statements":[{"assignments":[10861],"declarations":[{"constant":false,"id":10861,"mutability":"mutable","name":"openSharePrice","nameLocation":"23526:14:63","nodeType":"VariableDeclaration","scope":10916,"src":"23518:22:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10860,"name":"uint256","nodeType":"ElementaryTypeName","src":"23518:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10868,"initialValue":{"expression":{"baseExpression":{"id":10862,"name":"_checkpoints","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10986,"src":"23543:12:63","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Checkpoint_$5332_storage_$","typeString":"mapping(uint256 => struct IHyperdrive.Checkpoint storage ref)"}},"id":10866,"indexExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10865,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":10863,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10749,"src":"23573:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":10864,"name":"_positionDuration","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10948,"src":"23589:17:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"23573:33:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"23543:77:63","typeDescriptions":{"typeIdentifier":"t_struct$_Checkpoint_$5332_storage","typeString":"struct IHyperdrive.Checkpoint storage ref"}},"id":10867,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"23621:10:63","memberName":"sharePrice","nodeType":"MemberAccess","referencedDeclaration":5331,"src":"23543:88:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"VariableDeclarationStatement","src":"23518:113:63"},{"assignments":[10870],"declarations":[{"constant":false,"id":10870,"mutability":"mutable","name":"closeSharePrice","nameLocation":"23653:15:63","nodeType":"VariableDeclaration","scope":10916,"src":"23645:23:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10869,"name":"uint256","nodeType":"ElementaryTypeName","src":"23645:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":10881,"initialValue":{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":10874,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":10871,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"23671:5:63","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":10872,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"23677:9:63","memberName":"timestamp","nodeType":"MemberAccess","src":"23671:15:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":10873,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10749,"src":"23689:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"23671:31:63","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"expression":{"baseExpression":{"id":10876,"name":"_checkpoints","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10986,"src":"23751:12:63","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Checkpoint_$5332_storage_$","typeString":"mapping(uint256 => struct IHyperdrive.Checkpoint storage ref)"}},"id":10878,"indexExpression":{"id":10877,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10749,"src":"23764:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"23751:27:63","typeDescriptions":{"typeIdentifier":"t_struct$_Checkpoint_$5332_storage","typeString":"struct IHyperdrive.Checkpoint storage ref"}},"id":10879,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"23779:10:63","memberName":"sharePrice","nodeType":"MemberAccess","referencedDeclaration":5331,"src":"23751:38:63","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":10880,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"23671:118:63","trueExpression":{"id":10875,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10747,"src":"23721:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"23645:144:63"},{"expression":{"id":10892,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":10882,"name":"shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10754,"src":"24338:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":10885,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10745,"src":"24409:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10886,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10756,"src":"24438:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10887,"name":"openSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10861,"src":"24474:14:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10888,"name":"closeSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10870,"src":"24506:15:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10889,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10747,"src":"24539:11:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10890,"name":"_flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10957,"src":"24568:8:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":10883,"name":"HyperdriveMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12857,"src":"24354:14:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_HyperdriveMath_$12857_$","typeString":"type(library HyperdriveMath)"}},"id":10884,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"24369:22:63","memberName":"calculateShortProceeds","nodeType":"MemberAccess","referencedDeclaration":12504,"src":"24354:37:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,uint256,uint256) pure returns (uint256)"}},"id":10891,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"24354:236:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"24338:252:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10893,"nodeType":"ExpressionStatement","src":"24338:252:63"},{"expression":{"id":10896,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":10894,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10756,"src":"24796:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"-=","rightHandSide":{"id":10895,"name":"totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10760,"src":"24818:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"24796:40:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":10897,"nodeType":"ExpressionStatement","src":"24796:40:63"},{"expression":{"id":10914,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"components":[{"id":10898,"name":"shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10754,"src":"25155:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10899,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10756,"src":"25186:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10900,"name":"shareCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10763,"src":"25222:15:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10901,"name":"shareAdjustmentDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10758,"src":"25255:20:63","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":10902,"name":"totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10760,"src":"25293:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":10903,"isConstant":false,"isInlineArray":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"TupleExpression","src":"25137:188:63","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$_t_int256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256,int256,uint256)"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":10906,"name":"shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10754,"src":"25393:13:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10907,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10756,"src":"25424:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10908,"name":"shareCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10763,"src":"25460:15:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10909,"name":"totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10760,"src":"25493:18:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10910,"name":"openSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10861,"src":"25529:14:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":10911,"name":"closeSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10870,"src":"25561:15:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"hexValue":"66616c7365","id":10912,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"25594:5:63","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_bool","typeString":"bool"}],"expression":{"id":10904,"name":"HyperdriveMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12857,"src":"25328:14:63","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_HyperdriveMath_$12857_$","typeString":"type(library HyperdriveMath)"}},"id":10905,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"25343:32:63","memberName":"calculateNegativeInterestOnClose","nodeType":"MemberAccess","referencedDeclaration":12856,"src":"25328:47:63","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$returns$_t_uint256_$_t_uint256_$_t_uint256_$_t_int256_$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,uint256,uint256,bool) pure returns (uint256,uint256,uint256,int256,uint256)"}},"id":10913,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"25328:285:63","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$_t_int256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256,int256,uint256)"}},"src":"25137:476:63","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":10915,"nodeType":"ExpressionStatement","src":"25137:476:63"}]}]},"documentation":{"id":10743,"nodeType":"StructuredDocumentation","src":"18597:709:63","text":"@dev Calculate the pool reserve and trader deltas that result from\n      closing a short. This calculation includes trading fees.\n @param _bondAmount The amount of bonds being purchased to close the\n        short.\n @param _sharePrice The current share price.\n @param _maturityTime The maturity time of the short position.\n @return bondReservesDelta The change in the bond reserves.\n @return shareProceeds The proceeds in shares of closing the short.\n @return shareReservesDelta The shares added to the reserves.\n @return shareAdjustmentDelta The change in the share adjustment.\n @return totalGovernanceFee The governance fee in shares."},"implemented":true,"kind":"function","modifiers":[],"name":"_calculateCloseShort","nameLocation":"19320:20:63","parameters":{"id":10750,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10745,"mutability":"mutable","name":"_bondAmount","nameLocation":"19358:11:63","nodeType":"VariableDeclaration","scope":10918,"src":"19350:19:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10744,"name":"uint256","nodeType":"ElementaryTypeName","src":"19350:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10747,"mutability":"mutable","name":"_sharePrice","nameLocation":"19387:11:63","nodeType":"VariableDeclaration","scope":10918,"src":"19379:19:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10746,"name":"uint256","nodeType":"ElementaryTypeName","src":"19379:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10749,"mutability":"mutable","name":"_maturityTime","nameLocation":"19416:13:63","nodeType":"VariableDeclaration","scope":10918,"src":"19408:21:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10748,"name":"uint256","nodeType":"ElementaryTypeName","src":"19408:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"19340:95:63"},"returnParameters":{"id":10761,"nodeType":"ParameterList","parameters":[{"constant":false,"id":10752,"mutability":"mutable","name":"bondReservesDelta","nameLocation":"19504:17:63","nodeType":"VariableDeclaration","scope":10918,"src":"19496:25:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10751,"name":"uint256","nodeType":"ElementaryTypeName","src":"19496:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10754,"mutability":"mutable","name":"shareProceeds","nameLocation":"19543:13:63","nodeType":"VariableDeclaration","scope":10918,"src":"19535:21:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10753,"name":"uint256","nodeType":"ElementaryTypeName","src":"19535:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10756,"mutability":"mutable","name":"shareReservesDelta","nameLocation":"19578:18:63","nodeType":"VariableDeclaration","scope":10918,"src":"19570:26:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10755,"name":"uint256","nodeType":"ElementaryTypeName","src":"19570:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":10758,"mutability":"mutable","name":"shareAdjustmentDelta","nameLocation":"19617:20:63","nodeType":"VariableDeclaration","scope":10918,"src":"19610:27:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":10757,"name":"int256","nodeType":"ElementaryTypeName","src":"19610:6:63","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":10760,"mutability":"mutable","name":"totalGovernanceFee","nameLocation":"19659:18:63","nodeType":"VariableDeclaration","scope":10918,"src":"19651:26:63","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":10759,"name":"uint256","nodeType":"ElementaryTypeName","src":"19651:7:63","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"19482:205:63"},"scope":10919,"stateMutability":"view","virtual":false,"visibility":"internal"}],"abstract":true,"baseContracts":[{"baseName":{"id":10114,"name":"HyperdriveLP","nameLocations":["785:12:63"],"nodeType":"IdentifierPath","referencedDeclaration":8841,"src":"785:12:63"},"id":10115,"nodeType":"InheritanceSpecifier","src":"785:12:63"}],"canonicalName":"HyperdriveShort","contractDependencies":[],"contractKind":"contract","documentation":{"id":10113,"nodeType":"StructuredDocumentation","src":"420:328:63","text":"@author DELV\n @title HyperdriveShort\n @notice Implements the short accounting for Hyperdrive.\n @custom:disclaimer The language used in this code is for coding convenience\n                    only, and is not intended to, and does not, have any\n                    particular legal or regulatory significance."},"fullyImplemented":false,"linearizedBaseContracts":[10919,8841,10097,7580,11193,65499],"name":"HyperdriveShort","nameLocation":"766:15:63","scope":10920,"usedErrors":[5498,5502,5512,5514]}],"license":"Apache-2.0"},"id":63} as const;

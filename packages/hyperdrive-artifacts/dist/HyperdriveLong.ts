export const HyperdriveLong = 
{"abi":[{"type":"event","name":"AddLiquidity","inputs":[{"name":"provider","type":"address","indexed":true,"internalType":"address"},{"name":"lpAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"baseAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"sharePrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"lpSharePrice","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"Approval","inputs":[{"name":"owner","type":"address","indexed":true,"internalType":"address"},{"name":"spender","type":"address","indexed":true,"internalType":"address"},{"name":"value","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"ApprovalForAll","inputs":[{"name":"account","type":"address","indexed":true,"internalType":"address"},{"name":"operator","type":"address","indexed":true,"internalType":"address"},{"name":"approved","type":"bool","indexed":false,"internalType":"bool"}],"anonymous":false},{"type":"event","name":"CloseLong","inputs":[{"name":"trader","type":"address","indexed":true,"internalType":"address"},{"name":"assetId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"maturityTime","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"baseAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"sharePrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"bondAmount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"CloseShort","inputs":[{"name":"trader","type":"address","indexed":true,"internalType":"address"},{"name":"assetId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"maturityTime","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"baseAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"sharePrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"bondAmount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"CreateCheckpoint","inputs":[{"name":"checkpointTime","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"sharePrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"maturedShorts","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"maturedLongs","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"lpSharePrice","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"Initialize","inputs":[{"name":"provider","type":"address","indexed":true,"internalType":"address"},{"name":"lpAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"baseAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"sharePrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"apr","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"OpenLong","inputs":[{"name":"trader","type":"address","indexed":true,"internalType":"address"},{"name":"assetId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"maturityTime","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"baseAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"sharePrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"bondAmount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"OpenShort","inputs":[{"name":"trader","type":"address","indexed":true,"internalType":"address"},{"name":"assetId","type":"uint256","indexed":true,"internalType":"uint256"},{"name":"maturityTime","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"baseAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"sharePrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"bondAmount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"RedeemWithdrawalShares","inputs":[{"name":"provider","type":"address","indexed":true,"internalType":"address"},{"name":"withdrawalShareAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"baseAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"sharePrice","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"RemoveLiquidity","inputs":[{"name":"provider","type":"address","indexed":true,"internalType":"address"},{"name":"lpAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"baseAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"sharePrice","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"withdrawalShareAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"lpSharePrice","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"TransferSingle","inputs":[{"name":"operator","type":"address","indexed":true,"internalType":"address"},{"name":"from","type":"address","indexed":true,"internalType":"address"},{"name":"to","type":"address","indexed":true,"internalType":"address"},{"name":"id","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"value","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"error","name":"InvalidCheckpointDuration","inputs":[]},{"type":"error","name":"InvalidFeeAmounts","inputs":[]},{"type":"error","name":"InvalidMinimumShareReserves","inputs":[]},{"type":"error","name":"InvalidPositionDuration","inputs":[]}],"bytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"deployedBytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"methodIdentifiers":{},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.19+commit.7dd6d404\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"InvalidCheckpointDuration\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidFeeAmounts\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidMinimumShareReserves\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidPositionDuration\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"provider\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"lpAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"baseAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sharePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"lpSharePrice\",\"type\":\"uint256\"}],\"name\":\"AddLiquidity\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"Approval\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"operator\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"approved\",\"type\":\"bool\"}],\"name\":\"ApprovalForAll\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"assetId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"maturityTime\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"baseAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sharePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"bondAmount\",\"type\":\"uint256\"}],\"name\":\"CloseLong\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"assetId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"maturityTime\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"baseAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sharePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"bondAmount\",\"type\":\"uint256\"}],\"name\":\"CloseShort\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"checkpointTime\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sharePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"maturedShorts\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"maturedLongs\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"lpSharePrice\",\"type\":\"uint256\"}],\"name\":\"CreateCheckpoint\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"provider\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"lpAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"baseAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sharePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"apr\",\"type\":\"uint256\"}],\"name\":\"Initialize\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"assetId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"maturityTime\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"baseAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sharePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"bondAmount\",\"type\":\"uint256\"}],\"name\":\"OpenLong\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"trader\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"assetId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"maturityTime\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"baseAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sharePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"bondAmount\",\"type\":\"uint256\"}],\"name\":\"OpenShort\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"provider\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"withdrawalShareAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"baseAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sharePrice\",\"type\":\"uint256\"}],\"name\":\"RedeemWithdrawalShares\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"provider\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"lpAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"baseAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sharePrice\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"withdrawalShareAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"lpSharePrice\",\"type\":\"uint256\"}],\"name\":\"RemoveLiquidity\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"operator\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"to\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"TransferSingle\",\"type\":\"event\"}],\"devdoc\":{\"author\":\"DELV\",\"custom:disclaimer\":\"The language used in this code is for coding convenience                    only, and is not intended to, and does not, have any                    particular legal or regulatory significance.\",\"kind\":\"dev\",\"methods\":{},\"title\":\"HyperdriveLong\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"notice\":\"Implements the long accounting for Hyperdrive.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/src/internal/HyperdriveLong.sol\":\"HyperdriveLong\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":aave-v3-core/=lib/aave-v3-core/\",\":create3-factory/=lib/yield-daddy/lib/create3-factory/\",\":ds-test/=lib/forge-std/lib/ds-test/src/\",\":forge-std/=lib/forge-std/src/\",\":solmate/=lib/solmate/src/\",\":yield-daddy/=lib/yield-daddy/\"]},\"sources\":{\"contracts/src/interfaces/IERC20.sol\":{\"keccak256\":\"0xfb57fe2ee4d8d1c6a8e2aa3b007da6f0e53d65388245b0b7d876234077ee95b4\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://e4303c41b9752b51c6eaa9b16aa11e5bffb34fc80c5c8761302539cd5922ae36\",\"dweb:/ipfs/QmZjVYBikfgPDX47hmbGJpG6kvm3Gyt6nKkFbZH6r8U4cL\"]},\"contracts/src/interfaces/IHyperdrive.sol\":{\"keccak256\":\"0x3b4f94e5480e7074e05b0d338d583569aef147f45365eb57daeb99f19fe817c3\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://2cc18b204ec94f80cd6b4876ea3c39dfb143fc4feff52e2a8d00ea72e6811644\",\"dweb:/ipfs/QmZHmZRvmJr8FxExBzKHSHYNZqcEgcgDcs4Z6gF1wPvBvj\"]},\"contracts/src/interfaces/IHyperdriveCore.sol\":{\"keccak256\":\"0x84c73d8c4b67da41635f57fce2f30b8f04fc826ff6fb54c605de23d376f3403d\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://e6d636dff5c24916ae35a76695d741de2f14ee46876ea67c5393618bb7f9cf85\",\"dweb:/ipfs/QmUwxh8JeAqSFA8Z2qabVx3YWRSz7PJ9V2TQgnfctAgqPF\"]},\"contracts/src/interfaces/IHyperdriveRead.sol\":{\"keccak256\":\"0x1c61ba57b783bfa408a4e208e80c1c117850d4d6c9f0e280263d3fcf57a8b2fd\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://5b920d5f0f37014035b6cbba16d898e52654122a0c004a3f75050af93b799496\",\"dweb:/ipfs/QmaneaTDVXbw5HfevR2vFwXWw95EKWcBq8yMgMyWJPHKVW\"]},\"contracts/src/interfaces/IMultiToken.sol\":{\"keccak256\":\"0xcf3a4002275ea64e381f0a4aded3683e12960396ef79ba9dd153e2d1e395baad\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://c9990491f7a5151fd696a45e6e5b0282a1dedf58521861dfb8c64db8cb60f5b6\",\"dweb:/ipfs/QmaywmqqQhz7DeYqZdoeykagr5h4ZhQRv6GasHqvdWqzSy\"]},\"contracts/src/interfaces/IMultiTokenCore.sol\":{\"keccak256\":\"0xdb7f24663cff7307a468ef5e4c6f3e4d01ec0475157b3bbb3405890c3e9ab87d\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://7f631a9a395fba5b07c3d9308fccac18d5aa59d890efe23442ed2a4da9871ae8\",\"dweb:/ipfs/QmV2a4wiAPfWzSST3faYt58i2tqEyoqCLAJV8aNCdJyxVE\"]},\"contracts/src/interfaces/IMultiTokenMetadata.sol\":{\"keccak256\":\"0x476240ea4328bae9ab820b6f0f40afb11c74ee52d26bdbef69e4ece28dc10bdb\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://843f73cb21eaec4e26952fd6cbde5e6815e3a28c438df9e026e249200d25076f\",\"dweb:/ipfs/QmXzE7gsRKMaRGQfTDodA1RXxNxUuBj8RT7grTYjZUdbe6\"]},\"contracts/src/interfaces/IMultiTokenRead.sol\":{\"keccak256\":\"0x9b92d81f2f038fcd4bb5d069ab2b754efc153234c451d4ee4caa6d74aaca16b4\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://8686fddc99564c6b6524ea68a6b7ff081a9988fc795fc13197bb59ddaa2041c6\",\"dweb:/ipfs/QmarJYJAgoH6Z4H1BmdPoRgqLubRu5S6NDXBNV2fDApPuW\"]},\"contracts/src/internal/HyperdriveBase.sol\":{\"keccak256\":\"0x0fbf9c2be16bbfeb3d560e433b21d040292579ba1d21375979008e5eac35d5f6\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://8672d924b7a357df66bb17e37fb485b53e445cab1b7a7171b5c38a93999e4a72\",\"dweb:/ipfs/QmQj3xB5fj7V2mY5rn3JSRxmb4LywPEVSyw95J95HVtVUL\"]},\"contracts/src/internal/HyperdriveLP.sol\":{\"keccak256\":\"0xf7dfba22a0063e2db44e0ccbd3cf5a6aa76f1459893e395656518f34f34bdcf5\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://9b0f953d3fd2613d271c0734693ee809730c6d870f05eed2a083543ff1cec6ad\",\"dweb:/ipfs/QmaRU2waAMaDDKLWXogUVYjivmfPaYXnB6qNoHHZBvwoqH\"]},\"contracts/src/internal/HyperdriveLong.sol\":{\"keccak256\":\"0x841ef059548dbef93c6890852ed79ae543bf067ccb9bb8ec4cb0970a74b6138a\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://b4738eaa1b1ea8cc99692ee5af4aab60799fc9fd75dd00f88b40899a76cd7077\",\"dweb:/ipfs/QmdMiu3QfHfCwZm4drKtdAZ4KYG4QRWhuTsfRf6qd1VYv9\"]},\"contracts/src/internal/HyperdriveMultiToken.sol\":{\"keccak256\":\"0x61b9f8eb5795fda17a5c35264f53879a7ef022e02b865b015bdb9f5811db6ba5\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://9498f4bfd969d78634da2b0a89b10f88ac467f52d565d9b62561dcc569ad00cd\",\"dweb:/ipfs/QmZdGwc5ezJf2qv8yheoTVF3UTfWJnh6FtAAq7wufhPZ5R\"]},\"contracts/src/internal/HyperdriveStorage.sol\":{\"keccak256\":\"0xe150223822098026c7ce734cd68848e45b47b92b024d34bc25886e9c6af6ec67\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://6590e590f4af53d55e81e06ba8d53346cfce71ce1fa8d1833141f273d74c8a8f\",\"dweb:/ipfs/QmTM582joUpK7KBDWvwWEBi4XT3Qt9x8VLkhwPYj8Qu93o\"]},\"contracts/src/libraries/AssetId.sol\":{\"keccak256\":\"0xcf8493b00dd39c50754a63f66dc612f3cd466cbac8c7ea5ed0c5ea68aa99267a\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://1a1986d6bc80e465dde116a70d3a30027b3e75969117a9b3517c6866c2e5e73a\",\"dweb:/ipfs/QmSASHifHWyKBycGAm1pUs9dw26Uf6A61V9nkEQnFj9mya\"]},\"contracts/src/libraries/FixedPointMath.sol\":{\"keccak256\":\"0x3d2d86890e7287a59bc7171a030f98006a60271812a233027d2e42d8f31ef46c\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://ecf29c3dedf328bd29caef4ce1eba85576d4c4b8d6f77fc255e37c24e8d44e1d\",\"dweb:/ipfs/QmVgmtYXzMkvR1GYsfqnJ1cH2ojmggoKmVuxKQZ9Rw78T1\"]},\"contracts/src/libraries/HyperdriveMath.sol\":{\"keccak256\":\"0xd87293bc10dfe09707a042bf05091baf40ba344bdca141bd99b62256a7611817\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://8f6eadd454c6671c26bd22095c31a3bbaea7083df9aa6548dbaba32a4907e336\",\"dweb:/ipfs/QmY1jMW9DuAk9CSfVS6MsG5onqjZHKzdBrv2TcHvj9yKj4\"]},\"contracts/src/libraries/LPMath.sol\":{\"keccak256\":\"0x077931150bcba5b99dedcd9038f3fbeef9c9230046dc4649c457d75d4be32a5c\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://2a48e4046f7ae8acb965d0f8d79767f4f4c70c1a6a8d3cf635482587412d33fd\",\"dweb:/ipfs/QmcY8FbffppqTMBiMwniXG9R8i8eQoVJuLqqTXgpuiXyUr\"]},\"contracts/src/libraries/SafeCast.sol\":{\"keccak256\":\"0x86d3065b06e2fb93733eb6f19ea0bb6343a51bc6b993c36702dc3e6d50a6d01d\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://f0d303e0a2ed0c99ea194759d9fce5317b6e3a4c40464fc34c09f6f770d402db\",\"dweb:/ipfs/QmVSTsk4YXLe8pcUbQEpihWq9XTcn47L46j8khkvfzyiWB\"]},\"contracts/src/libraries/YieldSpaceMath.sol\":{\"keccak256\":\"0x2f9511684820be7510155adfe3c2c2ef7e2583472946bae37f379bac801fc263\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://7e9a84e4168448e3320a6682c8ba248c8b51757df173b86507e9aba4b6167247\",\"dweb:/ipfs/QmSonetYBP22Fnc8HrcaTxAA1Zg2PCR5ptPiEp22sA77Ka\"]},\"lib/solmate/src/utils/ReentrancyGuard.sol\":{\"keccak256\":\"0xb282dd78aa7375d6b200b9a5d8dd214b2e5df1004f8217a4b4c2b07f0c5bfd01\",\"license\":\"AGPL-3.0-only\",\"urls\":[\"bzz-raw://5fca62eb8d3dbd2b3b7e4bb051f6da16f4d0ff9cee61c39cebb80f031f6a8800\",\"dweb:/ipfs/QmbrsXPK91iBFwHKwJs2HLRud2KzMoBDRiWYMUtyV5H57j\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.19+commit.7dd6d404"},"language":"Solidity","output":{"abi":[{"inputs":[],"type":"error","name":"InvalidCheckpointDuration"},{"inputs":[],"type":"error","name":"InvalidFeeAmounts"},{"inputs":[],"type":"error","name":"InvalidMinimumShareReserves"},{"inputs":[],"type":"error","name":"InvalidPositionDuration"},{"inputs":[{"internalType":"address","name":"provider","type":"address","indexed":true},{"internalType":"uint256","name":"lpAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"baseAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"sharePrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"lpSharePrice","type":"uint256","indexed":false}],"type":"event","name":"AddLiquidity","anonymous":false},{"inputs":[{"internalType":"address","name":"owner","type":"address","indexed":true},{"internalType":"address","name":"spender","type":"address","indexed":true},{"internalType":"uint256","name":"value","type":"uint256","indexed":false}],"type":"event","name":"Approval","anonymous":false},{"inputs":[{"internalType":"address","name":"account","type":"address","indexed":true},{"internalType":"address","name":"operator","type":"address","indexed":true},{"internalType":"bool","name":"approved","type":"bool","indexed":false}],"type":"event","name":"ApprovalForAll","anonymous":false},{"inputs":[{"internalType":"address","name":"trader","type":"address","indexed":true},{"internalType":"uint256","name":"assetId","type":"uint256","indexed":true},{"internalType":"uint256","name":"maturityTime","type":"uint256","indexed":false},{"internalType":"uint256","name":"baseAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"sharePrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"bondAmount","type":"uint256","indexed":false}],"type":"event","name":"CloseLong","anonymous":false},{"inputs":[{"internalType":"address","name":"trader","type":"address","indexed":true},{"internalType":"uint256","name":"assetId","type":"uint256","indexed":true},{"internalType":"uint256","name":"maturityTime","type":"uint256","indexed":false},{"internalType":"uint256","name":"baseAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"sharePrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"bondAmount","type":"uint256","indexed":false}],"type":"event","name":"CloseShort","anonymous":false},{"inputs":[{"internalType":"uint256","name":"checkpointTime","type":"uint256","indexed":true},{"internalType":"uint256","name":"sharePrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"maturedShorts","type":"uint256","indexed":false},{"internalType":"uint256","name":"maturedLongs","type":"uint256","indexed":false},{"internalType":"uint256","name":"lpSharePrice","type":"uint256","indexed":false}],"type":"event","name":"CreateCheckpoint","anonymous":false},{"inputs":[{"internalType":"address","name":"provider","type":"address","indexed":true},{"internalType":"uint256","name":"lpAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"baseAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"sharePrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"apr","type":"uint256","indexed":false}],"type":"event","name":"Initialize","anonymous":false},{"inputs":[{"internalType":"address","name":"trader","type":"address","indexed":true},{"internalType":"uint256","name":"assetId","type":"uint256","indexed":true},{"internalType":"uint256","name":"maturityTime","type":"uint256","indexed":false},{"internalType":"uint256","name":"baseAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"sharePrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"bondAmount","type":"uint256","indexed":false}],"type":"event","name":"OpenLong","anonymous":false},{"inputs":[{"internalType":"address","name":"trader","type":"address","indexed":true},{"internalType":"uint256","name":"assetId","type":"uint256","indexed":true},{"internalType":"uint256","name":"maturityTime","type":"uint256","indexed":false},{"internalType":"uint256","name":"baseAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"sharePrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"bondAmount","type":"uint256","indexed":false}],"type":"event","name":"OpenShort","anonymous":false},{"inputs":[{"internalType":"address","name":"provider","type":"address","indexed":true},{"internalType":"uint256","name":"withdrawalShareAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"baseAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"sharePrice","type":"uint256","indexed":false}],"type":"event","name":"RedeemWithdrawalShares","anonymous":false},{"inputs":[{"internalType":"address","name":"provider","type":"address","indexed":true},{"internalType":"uint256","name":"lpAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"baseAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"sharePrice","type":"uint256","indexed":false},{"internalType":"uint256","name":"withdrawalShareAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"lpSharePrice","type":"uint256","indexed":false}],"type":"event","name":"RemoveLiquidity","anonymous":false},{"inputs":[{"internalType":"address","name":"operator","type":"address","indexed":true},{"internalType":"address","name":"from","type":"address","indexed":true},{"internalType":"address","name":"to","type":"address","indexed":true},{"internalType":"uint256","name":"id","type":"uint256","indexed":false},{"internalType":"uint256","name":"value","type":"uint256","indexed":false}],"type":"event","name":"TransferSingle","anonymous":false}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["aave-v3-core/=lib/aave-v3-core/","create3-factory/=lib/yield-daddy/lib/create3-factory/","ds-test/=lib/forge-std/lib/ds-test/src/","forge-std/=lib/forge-std/src/","solmate/=lib/solmate/src/","yield-daddy/=lib/yield-daddy/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"contracts/src/internal/HyperdriveLong.sol":"HyperdriveLong"},"libraries":{}},"sources":{"contracts/src/interfaces/IERC20.sol":{"keccak256":"0xfb57fe2ee4d8d1c6a8e2aa3b007da6f0e53d65388245b0b7d876234077ee95b4","urls":["bzz-raw://e4303c41b9752b51c6eaa9b16aa11e5bffb34fc80c5c8761302539cd5922ae36","dweb:/ipfs/QmZjVYBikfgPDX47hmbGJpG6kvm3Gyt6nKkFbZH6r8U4cL"],"license":"Apache-2.0"},"contracts/src/interfaces/IHyperdrive.sol":{"keccak256":"0x3b4f94e5480e7074e05b0d338d583569aef147f45365eb57daeb99f19fe817c3","urls":["bzz-raw://2cc18b204ec94f80cd6b4876ea3c39dfb143fc4feff52e2a8d00ea72e6811644","dweb:/ipfs/QmZHmZRvmJr8FxExBzKHSHYNZqcEgcgDcs4Z6gF1wPvBvj"],"license":"Apache-2.0"},"contracts/src/interfaces/IHyperdriveCore.sol":{"keccak256":"0x84c73d8c4b67da41635f57fce2f30b8f04fc826ff6fb54c605de23d376f3403d","urls":["bzz-raw://e6d636dff5c24916ae35a76695d741de2f14ee46876ea67c5393618bb7f9cf85","dweb:/ipfs/QmUwxh8JeAqSFA8Z2qabVx3YWRSz7PJ9V2TQgnfctAgqPF"],"license":"Apache-2.0"},"contracts/src/interfaces/IHyperdriveRead.sol":{"keccak256":"0x1c61ba57b783bfa408a4e208e80c1c117850d4d6c9f0e280263d3fcf57a8b2fd","urls":["bzz-raw://5b920d5f0f37014035b6cbba16d898e52654122a0c004a3f75050af93b799496","dweb:/ipfs/QmaneaTDVXbw5HfevR2vFwXWw95EKWcBq8yMgMyWJPHKVW"],"license":"Apache-2.0"},"contracts/src/interfaces/IMultiToken.sol":{"keccak256":"0xcf3a4002275ea64e381f0a4aded3683e12960396ef79ba9dd153e2d1e395baad","urls":["bzz-raw://c9990491f7a5151fd696a45e6e5b0282a1dedf58521861dfb8c64db8cb60f5b6","dweb:/ipfs/QmaywmqqQhz7DeYqZdoeykagr5h4ZhQRv6GasHqvdWqzSy"],"license":"Apache-2.0"},"contracts/src/interfaces/IMultiTokenCore.sol":{"keccak256":"0xdb7f24663cff7307a468ef5e4c6f3e4d01ec0475157b3bbb3405890c3e9ab87d","urls":["bzz-raw://7f631a9a395fba5b07c3d9308fccac18d5aa59d890efe23442ed2a4da9871ae8","dweb:/ipfs/QmV2a4wiAPfWzSST3faYt58i2tqEyoqCLAJV8aNCdJyxVE"],"license":"Apache-2.0"},"contracts/src/interfaces/IMultiTokenMetadata.sol":{"keccak256":"0x476240ea4328bae9ab820b6f0f40afb11c74ee52d26bdbef69e4ece28dc10bdb","urls":["bzz-raw://843f73cb21eaec4e26952fd6cbde5e6815e3a28c438df9e026e249200d25076f","dweb:/ipfs/QmXzE7gsRKMaRGQfTDodA1RXxNxUuBj8RT7grTYjZUdbe6"],"license":"Apache-2.0"},"contracts/src/interfaces/IMultiTokenRead.sol":{"keccak256":"0x9b92d81f2f038fcd4bb5d069ab2b754efc153234c451d4ee4caa6d74aaca16b4","urls":["bzz-raw://8686fddc99564c6b6524ea68a6b7ff081a9988fc795fc13197bb59ddaa2041c6","dweb:/ipfs/QmarJYJAgoH6Z4H1BmdPoRgqLubRu5S6NDXBNV2fDApPuW"],"license":"Apache-2.0"},"contracts/src/internal/HyperdriveBase.sol":{"keccak256":"0x0fbf9c2be16bbfeb3d560e433b21d040292579ba1d21375979008e5eac35d5f6","urls":["bzz-raw://8672d924b7a357df66bb17e37fb485b53e445cab1b7a7171b5c38a93999e4a72","dweb:/ipfs/QmQj3xB5fj7V2mY5rn3JSRxmb4LywPEVSyw95J95HVtVUL"],"license":"Apache-2.0"},"contracts/src/internal/HyperdriveLP.sol":{"keccak256":"0xf7dfba22a0063e2db44e0ccbd3cf5a6aa76f1459893e395656518f34f34bdcf5","urls":["bzz-raw://9b0f953d3fd2613d271c0734693ee809730c6d870f05eed2a083543ff1cec6ad","dweb:/ipfs/QmaRU2waAMaDDKLWXogUVYjivmfPaYXnB6qNoHHZBvwoqH"],"license":"Apache-2.0"},"contracts/src/internal/HyperdriveLong.sol":{"keccak256":"0x841ef059548dbef93c6890852ed79ae543bf067ccb9bb8ec4cb0970a74b6138a","urls":["bzz-raw://b4738eaa1b1ea8cc99692ee5af4aab60799fc9fd75dd00f88b40899a76cd7077","dweb:/ipfs/QmdMiu3QfHfCwZm4drKtdAZ4KYG4QRWhuTsfRf6qd1VYv9"],"license":"Apache-2.0"},"contracts/src/internal/HyperdriveMultiToken.sol":{"keccak256":"0x61b9f8eb5795fda17a5c35264f53879a7ef022e02b865b015bdb9f5811db6ba5","urls":["bzz-raw://9498f4bfd969d78634da2b0a89b10f88ac467f52d565d9b62561dcc569ad00cd","dweb:/ipfs/QmZdGwc5ezJf2qv8yheoTVF3UTfWJnh6FtAAq7wufhPZ5R"],"license":"Apache-2.0"},"contracts/src/internal/HyperdriveStorage.sol":{"keccak256":"0xe150223822098026c7ce734cd68848e45b47b92b024d34bc25886e9c6af6ec67","urls":["bzz-raw://6590e590f4af53d55e81e06ba8d53346cfce71ce1fa8d1833141f273d74c8a8f","dweb:/ipfs/QmTM582joUpK7KBDWvwWEBi4XT3Qt9x8VLkhwPYj8Qu93o"],"license":"Apache-2.0"},"contracts/src/libraries/AssetId.sol":{"keccak256":"0xcf8493b00dd39c50754a63f66dc612f3cd466cbac8c7ea5ed0c5ea68aa99267a","urls":["bzz-raw://1a1986d6bc80e465dde116a70d3a30027b3e75969117a9b3517c6866c2e5e73a","dweb:/ipfs/QmSASHifHWyKBycGAm1pUs9dw26Uf6A61V9nkEQnFj9mya"],"license":"Apache-2.0"},"contracts/src/libraries/FixedPointMath.sol":{"keccak256":"0x3d2d86890e7287a59bc7171a030f98006a60271812a233027d2e42d8f31ef46c","urls":["bzz-raw://ecf29c3dedf328bd29caef4ce1eba85576d4c4b8d6f77fc255e37c24e8d44e1d","dweb:/ipfs/QmVgmtYXzMkvR1GYsfqnJ1cH2ojmggoKmVuxKQZ9Rw78T1"],"license":"Apache-2.0"},"contracts/src/libraries/HyperdriveMath.sol":{"keccak256":"0xd87293bc10dfe09707a042bf05091baf40ba344bdca141bd99b62256a7611817","urls":["bzz-raw://8f6eadd454c6671c26bd22095c31a3bbaea7083df9aa6548dbaba32a4907e336","dweb:/ipfs/QmY1jMW9DuAk9CSfVS6MsG5onqjZHKzdBrv2TcHvj9yKj4"],"license":"Apache-2.0"},"contracts/src/libraries/LPMath.sol":{"keccak256":"0x077931150bcba5b99dedcd9038f3fbeef9c9230046dc4649c457d75d4be32a5c","urls":["bzz-raw://2a48e4046f7ae8acb965d0f8d79767f4f4c70c1a6a8d3cf635482587412d33fd","dweb:/ipfs/QmcY8FbffppqTMBiMwniXG9R8i8eQoVJuLqqTXgpuiXyUr"],"license":"Apache-2.0"},"contracts/src/libraries/SafeCast.sol":{"keccak256":"0x86d3065b06e2fb93733eb6f19ea0bb6343a51bc6b993c36702dc3e6d50a6d01d","urls":["bzz-raw://f0d303e0a2ed0c99ea194759d9fce5317b6e3a4c40464fc34c09f6f770d402db","dweb:/ipfs/QmVSTsk4YXLe8pcUbQEpihWq9XTcn47L46j8khkvfzyiWB"],"license":"Apache-2.0"},"contracts/src/libraries/YieldSpaceMath.sol":{"keccak256":"0x2f9511684820be7510155adfe3c2c2ef7e2583472946bae37f379bac801fc263","urls":["bzz-raw://7e9a84e4168448e3320a6682c8ba248c8b51757df173b86507e9aba4b6167247","dweb:/ipfs/QmSonetYBP22Fnc8HrcaTxAA1Zg2PCR5ptPiEp22sA77Ka"],"license":"Apache-2.0"},"lib/solmate/src/utils/ReentrancyGuard.sol":{"keccak256":"0xb282dd78aa7375d6b200b9a5d8dd214b2e5df1004f8217a4b4c2b07f0c5bfd01","urls":["bzz-raw://5fca62eb8d3dbd2b3b7e4bb051f6da16f4d0ff9cee61c39cebb80f031f6a8800","dweb:/ipfs/QmbrsXPK91iBFwHKwJs2HLRud2KzMoBDRiWYMUtyV5H57j"],"license":"AGPL-3.0-only"}},"version":1},"ast":{"absolutePath":"contracts/src/internal/HyperdriveLong.sol","id":9638,"exportedSymbols":{"AssetId":[11509],"FixedPointMath":[12293],"HyperdriveLP":[8841],"HyperdriveLong":[9637],"HyperdriveMath":[12857],"IHyperdrive":[5658],"SafeCast":[15541]},"nodeType":"SourceUnit","src":"39:23176:61","nodes":[{"id":8843,"nodeType":"PragmaDirective","src":"39:23:61","nodes":[],"literals":["solidity","0.8",".19"]},{"id":8845,"nodeType":"ImportDirective","src":"64:60:61","nodes":[],"absolutePath":"contracts/src/interfaces/IHyperdrive.sol","file":"../interfaces/IHyperdrive.sol","nameLocation":"-1:-1:-1","scope":9638,"sourceUnit":5659,"symbolAliases":[{"foreign":{"id":8844,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"73:11:61","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":8847,"nodeType":"ImportDirective","src":"125:51:61","nodes":[],"absolutePath":"contracts/src/libraries/AssetId.sol","file":"../libraries/AssetId.sol","nameLocation":"-1:-1:-1","scope":9638,"sourceUnit":11510,"symbolAliases":[{"foreign":{"id":8846,"name":"AssetId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11509,"src":"134:7:61","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":8849,"nodeType":"ImportDirective","src":"177:65:61","nodes":[],"absolutePath":"contracts/src/libraries/FixedPointMath.sol","file":"../libraries/FixedPointMath.sol","nameLocation":"-1:-1:-1","scope":9638,"sourceUnit":12294,"symbolAliases":[{"foreign":{"id":8848,"name":"FixedPointMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12293,"src":"186:14:61","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":8851,"nodeType":"ImportDirective","src":"243:65:61","nodes":[],"absolutePath":"contracts/src/libraries/HyperdriveMath.sol","file":"../libraries/HyperdriveMath.sol","nameLocation":"-1:-1:-1","scope":9638,"sourceUnit":12858,"symbolAliases":[{"foreign":{"id":8850,"name":"HyperdriveMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12857,"src":"252:14:61","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":8853,"nodeType":"ImportDirective","src":"309:53:61","nodes":[],"absolutePath":"contracts/src/libraries/SafeCast.sol","file":"../libraries/SafeCast.sol","nameLocation":"-1:-1:-1","scope":9638,"sourceUnit":15542,"symbolAliases":[{"foreign":{"id":8852,"name":"SafeCast","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":15541,"src":"318:8:61","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":8855,"nodeType":"ImportDirective","src":"363:50:61","nodes":[],"absolutePath":"contracts/src/internal/HyperdriveLP.sol","file":"./HyperdriveLP.sol","nameLocation":"-1:-1:-1","scope":9638,"sourceUnit":8842,"symbolAliases":[{"foreign":{"id":8854,"name":"HyperdriveLP","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8841,"src":"372:12:61","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":9637,"nodeType":"ContractDefinition","src":"741:22473:61","nodes":[{"id":8861,"nodeType":"UsingForDirective","src":"796:33:61","nodes":[],"global":false,"libraryName":{"id":8859,"name":"FixedPointMath","nameLocations":["802:14:61"],"nodeType":"IdentifierPath","referencedDeclaration":12293,"src":"802:14:61"},"typeName":{"id":8860,"name":"uint256","nodeType":"ElementaryTypeName","src":"821:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},{"id":8864,"nodeType":"UsingForDirective","src":"834:32:61","nodes":[],"global":false,"libraryName":{"id":8862,"name":"FixedPointMath","nameLocations":["840:14:61"],"nodeType":"IdentifierPath","referencedDeclaration":12293,"src":"840:14:61"},"typeName":{"id":8863,"name":"int256","nodeType":"ElementaryTypeName","src":"859:6:61","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}},{"id":8867,"nodeType":"UsingForDirective","src":"871:27:61","nodes":[],"global":false,"libraryName":{"id":8865,"name":"SafeCast","nameLocations":["877:8:61"],"nodeType":"IdentifierPath","referencedDeclaration":15541,"src":"877:8:61"},"typeName":{"id":8866,"name":"uint256","nodeType":"ElementaryTypeName","src":"890:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},{"id":8870,"nodeType":"UsingForDirective","src":"903:26:61","nodes":[],"global":false,"libraryName":{"id":8868,"name":"SafeCast","nameLocations":["909:8:61"],"nodeType":"IdentifierPath","referencedDeclaration":15541,"src":"909:8:61"},"typeName":{"id":8869,"name":"int256","nodeType":"ElementaryTypeName","src":"922:6:61","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}},{"id":9039,"nodeType":"FunctionDefinition","src":"1523:3194:61","nodes":[],"body":{"id":9038,"nodeType":"Block","src":"1803:2914:61","nodes":[],"statements":[{"expression":{"arguments":[],"expression":{"argumentTypes":[],"id":8891,"name":"_checkMessageValue","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6709,"src":"1863:18:61","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$__$","typeString":"function () view"}},"id":8892,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1863:20:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8893,"nodeType":"ExpressionStatement","src":"1863:20:61"},{"assignments":[8895,8897],"declarations":[{"constant":false,"id":8895,"mutability":"mutable","name":"sharesDeposited","nameLocation":"1947:15:61","nodeType":"VariableDeclaration","scope":9038,"src":"1939:23:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8894,"name":"uint256","nodeType":"ElementaryTypeName","src":"1939:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":8897,"mutability":"mutable","name":"sharePrice","nameLocation":"1972:10:61","nodeType":"VariableDeclaration","scope":9038,"src":"1964:18:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8896,"name":"uint256","nodeType":"ElementaryTypeName","src":"1964:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":8902,"initialValue":{"arguments":[{"id":8899,"name":"_amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8873,"src":"2008:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":8900,"name":"_options","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8880,"src":"2029:8:61","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}],"id":8898,"name":"_deposit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6722,"src":"1986:8:61","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$_t_struct$_Options_$5483_calldata_ptr_$returns$_t_uint256_$_t_uint256_$","typeString":"function (uint256,struct IHyperdrive.Options calldata) returns (uint256,uint256)"}},"id":8901,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1986:61:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256)"}},"nodeType":"VariableDeclarationStatement","src":"1938:109:61"},{"assignments":[8904],"declarations":[{"constant":false,"id":8904,"mutability":"mutable","name":"baseDeposited","nameLocation":"2418:13:61","nodeType":"VariableDeclaration","scope":9038,"src":"2410:21:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8903,"name":"uint256","nodeType":"ElementaryTypeName","src":"2410:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":8909,"initialValue":{"arguments":[{"id":8907,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8897,"src":"2458:10:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":8905,"name":"sharesDeposited","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8895,"src":"2434:15:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":8906,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2450:7:61","memberName":"mulDown","nodeType":"MemberAccess","referencedDeclaration":11559,"src":"2434:23:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":8908,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2434:35:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2410:59:61"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8912,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":8910,"name":"baseDeposited","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8904,"src":"2483:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":8911,"name":"_minimumTransactionAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10972,"src":"2499:25:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2483:41:61","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":8919,"nodeType":"IfStatement","src":"2479:117:61","trueBody":{"id":8918,"nodeType":"Block","src":"2526:70:61","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":8913,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"2547:11:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IHyperdrive_$5658_$","typeString":"type(contract IHyperdrive)"}},"id":8915,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2559:24:61","memberName":"MinimumTransactionAmount","nodeType":"MemberAccess","referencedDeclaration":5522,"src":"2547:36:61","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":8916,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2547:38:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8917,"nodeType":"RevertStatement","src":"2540:45:61"}]}},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8922,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":8920,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8897,"src":"2609:10:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":8921,"name":"_minSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8877,"src":"2622:14:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2609:27:61","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":8929,"nodeType":"IfStatement","src":"2605:96:61","trueBody":{"id":8928,"nodeType":"Block","src":"2638:63:61","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":8923,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"2659:11:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IHyperdrive_$5658_$","typeString":"type(contract IHyperdrive)"}},"id":8925,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2671:17:61","memberName":"MinimumSharePrice","nodeType":"MemberAccess","referencedDeclaration":5520,"src":"2659:29:61","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":8926,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2659:31:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8927,"nodeType":"RevertStatement","src":"2652:38:61"}]}},{"assignments":[8931],"declarations":[{"constant":false,"id":8931,"mutability":"mutable","name":"latestCheckpoint","nameLocation":"2752:16:61","nodeType":"VariableDeclaration","scope":9038,"src":"2744:24:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8930,"name":"uint256","nodeType":"ElementaryTypeName","src":"2744:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":8934,"initialValue":{"arguments":[],"expression":{"argumentTypes":[],"id":8932,"name":"_latestCheckpoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6852,"src":"2771:17:61","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":8933,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2771:19:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2744:46:61"},{"expression":{"arguments":[{"id":8936,"name":"latestCheckpoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8931,"src":"2817:16:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":8937,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8897,"src":"2835:10:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":8935,"name":"_applyCheckpoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6764,"src":"2800:16:61","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) returns (uint256)"}},"id":8938,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2800:46:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":8939,"nodeType":"ExpressionStatement","src":"2800:46:61"},{"assignments":[8941],"declarations":[{"constant":false,"id":8941,"mutability":"mutable","name":"shareReservesDelta","nameLocation":"3116:18:61","nodeType":"VariableDeclaration","scope":9038,"src":"3108:26:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8940,"name":"uint256","nodeType":"ElementaryTypeName","src":"3108:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":8942,"nodeType":"VariableDeclarationStatement","src":"3108:26:61"},{"assignments":[8944],"declarations":[{"constant":false,"id":8944,"mutability":"mutable","name":"bondReservesDelta","nameLocation":"3152:17:61","nodeType":"VariableDeclaration","scope":9038,"src":"3144:25:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8943,"name":"uint256","nodeType":"ElementaryTypeName","src":"3144:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":8945,"nodeType":"VariableDeclarationStatement","src":"3144:25:61"},{"assignments":[8947],"declarations":[{"constant":false,"id":8947,"mutability":"mutable","name":"totalGovernanceFee","nameLocation":"3187:18:61","nodeType":"VariableDeclaration","scope":9038,"src":"3179:26:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8946,"name":"uint256","nodeType":"ElementaryTypeName","src":"3179:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":8948,"nodeType":"VariableDeclarationStatement","src":"3179:26:61"},{"expression":{"id":8958,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"components":[{"id":8949,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8941,"src":"3229:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":8950,"name":"bondReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8944,"src":"3261:17:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":8951,"name":"bondProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8889,"src":"3292:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":8952,"name":"totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8947,"src":"3318:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":8953,"isConstant":false,"isInlineArray":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"TupleExpression","src":"3215:131:61","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256,uint256)"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":8955,"name":"sharesDeposited","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8895,"src":"3368:15:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":8956,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8897,"src":"3385:10:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":8954,"name":"_calculateOpenLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9509,"src":"3349:18:61","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$_t_uint256_$returns$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"function (uint256,uint256) view returns (uint256,uint256,uint256,uint256)"}},"id":8957,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3349:47:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256,uint256)"}},"src":"3215:181:61","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8959,"nodeType":"ExpressionStatement","src":"3215:181:61"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8962,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":8960,"name":"_minOutput","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8875,"src":"3447:10:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":8961,"name":"bondProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8889,"src":"3460:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3447:25:61","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":8969,"nodeType":"IfStatement","src":"3443:88:61","trueBody":{"id":8968,"nodeType":"Block","src":"3474:57:61","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":8963,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"3495:11:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IHyperdrive_$5658_$","typeString":"type(contract IHyperdrive)"}},"id":8965,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3507:11:61","memberName":"OutputLimit","nodeType":"MemberAccess","referencedDeclaration":5532,"src":"3495:23:61","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":8966,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3495:25:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8967,"nodeType":"RevertStatement","src":"3488:32:61"}]}},{"expression":{"id":8972,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":8970,"name":"_governanceFeesAccrued","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10995,"src":"3582:22:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"id":8971,"name":"totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8947,"src":"3608:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3582:44:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":8973,"nodeType":"ExpressionStatement","src":"3582:44:61"},{"expression":{"id":8978,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":8974,"name":"maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8887,"src":"3682:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":8977,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":8975,"name":"latestCheckpoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8931,"src":"3697:16:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":8976,"name":"_positionDuration","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10948,"src":"3716:17:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3697:36:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3682:51:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":8979,"nodeType":"ExpressionStatement","src":"3682:51:61"},{"expression":{"arguments":[{"id":8981,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8941,"src":"3771:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":8982,"name":"bondProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8889,"src":"3803:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":8983,"name":"bondReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8944,"src":"3829:17:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":8984,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8897,"src":"3860:10:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":8985,"name":"maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8887,"src":"3884:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":8980,"name":"_applyOpenLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9306,"src":"3743:14:61","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$__$","typeString":"function (uint256,uint256,uint256,uint256,uint256)"}},"id":8986,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3743:163:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":8987,"nodeType":"ExpressionStatement","src":"3743:163:61"},{"assignments":[8989],"declarations":[{"constant":false,"id":8989,"mutability":"mutable","name":"assetId","nameLocation":"3998:7:61","nodeType":"VariableDeclaration","scope":9038,"src":"3990:15:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8988,"name":"uint256","nodeType":"ElementaryTypeName","src":"3990:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":8997,"initialValue":{"arguments":[{"expression":{"expression":{"id":8992,"name":"AssetId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11509,"src":"4043:7:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_AssetId_$11509_$","typeString":"type(library AssetId)"}},"id":8993,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4051:13:61","memberName":"AssetIdPrefix","nodeType":"MemberAccess","referencedDeclaration":11215,"src":"4043:21:61","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_AssetIdPrefix_$11215_$","typeString":"type(enum AssetId.AssetIdPrefix)"}},"id":8994,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"4065:4:61","memberName":"Long","nodeType":"MemberAccess","referencedDeclaration":11212,"src":"4043:26:61","typeDescriptions":{"typeIdentifier":"t_enum$_AssetIdPrefix_$11215","typeString":"enum AssetId.AssetIdPrefix"}},{"id":8995,"name":"maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8887,"src":"4083:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_enum$_AssetIdPrefix_$11215","typeString":"enum AssetId.AssetIdPrefix"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":8990,"name":"AssetId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11509,"src":"4008:7:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_AssetId_$11509_$","typeString":"type(library AssetId)"}},"id":8991,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4016:13:61","memberName":"encodeAssetId","nodeType":"MemberAccess","referencedDeclaration":11238,"src":"4008:21:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_enum$_AssetIdPrefix_$11215_$_t_uint256_$returns$_t_uint256_$","typeString":"function (enum AssetId.AssetIdPrefix,uint256) pure returns (uint256)"}},"id":8996,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4008:97:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"3990:115:61"},{"expression":{"arguments":[{"id":8999,"name":"assetId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8989,"src":"4121:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":9000,"name":"_options","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8880,"src":"4130:8:61","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}},"id":9001,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4139:11:61","memberName":"destination","nodeType":"MemberAccess","referencedDeclaration":5476,"src":"4130:20:61","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":9002,"name":"bondProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8889,"src":"4152:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":8998,"name":"_mint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9904,"src":"4115:5:61","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$_t_address_$_t_uint256_$returns$__$","typeString":"function (uint256,address,uint256)"}},"id":9003,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4115:50:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9004,"nodeType":"ExpressionStatement","src":"4115:50:61"},{"assignments":[9006],"declarations":[{"constant":false,"id":9006,"mutability":"mutable","name":"amount","nameLocation":"4219:6:61","nodeType":"VariableDeclaration","scope":9038,"src":"4211:14:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9005,"name":"uint256","nodeType":"ElementaryTypeName","src":"4211:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9008,"initialValue":{"id":9007,"name":"_amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8873,"src":"4228:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4211:24:61"},{"assignments":[9013],"declarations":[{"constant":false,"id":9013,"mutability":"mutable","name":"options","nameLocation":"4305:7:61","nodeType":"VariableDeclaration","scope":9038,"src":"4276:36:61","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options"},"typeName":{"id":9012,"nodeType":"UserDefinedTypeName","pathNode":{"id":9011,"name":"IHyperdrive.Options","nameLocations":["4276:11:61","4288:7:61"],"nodeType":"IdentifierPath","referencedDeclaration":5483,"src":"4276:19:61"},"referencedDeclaration":5483,"src":"4276:19:61","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_storage_ptr","typeString":"struct IHyperdrive.Options"}},"visibility":"internal"}],"id":9015,"initialValue":{"id":9014,"name":"_options","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8880,"src":"4315:8:61","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}},"nodeType":"VariableDeclarationStatement","src":"4276:47:61"},{"assignments":[9017],"declarations":[{"constant":false,"id":9017,"mutability":"mutable","name":"_bondProceeds","nameLocation":"4372:13:61","nodeType":"VariableDeclaration","scope":9038,"src":"4364:21:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9016,"name":"uint256","nodeType":"ElementaryTypeName","src":"4364:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9019,"initialValue":{"id":9018,"name":"bondProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8889,"src":"4388:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4364:36:61"},{"eventCall":{"arguments":[{"expression":{"id":9021,"name":"_options","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8880,"src":"4468:8:61","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}},"id":9022,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4477:11:61","memberName":"destination","nodeType":"MemberAccess","referencedDeclaration":5476,"src":"4468:20:61","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":9023,"name":"assetId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8989,"src":"4502:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9024,"name":"maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8887,"src":"4523:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"arguments":[{"id":9026,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9006,"src":"4574:6:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9027,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8897,"src":"4582:10:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9028,"name":"options","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9013,"src":"4594:7:61","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}],"id":9025,"name":"_convertToBaseFromOption","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7553,"src":"4549:24:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_struct$_Options_$5483_calldata_ptr_$returns$_t_uint256_$","typeString":"function (uint256,uint256,struct IHyperdrive.Options calldata) pure returns (uint256)"}},"id":9029,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4549:53:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9030,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8897,"src":"4616:10:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9031,"name":"_bondProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9017,"src":"4640:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9020,"name":"OpenLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6623,"src":"4446:8:61","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$__$","typeString":"function (address,uint256,uint256,uint256,uint256,uint256)"}},"id":9032,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4446:217:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9033,"nodeType":"EmitStatement","src":"4441:222:61"},{"expression":{"components":[{"id":9034,"name":"maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8887,"src":"4682:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9035,"name":"_bondProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9017,"src":"4696:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":9036,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"4681:29:61","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256)"}},"functionReturnParameters":8890,"id":9037,"nodeType":"Return","src":"4674:36:61"}]},"documentation":{"id":8871,"nodeType":"StructuredDocumentation","src":"935:583:61","text":"@dev Opens a long position.\n @param _amount The amount to open a long with.\n @param _minOutput The minimum number of bonds to receive.\n @param _minSharePrice The minimum share price at which to open the long.\n        This allows traders to protect themselves from opening a long in\n        a checkpoint where negative interest has accrued.\n @param _options The options that configure how the trade is settled.\n @return maturityTime The maturity time of the bonds.\n @return bondProceeds The amount of bonds the user received"},"implemented":true,"kind":"function","modifiers":[{"id":8883,"kind":"modifierInvocation","modifierName":{"id":8882,"name":"nonReentrant","nameLocations":["1705:12:61"],"nodeType":"IdentifierPath","referencedDeclaration":65498,"src":"1705:12:61"},"nodeType":"ModifierInvocation","src":"1705:12:61"},{"id":8885,"kind":"modifierInvocation","modifierName":{"id":8884,"name":"isNotPaused","nameLocations":["1726:11:61"],"nodeType":"IdentifierPath","referencedDeclaration":6754,"src":"1726:11:61"},"nodeType":"ModifierInvocation","src":"1726:11:61"}],"name":"_openLong","nameLocation":"1532:9:61","parameters":{"id":8881,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8873,"mutability":"mutable","name":"_amount","nameLocation":"1559:7:61","nodeType":"VariableDeclaration","scope":9039,"src":"1551:15:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8872,"name":"uint256","nodeType":"ElementaryTypeName","src":"1551:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":8875,"mutability":"mutable","name":"_minOutput","nameLocation":"1584:10:61","nodeType":"VariableDeclaration","scope":9039,"src":"1576:18:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8874,"name":"uint256","nodeType":"ElementaryTypeName","src":"1576:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":8877,"mutability":"mutable","name":"_minSharePrice","nameLocation":"1612:14:61","nodeType":"VariableDeclaration","scope":9039,"src":"1604:22:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8876,"name":"uint256","nodeType":"ElementaryTypeName","src":"1604:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":8880,"mutability":"mutable","name":"_options","nameLocation":"1665:8:61","nodeType":"VariableDeclaration","scope":9039,"src":"1636:37:61","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options"},"typeName":{"id":8879,"nodeType":"UserDefinedTypeName","pathNode":{"id":8878,"name":"IHyperdrive.Options","nameLocations":["1636:11:61","1648:7:61"],"nodeType":"IdentifierPath","referencedDeclaration":5483,"src":"1636:19:61"},"referencedDeclaration":5483,"src":"1636:19:61","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_storage_ptr","typeString":"struct IHyperdrive.Options"}},"visibility":"internal"}],"src":"1541:138:61"},"returnParameters":{"id":8890,"nodeType":"ParameterList","parameters":[{"constant":false,"id":8887,"mutability":"mutable","name":"maturityTime","nameLocation":"1763:12:61","nodeType":"VariableDeclaration","scope":9039,"src":"1755:20:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8886,"name":"uint256","nodeType":"ElementaryTypeName","src":"1755:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":8889,"mutability":"mutable","name":"bondProceeds","nameLocation":"1785:12:61","nodeType":"VariableDeclaration","scope":9039,"src":"1777:20:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":8888,"name":"uint256","nodeType":"ElementaryTypeName","src":"1777:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1754:44:61"},"scope":9637,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":9204,"nodeType":"FunctionDefinition","src":"5123:3685:61","nodes":[],"body":{"id":9203,"nodeType":"Block","src":"5324:3484:61","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9058,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9056,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9044,"src":"5338:11:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":9057,"name":"_minimumTransactionAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10972,"src":"5352:25:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5338:39:61","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":9065,"nodeType":"IfStatement","src":"5334:115:61","trueBody":{"id":9064,"nodeType":"Block","src":"5379:70:61","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":9059,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"5400:11:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IHyperdrive_$5658_$","typeString":"type(contract IHyperdrive)"}},"id":9061,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5412:24:61","memberName":"MinimumTransactionAmount","nodeType":"MemberAccess","referencedDeclaration":5522,"src":"5400:36:61","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":9062,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5400:38:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9063,"nodeType":"RevertStatement","src":"5393:45:61"}]}},{"assignments":[9067],"declarations":[{"constant":false,"id":9067,"mutability":"mutable","name":"sharePrice","nameLocation":"5690:10:61","nodeType":"VariableDeclaration","scope":9203,"src":"5682:18:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9066,"name":"uint256","nodeType":"ElementaryTypeName","src":"5682:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9070,"initialValue":{"arguments":[],"expression":{"argumentTypes":[],"id":9068,"name":"_pricePerShare","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6741,"src":"5703:14:61","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":9069,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5703:16:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"5682:37:61"},{"expression":{"arguments":[{"id":9072,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9042,"src":"5746:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9073,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9067,"src":"5761:10:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9071,"name":"_applyCheckpoint","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6764,"src":"5729:16:61","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) returns (uint256)"}},"id":9074,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5729:43:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9075,"nodeType":"ExpressionStatement","src":"5729:43:61"},{"expression":{"arguments":[{"arguments":[{"expression":{"expression":{"id":9079,"name":"AssetId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11509,"src":"5873:7:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_AssetId_$11509_$","typeString":"type(library AssetId)"}},"id":9080,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5881:13:61","memberName":"AssetIdPrefix","nodeType":"MemberAccess","referencedDeclaration":11215,"src":"5873:21:61","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_AssetIdPrefix_$11215_$","typeString":"type(enum AssetId.AssetIdPrefix)"}},"id":9081,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"5895:4:61","memberName":"Long","nodeType":"MemberAccess","referencedDeclaration":11212,"src":"5873:26:61","typeDescriptions":{"typeIdentifier":"t_enum$_AssetIdPrefix_$11215","typeString":"enum AssetId.AssetIdPrefix"}},{"id":9082,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9042,"src":"5901:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_enum$_AssetIdPrefix_$11215","typeString":"enum AssetId.AssetIdPrefix"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":9077,"name":"AssetId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11509,"src":"5851:7:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_AssetId_$11509_$","typeString":"type(library AssetId)"}},"id":9078,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5859:13:61","memberName":"encodeAssetId","nodeType":"MemberAccess","referencedDeclaration":11238,"src":"5851:21:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_enum$_AssetIdPrefix_$11215_$_t_uint256_$returns$_t_uint256_$","typeString":"function (enum AssetId.AssetIdPrefix,uint256) pure returns (uint256)"}},"id":9083,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5851:64:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":9084,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"5929:3:61","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":9085,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5933:6:61","memberName":"sender","nodeType":"MemberAccess","src":"5929:10:61","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":9086,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9044,"src":"5953:11:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9076,"name":"_burn","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9941,"src":"5832:5:61","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$_t_address_$_t_uint256_$returns$__$","typeString":"function (uint256,address,uint256)"}},"id":9087,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5832:142:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9088,"nodeType":"ExpressionStatement","src":"5832:142:61"},{"assignments":[9090,9092,9094,9096,9098],"declarations":[{"constant":false,"id":9090,"mutability":"mutable","name":"bondReservesDelta","nameLocation":"6158:17:61","nodeType":"VariableDeclaration","scope":9203,"src":"6150:25:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9089,"name":"uint256","nodeType":"ElementaryTypeName","src":"6150:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9092,"mutability":"mutable","name":"shareProceeds","nameLocation":"6197:13:61","nodeType":"VariableDeclaration","scope":9203,"src":"6189:21:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9091,"name":"uint256","nodeType":"ElementaryTypeName","src":"6189:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9094,"mutability":"mutable","name":"shareReservesDelta","nameLocation":"6232:18:61","nodeType":"VariableDeclaration","scope":9203,"src":"6224:26:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9093,"name":"uint256","nodeType":"ElementaryTypeName","src":"6224:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9096,"mutability":"mutable","name":"shareAdjustmentDelta","nameLocation":"6271:20:61","nodeType":"VariableDeclaration","scope":9203,"src":"6264:27:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":9095,"name":"int256","nodeType":"ElementaryTypeName","src":"6264:6:61","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":9098,"mutability":"mutable","name":"totalGovernanceFee","nameLocation":"6313:18:61","nodeType":"VariableDeclaration","scope":9203,"src":"6305:26:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9097,"name":"uint256","nodeType":"ElementaryTypeName","src":"6305:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9104,"initialValue":{"arguments":[{"id":9100,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9044,"src":"6364:11:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9101,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9067,"src":"6377:10:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9102,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9042,"src":"6389:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9099,"name":"_calculateCloseLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9636,"src":"6344:19:61","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$_t_uint256_$_t_uint256_$_t_int256_$_t_uint256_$","typeString":"function (uint256,uint256,uint256) view returns (uint256,uint256,uint256,int256,uint256)"}},"id":9103,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6344:59:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$_t_int256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256,int256,uint256)"}},"nodeType":"VariableDeclarationStatement","src":"6136:267:61"},{"assignments":[9106],"declarations":[{"constant":false,"id":9106,"mutability":"mutable","name":"maturityTime","nameLocation":"6612:12:61","nodeType":"VariableDeclaration","scope":9203,"src":"6604:20:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9105,"name":"uint256","nodeType":"ElementaryTypeName","src":"6604:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9108,"initialValue":{"id":9107,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9042,"src":"6627:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"6604:36:61"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9112,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":9109,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"6685:5:61","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":9110,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6691:9:61","memberName":"timestamp","nodeType":"MemberAccess","src":"6685:15:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":9111,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9042,"src":"6703:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6685:31:61","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":9153,"nodeType":"Block","src":"7516:283:61","statements":[{"expression":{"id":9151,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9146,"name":"shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9092,"src":"7728:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":9148,"name":"shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9092,"src":"7762:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9149,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9067,"src":"7777:10:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9147,"name":"_applyZombieClose","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7231,"src":"7744:17:61","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) returns (uint256)"}},"id":9150,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7744:44:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7728:60:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9152,"nodeType":"ExpressionStatement","src":"7728:60:61"}]},"id":9154,"nodeType":"IfStatement","src":"6681:1118:61","trueBody":{"id":9145,"nodeType":"Block","src":"6718:792:61","statements":[{"expression":{"id":9115,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9113,"name":"_governanceFeesAccrued","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10995,"src":"6777:22:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"id":9114,"name":"totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9098,"src":"6803:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6777:44:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9116,"nodeType":"ExpressionStatement","src":"6777:44:61"},{"expression":{"arguments":[{"id":9118,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9044,"src":"6868:11:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9119,"name":"bondReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9090,"src":"6897:17:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9120,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9094,"src":"6932:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9121,"name":"shareAdjustmentDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9096,"src":"6968:20:61","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":9122,"name":"maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9106,"src":"7006:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_int256","typeString":"int256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9117,"name":"_applyCloseLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9407,"src":"6835:15:61","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$_t_uint256_$_t_uint256_$_t_int256_$_t_uint256_$returns$__$","typeString":"function (uint256,uint256,uint256,int256,uint256)"}},"id":9123,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6835:197:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9124,"nodeType":"ExpressionStatement","src":"6835:197:61"},{"assignments":[9126],"declarations":[{"constant":false,"id":9126,"mutability":"mutable","name":"nonNettedLongs","nameLocation":"7206:14:61","nodeType":"VariableDeclaration","scope":9145,"src":"7199:21:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":9125,"name":"int256","nodeType":"ElementaryTypeName","src":"7199:6:61","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"id":9130,"initialValue":{"arguments":[{"id":9128,"name":"maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9106,"src":"7239:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9127,"name":"_nonNettedLongs","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6902,"src":"7223:15:61","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$returns$_t_int256_$","typeString":"function (uint256) view returns (int256)"}},"id":9129,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7223:29:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"VariableDeclarationStatement","src":"7199:53:61"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":9137,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9132,"name":"nonNettedLongs","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9126,"src":"7303:14:61","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"arguments":[{"id":9135,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9044,"src":"7327:11:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9134,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"7320:6:61","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":9133,"name":"int256","nodeType":"ElementaryTypeName","src":"7320:6:61","typeDescriptions":{}}},"id":9136,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7320:19:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"7303:36:61","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":9138,"name":"nonNettedLongs","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9126,"src":"7357:14:61","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"},{"typeIdentifier":"t_int256","typeString":"int256"}],"id":9131,"name":"_updateLongExposure","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7141,"src":"7266:19:61","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_int256_$_t_int256_$returns$__$","typeString":"function (int256,int256)"}},"id":9139,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7266:119:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9140,"nodeType":"ExpressionStatement","src":"7266:119:61"},{"expression":{"arguments":[{"id":9142,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9067,"src":"7488:10:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9141,"name":"_distributeExcessIdle","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8764,"src":"7466:21:61","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$returns$__$","typeString":"function (uint256)"}},"id":9143,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7466:33:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9144,"nodeType":"ExpressionStatement","src":"7466:33:61"}]}},{"assignments":[9156],"declarations":[{"constant":false,"id":9156,"mutability":"mutable","name":"proceeds","nameLocation":"7863:8:61","nodeType":"VariableDeclaration","scope":9203,"src":"7855:16:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9155,"name":"uint256","nodeType":"ElementaryTypeName","src":"7855:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9162,"initialValue":{"arguments":[{"id":9158,"name":"shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9092,"src":"7884:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9159,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9067,"src":"7899:10:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9160,"name":"_options","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9049,"src":"7911:8:61","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}],"id":9157,"name":"_withdraw","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6735,"src":"7874:9:61","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$_t_uint256_$_t_struct$_Options_$5483_calldata_ptr_$returns$_t_uint256_$","typeString":"function (uint256,uint256,struct IHyperdrive.Options calldata) returns (uint256)"}},"id":9161,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7874:46:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"7855:65:61"},{"assignments":[9164],"declarations":[{"constant":false,"id":9164,"mutability":"mutable","name":"baseProceeds","nameLocation":"8207:12:61","nodeType":"VariableDeclaration","scope":9203,"src":"8199:20:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9163,"name":"uint256","nodeType":"ElementaryTypeName","src":"8199:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9170,"initialValue":{"arguments":[{"id":9166,"name":"proceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9156,"src":"8260:8:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9167,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9067,"src":"8282:10:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9168,"name":"_options","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9049,"src":"8306:8:61","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}],"id":9165,"name":"_convertToBaseFromOption","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7553,"src":"8222:24:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_struct$_Options_$5483_calldata_ptr_$returns$_t_uint256_$","typeString":"function (uint256,uint256,struct IHyperdrive.Options calldata) pure returns (uint256)"}},"id":9169,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8222:102:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"8199:125:61"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9173,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9171,"name":"_minOutput","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9046,"src":"8338:10:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":9172,"name":"baseProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9164,"src":"8351:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"8338:25:61","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":9180,"nodeType":"IfStatement","src":"8334:88:61","trueBody":{"id":9179,"nodeType":"Block","src":"8365:57:61","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":9174,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"8386:11:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IHyperdrive_$5658_$","typeString":"type(contract IHyperdrive)"}},"id":9176,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"8398:11:61","memberName":"OutputLimit","nodeType":"MemberAccess","referencedDeclaration":5532,"src":"8386:23:61","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":9177,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8386:25:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9178,"nodeType":"RevertStatement","src":"8379:32:61"}]}},{"assignments":[9182],"declarations":[{"constant":false,"id":9182,"mutability":"mutable","name":"bondAmount","nameLocation":"8475:10:61","nodeType":"VariableDeclaration","scope":9203,"src":"8467:18:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9181,"name":"uint256","nodeType":"ElementaryTypeName","src":"8467:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9184,"initialValue":{"id":9183,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9044,"src":"8488:11:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"8467:32:61"},{"eventCall":{"arguments":[{"expression":{"id":9186,"name":"_options","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9049,"src":"8568:8:61","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options calldata"}},"id":9187,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"8577:11:61","memberName":"destination","nodeType":"MemberAccess","referencedDeclaration":5476,"src":"8568:20:61","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"arguments":[{"expression":{"expression":{"id":9190,"name":"AssetId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11509,"src":"8624:7:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_AssetId_$11509_$","typeString":"type(library AssetId)"}},"id":9191,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"8632:13:61","memberName":"AssetIdPrefix","nodeType":"MemberAccess","referencedDeclaration":11215,"src":"8624:21:61","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_AssetIdPrefix_$11215_$","typeString":"type(enum AssetId.AssetIdPrefix)"}},"id":9192,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"8646:4:61","memberName":"Long","nodeType":"MemberAccess","referencedDeclaration":11212,"src":"8624:26:61","typeDescriptions":{"typeIdentifier":"t_enum$_AssetIdPrefix_$11215","typeString":"enum AssetId.AssetIdPrefix"}},{"id":9193,"name":"maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9106,"src":"8652:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_enum$_AssetIdPrefix_$11215","typeString":"enum AssetId.AssetIdPrefix"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":9188,"name":"AssetId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":11509,"src":"8602:7:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_AssetId_$11509_$","typeString":"type(library AssetId)"}},"id":9189,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"8610:13:61","memberName":"encodeAssetId","nodeType":"MemberAccess","referencedDeclaration":11238,"src":"8602:21:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_enum$_AssetIdPrefix_$11215_$_t_uint256_$returns$_t_uint256_$","typeString":"function (enum AssetId.AssetIdPrefix,uint256) pure returns (uint256)"}},"id":9194,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8602:63:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9195,"name":"maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9106,"src":"8679:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9196,"name":"baseProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9164,"src":"8705:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9197,"name":"sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9067,"src":"8731:10:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9198,"name":"bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9182,"src":"8755:10:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9185,"name":"CloseLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6651,"src":"8545:9:61","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$__$","typeString":"function (address,uint256,uint256,uint256,uint256,uint256)"}},"id":9199,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8545:230:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9200,"nodeType":"EmitStatement","src":"8540:235:61"},{"expression":{"id":9201,"name":"proceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9156,"src":"8793:8:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":9055,"id":9202,"nodeType":"Return","src":"8786:15:61"}]},"documentation":{"id":9040,"nodeType":"StructuredDocumentation","src":"4723:395:61","text":"@dev Closes a long position with a specified maturity time.\n @param _maturityTime The maturity time of the short.\n @param _bondAmount The amount of longs to close.\n @param _minOutput The minimum amount of base the trader will accept.\n @param _options The options that configure how the trade is settled.\n @return The amount of underlying the user receives."},"implemented":true,"kind":"function","modifiers":[{"id":9052,"kind":"modifierInvocation","modifierName":{"id":9051,"name":"nonReentrant","nameLocations":["5293:12:61"],"nodeType":"IdentifierPath","referencedDeclaration":65498,"src":"5293:12:61"},"nodeType":"ModifierInvocation","src":"5293:12:61"}],"name":"_closeLong","nameLocation":"5132:10:61","parameters":{"id":9050,"nodeType":"ParameterList","parameters":[{"constant":false,"id":9042,"mutability":"mutable","name":"_maturityTime","nameLocation":"5160:13:61","nodeType":"VariableDeclaration","scope":9204,"src":"5152:21:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9041,"name":"uint256","nodeType":"ElementaryTypeName","src":"5152:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9044,"mutability":"mutable","name":"_bondAmount","nameLocation":"5191:11:61","nodeType":"VariableDeclaration","scope":9204,"src":"5183:19:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9043,"name":"uint256","nodeType":"ElementaryTypeName","src":"5183:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9046,"mutability":"mutable","name":"_minOutput","nameLocation":"5220:10:61","nodeType":"VariableDeclaration","scope":9204,"src":"5212:18:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9045,"name":"uint256","nodeType":"ElementaryTypeName","src":"5212:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9049,"mutability":"mutable","name":"_options","nameLocation":"5269:8:61","nodeType":"VariableDeclaration","scope":9204,"src":"5240:37:61","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_calldata_ptr","typeString":"struct IHyperdrive.Options"},"typeName":{"id":9048,"nodeType":"UserDefinedTypeName","pathNode":{"id":9047,"name":"IHyperdrive.Options","nameLocations":["5240:11:61","5252:7:61"],"nodeType":"IdentifierPath","referencedDeclaration":5483,"src":"5240:19:61"},"referencedDeclaration":5483,"src":"5240:19:61","typeDescriptions":{"typeIdentifier":"t_struct$_Options_$5483_storage_ptr","typeString":"struct IHyperdrive.Options"}},"visibility":"internal"}],"src":"5142:141:61"},"returnParameters":{"id":9055,"nodeType":"ParameterList","parameters":[{"constant":false,"id":9054,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":9204,"src":"5315:7:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9053,"name":"uint256","nodeType":"ElementaryTypeName","src":"5315:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"5314:9:61"},"scope":9637,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":9306,"nodeType":"FunctionDefinition","src":"9277:1686:61","nodes":[],"body":{"id":9305,"nodeType":"Block","src":"9480:1483:61","nodes":[],"statements":[{"assignments":[9219],"declarations":[{"constant":false,"id":9219,"mutability":"mutable","name":"longsOutstanding_","nameLocation":"9561:17:61","nodeType":"VariableDeclaration","scope":9305,"src":"9553:25:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"},"typeName":{"id":9218,"name":"uint128","nodeType":"ElementaryTypeName","src":"9553:7:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"visibility":"internal"}],"id":9222,"initialValue":{"expression":{"id":9220,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"9581:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9221,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"9594:16:61","memberName":"longsOutstanding","nodeType":"MemberAccess","referencedDeclaration":5303,"src":"9581:29:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"VariableDeclarationStatement","src":"9553:57:61"},{"expression":{"id":9244,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":9223,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"9620:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9225,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"9633:23:61","memberName":"longAverageMaturityTime","nodeType":"MemberAccess","referencedDeclaration":5312,"src":"9620:36:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"arguments":[{"arguments":[{"id":9234,"name":"longsOutstanding_","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9219,"src":"9787:17:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint128","typeString":"uint128"}],"id":9233,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"9779:7:61","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":9232,"name":"uint256","nodeType":"ElementaryTypeName","src":"9779:7:61","typeDescriptions":{}}},"id":9235,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9779:26:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9238,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9236,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9215,"src":"9823:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"31653138","id":9237,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"9839:4:61","typeDescriptions":{"typeIdentifier":"t_rational_1000000000000000000_by_1","typeString":"int_const 1000000000000000000"},"value":"1e18"},"src":"9823:20:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9239,"name":"_bondProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9209,"src":"9894:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"hexValue":"74727565","id":9240,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"9925:4:61","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_bool","typeString":"bool"}],"expression":{"arguments":[{"expression":{"id":9228,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"9680:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9229,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"9693:23:61","memberName":"longAverageMaturityTime","nodeType":"MemberAccess","referencedDeclaration":5312,"src":"9680:36:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint128","typeString":"uint128"}],"id":9227,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"9659:7:61","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":9226,"name":"uint256","nodeType":"ElementaryTypeName","src":"9659:7:61","typeDescriptions":{}}},"id":9230,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9659:67:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9231,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"9740:21:61","memberName":"updateWeightedAverage","nodeType":"MemberAccess","referencedDeclaration":12220,"src":"9659:102:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,bool) pure returns (uint256)"}},"id":9241,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9659:284:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9242,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"9957:9:61","memberName":"toUint128","nodeType":"MemberAccess","referencedDeclaration":15500,"src":"9659:307:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint128_$attached_to$_t_uint256_$","typeString":"function (uint256) pure returns (uint128)"}},"id":9243,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9659:309:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"9620:348:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":9245,"nodeType":"ExpressionStatement","src":"9620:348:61"},{"expression":{"id":9252,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":9246,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"10086:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9248,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"10099:13:61","memberName":"shareReserves","nodeType":"MemberAccess","referencedDeclaration":5294,"src":"10086:26:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":9249,"name":"_shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9207,"src":"10116:19:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9250,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"10136:9:61","memberName":"toUint128","nodeType":"MemberAccess","referencedDeclaration":15500,"src":"10116:29:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint128_$attached_to$_t_uint256_$","typeString":"function (uint256) pure returns (uint128)"}},"id":9251,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10116:31:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"10086:61:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":9253,"nodeType":"ExpressionStatement","src":"10086:61:61"},{"expression":{"id":9260,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":9254,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"10157:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9256,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"10170:12:61","memberName":"bondReserves","nodeType":"MemberAccess","referencedDeclaration":5297,"src":"10157:25:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"-=","rightHandSide":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":9257,"name":"_bondReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9211,"src":"10186:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9258,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"10205:9:61","memberName":"toUint128","nodeType":"MemberAccess","referencedDeclaration":15500,"src":"10186:28:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint128_$attached_to$_t_uint256_$","typeString":"function (uint256) pure returns (uint128)"}},"id":9259,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10186:30:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"10157:59:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":9261,"nodeType":"ExpressionStatement","src":"10157:59:61"},{"expression":{"id":9266,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9262,"name":"longsOutstanding_","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9219,"src":"10226:17:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":9263,"name":"_bondProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9209,"src":"10247:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9264,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"10261:9:61","memberName":"toUint128","nodeType":"MemberAccess","referencedDeclaration":15500,"src":"10247:23:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint128_$attached_to$_t_uint256_$","typeString":"function (uint256) pure returns (uint128)"}},"id":9265,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10247:25:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"10226:46:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":9267,"nodeType":"ExpressionStatement","src":"10226:46:61"},{"expression":{"id":9272,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":9268,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"10282:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9270,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"10295:16:61","memberName":"longsOutstanding","nodeType":"MemberAccess","referencedDeclaration":5303,"src":"10282:29:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":9271,"name":"longsOutstanding_","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9219,"src":"10314:17:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"10282:49:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":9273,"nodeType":"ExpressionStatement","src":"10282:49:61"},{"assignments":[9275],"declarations":[{"constant":false,"id":9275,"mutability":"mutable","name":"nonNettedLongs","nameLocation":"10493:14:61","nodeType":"VariableDeclaration","scope":9305,"src":"10486:21:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":9274,"name":"int256","nodeType":"ElementaryTypeName","src":"10486:6:61","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"id":9279,"initialValue":{"arguments":[{"id":9277,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9215,"src":"10526:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9276,"name":"_nonNettedLongs","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6902,"src":"10510:15:61","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$returns$_t_int256_$","typeString":"function (uint256) view returns (int256)"}},"id":9278,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10510:30:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"VariableDeclarationStatement","src":"10486:54:61"},{"expression":{"arguments":[{"id":9281,"name":"nonNettedLongs","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9275,"src":"10583:14:61","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":9287,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9282,"name":"nonNettedLongs","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9275,"src":"10611:14:61","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"arguments":[{"id":9285,"name":"_bondProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9209,"src":"10635:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9284,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"10628:6:61","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":9283,"name":"int256","nodeType":"ElementaryTypeName","src":"10628:6:61","typeDescriptions":{}}},"id":9286,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10628:21:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"10611:38:61","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"},{"typeIdentifier":"t_int256","typeString":"int256"}],"id":9280,"name":"_updateLongExposure","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7141,"src":"10550:19:61","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_int256_$_t_int256_$returns$__$","typeString":"function (int256,int256)"}},"id":9288,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10550:109:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9289,"nodeType":"ExpressionStatement","src":"10550:109:61"},{"condition":{"id":9293,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"10757:24:61","subExpression":{"arguments":[{"id":9291,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9213,"src":"10769:11:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9290,"name":"_isSolvent","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7082,"src":"10758:10:61","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$returns$_t_bool_$","typeString":"function (uint256) view returns (bool)"}},"id":9292,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10758:23:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":9300,"nodeType":"IfStatement","src":"10753:97:61","trueBody":{"id":9299,"nodeType":"Block","src":"10783:67:61","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":9294,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"10804:11:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IHyperdrive_$5658_$","typeString":"type(contract IHyperdrive)"}},"id":9296,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"10816:21:61","memberName":"InsufficientLiquidity","nodeType":"MemberAccess","referencedDeclaration":5518,"src":"10804:33:61","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":9297,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10804:35:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9298,"nodeType":"RevertStatement","src":"10797:42:61"}]}},{"expression":{"arguments":[{"id":9302,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9213,"src":"10944:11:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9301,"name":"_distributeExcessIdle","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8764,"src":"10922:21:61","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_uint256_$returns$__$","typeString":"function (uint256)"}},"id":9303,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10922:34:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9304,"nodeType":"ExpressionStatement","src":"10922:34:61"}]},"documentation":{"id":9205,"nodeType":"StructuredDocumentation","src":"8814:458:61","text":"@dev Applies an open long to the state. This includes updating the\n      reserves and maintaining the reserve invariants.\n @param _shareReservesDelta The amount of shares paid to the curve.\n @param _bondProceeds The amount of bonds purchased by the trader.\n @param _bondReservesDelta The amount of bonds sold by the curve.\n @param _sharePrice The share price.\n @param _maturityTime The maturity time of the long."},"implemented":true,"kind":"function","modifiers":[],"name":"_applyOpenLong","nameLocation":"9286:14:61","parameters":{"id":9216,"nodeType":"ParameterList","parameters":[{"constant":false,"id":9207,"mutability":"mutable","name":"_shareReservesDelta","nameLocation":"9318:19:61","nodeType":"VariableDeclaration","scope":9306,"src":"9310:27:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9206,"name":"uint256","nodeType":"ElementaryTypeName","src":"9310:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9209,"mutability":"mutable","name":"_bondProceeds","nameLocation":"9355:13:61","nodeType":"VariableDeclaration","scope":9306,"src":"9347:21:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9208,"name":"uint256","nodeType":"ElementaryTypeName","src":"9347:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9211,"mutability":"mutable","name":"_bondReservesDelta","nameLocation":"9386:18:61","nodeType":"VariableDeclaration","scope":9306,"src":"9378:26:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9210,"name":"uint256","nodeType":"ElementaryTypeName","src":"9378:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9213,"mutability":"mutable","name":"_sharePrice","nameLocation":"9422:11:61","nodeType":"VariableDeclaration","scope":9306,"src":"9414:19:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9212,"name":"uint256","nodeType":"ElementaryTypeName","src":"9414:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9215,"mutability":"mutable","name":"_maturityTime","nameLocation":"9451:13:61","nodeType":"VariableDeclaration","scope":9306,"src":"9443:21:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9214,"name":"uint256","nodeType":"ElementaryTypeName","src":"9443:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"9300:170:61"},"returnParameters":{"id":9217,"nodeType":"ParameterList","parameters":[],"src":"9480:0:61"},"scope":9637,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":9407,"nodeType":"FunctionDefinition","src":"11432:2273:61","nodes":[],"body":{"id":9406,"nodeType":"Block","src":"11643:2062:61","nodes":[],"statements":[{"id":9355,"nodeType":"Block","src":"11653:702:61","statements":[{"assignments":[9321],"declarations":[{"constant":false,"id":9321,"mutability":"mutable","name":"longsOutstanding_","nameLocation":"11675:17:61","nodeType":"VariableDeclaration","scope":9355,"src":"11667:25:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"},"typeName":{"id":9320,"name":"uint128","nodeType":"ElementaryTypeName","src":"11667:7:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"visibility":"internal"}],"id":9324,"initialValue":{"expression":{"id":9322,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"11695:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9323,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"11708:16:61","memberName":"longsOutstanding","nodeType":"MemberAccess","referencedDeclaration":5303,"src":"11695:29:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"VariableDeclarationStatement","src":"11667:57:61"},{"expression":{"id":9343,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":9325,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"11793:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9327,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"11806:23:61","memberName":"longAverageMaturityTime","nodeType":"MemberAccess","referencedDeclaration":5312,"src":"11793:36:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"arguments":[{"id":9334,"name":"longsOutstanding_","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9321,"src":"11968:17:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9337,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9335,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9317,"src":"12007:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"31653138","id":9336,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"12023:4:61","typeDescriptions":{"typeIdentifier":"t_rational_1000000000000000000_by_1","typeString":"int_const 1000000000000000000"},"value":"1e18"},"src":"12007:20:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9338,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9309,"src":"12082:11:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"hexValue":"66616c7365","id":9339,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"12115:5:61","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint128","typeString":"uint128"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_bool","typeString":"bool"}],"expression":{"arguments":[{"expression":{"id":9330,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"11857:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9331,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"11870:23:61","memberName":"longAverageMaturityTime","nodeType":"MemberAccess","referencedDeclaration":5312,"src":"11857:36:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint128","typeString":"uint128"}],"id":9329,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"11832:7:61","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":9328,"name":"uint256","nodeType":"ElementaryTypeName","src":"11832:7:61","typeDescriptions":{}}},"id":9332,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11832:75:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9333,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"11925:21:61","memberName":"updateWeightedAverage","nodeType":"MemberAccess","referencedDeclaration":12220,"src":"11832:114:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,bool) pure returns (uint256)"}},"id":9340,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11832:306:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9341,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"12156:9:61","memberName":"toUint128","nodeType":"MemberAccess","referencedDeclaration":15500,"src":"11832:333:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint128_$attached_to$_t_uint256_$","typeString":"function (uint256) pure returns (uint128)"}},"id":9342,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11832:335:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"11793:374:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":9344,"nodeType":"ExpressionStatement","src":"11793:374:61"},{"expression":{"id":9353,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":9345,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"12237:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9347,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"12250:16:61","memberName":"longsOutstanding","nodeType":"MemberAccess","referencedDeclaration":5303,"src":"12237:29:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint128","typeString":"uint128"},"id":9352,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9348,"name":"longsOutstanding_","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9321,"src":"12285:17:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":9349,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9309,"src":"12321:11:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9350,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"12333:9:61","memberName":"toUint128","nodeType":"MemberAccess","referencedDeclaration":15500,"src":"12321:21:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint128_$attached_to$_t_uint256_$","typeString":"function (uint256) pure returns (uint128)"}},"id":9351,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12321:23:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"12285:59:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"12237:107:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":9354,"nodeType":"ExpressionStatement","src":"12237:107:61"}]},{"expression":{"id":9362,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":9356,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"12876:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9358,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"12889:13:61","memberName":"shareReserves","nodeType":"MemberAccess","referencedDeclaration":5294,"src":"12876:26:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"-=","rightHandSide":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":9359,"name":"_shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9313,"src":"12906:19:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9360,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"12926:9:61","memberName":"toUint128","nodeType":"MemberAccess","referencedDeclaration":15500,"src":"12906:29:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint128_$attached_to$_t_uint256_$","typeString":"function (uint256) pure returns (uint128)"}},"id":9361,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12906:31:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"12876:61:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":9363,"nodeType":"ExpressionStatement","src":"12876:61:61"},{"expression":{"id":9370,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":9364,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"12947:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9366,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"12960:15:61","memberName":"shareAdjustment","nodeType":"MemberAccess","referencedDeclaration":5306,"src":"12947:28:61","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"nodeType":"Assignment","operator":"-=","rightHandSide":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":9367,"name":"_shareAdjustmentDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9315,"src":"12979:21:61","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"id":9368,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"13001:8:61","memberName":"toInt128","nodeType":"MemberAccess","referencedDeclaration":15540,"src":"12979:30:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_int256_$returns$_t_int128_$attached_to$_t_int256_$","typeString":"function (int256) pure returns (int128)"}},"id":9369,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12979:32:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"src":"12947:64:61","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"id":9371,"nodeType":"ExpressionStatement","src":"12947:64:61"},{"expression":{"id":9378,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"id":9372,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"13021:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9374,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"13034:12:61","memberName":"bondReserves","nodeType":"MemberAccess","referencedDeclaration":5297,"src":"13021:25:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":9375,"name":"_bondReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9311,"src":"13050:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9376,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"13069:9:61","memberName":"toUint128","nodeType":"MemberAccess","referencedDeclaration":15500,"src":"13050:28:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint128_$attached_to$_t_uint256_$","typeString":"function (uint256) pure returns (uint128)"}},"id":9377,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13050:30:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"src":"13021:59:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":9379,"nodeType":"ExpressionStatement","src":"13021:59:61"},{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":9398,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9386,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"expression":{"id":9382,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"13469:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9383,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"13482:13:61","memberName":"shareReserves","nodeType":"MemberAccess","referencedDeclaration":5294,"src":"13469:26:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint128","typeString":"uint128"}],"id":9381,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"13461:7:61","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":9380,"name":"uint256","nodeType":"ElementaryTypeName","src":"13461:7:61","typeDescriptions":{}}},"id":9384,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13461:35:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":9385,"name":"_minimumShareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10969,"src":"13499:21:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"13461:59:61","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":9397,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"arguments":[{"expression":{"id":9391,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"13551:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9392,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"13564:13:61","memberName":"shareReserves","nodeType":"MemberAccess","referencedDeclaration":5294,"src":"13551:26:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint128","typeString":"uint128"}],"id":9390,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"13543:7:61","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":9389,"name":"uint256","nodeType":"ElementaryTypeName","src":"13543:7:61","typeDescriptions":{}}},"id":9393,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13543:35:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9388,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"13536:6:61","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":9387,"name":"int256","nodeType":"ElementaryTypeName","src":"13536:6:61","typeDescriptions":{}}},"id":9394,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13536:43:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"expression":{"id":9395,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"13594:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9396,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"13607:15:61","memberName":"shareAdjustment","nodeType":"MemberAccess","referencedDeclaration":5306,"src":"13594:28:61","typeDescriptions":{"typeIdentifier":"t_int128","typeString":"int128"}},"src":"13536:86:61","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"13461:161:61","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":9405,"nodeType":"IfStatement","src":"13444:255:61","trueBody":{"id":9404,"nodeType":"Block","src":"13633:66:61","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":9399,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"13654:11:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IHyperdrive_$5658_$","typeString":"type(contract IHyperdrive)"}},"id":9401,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"13666:20:61","memberName":"InvalidShareReserves","nodeType":"MemberAccess","referencedDeclaration":5516,"src":"13654:32:61","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":9402,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13654:34:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9403,"nodeType":"RevertStatement","src":"13647:41:61"}]}}]},"documentation":{"id":9307,"nodeType":"StructuredDocumentation","src":"10969:458:61","text":"@dev Applies the trading deltas from a closed long to the reserves and\n      the withdrawal pool.\n @param _bondAmount The amount of longs that were closed.\n @param _bondReservesDelta The bonds to add to the reserves.\n @param _shareReservesDelta The shares to remove from the reserves.\n @param _shareAdjustmentDelta The amount to decrease the share adjustment.\n @param _maturityTime The maturity time of the long."},"implemented":true,"kind":"function","modifiers":[],"name":"_applyCloseLong","nameLocation":"11441:15:61","parameters":{"id":9318,"nodeType":"ParameterList","parameters":[{"constant":false,"id":9309,"mutability":"mutable","name":"_bondAmount","nameLocation":"11474:11:61","nodeType":"VariableDeclaration","scope":9407,"src":"11466:19:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9308,"name":"uint256","nodeType":"ElementaryTypeName","src":"11466:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9311,"mutability":"mutable","name":"_bondReservesDelta","nameLocation":"11503:18:61","nodeType":"VariableDeclaration","scope":9407,"src":"11495:26:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9310,"name":"uint256","nodeType":"ElementaryTypeName","src":"11495:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9313,"mutability":"mutable","name":"_shareReservesDelta","nameLocation":"11539:19:61","nodeType":"VariableDeclaration","scope":9407,"src":"11531:27:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9312,"name":"uint256","nodeType":"ElementaryTypeName","src":"11531:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9315,"mutability":"mutable","name":"_shareAdjustmentDelta","nameLocation":"11575:21:61","nodeType":"VariableDeclaration","scope":9407,"src":"11568:28:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":9314,"name":"int256","nodeType":"ElementaryTypeName","src":"11568:6:61","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":9317,"mutability":"mutable","name":"_maturityTime","nameLocation":"11614:13:61","nodeType":"VariableDeclaration","scope":9407,"src":"11606:21:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9316,"name":"uint256","nodeType":"ElementaryTypeName","src":"11606:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"11456:177:61"},"returnParameters":{"id":9319,"nodeType":"ParameterList","parameters":[],"src":"11643:0:61"},"scope":9637,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":9509,"nodeType":"FunctionDefinition","src":"14238:3653:61","nodes":[],"body":{"id":9508,"nodeType":"Block","src":"14545:3346:61","nodes":[],"statements":[{"expression":{"id":9435,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9423,"name":"bondReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9417,"src":"14706:17:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"arguments":[],"expression":{"argumentTypes":[],"id":9426,"name":"_effectiveShareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6867,"src":"14772:23:61","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":9427,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"14772:25:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":9428,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"14811:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9429,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"14824:12:61","memberName":"bondReserves","nodeType":"MemberAccess","referencedDeclaration":5297,"src":"14811:25:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},{"id":9430,"name":"_shareAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9410,"src":"14850:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9431,"name":"_timeStretch","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10951,"src":"14888:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9432,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9412,"src":"14914:11:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9433,"name":"_initialSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10966,"src":"14939:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint128","typeString":"uint128"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":9424,"name":"HyperdriveMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12857,"src":"14726:14:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_HyperdriveMath_$12857_$","typeString":"type(library HyperdriveMath)"}},"id":9425,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"14741:17:61","memberName":"calculateOpenLong","nodeType":"MemberAccess","referencedDeclaration":12591,"src":"14726:32:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,uint256,uint256) pure returns (uint256)"}},"id":9434,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"14726:241:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"14706:261:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9436,"nodeType":"ExpressionStatement","src":"14706:261:61"},{"assignments":[9438],"declarations":[{"constant":false,"id":9438,"mutability":"mutable","name":"spotPrice","nameLocation":"15108:9:61","nodeType":"VariableDeclaration","scope":9508,"src":"15100:17:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9437,"name":"uint256","nodeType":"ElementaryTypeName","src":"15100:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9448,"initialValue":{"arguments":[{"arguments":[],"expression":{"argumentTypes":[],"id":9441,"name":"_effectiveShareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6867,"src":"15167:23:61","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":9442,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"15167:25:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":9443,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"15206:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9444,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"15219:12:61","memberName":"bondReserves","nodeType":"MemberAccess","referencedDeclaration":5297,"src":"15206:25:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},{"id":9445,"name":"_initialSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10966,"src":"15245:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9446,"name":"_timeStretch","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10951,"src":"15277:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint128","typeString":"uint128"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":9439,"name":"HyperdriveMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12857,"src":"15120:14:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_HyperdriveMath_$12857_$","typeString":"type(library HyperdriveMath)"}},"id":9440,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"15135:18:61","memberName":"calculateSpotPrice","nodeType":"MemberAccess","referencedDeclaration":12340,"src":"15120:33:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256) pure returns (uint256)"}},"id":9447,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"15120:179:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"15100:199:61"},{"condition":{"arguments":[{"id":9450,"name":"_shareAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9410,"src":"15363:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9451,"name":"bondReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9417,"src":"15393:17:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"arguments":[{"id":9454,"name":"spotPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9438,"src":"15494:9:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9455,"name":"_curveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10954,"src":"15525:9:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9456,"name":"_flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10957,"src":"15556:8:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":9452,"name":"HyperdriveMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12857,"src":"15428:14:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_HyperdriveMath_$12857_$","typeString":"type(library HyperdriveMath)"}},"id":9453,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"15443:29:61","memberName":"calculateOpenLongMaxSpotPrice","nodeType":"MemberAccess","referencedDeclaration":12540,"src":"15428:44:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":9457,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"15428:154:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9449,"name":"_isNegativeInterest","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7046,"src":"15326:19:61","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_bool_$","typeString":"function (uint256,uint256,uint256) view returns (bool)"}},"id":9458,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"15326:270:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":9465,"nodeType":"IfStatement","src":"15309:360:61","trueBody":{"id":9464,"nodeType":"Block","src":"15607:62:61","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":9459,"name":"IHyperdrive","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5658,"src":"15628:11:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IHyperdrive_$5658_$","typeString":"type(contract IHyperdrive)"}},"id":9461,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"15640:16:61","memberName":"NegativeInterest","nodeType":"MemberAccess","referencedDeclaration":5524,"src":"15628:28:61","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":9462,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"15628:30:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9463,"nodeType":"RevertStatement","src":"15621:37:61"}]}},{"assignments":[9467,9469],"declarations":[{"constant":false,"id":9467,"mutability":"mutable","name":"curveFee","nameLocation":"15853:8:61","nodeType":"VariableDeclaration","scope":9508,"src":"15845:16:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9466,"name":"uint256","nodeType":"ElementaryTypeName","src":"15845:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9469,"mutability":"mutable","name":"governanceCurveFee","nameLocation":"15892:18:61","nodeType":"VariableDeclaration","scope":9508,"src":"15884:26:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9468,"name":"uint256","nodeType":"ElementaryTypeName","src":"15884:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9475,"initialValue":{"arguments":[{"id":9471,"name":"_shareAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9410,"src":"15958:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9472,"name":"spotPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9438,"src":"15972:9:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9473,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9412,"src":"15983:11:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9470,"name":"_calculateFeesGivenShares","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7457,"src":"15932:25:61","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$_t_uint256_$","typeString":"function (uint256,uint256,uint256) view returns (uint256,uint256)"}},"id":9474,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"15932:63:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256)"}},"nodeType":"VariableDeclarationStatement","src":"15831:164:61"},{"expression":{"id":9480,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9476,"name":"bondProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9419,"src":"16143:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9479,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9477,"name":"bondReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9417,"src":"16158:17:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":9478,"name":"curveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9467,"src":"16178:8:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"16158:28:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"16143:43:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9481,"nodeType":"ExpressionStatement","src":"16143:43:61"},{"expression":{"id":9486,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9482,"name":"bondReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9417,"src":"16840:17:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9485,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9483,"name":"bondProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9419,"src":"16860:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":9484,"name":"governanceCurveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9469,"src":"16875:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"16860:33:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"16840:53:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9487,"nodeType":"ExpressionStatement","src":"16840:53:61"},{"expression":{"id":9494,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9488,"name":"totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9421,"src":"17335:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":9491,"name":"spotPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9438,"src":"17399:9:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9492,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9412,"src":"17422:11:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":9489,"name":"governanceCurveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9469,"src":"17356:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9490,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"17375:10:61","memberName":"mulDivDown","nodeType":"MemberAccess","referencedDeclaration":11541,"src":"17356:29:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":9493,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"17356:87:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"17335:108:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9495,"nodeType":"ExpressionStatement","src":"17335:108:61"},{"expression":{"id":9500,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9496,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9415,"src":"17681:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9499,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9497,"name":"_shareAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9410,"src":"17702:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":9498,"name":"totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9421,"src":"17717:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"17702:33:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"17681:54:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9501,"nodeType":"ExpressionStatement","src":"17681:54:61"},{"expression":{"components":[{"id":9502,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9415,"src":"17767:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9503,"name":"bondReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9417,"src":"17799:17:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9504,"name":"bondProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9419,"src":"17830:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9505,"name":"totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9421,"src":"17856:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":9506,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"17753:131:61","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256,uint256)"}},"functionReturnParameters":9422,"id":9507,"nodeType":"Return","src":"17746:138:61"}]},"documentation":{"id":9408,"nodeType":"StructuredDocumentation","src":"13711:522:61","text":"@dev Calculate the pool reserve and trader deltas that result from\n      opening a long. This calculation includes trading fees.\n @param _shareAmount The amount of shares being paid to open the long.\n @param _sharePrice The current share price.\n @return shareReservesDelta The change in the share reserves.\n @return bondReservesDelta The change in the bond reserves.\n @return bondProceeds The proceeds in bonds.\n @return totalGovernanceFee The governance fee in shares."},"implemented":true,"kind":"function","modifiers":[],"name":"_calculateOpenLong","nameLocation":"14247:18:61","parameters":{"id":9413,"nodeType":"ParameterList","parameters":[{"constant":false,"id":9410,"mutability":"mutable","name":"_shareAmount","nameLocation":"14283:12:61","nodeType":"VariableDeclaration","scope":9509,"src":"14275:20:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9409,"name":"uint256","nodeType":"ElementaryTypeName","src":"14275:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9412,"mutability":"mutable","name":"_sharePrice","nameLocation":"14313:11:61","nodeType":"VariableDeclaration","scope":9509,"src":"14305:19:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9411,"name":"uint256","nodeType":"ElementaryTypeName","src":"14305:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"14265:65:61"},"returnParameters":{"id":9422,"nodeType":"ParameterList","parameters":[{"constant":false,"id":9415,"mutability":"mutable","name":"shareReservesDelta","nameLocation":"14399:18:61","nodeType":"VariableDeclaration","scope":9509,"src":"14391:26:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9414,"name":"uint256","nodeType":"ElementaryTypeName","src":"14391:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9417,"mutability":"mutable","name":"bondReservesDelta","nameLocation":"14439:17:61","nodeType":"VariableDeclaration","scope":9509,"src":"14431:25:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9416,"name":"uint256","nodeType":"ElementaryTypeName","src":"14431:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9419,"mutability":"mutable","name":"bondProceeds","nameLocation":"14478:12:61","nodeType":"VariableDeclaration","scope":9509,"src":"14470:20:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9418,"name":"uint256","nodeType":"ElementaryTypeName","src":"14470:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9421,"mutability":"mutable","name":"totalGovernanceFee","nameLocation":"14512:18:61","nodeType":"VariableDeclaration","scope":9509,"src":"14504:26:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9420,"name":"uint256","nodeType":"ElementaryTypeName","src":"14504:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"14377:163:61"},"scope":9637,"stateMutability":"view","virtual":false,"visibility":"internal"},{"id":9636,"nodeType":"FunctionDefinition","src":"18599:4613:61","nodes":[],"body":{"id":9635,"nodeType":"Block","src":"18979:4233:61","nodes":[],"statements":[{"assignments":[9530],"declarations":[{"constant":false,"id":9530,"mutability":"mutable","name":"shareCurveDelta","nameLocation":"19185:15:61","nodeType":"VariableDeclaration","scope":9635,"src":"19177:23:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9529,"name":"uint256","nodeType":"ElementaryTypeName","src":"19177:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9531,"nodeType":"VariableDeclarationStatement","src":"19177:23:61"},{"id":9602,"nodeType":"Block","src":"19210:2661:61","statements":[{"assignments":[9533],"declarations":[{"constant":false,"id":9533,"mutability":"mutable","name":"timeRemaining","nameLocation":"19653:13:61","nodeType":"VariableDeclaration","scope":9602,"src":"19645:21:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9532,"name":"uint256","nodeType":"ElementaryTypeName","src":"19645:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9537,"initialValue":{"arguments":[{"id":9535,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9516,"src":"19693:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9534,"name":"_calculateTimeRemaining","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6797,"src":"19669:23:61","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256) view returns (uint256)"}},"id":9536,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"19669:38:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"19645:62:61"},{"expression":{"id":9554,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"components":[{"id":9538,"name":"shareCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9530,"src":"19722:15:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9539,"name":"bondReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9519,"src":"19739:17:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9540,"name":"shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9521,"src":"19758:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":9541,"isConstant":false,"isInlineArray":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"TupleExpression","src":"19721:51:61","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256)"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"arguments":[],"expression":{"argumentTypes":[],"id":9544,"name":"_effectiveShareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6867,"src":"19847:23:61","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":9545,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"19847:25:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":9546,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"19894:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9547,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"19907:12:61","memberName":"bondReserves","nodeType":"MemberAccess","referencedDeclaration":5297,"src":"19894:25:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},{"id":9548,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9512,"src":"19941:11:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9549,"name":"timeRemaining","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9533,"src":"19974:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9550,"name":"_timeStretch","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10951,"src":"20009:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9551,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9514,"src":"20043:11:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9552,"name":"_initialSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10966,"src":"20076:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint128","typeString":"uint128"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":9542,"name":"HyperdriveMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12857,"src":"19775:14:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_HyperdriveMath_$12857_$","typeString":"type(library HyperdriveMath)"}},"id":9543,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"19807:18:61","memberName":"calculateCloseLong","nodeType":"MemberAccess","referencedDeclaration":12656,"src":"19775:50:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,uint256,uint256,uint256) pure returns (uint256,uint256,uint256)"}},"id":9553,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"19775:337:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256)"}},"src":"19721:391:61","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9555,"nodeType":"ExpressionStatement","src":"19721:391:61"},{"assignments":[9557],"declarations":[{"constant":false,"id":9557,"mutability":"mutable","name":"curveFee","nameLocation":"20361:8:61","nodeType":"VariableDeclaration","scope":9602,"src":"20353:16:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9556,"name":"uint256","nodeType":"ElementaryTypeName","src":"20353:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9558,"nodeType":"VariableDeclarationStatement","src":"20353:16:61"},{"assignments":[9560],"declarations":[{"constant":false,"id":9560,"mutability":"mutable","name":"flatFee","nameLocation":"20391:7:61","nodeType":"VariableDeclaration","scope":9602,"src":"20383:15:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9559,"name":"uint256","nodeType":"ElementaryTypeName","src":"20383:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9561,"nodeType":"VariableDeclarationStatement","src":"20383:15:61"},{"assignments":[9563],"declarations":[{"constant":false,"id":9563,"mutability":"mutable","name":"spotPrice","nameLocation":"20420:9:61","nodeType":"VariableDeclaration","scope":9602,"src":"20412:17:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9562,"name":"uint256","nodeType":"ElementaryTypeName","src":"20412:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":9573,"initialValue":{"arguments":[{"arguments":[],"expression":{"argumentTypes":[],"id":9566,"name":"_effectiveShareReserves","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6867,"src":"20483:23:61","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_uint256_$","typeString":"function () view returns (uint256)"}},"id":9567,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"20483:25:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":9568,"name":"_marketState","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10976,"src":"20526:12:61","typeDescriptions":{"typeIdentifier":"t_struct$_MarketState_$5328_storage","typeString":"struct IHyperdrive.MarketState storage ref"}},"id":9569,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"20539:12:61","memberName":"bondReserves","nodeType":"MemberAccess","referencedDeclaration":5297,"src":"20526:25:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},{"id":9570,"name":"_initialSharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10966,"src":"20569:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9571,"name":"_timeStretch","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10951,"src":"20605:12:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint128","typeString":"uint128"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":9564,"name":"HyperdriveMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12857,"src":"20432:14:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_HyperdriveMath_$12857_$","typeString":"type(library HyperdriveMath)"}},"id":9565,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"20447:18:61","memberName":"calculateSpotPrice","nodeType":"MemberAccess","referencedDeclaration":12340,"src":"20432:33:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256) pure returns (uint256)"}},"id":9572,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"20432:199:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"20412:219:61"},{"expression":{"id":9584,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"components":[{"id":9574,"name":"curveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9557,"src":"20663:8:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9575,"name":"flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9560,"src":"20699:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},null,{"id":9576,"name":"totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9527,"src":"20752:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":9577,"isConstant":false,"isInlineArray":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"TupleExpression","src":"20645:149:61","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$__$_t_uint256_$","typeString":"tuple(uint256,uint256,,uint256)"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":9579,"name":"_bondAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9512,"src":"20839:11:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9580,"name":"timeRemaining","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9533,"src":"20868:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9581,"name":"spotPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9563,"src":"20899:9:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9582,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9514,"src":"20926:11:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":9578,"name":"_calculateFeesGivenBonds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":7527,"src":"20797:24:61","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256) view returns (uint256,uint256,uint256,uint256)"}},"id":9583,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"20797:154:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256,uint256)"}},"src":"20645:306:61","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9585,"nodeType":"ExpressionStatement","src":"20645:306:61"},{"expression":{"id":9588,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9586,"name":"shareCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9530,"src":"21186:15:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"-=","rightHandSide":{"id":9587,"name":"curveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9557,"src":"21205:8:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"21186:27:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9589,"nodeType":"ExpressionStatement","src":"21186:27:61"},{"expression":{"id":9594,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9590,"name":"shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9521,"src":"21407:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"-=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9593,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9591,"name":"curveFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9557,"src":"21424:8:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":9592,"name":"flatFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9560,"src":"21435:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"21424:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"21407:35:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9595,"nodeType":"ExpressionStatement","src":"21407:35:61"},{"expression":{"id":9600,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":9596,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9523,"src":"21805:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9599,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9597,"name":"shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9521,"src":"21826:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":9598,"name":"totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9527,"src":"21842:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"21826:34:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"21805:55:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":9601,"nodeType":"ExpressionStatement","src":"21805:55:61"}]},{"expression":{"id":9633,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"components":[{"id":9603,"name":"shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9521,"src":"22165:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9604,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9523,"src":"22192:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9605,"name":"shareCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9530,"src":"22224:15:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9606,"name":"shareAdjustmentDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9525,"src":"22253:20:61","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":9607,"name":"totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9527,"src":"22287:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":9608,"isConstant":false,"isInlineArray":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"TupleExpression","src":"22151:164:61","typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$_t_int256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256,int256,uint256)"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":9611,"name":"shareProceeds","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9521,"src":"22379:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9612,"name":"shareReservesDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9523,"src":"22406:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9613,"name":"shareCurveDelta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9530,"src":"22438:15:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":9614,"name":"totalGovernanceFee","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9527,"src":"22467:18:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"baseExpression":{"id":9615,"name":"_checkpoints","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10986,"src":"22946:12:61","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Checkpoint_$5332_storage_$","typeString":"mapping(uint256 => struct IHyperdrive.Checkpoint storage ref)"}},"id":9619,"indexExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9618,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":9616,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9516,"src":"22959:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":9617,"name":"_positionDuration","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10948,"src":"22975:17:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"22959:33:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"22946:47:61","typeDescriptions":{"typeIdentifier":"t_struct$_Checkpoint_$5332_storage","typeString":"struct IHyperdrive.Checkpoint storage ref"}},"id":9620,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"22994:10:61","memberName":"sharePrice","nodeType":"MemberAccess","referencedDeclaration":5331,"src":"22946:58:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":9624,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":9621,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"23038:5:61","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":9622,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"23044:9:61","memberName":"timestamp","nodeType":"MemberAccess","src":"23038:15:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":9623,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9516,"src":"23056:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"23038:31:61","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"expression":{"baseExpression":{"id":9626,"name":"_checkpoints","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":10986,"src":"23118:12:61","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint256_$_t_struct$_Checkpoint_$5332_storage_$","typeString":"mapping(uint256 => struct IHyperdrive.Checkpoint storage ref)"}},"id":9628,"indexExpression":{"id":9627,"name":"_maturityTime","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9516,"src":"23131:13:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"23118:27:61","typeDescriptions":{"typeIdentifier":"t_struct$_Checkpoint_$5332_storage","typeString":"struct IHyperdrive.Checkpoint storage ref"}},"id":9629,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"23146:10:61","memberName":"sharePrice","nodeType":"MemberAccess","referencedDeclaration":5331,"src":"23118:38:61","typeDescriptions":{"typeIdentifier":"t_uint128","typeString":"uint128"}},"id":9630,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"23038:118:61","trueExpression":{"id":9625,"name":"_sharePrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":9514,"src":"23088:11:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"hexValue":"74727565","id":9631,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"23191:4:61","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint128","typeString":"uint128"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_bool","typeString":"bool"}],"expression":{"id":9609,"name":"HyperdriveMath","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":12857,"src":"22318:14:61","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_HyperdriveMath_$12857_$","typeString":"type(library HyperdriveMath)"}},"id":9610,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"22333:32:61","memberName":"calculateNegativeInterestOnClose","nodeType":"MemberAccess","referencedDeclaration":12856,"src":"22318:47:61","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_bool_$returns$_t_uint256_$_t_uint256_$_t_uint256_$_t_int256_$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,uint256,uint256,bool) pure returns (uint256,uint256,uint256,int256,uint256)"}},"id":9632,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"22318:887:61","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_uint256_$_t_uint256_$_t_uint256_$_t_int256_$_t_uint256_$","typeString":"tuple(uint256,uint256,uint256,int256,uint256)"}},"src":"22151:1054:61","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":9634,"nodeType":"ExpressionStatement","src":"22151:1054:61"}]},"documentation":{"id":9510,"nodeType":"StructuredDocumentation","src":"17897:697:61","text":"@dev Calculate the pool reserve and trader deltas that result from\n      closing a long. This calculation includes trading fees.\n @param _bondAmount The amount of bonds being purchased to close the short.\n @param _sharePrice The current share price.\n @param _maturityTime The maturity time of the short position.\n @return bondReservesDelta The bonds added to the reserves.\n @return shareProceeds The proceeds in shares of selling the bonds.\n @return shareReservesDelta The shares removed from the reserves.\n @return shareAdjustmentDelta The change in the share adjustment.\n @return totalGovernanceFee The governance fee in shares."},"implemented":true,"kind":"function","modifiers":[],"name":"_calculateCloseLong","nameLocation":"18608:19:61","parameters":{"id":9517,"nodeType":"ParameterList","parameters":[{"constant":false,"id":9512,"mutability":"mutable","name":"_bondAmount","nameLocation":"18645:11:61","nodeType":"VariableDeclaration","scope":9636,"src":"18637:19:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9511,"name":"uint256","nodeType":"ElementaryTypeName","src":"18637:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9514,"mutability":"mutable","name":"_sharePrice","nameLocation":"18674:11:61","nodeType":"VariableDeclaration","scope":9636,"src":"18666:19:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9513,"name":"uint256","nodeType":"ElementaryTypeName","src":"18666:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9516,"mutability":"mutable","name":"_maturityTime","nameLocation":"18703:13:61","nodeType":"VariableDeclaration","scope":9636,"src":"18695:21:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9515,"name":"uint256","nodeType":"ElementaryTypeName","src":"18695:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"18627:95:61"},"returnParameters":{"id":9528,"nodeType":"ParameterList","parameters":[{"constant":false,"id":9519,"mutability":"mutable","name":"bondReservesDelta","nameLocation":"18791:17:61","nodeType":"VariableDeclaration","scope":9636,"src":"18783:25:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9518,"name":"uint256","nodeType":"ElementaryTypeName","src":"18783:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9521,"mutability":"mutable","name":"shareProceeds","nameLocation":"18830:13:61","nodeType":"VariableDeclaration","scope":9636,"src":"18822:21:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9520,"name":"uint256","nodeType":"ElementaryTypeName","src":"18822:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9523,"mutability":"mutable","name":"shareReservesDelta","nameLocation":"18865:18:61","nodeType":"VariableDeclaration","scope":9636,"src":"18857:26:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9522,"name":"uint256","nodeType":"ElementaryTypeName","src":"18857:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":9525,"mutability":"mutable","name":"shareAdjustmentDelta","nameLocation":"18904:20:61","nodeType":"VariableDeclaration","scope":9636,"src":"18897:27:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":9524,"name":"int256","nodeType":"ElementaryTypeName","src":"18897:6:61","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":9527,"mutability":"mutable","name":"totalGovernanceFee","nameLocation":"18946:18:61","nodeType":"VariableDeclaration","scope":9636,"src":"18938:26:61","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":9526,"name":"uint256","nodeType":"ElementaryTypeName","src":"18938:7:61","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"18769:205:61"},"scope":9637,"stateMutability":"view","virtual":false,"visibility":"internal"}],"abstract":true,"baseContracts":[{"baseName":{"id":8857,"name":"HyperdriveLP","nameLocations":["777:12:61"],"nodeType":"IdentifierPath","referencedDeclaration":8841,"src":"777:12:61"},"id":8858,"nodeType":"InheritanceSpecifier","src":"777:12:61"}],"canonicalName":"HyperdriveLong","contractDependencies":[],"contractKind":"contract","documentation":{"id":8856,"nodeType":"StructuredDocumentation","src":"415:326:61","text":"@author DELV\n @title HyperdriveLong\n @notice Implements the long accounting for Hyperdrive.\n @custom:disclaimer The language used in this code is for coding convenience\n                    only, and is not intended to, and does not, have any\n                    particular legal or regulatory significance."},"fullyImplemented":false,"linearizedBaseContracts":[9637,8841,10097,7580,11193,65499],"name":"HyperdriveLong","nameLocation":"759:14:61","scope":9638,"usedErrors":[5498,5502,5512,5514]}],"license":"Apache-2.0"},"id":61} as const;
